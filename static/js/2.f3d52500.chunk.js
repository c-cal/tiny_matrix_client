(this.webpackJsonptiny_matrix_client=this.webpackJsonptiny_matrix_client||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(154)},function(e,t,n){(function(t,n,r){var i;i=function(){var e,o,s;return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){var n=t[s][1][e];return i(n||e)}),l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,n,r){"use strict";var o;try{throw new Error}catch(i){o=i}var s=e("./schedule"),a=e("./queue"),u=e("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=s}function l(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function d(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function f(e){this._normalQueue._pushOne(e),this._queueTick()}function p(e){for(;e.length()>0;)h(e)}function h(e){var t=e.shift();if("function"!==typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}c.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},c.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!==typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(i){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.hasDevTools?(c.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule((function(){setTimeout((function(){e.call(t,n)}),100)}))},c.prototype.invoke=function(e,t,n){this._trampolineEnabled?d.call(this,e,t,n):this._schedule((function(){e.call(t,n)}))},c.prototype.settlePromises=function(e){this._trampolineEnabled?f.call(this,e):this._schedule((function(){e._settlePromises()}))}):(c.prototype.invokeLater=l,c.prototype.invoke=d,c.prototype.settlePromises=f),c.prototype._drainQueues=function(){p(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,p(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=o},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new e(t);l._propagateFrom(this,1);var d=this._target();if(l._setBoundTo(c),c instanceof e){var f={promiseRejectionQueued:!1,promise:l,target:d,bindingPromise:c};d._then(t,s,void 0,l,f),c._then(a,u,void 0,l,f),l._setOnCancel(c)}else l._resolveCallback(d);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!==typeof Promise&&(r=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=r)}catch(i){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){var n=e("./util"),r=n.canEvaluate;function i(e){return function(e,r){var i;if(null!=e&&(i=e[r]),"function"!==typeof i){var o="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(o)}return i}(e,this.pop()).apply(e,this)}function o(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}n.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"===typeof e)t=s;else if(r){var n=(void 0)(e);t=null!==n?n:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"===typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,s,a){return function(u){var c=a._boundValue();e:for(var l=0;l<e.length;++l){var d=e[l];if(d===Error||null!=d&&d.prototype instanceof Error){if(u instanceof d)return i(s).call(c,u)}else if("function"===typeof d){var f=i(d).call(c,u);if(f===o)return f;if(f)return i(s).call(c,u)}else if(n.isObject(u)){for(var p=r(d),h=0;h<p.length;++h){var v=p[h];if(d[v]!=u[v])continue e}return i(s).call(c,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var e=n.length-1;if(e>=0)return n[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=function(){if(t)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=u,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},r}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){var o,s,a,u=n._getDomain,c=n._async,l=e("./errors").Warning,d=e("./util"),f=e("./es5"),p=d.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,v=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,y=null,g=null,_=!1,b=!(0==d.env("BLUEBIRD_DEBUG")),k=!(0==d.env("BLUEBIRD_WARNINGS")||!b&&!d.env("BLUEBIRD_WARNINGS")),w=!(0==d.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!d.env("BLUEBIRD_LONG_STACK_TRACES")),E=0!=d.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(k||!!d.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout((function(){e._notifyUnhandledRejection()}),1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",o,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),z("unhandledRejection",s,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return B(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=u();s="function"===typeof e?null===t?e:d.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=u();o="function"===typeof e?null===t?e:d.domainBind(t,e):void 0};var S=function(){};n.longStackTraces=function(){if(c.haveItemsQueued()&&!ee.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ee.longStackTraces&&H()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace,i=n.prototype._dereferenceTrace;ee.longStackTraces=!0,S=function(){if(c.haveItemsQueued()&&!ee.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,n.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),c.enableTrampoline(),ee.longStackTraces=!1},n.prototype._captureStackTrace=j,n.prototype._attachExtraTrace=K,n.prototype._dereferenceTrace=q,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return ee.longStackTraces&&H()};var x=function(){try{if("function"===typeof CustomEvent){var e=new CustomEvent("CustomEvent");return d.global.dispatchEvent(e),function(e,t){var n={detail:t,cancelable:!0};f.defineProperty(n,"promise",{value:t.promise}),f.defineProperty(n,"reason",{value:t.reason});var r=new CustomEvent(e.toLowerCase(),n);return!d.global.dispatchEvent(r)}}return"function"===typeof Event?(e=new Event("CustomEvent"),d.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,f.defineProperty(n,"promise",{value:t.promise}),f.defineProperty(n,"reason",{value:t.reason}),!d.global.dispatchEvent(n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),d.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!d.global.dispatchEvent(n)})}catch(i){}return function(){return!1}}(),T=d.isNode?function(){return t.emit.apply(t,arguments)}:d.global?function(e){var t="on"+e.toLowerCase(),n=d.global[t];return!!n&&(n.apply(d.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function R(e,t){return{promise:t}}var I={promiseCreated:R,promiseFulfilled:R,promiseRejected:R,promiseResolved:R,promiseCancelled:R,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:R},C=function(e){var t=!1;try{t=T.apply(null,arguments)}catch(i){c.throwLater(i),t=!0}var n=!1;try{n=x(e,I[e].apply(null,arguments))}catch(i){c.throwLater(i),n=!0}return n||t};function O(){return!1}function A(e,t,n){var r=this;try{e(t,n,(function(e){if("function"!==typeof e)throw new TypeError("onCancel must be a function, got: "+d.toString(e));r._attachCancellationCallback(e)}))}catch(i){return i}}function D(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?d.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function P(){return this._onCancelField}function M(e){this._onCancelField=e}function U(){this._cancellationParent=void 0,this._onCancelField=void 0}function N(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&S()),"warnings"in e){var t=e.warnings;ee.warnings=!!t,E=ee.warnings,d.isObject(t)&&"wForgottenReturn"in t&&(E=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ee.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=U,n.prototype._propagateFrom=N,n.prototype._onCancel=P,n.prototype._setOnCancel=M,n.prototype._attachCancellationCallback=D,n.prototype._execute=A,L=N,ee.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!ee.monitoring?(ee.monitoring=!0,n.prototype._fireEvent=C):!e.monitoring&&ee.monitoring&&(ee.monitoring=!1,n.prototype._fireEvent=O)),n},n.prototype._fireEvent=O,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(i){return i}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var L=function(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function F(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function j(){this._trace=new J(this._peekContext())}function K(e,t){if(p(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=G(e);d.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),d.notEnumerableProp(e,"__stackCleaned__",!0)}}}function q(){this._trace=void 0}function B(e,t,r){if(ee.warnings){var i,o=new l(e);if(t)r._attachExtraTrace(o);else if(ee.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=G(o);o.stack=s.message+"\n"+s.stack.join("\n")}C("warning",o)||$(o,"",!0)}}function V(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||y.test(r),o=i&&Y(r);i&&!o&&(_&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function G(e){var t=e.stack,n=e.toString();return t="string"===typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||y.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:V(t)}}function $(e,t,n){if("undefined"!==typeof console){var r;if(d.isObject(e)){var i=e.stack;r=t+g(i,e)}else r=t+String(e);"function"===typeof a?a(r,n):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(r)}}function z(e,t,n,r){var o=!1;try{"function"===typeof t&&(o=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(i){c.throwLater(i)}"unhandledRejection"===e?C(e,n,r)||o||$(n,"Unhandled rejection "):C(e,r)}function W(e){var t;if("function"===typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"===typeof e.toString?e.toString():d.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function H(){return"function"===typeof Z}var Y=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function X(e){var t=e.match(Q);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function J(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Z(this,J),t>32&&this.uncycle()}d.inherits(J,Error),r.CapturedTrace=J,J.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var a=r>0?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=r-2;c>=0;--c)t[c]._length=u,u++;return}}}},J.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=G(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(V(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0;--a){var u=r[a];if(t[i]!==u)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),d.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),d.notEnumerableProp(e,"__stackCleaned__",!0)}};var Z=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"===typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():W(t)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6,y=e,g=t;var n=Error.captureStackTrace;return Y=function(e){return h.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,o=new Error;if("string"===typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return y=/@/,g=t,_=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(i){r="stack"in i}return!("stack"in o)&&r&&"number"===typeof Error.stackTraceLimit?(y=e,g=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(i){e.stack=i.stack}Error.stackTraceLimit-=6}):(g=function(e,t){return"string"===typeof e?e:"object"!==typeof t&&"function"!==typeof t||void 0===t.name||void 0===t.message?W(t):t.toString()},null)}();"undefined"!==typeof console&&"undefined"!==typeof console.warn&&(a=function(e){console.warn(e)},d.isNode&&t.stderr.isTTY?a=function(e,t){var n=t?"\x1b[33m":"\x1b[31m";console.warn(n+e+"\x1b[0m\n")}:d.isNode||"string"!==typeof(new Error).stack||(a=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ee={warnings:k,longStackTraces:!1,cancellation:!1,monitoring:!1};return w&&n.longStackTraces(),{longStackTraces:function(){return ee.longStackTraces},warnings:function(){return ee.warnings},cancellation:function(){return ee.cancellation},monitoring:function(){return ee.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return F},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&E){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=V(a),c=u.length-1;c>=0;--c){var l=u[c];if(!v.test(l)){var d=l.match(m);d&&(o="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(u.length>0){var f=u[0];for(c=0;c<a.length;++c)if(a[c]===f){c>0&&(s="\n"+a[c-1]);break}}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(p,!0,t)}},setBounds:function(e,t){if(H()){for(var n,r,i=(e.stack||"").split("\n"),o=(t.stack||"").split("\n"),s=-1,a=-1,u=0;u<i.length;++u)if(c=X(i[u])){n=c.fileName,s=c.line;break}for(u=0;u<o.length;++u){var c;if(c=X(o[u])){r=c.fileName,a=c.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(Y=function(e){if(h.test(e))return!0;var t=X(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:B,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),B(n)},CapturedTrace:J,fireDomEvent:x,fireGlobalEvent:T}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce,r=e.all;function i(){return r(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,r){return n(e,r,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}}},{}],12:[function(e,t,n){"use strict";var r,o,s=e("./es5"),a=s.freeze,u=e("./util"),c=u.inherits,l=u.notEnumerableProp;function d(e,t){function n(r){if(!(this instanceof n))return new n(r);l(this,"message","string"===typeof r?r:t),l(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var f=d("Warning","warning"),p=d("CancellationError","cancellation error"),h=d("TimeoutError","timeout error"),v=d("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(i){r=d("TypeError","type error"),o=d("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<m.length;++y)"function"===typeof Array.prototype[m[y]]&&(v.prototype[m[y]]=Array.prototype[m[y]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var g=0;function _(e){if(!(this instanceof _))return new _(e);l(this,"name","OperationalError"),l(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(l(this,"message",e.message),l(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}v.prototype.toString=function(){var e=Array(4*g+1).join(" "),t="\n"+e+"AggregateError of:\n";g++,e=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return g--,t},c(_,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:p,TimeoutError:h,OperationalError:_,RejectionError:_,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,s={}.toString,a={}.constructor.prototype,u=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===s.call(e)}catch(i){return!1}},keys:u,names:u,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(i){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.CancellationError,s=i.errorObj,a=e("./catch_filter")(r);function u(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function c(e){this.finallyHandler=e}function l(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function d(){return p.call(this,this.promise._target()._settledValue())}function f(e){if(!l(this,e))return s.e=e,s}function p(e){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),e);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var p=n(u,i);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new o("late cancellation observer");return i._attachExtraTrace(h),s.e=h,s}p.isPending()&&p._attachCancellationCallback(new c(this))}return p._then(d,f,void 0,this,void 0)}}}return i.isRejected()?(l(this),s.e=e,s):(l(this),e)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!==typeof e?this.then():this._then(n,r,void 0,new u(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,p,p)},t.prototype.tap=function(e){return this._passThrough(e,1,p)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,p);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!i.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[s++]=u}o.length=s;var c=arguments[r];return this._passThrough(a(o,c,this),1,void 0,p)},u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./errors").TypeError,u=e("./util"),c=u.errorObj,l=u.tryCatch,d=[];function f(e,n,i,o){if(s.cancellation()){var a=new t(r),u=this._finallyPromise=new t(r);this._promise=a.lastly((function(){return u})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new t(r))._captureStackTrace();this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"===typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(f,o),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if("undefined"!==typeof this._generator.return)this._promise._pushContext(),e=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},f.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=l(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},f.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=l(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(e){var n=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=l(n[o])(e);if(r._popContext(),s===c){r._pushContext();var a=t.reject(c.e);return r._popContext(),a}var u=i(s,r);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!==typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=f,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!==typeof e)throw new a("expecting a function but got "+u.classString(e));d.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!==typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new f(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"===typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=t._getDomain,u=e("./util"),c=u.tryCatch,l=u.errorObj,d=t._async;function f(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:u.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function p(e,n,i,o){if("function"!==typeof n)return r("expecting a function but got "+u.classString(n));var s=0;if(void 0!==i){if("object"!==typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!==typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));s=i.concurrency}return new f(e,n,s="number"===typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}u.inherits(f,n),f.prototype._asyncInit=function(){this._init$(void 0,-2)},f.prototype._init=function(){},f.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var d=this._promise,f=this._callback,p=d._boundValue();d._pushContext();var h=c(f).call(p,e,n,o),v=d._popContext();if(s.checkForgottenReturns(h,v,null!==a?"Promise.filter":"Promise.map",d),h===l)return this._reject(h.e),!0;var m=i(h,this._promise);if(m instanceof t){var y=(m=m._target())._bitField;if(0===(50397184&y))return u>=1&&this._inFlight++,r[n]=m,m._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(m._reason()),!0):(this._cancel(),!0);h=m._value()}r[n]=h}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},f.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},f.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},f.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return p(this,e,t,null)},t.map=function(e,t,n,r){return p(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!==typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!==typeof e)return i("expecting a function but got "+s.classString(e));var r,u=new t(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=s.isArray(c)?a(e).apply(l,c):a(e).call(l,c)}else r=a(e)();var d=u._popContext();return o.checkForgottenReturns(r,d,"Promise.try",u),u._resolveFromSyncValue(r),u},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var r=e("./util"),i=r.maybeWrapAsError,o=e("./errors").OperationalError,s=e("./es5"),a=/^(?:name|message|stack|cause)$/;function u(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),i=0;i<n.length;++i){var u=n[i];a.test(u)||(t[u]=e[u])}return t}return r.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(n,r){if(null!==e){if(n){var o=u(i(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=t._async,i=n.tryCatch,o=n.errorObj;function s(e,t){if(!n.isArray(e))return a.call(this,e,t);var s=i(t).apply(this._boundValue(),[null].concat(e));s===o&&r.throwLater(s.e)}function a(e,t){var n=this._boundValue(),s=void 0===e?i(t).call(n,null):i(t).call(n,null,e);s===o&&r.throwLater(s.e)}function u(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=i(t).call(this._boundValue(),e);s===o&&r.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=a;void 0!==t&&Object(t).spread&&(n=s),this._then(n,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){var r=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new C.PromiseInspection(this._target())},o=function(e){return C.reject(new h(e))};function s(){}var a,u={},c=e("./util");a=c.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},c.notEnumerableProp(C,"_getDomain",a);var l=e("./es5"),d=e("./async"),f=new d;l.defineProperty(C,"_async",{value:f});var p=e("./errors"),h=C.TypeError=p.TypeError;C.RangeError=p.RangeError;var v=C.CancellationError=p.CancellationError;C.TimeoutError=p.TimeoutError,C.OperationalError=p.OperationalError,C.RejectionError=p.OperationalError,C.AggregateError=p.AggregateError;var m=function(){},y={},g={},_=e("./thenables")(C,m),b=e("./promise_array")(C,m,_,o,s),k=e("./context")(C),w=k.create,E=e("./debuggability")(C,k),S=(E.CapturedTrace,e("./finally")(C,_,g)),x=e("./catch_filter")(g),T=e("./nodeback"),R=c.errorObj,I=c.tryCatch;function C(e){e!==m&&function(e,t){if(null==e||e.constructor!==C)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof t)throw new h("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function O(e){this.promise._resolveCallback(e)}function A(e){this.promise._rejectCallback(e,!1)}function D(e){var t=new C(m);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return C.prototype.toString=function(){return"[object Promise]"},C.prototype.caught=C.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!c.isObject(s))return o("Catch statement predicate: expecting an object but got "+c.classString(s));r[i++]=s}if(r.length=i,"function"!==typeof(e=arguments[n]))throw new h("The last argument to .catch() must be a function, got "+c.toString(e));return this.then(void 0,x(r,e,this))}return this.then(void 0,e)},C.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},C.prototype.then=function(e,t){if(E.warnings()&&arguments.length>0&&"function"!==typeof e&&"function"!==typeof t){var n=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(n+=", "+c.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},C.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},C.prototype.spread=function(e){return"function"!==typeof e?o("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,y,void 0)},C.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},C.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},C.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},C.getNewLibraryCopy=n.exports,C.is=function(e){return e instanceof C},C.fromNode=C.fromCallback=function(e){var t=new C(m);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=I(e)(T(t,n));return r===R&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},C.all=function(e){return new b(e).promise()},C.cast=function(e){var t=_(e);return t instanceof C||((t=new C(m))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},C.resolve=C.fulfilled=C.cast,C.reject=C.rejected=function(e){var t=new C(m);return t._captureStackTrace(),t._rejectCallback(e,!0),t},C.setScheduler=function(e){if("function"!==typeof e)throw new h("expecting a function but got "+c.classString(e));return f.setScheduler(e)},C.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new C(m),u=this._target(),l=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var d=a();if(0!==(50397184&l)){var p,h,y=u._settlePromiseCtx;0!==(33554432&l)?(h=u._rejectionHandler0,p=e):0!==(16777216&l)?(h=u._fulfillmentHandler0,p=t,u._unsetRejectionIsUnhandled()):(y=u._settlePromiseLateCancellationObserver,h=new v("late cancellation observer"),u._attachExtraTrace(h),p=t),f.invoke(y,u,{handler:null===d?p:"function"===typeof p&&c.domainBind(d,p),promise:s,receiver:r,value:h})}else u._addCallbacks(e,t,s,r,d);return s},C.prototype._length=function(){return 65535&this._bitField},C.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},C.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},C.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},C.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},C.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},C.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},C.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},C.prototype._isFinal=function(){return(4194304&this._bitField)>0},C.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},C.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},C.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},C.prototype._setAsyncGuaranteed=function(){f.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},C.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},C.prototype._promiseAt=function(e){return this[4*e-4+2]},C.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},C.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},C.prototype._boundValue=function(){},C.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(t,n,r,i,null)},C.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=u),this._addCallbacks(n,r,i,o,null)},C.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"===typeof e&&(this._fulfillmentHandler0=null===i?e:c.domainBind(i,e)),"function"===typeof t&&(this._rejectionHandler0=null===i?t:c.domainBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"===typeof e&&(this[s+0]=null===i?e:c.domainBind(i,e)),"function"===typeof t&&(this[s+1]=null===i?t:c.domainBind(i,t))}return this._setLength(o+1),o},C.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},C.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(r(),!1);var n=_(e,this);if(!(n instanceof C))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0===(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&o))this._fulfill(i._value());else if(0!==(16777216&o))this._reject(i._reason());else{var u=new v("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(r())}},C.prototype._rejectCallback=function(e,t,n){var r=c.ensureErrorObject(e),i=r===e;if(!i&&!n&&E.warnings()){var o="a promise was rejected with a non-error: "+c.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},C.prototype._resolveFromExecutor=function(e){if(e!==m){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,n)}));n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},C.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0===(65536&i)){var o;r._pushContext(),t===y?n&&"number"===typeof n.length?o=I(e).apply(this._boundValue(),n):(o=R).e=new h("cannot .spread() a non-array: "+c.classString(n)):o=I(e).call(t,n);var s=r._popContext();0===(65536&(i=r._bitField))&&(o===g?r._reject(n):o===R?r._rejectCallback(o.e,!1):(E.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},C.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},C.prototype._followee=function(){return this._rejectionHandler0},C.prototype._setFollowee=function(e){this._rejectionHandler0=e},C.prototype._settlePromise=function(e,t,n,r){var o=e instanceof C,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof S&&n.isFinallyHandler()?(n.cancelPromise=e,I(t).call(n,r)===R&&e._reject(R.e)):t===i?e._fulfill(i.call(n)):n instanceof s?n._promiseCancelled(e):o||e instanceof b?e._cancel():n.cancel()):"function"===typeof t?o?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof s?n._isResolved()||(0!==(33554432&a)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(u&&e._setAsyncGuaranteed(),0!==(33554432&a)?e._fulfill(r):e._reject(r))},C.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"===typeof t?n instanceof C?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof C&&n._reject(i)},C.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},C.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},C.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},C.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():f.settlePromises(this),this._dereferenceTrace())}},C.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return f.fatalError(e,c.isNode);(65535&t)>0?f.settlePromises(this):this._ensurePossibleRejectionHandled()}},C.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},C.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},C.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},C.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!==typeof Symbol&&Symbol.toStringTag&&l.defineProperty(C.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),C.defer=C.pending=function(){return E.deprecated("Promise.defer","new Promise"),{promise:new C(m),resolve:O,reject:A}},c.notEnumerableProp(C,"_makeSelfResolutionError",r),e("./method")(C,m,_,o,E),e("./bind")(C,m,_,E),e("./cancel")(C,b,o,E),e("./direct_resolve")(C),e("./synchronous_inspection")(C),e("./join")(C,b,_,m,f,a),C.Promise=C,C.version="3.5.5",e("./call_get.js")(C),e("./generators.js")(C,o,m,_,s,E),e("./map.js")(C,b,o,_,m,E),e("./nodeify.js")(C),e("./promisify.js")(C,m),e("./props.js")(C,b,_,o),e("./race.js")(C,m,_,o),e("./reduce.js")(C,b,o,_,m,E),e("./settle.js")(C,b,E),e("./some.js")(C,b,o),e("./timers.js")(C,m,E),e("./using.js")(C,o,_,w,m,E),e("./any.js")(C),e("./each.js")(C,m),e("./filter.js")(C,m),c.toFastProperties(C),c.toFastProperties(C.prototype),D({a:1}),D({b:2}),D({c:3}),D(1),D((function(){})),D(void 0),D(!1),D(new C(m)),E.setBounds(d.firstLineError,c.lastLineError),C}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util");function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){var u=(a=a._target())._bitField;if(this._values=a,0===(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0===(33554432&u))return 0!==(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var u=r(e[a],i);s=u instanceof t?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var r={},o=e("./util"),s=e("./nodeback"),a=o.withAppended,u=o.maybeWrapAsError,c=o.canEvaluate,l=e("./errors").TypeError,d={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function h(e){return!f.test(e)}function v(e){try{return!0===e.__isPromisified__}catch(i){return!1}}function m(e,t,n){var r=o.getDataPropertyOrDefault(e,t+n,d);return!!r&&v(r)}function y(e,t,n,r){for(var i=o.inheritedDataKeys(e),s=[],a=0;a<i.length;++a){var u=i[a],c=e[u],d=r===p||p(u);"function"!==typeof c||v(c)||m(e,u,t)||!r(u,c,e,d)||s.push(u,c)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}var g=c?void 0:function(e,c,l,d,f,p){var h=function(){return this}(),v=e;function m(){var o=c;c===r&&(o=this);var l=new t(n);l._captureStackTrace();var d="string"===typeof v&&this!==h?this[v]:e,f=s(l,p);try{d.apply(o,a(arguments,f))}catch(i){l._rejectCallback(u(i),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"===typeof v&&(e=d),o.notEnumerableProp(m,"__isPromisified__",!0),m};function _(e,t,n,i,s){for(var a=new RegExp(t.replace(/([$])/,"\\$")+"$"),u=y(e,t,a,n),c=0,l=u.length;c<l;c+=2){var d=u[c],f=u[c+1],p=d+t;if(i===g)e[p]=g(d,r,d,f,t,s);else{var h=i(f,(function(){return g(d,r,d,f,t,s)}));o.notEnumerableProp(h,"__isPromisified__",!0),e[p]=h}}return o.toFastProperties(e),e}t.promisify=function(e,t){if("function"!==typeof e)throw new l("expecting a function but got "+o.classString(e));if(v(e))return e;var n=function(e,t,n){return g(e,t,void 0,e,null,n)}(e,void 0===(t=Object(t)).context?r:t.context,!!t.multiArgs);return o.copyDescriptors(e,n,h),n},t.promisifyAll=function(e,t){if("function"!==typeof e&&"object"!==typeof e)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!==typeof r&&(r="Async");var i=t.filter;"function"!==typeof i&&(i=p);var s=t.promisifier;if("function"!==typeof s&&(s=g),!o.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=o.inheritedDataKeys(e),u=0;u<a.length;++u){var c=e[a[u]];"constructor"!==a[u]&&o.isClass(c)&&(_(c.prototype,r,i,s,n),_(c,r,i,s,n))}return _(e,r,i,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o,s=e("./util"),a=s.isObject,u=e("./es5");"function"===typeof Map&&(o=Map);var c=function(){var e=0,t=0;function n(n,r){this[e]=n,this[e+t]=r,e++}return function(r){t=r.size,e=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=c(e),n=!0;else{var r=u.keys(e),i=r.length;t=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];t[s]=e[a],t[s+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function d(e){var n,o=r(e);return a(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new o,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],s=e[r];t.set(i,s)}return t}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return d(this)},t.props=function(e){return d(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util");function s(e,a){var u,c=r(e);if(c instanceof t)return(u=c).then((function(e){return s(e,u)}));if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var l=new t(n);void 0!==a&&l._propagateFrom(a,3);for(var d=l._fulfill,f=l._reject,p=0,h=e.length;p<h;++p){var v=e[p];(void 0!==v||p in e)&&t.cast(v)._then(d,f,void 0,l,null)}return l}t.race=function(e){return s(e,void 0)},t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=t._getDomain,u=e("./util"),c=u.tryCatch;function l(e,n,r,i){this.constructor$(e);var s=a();this._fn=null===s?n:u.domainBind(s,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function d(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function f(e,t,n,i){return"function"!==typeof t?r("expecting a function but got "+u.classString(t)):new l(e,t,n,i).promise()}function p(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}u.inherits(l,n),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(d,d,void 0,n,this)},t.prototype.reduce=function(e,t){return f(this,e,t,null)},t.reduce=function(e,t,n,r){return f(e,t,n,r)}}},{"./util":36}],29:[function(e,i,o){"use strict";var s,a=e("./util"),u=a.getNativePromise();if(a.isNode&&"undefined"===typeof MutationObserver){var c=n.setImmediate,l=t.nextTick;s=a.isRecentNode?function(e){c.call(n,e)}:function(e){l.call(t,e)}}else if("function"===typeof u&&"function"===typeof u.resolve){var d=u.resolve();s=function(e){d.then(e)}}else s="undefined"===typeof MutationObserver||"undefined"!==typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!==typeof r?function(e){r(e)}:"undefined"!==typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");return new MutationObserver((function(){e.classList.toggle("foo"),n=!1})).observe(r,t),function(i){var o=new MutationObserver((function(){o.disconnect(),i()}));o.observe(e,t),n||(n=!0,r.classList.toggle("foo"))}}();i.exports=s},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=e("./errors").RangeError,s=e("./errors").AggregateError,a=i.isArray,u={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./util"),o=r.errorObj,s=r.isObject,a={}.hasOwnProperty;return function(e,u){if(s(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(i){return o.e=i,o}}(e);if(c===o){u&&u._pushContext();var l=t.reject(c.e);return u&&u._popContext(),l}if("function"===typeof c)return function(e){try{return a.call(e,"_promise0")}catch(i){return!1}}(e)?(l=new t(n),e._then(l._fulfill,l._reject,void 0,l,null),l):function(e,i,s){var a=new t(n),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=r.tryCatch(i).call(e,(function(e){a&&(a._resolveCallback(e),a=null)}),(function(e){a&&(a._rejectCallback(e,!1,!0),a=null)}));return a&&c===o&&(a._rejectCallback(c.e,!0,!0),a=null),u}(e,c,u)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,i){var o,u;return void 0!==i?(o=t.resolve(i)._then(a,null,null,e,void 0),r.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(n),u=setTimeout((function(){o._fulfill()}),+e),r.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(e){return clearTimeout(this.handle),e}function l(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return u(e,this)},t.prototype.timeout=function(e,t){var n,a;e=+e;var u=new s(setTimeout((function(){n.isPending()&&function(e,t,n){var r;r="string"!==typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,a)}),e));return r.cancellation()?(a=this.then(),(n=a._then(c,l,void 0,u,void 0))._setOnCancel(u)):n=this._then(c,l,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,s,a){var u=e("./util"),c=e("./errors").TypeError,l=e("./util").inherits,d=u.errorObj,f=u.tryCatch,p={};function h(e){setTimeout((function(){throw e}),0)}function v(e,n){var o=0,a=e.length,u=new t(s);return function s(){if(o>=a)return u._fulfill();var c=function(e){var t=r(e);return t!==e&&"function"===typeof e._isDisposable&&"function"===typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),e.promise)}catch(i){return h(i)}if(c instanceof t)return c._then(s,h,null,null,null)}s()}(),u}function m(e,t,n){this._data=e,this._promise=t,this._context=n}function y(e,t,n){this.constructor$(e,t,n)}function g(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function _(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():p},m.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==p?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},m.isDisposer=function(e){return null!=e&&"function"===typeof e.resource&&"function"===typeof e.tryDispose},l(y,m),y.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},_.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!==typeof o)return n("expecting a function but got "+u.classString(o));var s=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,s=!1):(i=arguments,e--);for(var c=new _(e),l=0;l<e;++l){var p=i[l];if(m.isDisposer(p)){var h=p;(p=p.promise())._setDisposable(h)}else{var y=r(p);y instanceof t&&(p=y._then(g,null,null,{resources:c,index:l},void 0))}c[l]=p}var b=new Array(c.length);for(l=0;l<b.length;++l)b[l]=t.resolve(c[l]).reflect();var k=t.all(b).then((function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return d.e=n.error(),d;if(!n.isFulfilled())return void k.cancel();e[t]=n.value()}w._pushContext(),o=f(o);var r=s?o.apply(void 0,e):o(e),i=w._popContext();return a.checkForgottenReturns(r,i,"Promise.using",w),r})),w=k.lastly((function(){var e=new t.PromiseInspection(k);return v(c,e)}));return c.promise=w,w._setOnCancel(c),w},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"===typeof e)return new y(e,this,o());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,r,o){"use strict";var s=e("./es5"),a="undefined"==typeof navigator,u={e:{}},c,l="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n?n:void 0!==this?this:null;function d(){try{var e=c;return c=null,e.apply(this,arguments)}catch(i){return u.e=i,u}}function f(e){return c=e,d}var p=function(e,t){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}return r.prototype=t.prototype,e.prototype=new r,e.prototype};function h(e){return null==e||!0===e||!1===e||"string"===typeof e||"number"===typeof e}function v(e){return"function"===typeof e||"object"===typeof e&&null!==e}function m(e){return h(e)?new Error(I(e)):e}function y(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function g(e,t,n){if(!s.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function _(e,t,n){if(h(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(e,t,r),e}function b(e){throw e}var k=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(s.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],o=Object.create(null);null!=e&&!t(e);){var a;try{a=n(e)}catch(i){return r}for(var u=0;u<a.length;++u){var c=a[u];if(!o[c]){o[c]=!0;var l=Object.getOwnPropertyDescriptor(e,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}e=s.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<e.length;++s)if(r.call(e[s],o))continue e;i.push(o)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function E(e){try{if("function"===typeof e){var t=s.names(e.prototype),n=s.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=w.test(e+"")&&s.names(e).length>0;if(n||r||o)return!0}return!1}catch(i){return!1}}function S(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.foo}return r(),r(),e}var x=/^[a-z$_][a-z$_0-9]*$/i;function T(e){return x.test(e)}function R(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function I(e){try{return e+""}catch(i){return"[no string representation]"}}function C(e){return e instanceof Error||null!==e&&"object"===typeof e&&"string"===typeof e.message&&"string"===typeof e.name}function O(e){try{_(e,"isOperational",!0)}catch(t){}}function A(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function D(e){return C(e)&&s.propertyIsWritable(e,"stack")}var P="stack"in new Error?function(e){return D(e)?e:new Error(I(e))}:function(e){if(D(e))return e;try{throw new Error(I(e))}catch(t){return t}};function M(e){return{}.toString.call(e)}function U(e,t,n){for(var r=s.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{s.defineProperty(t,o,s.getDescriptor(e,o))}catch(a){}}}var N=function(e){return s.isArray(e)?e:null};if("undefined"!==typeof Symbol&&Symbol.iterator){var L="function"===typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};N=function(e){return s.isArray(e)?e:null!=e&&"function"===typeof e[Symbol.iterator]?L(e):null}}var F="undefined"!==typeof t&&"[object process]"===M(t).toLowerCase(),j="undefined"!==typeof t&&!0;function K(e){return j?Object({NODE_ENV:"production",PUBLIC_URL:"/tiny_matrix_client"})[e]:void 0}function q(){if("function"===typeof Promise)try{var e=new Promise((function(){}));if("[object Promise]"==={}.toString.call(e))return Promise}catch(i){}}function B(e,t){return e.bind(t)}var V={isClass:E,isIdentifier:T,inheritedDataKeys:k,getDataPropertyOrDefault:g,thrower:b,isArray:s.isArray,asArray:N,notEnumerableProp:_,isPrimitive:h,isObject:v,isError:C,canEvaluate:a,errorObj:u,tryCatch:f,inherits:p,withAppended:y,maybeWrapAsError:m,toFastProperties:S,filledRange:R,toString:I,canAttachTrace:D,ensureErrorObject:P,originatesFromRejection:A,markAsOriginatingFromRejection:O,classString:M,copyDescriptors:U,hasDevTools:"undefined"!==typeof chrome&&chrome&&"function"===typeof chrome.loadTimes,isNode:F,hasEnvVariables:j,env:K,global:l,getNativePromise:q,domainBind:B};V.isRecentNode=V.isNode&&function(){var e;return t.versions&&t.versions.node?e=t.versions.node.split(".").map(Number):t.version&&(e=t.version.split(".").map(Number)),0===e[0]&&e[1]>10||e[0]>0}(),V.isNode&&V.toFastProperties(t);try{throw new Error}catch(i){V.lastLineError=i}r.exports=V},{"./es5":13}]},{},[4])(4)},e.exports=i(),"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(107),n(6),n(163).setImmediate)},function(e,t,n){"use strict";var r=a(n(41)),i=a(n(32)),o=a(n(21)),s=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var u=n(184);e.exports.encodeParams=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.substring(1)},e.exports.encodeUri=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(n,encodeURIComponent(t[n])));return e},e.exports.map=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t(e[r]);return n},e.exports.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n},e.exports.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},e.exports.values=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},e.exports.forEach=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},e.exports.findElement=function(e,t,n){var r=void 0;if(n){for(r=e.length-1;r>=0;r--)if(t(e[r],r,e))return e[r]}else for(r=0;r<e.length;r++)if(t(e[r],r,e))return e[r]},e.exports.removeElement=function(e,t,n){var r=void 0,i=void 0;if(n){for(r=e.length-1;r>=0;r--)if(t(e[r],r,e))return i=e[r],e.splice(r,1),i}else for(r=0;r<e.length;r++)if(t(e[r],r,e))return i=e[r],e.splice(r,1),i;return!1},e.exports.isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)},e.exports.isArray=function(e){return Array.isArray?Array.isArray(e):Boolean(e&&e.constructor===Array)},e.exports.checkObjectHasKeys=function(e,t){for(var n=0;n<t.length;n++)if(!e.hasOwnProperty(t[n]))throw new Error("Missing required key: "+t[n])},e.exports.checkObjectHasNoAdditionalKeys=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&-1===t.indexOf(n))throw new Error("Unknown key: "+n)},e.exports.deepCopy=function(e){return JSON.parse((0,o.default)(e))};var c=e.exports.deepCompare=function(e,t){if(e===t)return!0;if(("undefined"===typeof e?"undefined":(0,i.default)(e))!==("undefined"===typeof t?"undefined":(0,i.default)(t)))return!1;if("number"===typeof e&&isNaN(e)&&isNaN(t))return!0;if(null===e||null===t)return e===t;if(!(e instanceof Object))return!1;if(e.constructor!==t.constructor||e.prototype!==t.prototype)return!1;if(e instanceof RegExp||e instanceof Date)return e.toString()===t.toString();if(e instanceof Array){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1}else{var r=void 0;for(r in t)if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;for(r in t){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(!c(e[r],t[r]))return!1}}return!0};e.exports.extend=function(){for(var e=arguments[0]||{},t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e},e.exports.runPolyfills=function(){Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!==typeof e)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t){var s=t[o];e.call(i,s,o,t)&&r.push(s)}return r}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=void 0,r=void 0;if(null===this||void 0===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");arguments.length>1&&(n=t);var s=new Array(o);for(r=0;r<o;){var a,u;r in i&&(a=i[r],u=e.call(n,a,r,i),s[r]=u),r++}return s}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n=void 0,r=void 0;if(null===this||void 0===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<o;){var s;r in i&&(s=i[r],e.call(n,s,r,i)),r++}})},e.exports.inherits=function(e,t){"function"!=typeof r.default&&(Object.create=function(){function e(){}var t=Object.prototype.hasOwnProperty;return function(n){if("object"!=("undefined"===typeof n?"undefined":(0,i.default)(n)))throw new TypeError("Object prototype may only be an Object or null");e.prototype=n;var r=new e;if(e.prototype=null,arguments.length>1){var o=Object(arguments[1]);for(var s in o)t.call(o,s)&&(r[s]=o[s])}return r}}()),e.super_=t,e.prototype=(0,r.default)(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},e.exports.isNumber=function(e){return"number"===typeof e&&isFinite(e)},e.exports.removeHiddenChars=function(e){return u(e.normalize("NFD").replace(l,""))};var l=/[\u200B-\u200D\u0300-\u036f\uFEFF\s]/g;function d(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}e.exports.escapeRegExp=d,e.exports.globToRegexp=function(e,t){t="boolean"!==typeof t||t;var n=d(e);return n=(n=n.replace(/\\\*/g,".*")).replace(/\?/g,"."),t&&(n=n.replace(/\\\[(!|)(.*)\\]/g,(function(e,t,n,r,i){return"["+(t?"^":"")+n.replace(/\\-/,"-")+"]"}))),n},e.exports.ensureNoTrailingSlash=function(e){return e&&e.endsWith("/")?e.substr(0,e.length-1):e},e.exports.sleep=function(e,t){return new s.default((function(n){setTimeout(n,e,t)}))},e.exports.isNullOrUndefined=function(e){return null===e||void 0===e},e.exports.defer=function(){var e=void 0,t=void 0,n=new s.default((function(n,r){e=n,t=r}));return{resolve:e,reject:t,promise:n}}},function(e,t,n){"use strict";var r=n(186),i=r.getLogger("matrix");i.setLevel(r.levels.DEBUG),e.exports=i},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports={default:n(192),__esModule:!0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(11),i=n(4),o=n(23),s=n(27),a=n(30),u=function e(t,n,u){var c,l,d,f=t&e.F,p=t&e.G,h=t&e.S,v=t&e.P,m=t&e.B,y=t&e.W,g=p?i:i[n]||(i[n]={}),_=g.prototype,b=p?r:h?r[n]:(r[n]||{}).prototype;for(c in p&&(u=n),u)(l=!f&&b&&void 0!==b[c])&&a(g,c)||(d=l?b[c]:u[c],g[c]=p&&"function"!=typeof b[c]?u[c]:m&&l?o(d,r):y&&b[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&"function"==typeof d?o(Function.call,d):d,v&&((g.virtual||(g.virtual={}))[c]=d,t&e.R&&_&&!_[c]&&s(_,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){e.exports=n(161)},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(120),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"===typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var c=u.length,l=m(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(78)("wks"),i=n(61),o=n(11).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(14);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(28)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(194)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var a,u=(0,i.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){o=!0,s=c}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";var r=l(n(105)),i=l(n(8)),o=n(1),s=l(o),a=n(13),u=l(n(2)),c=l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}e.exports.EventStatus={NOT_SENT:"not_sent",ENCRYPTING:"encrypting",SENDING:"sending",QUEUED:"queued",SENT:"sent",CANCELLED:"cancelled"};var d={};function f(e){return d[e]||(d[e]=e),d[e]}e.exports.MatrixEvent=function(e){["state_key","type","sender","room_id","membership"].forEach((function(t){e[t]&&(e[t]=f(e[t]))})),["membership","avatar_url","displayname"].forEach((function(t){e.content&&e.content[t]&&(e.content[t]=f(e.content[t]))})),["rel_type"].forEach((function(t){e.content&&e.content["m.relates_to"]&&e.content["m.relates_to"][t]&&(e.content["m.relates_to"][t]=f(e.content["m.relates_to"][t]))})),this.event=e||{},this.sender=null,this.target=null,this.status=null,this.error=null,this.forwardLooking=!0,this._pushActions=null,this._replacingEvent=null,this._localRedactionEvent=null,this._isCancelled=!1,this._clearEvent={},this._senderCurve25519Key=null,this._claimedEd25519Key=null,this._forwardingCurve25519KeyChain=[],this._decryptionPromise=null,this._retryDecryption=!1},u.default.inherits(e.exports.MatrixEvent,a.EventEmitter),u.default.extend(e.exports.MatrixEvent.prototype,{getId:function(){return this.event.event_id},getSender:function(){return this.event.sender||this.event.user_id},getType:function(){return this._clearEvent.type||this.event.type},getWireType:function(){return this.event.type},getRoomId:function(){return this.event.room_id},getTs:function(){return this.event.origin_server_ts},getDate:function(){return this.event.origin_server_ts?new Date(this.event.origin_server_ts):null},getOriginalContent:function(){return this._localRedactionEvent?{}:this._clearEvent.content||this.event.content||{}},getContent:function(){return this._localRedactionEvent?{}:this._replacingEvent?this._replacingEvent.getContent()["m.new_content"]||{}:this.getOriginalContent()},getWireContent:function(){return this.event.content||{}},getPrevContent:function(){return this.getUnsigned().prev_content||this.event.prev_content||{}},getDirectionalContent:function(){return this.forwardLooking?this.getContent():this.getPrevContent()},getAge:function(){return this.getUnsigned().age||this.event.age},getLocalAge:function(){return Date.now()-this.getTs()},getStateKey:function(){return this.event.state_key},isState:function(){return void 0!==this.event.state_key},makeEncrypted:function(e,t,n,r){this._clearEvent={type:this.event.type,content:this.event.content},this.event.type=e,this.event.content=t,this._senderCurve25519Key=n,this._claimedEd25519Key=r},isBeingDecrypted:function(){return null!=this._decryptionPromise},isDecryptionFailure:function(){return this._clearEvent&&this._clearEvent.content&&"m.bad.encrypted"===this._clearEvent.content.msgtype},attemptDecryption:function(){var e=(0,o.method)((function(e){if(!this.isEncrypted())throw new Error("Attempt to decrypt event which isn't encrypted");if(this._clearEvent&&this._clearEvent.content&&"m.bad.encrypted"!==this._clearEvent.content.msgtype)throw new Error("Attempt to decrypt event which has already been encrypted");return this._decryptionPromise?(c.default.log("Event "+this.getId()+" already being decrypted; queueing a retry"),this._retryDecryption=!0,this._decryptionPromise):(this._decryptionPromise=this._decryptionLoop(e),this._decryptionPromise)}));return function(t){return e.apply(this,arguments)}}(),cancelAndResendKeyRequest:function(e,t){var n=this.getWireContent();return e.requestRoomKey({algorithm:n.algorithm,room_id:this.getRoomId(),session_id:n.session_id,sender_key:n.sender_key},this.getKeyRequestRecipients(t),!0)},getKeyRequestRecipients:function(e){var t=this.getWireContent(),n=[{userId:e,deviceId:"*"}],r=this.getSender();return r!==e&&n.push({userId:r,deviceId:t.device_id}),n},_decryptionLoop:function(){var e=(0,o.coroutine)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.resolve)(s.default.resolve());case 2:if(this._retryDecryption=!1,n=void 0,r=void 0,e.prev=6,t){e.next=11;break}n=this._badEncryptedMessage("Encryption not enabled"),e.next=14;break;case 11:return e.next=13,(0,o.resolve)(t.decryptEvent(this));case 13:n=e.sent;case 14:e.next=29;break;case 16:if(e.prev=16,e.t0=e.catch(6),"DecryptionError"===e.t0.name){e.next=23;break}return c.default.error("Error decrypting event (id="+this.getId()+"): "+(e.t0.stack||e.t0)),this._decryptionPromise=null,this._retryDecryption=!1,e.abrupt("return");case 23:if(r=e.t0,!this._retryDecryption){e.next=27;break}return c.default.log("Got error decrypting event (id="+this.getId()+": "+e.t0+"), but retrying"),e.abrupt("continue",2);case 27:c.default.warn("Error decrypting event (id="+this.getId()+"): "+e.t0.detailedString),n=this._badEncryptedMessage(e.t0.message);case 29:return this._decryptionPromise=null,this._retryDecryption=!1,this._setClearData(n),this.setPushActions(null),this.emit("Event.decrypted",this,r),e.abrupt("return");case 37:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),_badEncryptedMessage:function(e){return{clearEvent:{type:"m.room.message",content:{msgtype:"m.bad.encrypted",body:"** Unable to decrypt: "+e+" **"}}}},_setClearData:function(e){this._clearEvent=e.clearEvent,this._senderCurve25519Key=e.senderCurve25519Key||null,this._claimedEd25519Key=e.claimedEd25519Key||null,this._forwardingCurve25519KeyChain=e.forwardingCurve25519KeyChain||[]},getClearContent:function(){var e=this._clearEvent;return e&&e.content?e.content:null},isEncrypted:function(){return"m.room.encrypted"===this.event.type},getSenderKey:function(){return this._senderCurve25519Key},getKeysClaimed:function(){return{ed25519:this._claimedEd25519Key}},getClaimedEd25519Key:function(){return this._claimedEd25519Key},getForwardingCurve25519KeyChain:function(){return this._forwardingCurve25519KeyChain},getUnsigned:function(){return this.event.unsigned||{}},unmarkLocallyRedacted:function(){var e=this._localRedactionEvent;return this._localRedactionEvent=null,this.event.unsigned&&(this.event.unsigned.redacted_because=null),!!e},markLocallyRedacted:function(e){this._localRedactionEvent||(this.emit("Event.beforeRedaction",this,e),this._localRedactionEvent=e,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event)},makeRedacted:function(e){if(!e.event)throw new Error("invalid redaction_event in makeRedacted");this._localRedactionEvent=null,this.emit("Event.beforeRedaction",this,e),this._replacingEvent=null,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event;var t=void 0;for(t in this.event)this.event.hasOwnProperty(t)&&(p[t]||delete this.event[t]);var n=h[this.getType()]||{},r=this.getContent();for(t in r)r.hasOwnProperty(t)&&(n[t]||delete r[t])},isRedacted:function(){return Boolean(this.getUnsigned().redacted_because)},isRedaction:function(){return"m.room.redaction"===this.getType()},getPushActions:function(){return this._pushActions},setPushActions:function(e){this._pushActions=e},handleRemoteEcho:function(e){var t=this.getUnsigned(),n=this.getId();this.event=e,t.redacted_because&&(this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=t.redacted_because),this.setStatus(null),this.getId()!==n&&this.emit("Event.localEventIdReplaced",this)},isSending:function(){return!!this.status},setStatus:function(e){this.status=e,this.emit("Event.status",this,e)},replaceLocalEventId:function(e){this.event.event_id=e,this.emit("Event.localEventIdReplaced",this)},isRelation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this.getWireContent(),n=t&&t["m.relates_to"];return n&&n.rel_type&&n.event_id&&(e&&n.rel_type===e||!e)},getRelation:function(){return this.isRelation()?this.getWireContent()["m.relates_to"]:null},makeReplaced:function(e){this.isRedacted()&&e||this._replacingEvent!==e&&(this._replacingEvent=e,this.emit("Event.replaced",this))},getAssociatedStatus:function(){return this._replacingEvent?this._replacingEvent.status:this._localRedactionEvent?this._localRedactionEvent.status:this.status},getServerAggregatedRelation:function(e){var t=this.getUnsigned()["m.relations"];if(t)return t[e]},replacingEventId:function(){var e=this.getServerAggregatedRelation("m.replace");return e?e.event_id:this._replacingEvent?this._replacingEvent.getId():void 0},replacingEvent:function(){return this._replacingEvent},replacingEventDate:function(){var e=this.getServerAggregatedRelation("m.replace");if(e){var t=e.origin_server_ts;if((0,r.default)(t))return new Date(t)}else if(this._replacingEvent)return this._replacingEvent.getDate()},localRedactionEvent:function(){return this._localRedactionEvent},getAssociatedId:function(){var e=this.getRelation();return e?e.event_id:this.isRedaction()?this.event.redacts:void 0},hasAssocation:function(){return!!this.getAssociatedId()},updateAssociatedId:function(e){var t=this.getRelation();t?t.event_id=e:this.isRedaction()&&(this.event.redacts=e)},flagCancelled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isCancelled=e},isCancelled:function(){return this._isCancelled},toJSON:function(){var e={type:this.getType(),sender:this.getSender(),content:this.getContent(),event_id:this.getId(),origin_server_ts:this.getTs(),unsigned:this.getUnsigned(),room_id:this.getRoomId()};return this.isRedaction()&&(e.redacts=this.event.redacts),this.isEncrypted()?{decrypted:e,encrypted:this.event}:e}});var p=["event_id","type","room_id","user_id","sender","state_key","prev_state","content","unsigned","origin_server_ts"].reduce((function(e,t){return e[t]=1,e}),{}),h={"m.room.member":{membership:1},"m.room.create":{creator:1},"m.room.join_rules":{join_rule:1},"m.room.power_levels":{ban:1,events:1,events_default:1,kick:1,redact:1,state_default:1,users:1,users_default:1},"m.room.aliases":{aliases:1}}},function(e,t,n){var r=n(16),i=n(106),o=n(73),s=Object.defineProperty;t.f=n(17)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports={default:n(230),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(32),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,o.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(117)),i=s(n(41)),o=s(n(32));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){var r=n(20),i=n(47);e.exports=n(17)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(74),i=n(75);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(170)),i=s(n(176)),o="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===o(r.default)?function(e){return"undefined"===typeof e?"undefined":o(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":o(e)}},function(e,t,n){"use strict";var r=n(172)(!0);n(80)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(75);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";(function(t){var r=f(n(22)),i=n(1),o=f(i),s=f(n(67)),a=f(n(5)),u=f(n(8)),c=f(n(21)),l=function(){var e=(0,i.coroutine)(u.default.mark((function e(t,n,r,o){var s,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.deviceId,e.prev=1,e.next=4,(0,i.resolve)(v(t,n,r,s,o.getFingerprint()));case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),d.default.error("Unable to verify signature on one-time key for device "+r+":"+s+":",e.t0),e.abrupt("return",null);case 10:return a=void 0,e.prev=11,e.next=14,(0,i.resolve)(t.createOutboundSession(o.getIdentityKey(),n.key));case 14:a=e.sent,e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(11),d.default.error("Error starting olm session with device "+r+":"+s+": "+e.t1),e.abrupt("return",null);case 21:return d.default.log("Started new olm sessionid "+a+" for device "+r+":"+s),e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this,[[1,6],[11,17]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),d=f(n(3));function f(e){return e&&e.__esModule?e:{default:e}}var p=n(94),h=n(2);e.exports.OLM_ALGORITHM="m.olm.v1.curve25519-aes-sha2",e.exports.MEGOLM_ALGORITHM="m.megolm.v1.aes-sha2",e.exports.MEGOLM_BACKUP_ALGORITHM="m.megolm_backup.v1.curve25519-aes-sha2",e.exports.encryptMessageForDevice=function(){var e=(0,i.coroutine)(u.default.mark((function e(t,n,r,o,s,a,l){var f,p,v;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=a.getIdentityKey(),e.next=3,(0,i.resolve)(o.getSessionIdForDevice(f));case 3:if(null!==(p=e.sent)){e.next=6;break}return e.abrupt("return");case 6:return d.default.log("Using sessionid "+p+" for device "+s+":"+a.deviceId),v={sender:n,sender_device:r,keys:{ed25519:o.deviceEd25519Key},recipient:s,recipient_keys:{ed25519:a.getFingerprint()}},h.extend(v,l),e.next=11,(0,i.resolve)(o.encryptMessage(f,p,(0,c.default)(v)));case 11:t[f]=e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s,a){return e.apply(this,arguments)}}(),e.exports.ensureOlmSessionsForDevices=function(){var e=(0,i.coroutine)(u.default.mark((function e(t,n,r,c){var f,p,h,v,m,y,g,_,b,k,w,E,S,x,T,R,I,C,O=this;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=[],p={},h={},e.t0=u.default.keys(r);case 4:if((e.t1=e.t0()).done){e.next=19;break}if(v=e.t1.value,r.hasOwnProperty(v)){e.next=8;break}return e.abrupt("continue",4);case 8:p[v]={},m=r[v],y=u.default.mark((function e(n){var r,s,a,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m[n],s=r.deviceId,a=r.getIdentityKey(),t._sessionsInProgress[a]||(t._sessionsInProgress[a]=new o.default((function(e,n){h[a]={resolve:function(){delete t._sessionsInProgress[a],e.apply(void 0,arguments)},reject:function(){delete t._sessionsInProgress[a],n.apply(void 0,arguments)}}}))),e.next=6,(0,i.resolve)(t.getSessionIdForDevice(a,h[a]));case 6:null!==(l=e.sent)&&h[a]&&(delete t._sessionsInProgress[a],h[a].resolve(),delete h[a]),(null===l||c)&&f.push([v,s]),p[v][s]={device:r,sessionId:l};case 10:case"end":return e.stop()}}),e,O)})),g=0;case 12:if(!(g<m.length)){e.next=17;break}return e.delegateYield(y(g),"t2",14);case 14:g++,e.next=12;break;case 17:e.next=4;break;case 19:if(0!==f.length){e.next=21;break}return e.abrupt("return",p);case 21:return _="signed_curve25519",b=void 0,e.prev=23,e.next=26,(0,i.resolve)(n.claimOneTimeKeys(f,_));case 26:b=e.sent,e.next=52;break;case 29:for(e.prev=29,e.t3=e.catch(23),k=!0,w=!1,E=void 0,e.prev=34,S=(0,a.default)((0,s.default)(h));!(k=(x=S.next()).done);k=!0)x.value.resolve();e.next=42;break;case 38:e.prev=38,e.t4=e.catch(34),w=!0,E=e.t4;case 42:e.prev=42,e.prev=43,!k&&S.return&&S.return();case 45:if(e.prev=45,!w){e.next=48;break}throw E;case 48:return e.finish(45);case 49:return e.finish(42);case 50:throw d.default.log("failed to claim one-time keys",e.t3,f),e.t3;case 52:T=b.one_time_keys||{},R=[],I=function(e){if(!r.hasOwnProperty(e))return"continue";for(var n=T[e]||{},i=r[e],o=function(r){var o=i[r],s=o.deviceId,a=o.getIdentityKey();if(p[e][s].sessionId&&!c)return"continue";var u=n[s]||{},f=null;for(var v in u)0===v.indexOf(_+":")&&(f=u[v]);if(!f){var m="No one-time keys (alg="+_+") for device "+e+":"+s;return d.default.warn(m),h[a]&&h[a].resolve(),"continue"}R.push(l(t,f,e,o).then((function(t){h[a]&&h[a].resolve(t),p[e][s].sessionId=t}),(function(e){throw h[a]&&h[a].resolve(),e})))},s=0;s<i.length;s++)o(s)},e.t5=u.default.keys(r);case 56:if((e.t6=e.t5()).done){e.next=63;break}if(C=e.t6.value,"continue"!==I(C)){e.next=61;break}return e.abrupt("continue",56);case 61:e.next=56;break;case 63:return e.next=65,(0,i.resolve)(o.default.all(R));case 65:return e.abrupt("return",p);case 66:case"end":return e.stop()}}),e,this,[[23,29],[34,38,42,50],[43,,45,49]])})));return function(t,n,r,i){return e.apply(this,arguments)}}();var v=e.exports.verifySignature=function(){var e=(0,i.method)((function(e,t,n,i,o){var s="ed25519:"+i,a=((t.signatures||{})[n]||{})[s];if(!a)throw Error("No signature");var u=(0,r.default)({},t);delete u.unsigned,delete u.signatures;var c=p.stringify(u);e.verifySignature(o,c,a)}));return function(t,n,r,i,o){return e.apply(this,arguments)}}();e.exports.pkSign=function(e,n,r,i){var o=!1;if(n instanceof Uint8Array){var s=new t.Olm.PkSigning;i=s.init_with_seed(n),n=s,o=!0}var a=e.signatures||{};delete e.signatures;var u=e.unsigned;e.unsigned&&delete e.unsigned;try{var c=a[r]||{};return a[r]=c,c["ed25519:"+i]=n.sign(p.stringify(e))}finally{e.signatures=a,u&&(e.unsigned=u),o&&n.free()}},e.exports.pkVerify=function(e,n,r){var i="ed25519:"+n;if(!(e.signatures&&e.signatures[r]&&e.signatures[r][i]))throw new Error("No signature");var o=e.signatures[r][i],s=new t.Olm.Utility,a=e.signatures;delete e.signatures;var u=e.unsigned;e.unsigned&&delete e.unsigned;try{s.ed25519_verify(n,p.stringify(e),o)}finally{e.signatures=a,u&&(e.unsigned=u),s.free()}}}).call(this,n(6))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){e.exports={default:n(165),__esModule:!0}},function(e,t,n){var r=n(108),i=n(79);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports={}},function(e,t,n){n(174);for(var r=n(11),i=n(27),o=n(43),s=n(15)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],l=r[c],d=l&&l.prototype;d&&!d[s]&&i(d,s,c),o[c]=o.Array}},function(e,t,n){e.exports={default:n(224),__esModule:!0}},function(e,t,n){"use strict";var r=o(n(143)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(144);function a(e){this._eventTimelineSet=e,this._roomId=e.room?e.room.roomId:null,this._events=[],this._baseIndex=0,this._startState=new s(this._roomId),this._startState.paginationToken=null,this._endState=new s(this._roomId),this._endState.paginationToken=null,this._prevTimeline=null,this._nextTimeline=null,this._paginationRequests={b:null,f:null},this._name=this._roomId+":"+(new Date).toISOString()}a.BACKWARDS="b",a.FORWARDS="f",a.prototype.initialiseState=function(e){if(this._events.length>0)throw new Error("Cannot initialise state after events are added");var t=!0,n=!1,o=void 0;try{for(var s,a=(0,i.default)(e);!(t=(s=a.next()).done);t=!0){var u=s.value;(0,r.default)(u)}}catch(c){n=!0,o=c}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}this._startState.setStateEvents(e),this._endState.setStateEvents(e)},a.prototype.forkLive=function(e){var t=this.getState(e),n=new a(this._eventTimelineSet);return n._startState=t.clone(),n._endState=t,this._endState=t.clone(),n},a.prototype.fork=function(e){var t=this.getState(e),n=new a(this._eventTimelineSet);return n._startState=t.clone(),n._endState=t.clone(),n},a.prototype.getRoomId=function(){return this._roomId},a.prototype.getFilter=function(){return this._eventTimelineSet.getFilter()},a.prototype.getTimelineSet=function(){return this._eventTimelineSet},a.prototype.getBaseIndex=function(){return this._baseIndex},a.prototype.getEvents=function(){return this._events},a.prototype.getState=function(e){if(e==a.BACKWARDS)return this._startState;if(e==a.FORWARDS)return this._endState;throw new Error("Invalid direction '"+e+"'")},a.prototype.getPaginationToken=function(e){return this.getState(e).paginationToken},a.prototype.setPaginationToken=function(e,t){this.getState(t).paginationToken=e},a.prototype.getNeighbouringTimeline=function(e){if(e==a.BACKWARDS)return this._prevTimeline;if(e==a.FORWARDS)return this._nextTimeline;throw new Error("Invalid direction '"+e+"'")},a.prototype.setNeighbouringTimeline=function(e,t){if(this.getNeighbouringTimeline(t))throw new Error("timeline already has a neighbouring timeline - cannot reset neighbour (direction: "+t+")");if(t==a.BACKWARDS)this._prevTimeline=e;else{if(t!=a.FORWARDS)throw new Error("Invalid direction '"+t+"'");this._nextTimeline=e}this.setPaginationToken(null,t)},a.prototype.addEvent=function(e,t){var n=t?this._startState:this._endState,r=this.getTimelineSet();r.room&&r.room.getUnfilteredTimelineSet()===r&&(a.setEventMetadata(e,n,t),e.isState()&&(n.setStateEvents([e]),e.sender&&("m.room.member"!==e.getType()||t)||a.setEventMetadata(e,n,t)));var i=void 0;i=t?0:this._events.length,this._events.splice(i,0,e),t&&this._baseIndex++},a.setEventMetadata=function(e,t,n){e.sender=t.getSentinelMember(e.getSender()),"m.room.member"===e.getType()&&(e.target=t.getSentinelMember(e.getStateKey())),e.isState()&&n&&(e.forwardLooking=!1)},a.prototype.removeEvent=function(e){for(var t=this._events.length-1;t>=0;t--){var n=this._events[t];if(n.getId()==e)return this._events.splice(t,1),t<this._baseIndex&&this._baseIndex--,n}return null},a.prototype.toString=function(){return this._name},e.exports=a},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(16),i=n(167),o=n(79),s=n(77)("IE_PROTO"),a=function(){},u=function(){var e,t=n(72)("iframe"),r=o.length;for(t.style.display="none",n(109).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){var r=n(20).f,i=n(30),o=n(15)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports={default:n(215),__esModule:!0}},function(e,t,n){var r=n(23),i=n(125),o=n(126),s=n(16),a=n(60),u=n(85),c={},l={};(t=e.exports=function(e,t,n,d,f){var p,h,v,m,y=f?function(){return e}:u(e),g=r(n,d,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(p=a(e.length);p>_;_++)if((m=t?g(s(h=e[_])[0],h[1]):g(e[_]))===c||m===l)return m}else for(v=y.call(e);!(h=v.next()).done;)if((m=i(v,g,h.value,t))===c||m===l)return m}).BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(10)),i=p(n(12)),o=p(n(1)),s=p(n(3)),a=p(n(227)),u=p(n(92)),c=f(n(232)),l=n(87),d=f(n(121));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var h=function(){function t(e,n){(0,r.default)(this,t),this._indexedDB=e,this._dbName=n,this._backendPromise=null}return(0,i.default)(t,[{key:"_connect",value:function(){var n=this;return this._backendPromise||(this._backendPromise=new o.default((function(e,t){if(n._indexedDB){s.default.log("connecting to indexeddb "+n._dbName);var r=n._indexedDB.open(n._dbName,c.VERSION);r.onupgradeneeded=function(e){var t=e.target.result,n=e.oldVersion;c.upgradeDatabase(t,n)},r.onblocked=function(){s.default.log("can't yet open IndexedDBCryptoStore because it is open elsewhere")},r.onerror=function(e){s.default.log("Error connecting to indexeddb",e),t(e.target.error)},r.onsuccess=function(t){var r=t.target.result;s.default.log("connected to indexeddb "+n._dbName),e(new c.Backend(r))}}else t(new Error("no indexeddb support available"))})).then((function(e){return e.doTxn("readonly",[t.STORE_INBOUND_GROUP_SESSIONS],(function(t){e.getEndToEndInboundGroupSession("","",t,(function(){}))})).then((function(){return e}))})).catch((function(t){if("VersionError"===t.name)throw s.default.warn("Crypto DB is too new for us to use!",t),new l.InvalidCryptoStoreError(l.InvalidCryptoStoreError.TOO_NEW);s.default.warn("unable to connect to indexeddb "+n._dbName+": falling back to localStorage store: "+t);try{return new a.default(e.localStorage)}catch(t){return s.default.warn("unable to open localStorage: falling back to in-memory store: "+t),new u.default}}))),this._backendPromise}},{key:"deleteAllData",value:function(){var e=this;return new o.default((function(t,n){if(e._indexedDB){s.default.log("Removing indexeddb instance: "+e._dbName);var r=e._indexedDB.deleteDatabase(e._dbName);r.onblocked=function(){s.default.log("can't yet delete IndexedDBCryptoStore because it is open elsewhere")},r.onerror=function(e){s.default.log("Error deleting data from indexeddb",e),n(e.target.error)},r.onsuccess=function(){s.default.log("Removed indexeddb instance: "+e._dbName),t()}}else n(new Error("no indexeddb support available"))})).catch((function(e){s.default.warn("unable to delete IndexedDBCryptoStore: "+e)}))}},{key:"getOrAddOutgoingRoomKeyRequest",value:function(e){return this._connect().then((function(t){return t.getOrAddOutgoingRoomKeyRequest(e)}))}},{key:"getOutgoingRoomKeyRequest",value:function(e){return this._connect().then((function(t){return t.getOutgoingRoomKeyRequest(e)}))}},{key:"getOutgoingRoomKeyRequestByState",value:function(e){return this._connect().then((function(t){return t.getOutgoingRoomKeyRequestByState(e)}))}},{key:"getOutgoingRoomKeyRequestsByTarget",value:function(e,t,n){return this._connect().then((function(r){return r.getOutgoingRoomKeyRequestsByTarget(e,t,n)}))}},{key:"updateOutgoingRoomKeyRequest",value:function(e,t,n){return this._connect().then((function(r){return r.updateOutgoingRoomKeyRequest(e,t,n)}))}},{key:"deleteOutgoingRoomKeyRequest",value:function(e,t){return this._connect().then((function(n){return n.deleteOutgoingRoomKeyRequest(e,t)}))}},{key:"getAccount",value:function(e,t){this._backendPromise.then((function(n){n.getAccount(e,t)}))}},{key:"storeAccount",value:function(e,t){this._backendPromise.then((function(n){n.storeAccount(e,t)}))}},{key:"getCrossSigningKeys",value:function(e,t){this._backendPromise.then((function(n){n.getCrossSigningKeys(e,t)}))}},{key:"storeCrossSigningKeys",value:function(e,t){this._backendPromise.then((function(n){n.storeCrossSigningKeys(e,t)}))}},{key:"countEndToEndSessions",value:function(e,t){this._backendPromise.then((function(n){n.countEndToEndSessions(e,t)}))}},{key:"getEndToEndSession",value:function(e,t,n,r){this._backendPromise.then((function(i){i.getEndToEndSession(e,t,n,r)}))}},{key:"getEndToEndSessions",value:function(e,t,n){this._backendPromise.then((function(r){r.getEndToEndSessions(e,t,n)}))}},{key:"getAllEndToEndSessions",value:function(e,t){this._backendPromise.then((function(n){n.getAllEndToEndSessions(e,t)}))}},{key:"storeEndToEndSession",value:function(e,t,n,r){this._backendPromise.then((function(i){i.storeEndToEndSession(e,t,n,r)}))}},{key:"getEndToEndInboundGroupSession",value:function(e,t,n,r){this._backendPromise.then((function(i){i.getEndToEndInboundGroupSession(e,t,n,r)}))}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){this._backendPromise.then((function(n){n.getAllEndToEndInboundGroupSessions(e,t)}))}},{key:"addEndToEndInboundGroupSession",value:function(e,t,n,r){this._backendPromise.then((function(i){i.addEndToEndInboundGroupSession(e,t,n,r)}))}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,n,r){this._backendPromise.then((function(i){i.storeEndToEndInboundGroupSession(e,t,n,r)}))}},{key:"storeEndToEndDeviceData",value:function(e,t){this._backendPromise.then((function(n){n.storeEndToEndDeviceData(e,t)}))}},{key:"getEndToEndDeviceData",value:function(e,t){this._backendPromise.then((function(n){n.getEndToEndDeviceData(e,t)}))}},{key:"storeEndToEndRoom",value:function(e,t,n){this._backendPromise.then((function(r){r.storeEndToEndRoom(e,t,n)}))}},{key:"getEndToEndRooms",value:function(e,t){this._backendPromise.then((function(n){n.getEndToEndRooms(e,t)}))}},{key:"getSessionsNeedingBackup",value:function(e){return this._connect().then((function(t){return t.getSessionsNeedingBackup(e)}))}},{key:"countSessionsNeedingBackup",value:function(e){return this._connect().then((function(t){return t.countSessionsNeedingBackup(e)}))}},{key:"unmarkSessionsNeedingBackup",value:function(e,t){return this._connect().then((function(n){return n.unmarkSessionsNeedingBackup(e,t)}))}},{key:"markSessionsNeedingBackup",value:function(e,t){return this._connect().then((function(n){return n.markSessionsNeedingBackup(e,t)}))}},{key:"doTxn",value:function(e,t,n){return this._connect().then((function(r){return r.doTxn(e,t,n)}))}}],[{key:"exists",value:function(e,t){return d.exists(e,t)}}]),t}();t.default=h,h.STORE_ACCOUNT="account",h.STORE_SESSIONS="sessions",h.STORE_INBOUND_GROUP_SESSIONS="inbound_group_sessions",h.STORE_DEVICE_DATA="device_data",h.STORE_ROOMS="rooms",h.STORE_BACKUP="sessions_needing_backup"}).call(this,n(6))},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(120),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(245),__esModule:!0}},function(e,t,n){"use strict";(function(t){var r=a(n(8)),i=n(1),o=a(n(41)),s=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var u=n(2),c=n(13).EventEmitter;function l(e){this.roomId=e.roomId,this.client=e.client,this.webRtc=e.webRtc,this.forceTURN=e.forceTURN,this.URL=e.URL,this.turnServers=e.turnServers||[],0===this.turnServers.length&&this.client.isFallbackICEServerAllowed()&&this.turnServers.push({urls:[l.FALLBACK_ICE_SERVER]}),u.forEach(this.turnServers,(function(e){u.checkObjectHasKeys(e,["urls"])})),this.callId="c"+(new Date).getTime()+Math.random(),this.state="fledgling",this.didConnect=!1,this.candidateSendQueue=[],this.candidateSendTries=0,this.mediaPromises=(0,o.default)(null),this.screenSharingStream=null,this._answerContent=null}l.CALL_TIMEOUT_MS=6e4,l.FALLBACK_ICE_SERVER="stun:turn.matrix.org",l.ERR_LOCAL_OFFER_FAILED="local_offer_failed",l.ERR_NO_USER_MEDIA="no_user_media",l.ERR_UNKNOWN_DEVICES="unknown_devices",l.ERR_SEND_INVITE="send_invite",l.ERR_SEND_ANSWER="send_answer",u.inherits(l,c),l.prototype.placeVoiceCall=function(){w("placeVoiceCall"),b(this),S(this,R("voice")),this.type="voice"},l.prototype.placeVideoCall=function(e,t){w("placeVideoCall"),b(this),this.localVideoElement=t,this.remoteVideoElement=e,S(this,R("video")),this.type="video",g(this)},l.prototype.placeScreenSharingCall=function(e,t){w("placeScreenSharingCall"),b(this);var n=T(this);if(n){this.localVideoElement=t,this.remoteVideoElement=e;var r=this;this.webRtc.getUserMedia(n,(function(e){r.screenSharingStream=e,w("Got screen stream, requesting audio stream...");var t=R("voice");S(r,t)}),(function(e){r.emit("error",k(l.ERR_NO_USER_MEDIA,"Failed to get screen-sharing stream: "+e))})),this.type="video",g(this)}},l.prototype.playElement=function(e,t){s.default.log("queuing play on "+t+" and element "+e),this.mediaPromises[t]?this.mediaPromises[t]=this.mediaPromises[t].then((function(){return s.default.log("previous promise completed for "+t),e.play()}),(function(){return s.default.log("previous promise failed for "+t),e.play()})):this.mediaPromises[t]=e.play()},l.prototype.pauseElement=function(e,t){s.default.log("queuing pause on "+t+" and element "+e),this.mediaPromises[t]?this.mediaPromises[t]=this.mediaPromises[t].then((function(){return s.default.log("previous promise completed for "+t),e.pause()}),(function(){return s.default.log("previous promise failed for "+t),e.pause()})):this.mediaPromises[t]=e.pause()},l.prototype.assignElement=function(e,t,n){s.default.log("queuing assign on "+n+" element "+e+" for "+t),this.mediaPromises[n]?this.mediaPromises[n]=this.mediaPromises[n].then((function(){s.default.log("previous promise completed for "+n),e.srcObject=t}),(function(){s.default.log("previous promise failed for "+n),e.srcObject=t})):e.srcObject=t},l.prototype.getLocalVideoElement=function(){return this.localVideoElement},l.prototype.getRemoteVideoElement=function(){return this.remoteVideoElement},l.prototype.getRemoteAudioElement=function(){return this.remoteAudioElement},l.prototype.setLocalVideoElement=function(e){if(this.localVideoElement=e,e&&this.localAVStream&&"video"===this.type){e.autoplay=!0,this.assignElement(e,this.localAVStream,"localVideo"),e.muted=!0;var t=this;setTimeout((function(){var e=t.getLocalVideoElement();e.play&&t.playElement(e,"localVideo")}),0)}},l.prototype.setRemoteVideoElement=function(e){this.remoteVideoElement=e,g(this)},l.prototype.setRemoteAudioElement=function(e){this.remoteVideoElement.muted=!0,this.remoteAudioElement=e,this.remoteAudioElement.muted=!1,_(this)},l.prototype._initWithInvite=function(e){this.msg=e.getContent(),this.peerConn=x(this);var t=this;this.peerConn&&this.peerConn.setRemoteDescription(new this.webRtc.RtcSessionDescription(this.msg.offer),I(t,t._onSetRemoteDescriptionSuccess),I(t,t._onSetRemoteDescriptionError)),p(this,"ringing"),this.direction="inbound",this.msg.offer&&this.msg.offer.sdp&&this.msg.offer.sdp.indexOf("m=video")>-1?this.type="video":this.type="voice",e.getAge()&&setTimeout((function(){"ringing"==t.state&&(w("Call invite has expired. Hanging up."),t.hangupParty="remote",p(t,"ended"),y(t),"closed"!=t.peerConn.signalingState&&t.peerConn.close(),t.emit("hangup",t))}),this.msg.lifetime-e.getAge())},l.prototype._initWithHangup=function(e){this.msg=e.getContent(),p(this,"ended")},l.prototype.answer=function(){w("Answering call %s of type %s",this.callId,this.type);this._answerContent?this._sendAnswer():this.localAVStream||this.waitForLocalAVStream?this.localAVStream?this._maybeGotUserMediaForAnswer(this.localAVStream):this.waitForLocalAVStream&&p(this,"wait_local_media"):(this.webRtc.getUserMedia(R(this.type),I(this,this._maybeGotUserMediaForAnswer),I(this,this._maybeGotUserMediaForAnswer)),p(this,"wait_local_media"))},l.prototype._replacedBy=function(e){w(this.callId+" being replaced by "+e.callId),"wait_local_media"==this.state?(w("Telling new call to wait for local media"),e.waitForLocalAVStream=!0):("create_offer"==this.state||"invite_sent"==this.state)&&(w("Handing local stream to new call"),e._maybeGotUserMediaForAnswer(this.localAVStream),delete this.localAVStream),e.localVideoElement=this.localVideoElement,e.remoteVideoElement=this.remoteVideoElement,e.remoteAudioElement=this.remoteAudioElement,this.successor=e,this.emit("replaced",e),this.hangup(!0)},l.prototype.hangup=function(e,t){if("ended"!=this.state){w("Ending call "+this.callId),m(this,"local",e,!t);var n={version:0,call_id:this.callId,reason:e};h(this,"m.call.hangup",n)}},l.prototype.setLocalVideoMuted=function(e){this.localAVStream&&d(this.localAVStream.getVideoTracks(),!e)},l.prototype.isLocalVideoMuted=function(){return!!this.localAVStream&&!f(this.localAVStream.getVideoTracks())},l.prototype.setMicrophoneMuted=function(e){this.localAVStream&&d(this.localAVStream.getAudioTracks(),!e)},l.prototype.isMicrophoneMuted=function(){return!!this.localAVStream&&!f(this.localAVStream.getAudioTracks())},l.prototype._maybeGotUserMediaForInvite=function(e){if(this.successor)this.successor._maybeGotUserMediaForAnswer(e);else if("ended"!=this.state){w("_maybeGotUserMediaForInvite -> "+this.type);var t=this,n=e,r={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:"video"===t.type}};if(e instanceof MediaStream){var i=this.getLocalVideoElement();i&&"video"==this.type&&(i.autoplay=!0,this.screenSharingStream?(w("Setting screen sharing stream to the local video element"),this.assignElement(i,this.screenSharingStream,"localVideo")):this.assignElement(i,e,"localVideo"),i.muted=!0,setTimeout((function(){var e=t.getLocalVideoElement();e.play&&t.playElement(e,"localVideo")}),0)),this.screenSharingStream&&(this.screenSharingStream.addTrack(e.getAudioTracks()[0]),e=this.screenSharingStream),this.localAVStream=e,d(e.getAudioTracks(),!0),this.peerConn=x(this),this.peerConn.addStream(e)}else{if("PermissionDeniedError"!==n.name)return w("Failed to getUserMedia: "+n.name),void this._getUserMediaFailed(n);w("User denied access to camera/microphone. Or possibly you are using an insecure domain. Receiving only."),this.peerConn=x(this)}this.peerConn.createOffer(I(t,t._gotLocalOffer),I(t,t._getLocalOfferFailed),r),p(t,"create_offer")}},l.prototype._sendAnswer=function(e){var t=this;h(this,"m.call.answer",this._answerContent).then((function(){p(t,"connecting"),E(t)})).catch((function(e){p(t,"ringing"),t.client.cancelPendingEvent(e.event);var n=l.ERR_SEND_ANSWER,r="Failed to send answer";throw"UnknownDeviceError"==e.name&&(n=l.ERR_UNKNOWN_DEVICES,r="Unknown devices present in the room"),t.emit("error",k(n,r)),e}))},l.prototype._maybeGotUserMediaForAnswer=function(e){var t=this;if("ended"!=t.state){var n=e;if(e instanceof MediaStream){var r=t.getLocalVideoElement();r&&"video"==t.type&&(r.autoplay=!0,this.assignElement(r,e,"localVideo"),r.muted=!0,setTimeout((function(){var e=t.getLocalVideoElement();e.play&&t.playElement(e,"localVideo")}),0)),t.localAVStream=e,d(e.getAudioTracks(),!0),t.peerConn.addStream(e)}else{if("PermissionDeniedError"!==n.name)return w("Failed to getUserMedia: "+n.name),void this._getUserMediaFailed(n);w("User denied access to camera/microphone. Or possibly you are using an insecure domain. Receiving only.")}var i={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:"video"===t.type}};t.peerConn.createAnswer((function(e){w("Created answer: ",e),t.peerConn.setLocalDescription(e,(function(){t._answerContent={version:0,call_id:t.callId,answer:{sdp:t.peerConn.localDescription.sdp,type:t.peerConn.localDescription.type}},t._sendAnswer()}),(function(){w("Error setting local description!")}),i)}),(function(e){w("Failed to create answer: "+e)})),p(t,"create_answer")}},l.prototype._gotLocalIceCandidate=function(e){if(e.candidate){if(w("Got local ICE "+e.candidate.sdpMid+" candidate: "+e.candidate.candidate),"ended"==this.state)return;var t={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};v(this,t)}},l.prototype._gotRemoteIceCandidate=function(e){"ended"!=this.state&&(w("Got remote ICE "+e.sdpMid+" candidate: "+e.candidate),this.peerConn.addIceCandidate(new this.webRtc.RtcIceCandidate(e),(function(){}),(function(e){})))},l.prototype._receivedAnswer=function(e){if("ended"!=this.state){this.peerConn.setRemoteDescription(new this.webRtc.RtcSessionDescription(e.answer),I(this,this._onSetRemoteDescriptionSuccess),I(this,this._onSetRemoteDescriptionError)),p(this,"connecting")}},l.prototype._gotLocalOffer=function(e){var t=this;w("Created offer: ",e),"ended"!=t.state?t.peerConn.setLocalDescription(e,(function(){var e={version:0,call_id:t.callId,offer:{sdp:t.peerConn.localDescription.sdp,type:t.peerConn.localDescription.type},lifetime:l.CALL_TIMEOUT_MS};h(t,"m.call.invite",e).then((function(){p(t,"invite_sent"),setTimeout((function(){"invite_sent"==t.state&&t.hangup("invite_timeout")}),l.CALL_TIMEOUT_MS)})).catch((function(e){var n=l.ERR_SEND_INVITE,r="Failed to send invite";throw"UnknownDeviceError"==e.name&&(n=l.ERR_UNKNOWN_DEVICES,r="Unknown devices present in the room"),t.client.cancelPendingEvent(e.event),m(t,"local",n,!1),t.emit("error",k(n,r)),e}))}),(function(){w("Error setting local description!")})):w("Ignoring newly created offer on call ID "+t.callId+" because the call has ended")},l.prototype._getLocalOfferFailed=function(e){this.emit("error",k(l.ERR_LOCAL_OFFER_FAILED,"Failed to start audio for call!"))},l.prototype._getUserMediaFailed=function(e){m(this,"local","user_media_failed",!1),this.emit("error",k(l.ERR_NO_USER_MEDIA,"Couldn't start capturing media! Is your microphone set up and does this app have permission?"))},l.prototype._onIceConnectionStateChanged=function(){"ended"!=this.state&&(w("Ice connection state changed to: "+this.peerConn.iceConnectionState),"completed"==this.peerConn.iceConnectionState||"connected"==this.peerConn.iceConnectionState?(p(this,"connected"),this.didConnect=!0):"failed"==this.peerConn.iceConnectionState&&this.hangup("ice_failed"))},l.prototype._onSignallingStateChanged=function(){w("call "+this.callId+": Signalling state changed to: "+this.peerConn.signalingState)},l.prototype._onSetRemoteDescriptionSuccess=function(){w("Set remote description")},l.prototype._onSetRemoteDescriptionError=function(e){w("Failed to set remote description"+e)},l.prototype._onAddStream=function(e){w("Stream id "+e.stream.id+" added");var t=e.stream;t.getVideoTracks().length>0?(this.type="video",this.remoteAVStream=t,this.remoteAStream=t):(this.type="voice",this.remoteAStream=t);var n=this;C(t,(function(e){w("Track id "+e.id+" added"),e.onstarted=I(n,n._onRemoteStreamTrackStarted)})),void 0!==e.stream.oninactive?e.stream.oninactive=I(n,n._onRemoteStreamEnded):e.stream.onended=I(n,n._onRemoteStreamEnded),e.stream.onstarted=I(n,n._onRemoteStreamStarted),"video"===this.type?(g(this),_(this)):_(this)},l.prototype._onRemoteStreamStarted=function(e){p(this,"connected")},l.prototype._onRemoteStreamEnded=function(e){w("Remote stream ended"),this.hangupParty="remote",p(this,"ended"),y(this),"closed"!=this.peerConn.signalingState&&this.peerConn.close(),this.emit("hangup",this)},l.prototype._onRemoteStreamTrackStarted=function(e){p(this,"connected")},l.prototype._onHangupReceived=function(e){w("Hangup received"),m(this,"remote",e.reason,!0)},l.prototype._onAnsweredElsewhere=function(e){w("Answered elsewhere"),m(this,"remote","answered_elsewhere",!0)};var d=function(e,t){for(var n=0;n<e.length;n++)e[n].enabled=t},f=function(e){for(var t=0;t<e.length;t++)if(e[t].enabled)return!0;return!1},p=function(e,t){var n=e.state;e.state=t,e.emit("state",t,n)},h=function(e,t,n){return e.client.sendEvent(e.roomId,t,n)},v=function(e,t){e.candidateSendQueue.push(t),"ringing"!=e.state&&0===e.candidateSendTries&&setTimeout((function(){E(e)}),100)},m=function(e,t,n,r){e.getRemoteVideoElement()&&(e.getRemoteVideoElement().pause&&e.pauseElement(e.getRemoteVideoElement(),"remoteVideo"),e.assignElement(e.getRemoteVideoElement(),null,"remoteVideo")),e.getRemoteAudioElement()&&(e.getRemoteAudioElement().pause&&e.pauseElement(e.getRemoteAudioElement(),"remoteAudio"),e.assignElement(e.getRemoteAudioElement(),null,"remoteAudio")),e.getLocalVideoElement()&&(e.getLocalVideoElement().pause&&e.pauseElement(e.getLocalVideoElement(),"localVideo"),e.assignElement(e.getLocalVideoElement(),null,"localVideo")),e.hangupParty=t,e.hangupReason=n,p(e,"ended"),y(e),e.peerConn&&"closed"!==e.peerConn.signalingState&&e.peerConn.close(),r&&e.emit("hangup",e)},y=function(e){w("stopAllMedia (stream=%s)",e.localAVStream),e.localAVStream&&(C(e.localAVStream,(function(e){e.stop&&e.stop()})),e.localAVStream.stop&&e.localAVStream.stop()),e.screenSharingStream&&(C(e.screenSharingStream,(function(e){e.stop&&e.stop()})),e.screenSharingStream.stop&&e.screenSharingStream.stop()),e.remoteAVStream&&C(e.remoteAVStream,(function(e){e.stop&&e.stop()})),e.remoteAStream&&C(e.remoteAStream,(function(e){e.stop&&e.stop()}))},g=function(e){if(e.getRemoteVideoElement()&&e.remoteAVStream){var t=e.getRemoteVideoElement();t.autoplay=!0,e.assignElement(t,e.remoteAVStream,"remoteVideo"),setTimeout((function(){var t=e.getRemoteVideoElement();t.play&&e.playElement(t,"remoteVideo"),e.webRtc.isOpenWebRTC()&&p(e,"connected")}),0)}},_=function(){var e=(0,i.coroutine)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.getRemoteAudioElement()||!t.remoteAStream){e.next=8;break}if(n=t.getRemoteAudioElement(),!O){e.next=5;break}return e.next=5,(0,i.resolve)(n.setSinkId(O));case 5:n.autoplay=!0,t.assignElement(n,t.remoteAStream,"remoteAudio"),setTimeout((function(){var e=t.getRemoteAudioElement();e.play&&t.playElement(e,"remoteAudio"),t.webRtc.isOpenWebRTC()&&p(t,"connected")}),0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){if(0===e.listeners("error").length)throw new Error("You MUST attach an error listener using call.on('error', function() {})")},k=function(e,t){var n=new Error(t);return n.code=e,n},w=function(){s.default.log.apply(s.default,arguments)},E=function e(t){if(0!==t.candidateSendQueue.length){var n=t.candidateSendQueue;t.candidateSendQueue=[],++t.candidateSendTries;var r={version:0,call_id:t.callId,candidates:n};w("Attempting to send "+n.length+" candidates"),h(t,"m.call.candidates",r).then((function(){t.candidateSendTries=0,e(t)}),(function(r){for(var i=0;i<n.length;i++)t.candidateSendQueue.push(n[i]);if(t.candidateSendTries>5)return w("Failed to send candidates on attempt %s. Giving up for now.",t.candidateSendTries),void(t.candidateSendTries=0);var o=500*Math.pow(2,t.candidateSendTries);++t.candidateSendTries,w("Failed to send candidates. Retrying in "+o+"ms"),setTimeout((function(){e(t)}),o)}))}},S=function(e,t){e.client.callList[e.callId]=e,e.webRtc.getUserMedia(t,I(e,e._maybeGotUserMediaForInvite),I(e,e._maybeGotUserMediaForInvite)),p(e,"wait_local_media"),e.direction="outbound",e.config=t},x=function(e){var t=new e.webRtc.RtcPeerConnection({iceTransportPolicy:e.forceTURN?"relay":void 0,iceServers:e.turnServers});return t.oniceconnectionstatechange=I(e,e._onIceConnectionStateChanged),t.onsignalingstatechange=I(e,e._onSignallingStateChanged),t.onicecandidate=I(e,e._gotLocalIceCandidate),t.onaddstream=I(e,e._onAddStream),t},T=function(e){var n=t.screen;if(n)return{video:{mediaSource:"screen",mandatory:{chromeMediaSource:"screen",chromeMediaSourceId:""+Date.now(),maxWidth:n.width,maxHeight:n.height,minFrameRate:1,maxFrameRate:10}}};e.emit("error",k(l.ERR_NO_USER_MEDIA,"Couldn't determine screen sharing constaints."))},R=function(e){var n=!!t.window.navigator.webkitGetUserMedia;switch(e){case"voice":return{audio:{deviceId:A?{ideal:A}:void 0},video:!1};case"video":return{audio:{deviceId:A?{ideal:A}:void 0},video:{deviceId:D?{ideal:D}:void 0,width:n?{exact:640}:{ideal:640},height:n?{exact:360}:{ideal:360}}}}},I=function(e,t){return function(){return t.apply(e,arguments)}},C=function(e,t){!function(e,t){for(var n=e.getVideoTracks(),r=0;r<n.length;r++)t(n[r])}(e,t),function(e,t){for(var n=e.getAudioTracks(),r=0;r<n.length;r++)t(n[r])}(e,t)};e.exports.MatrixCall=l;var O=void 0,A=void 0,D=void 0;e.exports.setAudioOutput=function(e){O=e},e.exports.setAudioInput=function(e){A=e},e.exports.setVideoInput=function(e){D=e},e.exports.createNewMatrixCall=function(e,n,r){var i=t.window,o=t.document;if(!i||!o)return null;var a={isOpenWebRTC:function(){var e=o.getElementById("script");if(!e||!e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].src.indexOf("owr.js")>-1)return!0;return!1}},u=i.navigator.getUserMedia||i.navigator.webkitGetUserMedia||i.navigator.mozGetUserMedia;u&&(a.getUserMedia=function(){return u.apply(i.navigator,arguments)});try{a.RtcPeerConnection=i.RTCPeerConnection||i.webkitRTCPeerConnection||i.mozRTCPeerConnection,a.RtcSessionDescription=i.RTCSessionDescription||i.webkitRTCSessionDescription||i.mozRTCSessionDescription,a.RtcIceCandidate=i.RTCIceCandidate||i.webkitRTCIceCandidate||i.mozRTCIceCandidate,a.vendor=null,i.mozRTCPeerConnection?a.vendor="mozilla":i.webkitRTCPeerConnection?a.vendor="webkit":i.RTCPeerConnection&&(a.vendor="generic")}catch(d){return s.default.error("Failed to set up WebRTC object: possible browser interference?"),s.default.error(d),null}if(!a.RtcIceCandidate||!a.RtcSessionDescription||!a.RtcPeerConnection||!a.getUserMedia)return null;var c=!!r&&r.forceTURN;return new l({webRtc:a,client:e,URL:i.URL,roomId:n,turnServers:e.getTurnServers(),forceTURN:e._forceTURN||c})}}).call(this,n(6))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(76),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(61)("meta"),i=n(14),o=n(30),s=n(20).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(28)((function(){return u(Object.preventExtensions({}))})),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&d.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t){},function(e,t,n){"use strict";var r=n(13).EventEmitter;function i(e){this.userId=e,this.presence="offline",this.presenceStatusMsg=null,this._unstable_statusMessage="",this.displayName=e,this.rawDisplayName=e,this.avatarUrl=null,this.lastActiveAgo=0,this.lastPresenceTs=0,this.currentlyActive=!1,this.events={presence:null,profile:null},this._updateModifiedTime()}n(2).inherits(i,r),i.prototype.setPresenceEvent=function(e){if("m.presence"===e.getType()){var t=null===this.events.presence;this.events.presence=e;var n=[];(e.getContent().presence!==this.presence||t)&&n.push("User.presence"),e.getContent().avatar_url&&e.getContent().avatar_url!==this.avatarUrl&&n.push("User.avatarUrl"),e.getContent().displayname&&e.getContent().displayname!==this.displayName&&n.push("User.displayName"),void 0!==e.getContent().currently_active&&e.getContent().currently_active!==this.currentlyActive&&n.push("User.currentlyActive"),this.presence=e.getContent().presence,n.push("User.lastPresenceTs"),e.getContent().status_msg&&(this.presenceStatusMsg=e.getContent().status_msg),e.getContent().displayname&&(this.displayName=e.getContent().displayname),e.getContent().avatar_url&&(this.avatarUrl=e.getContent().avatar_url),this.lastActiveAgo=e.getContent().last_active_ago,this.lastPresenceTs=Date.now(),this.currentlyActive=e.getContent().currently_active,this._updateModifiedTime();for(var r=0;r<n.length;r++)this.emit(n[r],e,this)}},i.prototype.setDisplayName=function(e){var t=this.displayName;this.displayName=e,e!==t&&this._updateModifiedTime()},i.prototype.setRawDisplayName=function(e){this.rawDisplayName=e},i.prototype.setAvatarUrl=function(e){var t=this.avatarUrl;this.avatarUrl=e,e!==t&&this._updateModifiedTime()},i.prototype._updateModifiedTime=function(){this._modified=Date.now()},i.prototype.getLastModifiedTime=function(){return this._modified},i.prototype.getLastActiveTs=function(){return this.lastPresenceTs-this.lastActiveAgo},i.prototype._unstable_updateStatusMessage=function(e){e.getContent()?this._unstable_statusMessage=e.getContent().status:this._unstable_statusMessage="",this._updateModifiedTime(),this.emit("User._unstable_statusMessage",this)},e.exports=i},function(e,t,n){var r=n(49),i=n(15)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";(function(t){var r=u(n(41)),i=u(n(21)),o=u(n(32)),s=u(n(1)),a=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=n(203).parse,l=n(2),d=n(204);e.exports.PREFIX_R0="/_matrix/client/r0",e.exports.PREFIX_UNSTABLE="/_matrix/client/unstable",e.exports.PREFIX_IDENTITY_V1="/_matrix/identity/api/v1",e.exports.PREFIX_IDENTITY_V2="/_matrix/identity/v2",e.exports.PREFIX_MEDIA_R0="/_matrix/media/r0",e.exports.MatrixHttpApi=function(e,t){l.checkObjectHasKeys(t,["baseUrl","request","prefix"]),t.onlyData=t.onlyData||!1,this.event_emitter=e,this.opts=t,this.useAuthorizationHeader=Boolean(t.useAuthorizationHeader),this.uploads=[]},e.exports.MatrixHttpApi.prototype={setIdBaseUrl:function(e){this.opts.idBaseUrl=e},getContentUri:function(){var e={access_token:this.opts.accessToken};return{base:this.opts.baseUrl,path:"/_matrix/media/r0/upload",params:e}},uploadContent:function(e,n){l.isFunction(n)?n={callback:n}:void 0===n&&(n={});var r=!1!==n.includeFilename,i=n.type||e.type||"application/octet-stream",o=n.name||e.name,u=e;u.stream&&"function"!==typeof u.stream&&(a.default.warn("Using `file.stream` as the content to upload. Future versions of the js-sdk will change this to expect `file` to be the content directly."),u=u.stream);var c=n.rawResponse;void 0===c&&(t.XMLHttpRequest?c=!1:(a.default.warn("Returning the raw JSON from uploadContent(). Future versions of the js-sdk will change this default, to return the parsed object. Set opts.rawResponse=false to change this behaviour now."),c=!0));var p=n.onlyContentUri;c||void 0!==p||(t.XMLHttpRequest?(a.default.warn("Returning only the content-uri from uploadContent(). Future versions of the js-sdk will change this default, to return the whole response object. Set opts.onlyContentUri=false to change this behaviour now."),p=!0):p=!1);var h={loaded:0,total:0},v=void 0,m=null;if(c||(m=function(e){var t=JSON.parse(e);if(p&&void 0===(t=t.content_uri))throw Error("Bad response");return t}),t.XMLHttpRequest){var y=s.default.defer(),g=new t.XMLHttpRequest;h.xhr=g;var _=f(y,n.callback,this.opts.onlyData),b=function(){g.abort(),_(new Error("Timeout"))};g.timeout_timer=d.setTimeout(b,3e4),g.onreadystatechange=function(){switch(g.readyState){case t.XMLHttpRequest.DONE:var e;d.clearTimeout(g.timeout_timer);try{if(!g.responseText)throw new Error("No response body.");e=g.responseText,m&&(e=m(e))}catch(n){return n.http_status=g.status,void _(n)}_(void 0,g,e)}},g.upload.addEventListener("progress",(function(e){d.clearTimeout(g.timeout_timer),h.loaded=e.loaded,h.total=e.total,g.timeout_timer=d.setTimeout(b,3e4),n.progressHandler&&n.progressHandler({loaded:e.loaded,total:e.total})}));var k=this.opts.baseUrl+"/_matrix/media/r0/upload",w=[];r&&o&&w.push("filename="+encodeURIComponent(o)),this.useAuthorizationHeader||w.push("access_token="+encodeURIComponent(this.opts.accessToken)),w.length>0&&(k+="?"+w.join("&")),g.open("POST",k),this.useAuthorizationHeader&&g.setRequestHeader("Authorization","Bearer "+this.opts.accessToken),g.setRequestHeader("Content-Type",i),g.send(u),(v=y.promise).abort=g.abort.bind(g)}else{var E={};r&&o&&(E.filename=o),v=this.authedRequest(n.callback,"POST","/upload",E,u,{prefix:"/_matrix/media/r0",headers:{"Content-Type":i},json:!1,bodyParser:m})}var S=this,x=v.finally((function(){for(var e=0;e<S.uploads.length;++e)if(S.uploads[e]===h)return void S.uploads.splice(e,1)}));return x.abort=v.abort,h.promise=x,this.uploads.push(h),x},cancelUpload:function(e){return!!e.abort&&(e.abort(),!0)},getCurrentUploads:function(){return this.uploads},idServerRequest:function(e,t,n,r,i,a){if(!this.opts.idBaseUrl)throw new Error("No Identity Server base URL set");var u=this.opts.idBaseUrl+i+n;if(void 0!==e&&!l.isFunction(e))throw Error("Expected callback to be a function but got "+("undefined"===typeof e?"undefined":(0,o.default)(e)));var c={uri:u,method:t,withCredentials:!1,json:!0,_matrix_opts:this.opts,headers:{}};"GET"===t?c.qs=r:"object"===("undefined"===typeof r?"undefined":(0,o.default)(r))&&(c.json=r),a&&(c.headers.Authorization="Bearer "+a);var d=s.default.defer();return this.opts.request(c,f(d,e,this.opts.onlyData)),d.promise},authedRequest:function(e,t,n,r,i,o){r||(r={}),this.useAuthorizationHeader?(isFinite(o)&&(o={localTimeoutMs:o}),o||(o={}),o.headers||(o.headers={}),o.headers.Authorization||(o.headers.Authorization="Bearer "+this.opts.accessToken),r.access_token&&delete r.access_token):r.access_token||(r.access_token=this.opts.accessToken);var s=this.request(e,t,n,r,i,o),a=this;return s.catch((function(e){"M_UNKNOWN_TOKEN"==e.errcode?a.event_emitter.emit("Session.logged_out",e):"M_CONSENT_NOT_GIVEN"==e.errcode&&a.event_emitter.emit("no_consent",e.message,e.data.consent_uri)})),s},request:function(e,t,n,r,i,o){var s=void 0!==(o=o||{}).prefix?o.prefix:this.opts.prefix,a=this.opts.baseUrl+s+n;return this.requestOtherUrl(e,t,a,r,i,o)},requestOtherUrl:function(e,t,n,r,i,o){return void 0===o||null===o?o={}:isFinite(o)&&(o={localTimeoutMs:o}),this._request(e,t,n,r,i,o)},getUrl:function(e,t,n){var r="";return t&&(r="?"+l.encodeParams(t)),this.opts.baseUrl+n+e+r},_request:function(t,n,r,a,u,c){if(void 0!==t&&!l.isFunction(t))throw Error("Expected callback to be a function but got "+("undefined"===typeof t?"undefined":(0,o.default)(t)));c=c||{};var p=this;if(this.opts.extraParams)for(var h in this.opts.extraParams)this.opts.extraParams.hasOwnProperty(h)&&(a[h]=this.opts.extraParams[h]);var v=l.extend({},c.headers||{}),m=void 0===c.json||c.json,y=c.bodyParser;m&&(u&&(u=(0,i.default)(u),v["content-type"]="application/json"),v.accept||(v.accept="application/json"),void 0===y&&(y=function(e){return JSON.parse(e)}));var g=s.default.defer(),_=void 0,b=!1,k=void 0,w=c.localTimeoutMs||this.opts.localTimeoutMs,E=function(){w&&(_&&d.clearTimeout(_),_=d.setTimeout((function(){b=!0,k&&k.abort&&k.abort(),g.reject(new e.exports.MatrixError({error:"Locally timed out waiting for a response",errcode:"ORG.MATRIX.JSSDK_TIMEOUT",timeout:w}))}),w))};E();var S=g.promise;try{(k=this.opts.request({uri:r,method:n,withCredentials:!1,qs:a,qsStringifyOptions:c.qsStringifyOptions,useQuerystring:!0,body:u,json:!1,timeout:w,headers:v||{},_matrix_opts:this.opts},(function(e,n,r){w&&(d.clearTimeout(_),b)||f(g,t,p.opts.onlyData,y)(e,n,r)})))&&("onprogress"in k&&(k.onprogress=function(e){E()}),k.abort&&(S.abort=k.abort.bind(k)))}catch(x){g.reject(x),t&&t(x)}return S}};var f=function(t,n,r,i){return n=n||function(){},function(s,a,u){if(!s)try{a.statusCode>=400?s=function(t,n){var r=t.statusCode,i=function(e){var t=void 0;e.getResponseHeader?t=e.getResponseHeader("Content-Type"):e.headers&&(t=e.headers["content-type"]||null);if(!t)return null;try{return c(t)}catch(n){throw new Error("Error parsing Content-Type '"+t+"': "+n)}}(t),s=void 0;if(i)if("application/json"===i.type){var a="object"===("undefined"===typeof n?"undefined":(0,o.default)(n))?n:JSON.parse(n);s=new e.exports.MatrixError(a)}else"text/plain"===i.type&&(s=new Error("Server returned "+r+" error: "+n));s||(s=new Error("Server returned "+r+" error"));return s.httpStatus=r,s}(a,u):i&&(u=i(u))}catch(d){s=new Error("Error parsing server response: "+d)}if(s)t.reject(s),n(s);else{var l={code:a.statusCode,headers:a.headers,data:u};t.resolve(r?u:l),n(null,r?u:l)}}};e.exports.MatrixError=function(e){e=e||{},this.errcode=e.errcode,this.name=e.errcode||"Unknown error code",this.message=e.error||"Unknown message",this.data=e},e.exports.MatrixError.prototype=(0,r.default)(Error.prototype),e.exports.MatrixError.prototype.constructor=e.exports.MatrixError}).call(this,n(6))},function(e,t,n){e.exports={default:n(228),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;++r)t+=n.charAt(Math.floor(Math.random()*n.length));return t}},function(e,t,n){"use strict";function r(e){Object.defineProperty(this,"deviceId",{enumerable:!0,value:e}),this.algorithms=[],this.keys={},this.verified=i.UNVERIFIED,this.known=!1,this.unsigned={},this.signatures={}}r.fromStorage=function(e,t){var n=new r(t);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},r.prototype.toStorage=function(){return{algorithms:this.algorithms,keys:this.keys,verified:this.verified,known:this.known,unsigned:this.unsigned,signatures:this.signatures}},r.prototype.getFingerprint=function(){return this.keys["ed25519:"+this.deviceId]},r.prototype.getIdentityKey=function(){return this.keys["curve25519:"+this.deviceId]},r.prototype.getDisplayName=function(){return this.unsigned.device_display_name||null},r.prototype.isBlocked=function(){return this.verified==i.BLOCKED},r.prototype.isVerified=function(){return this.verified==i.VERIFIED},r.prototype.isUnverified=function(){return this.verified==i.UNVERIFIED},r.prototype.isKnown=function(){return 1==this.known},r.DeviceVerification={VERIFIED:1,UNVERIFIED:0,BLOCKED:-1};var i=r.DeviceVerification;e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newInvalidMessageError=t.newUserMismatchError=t.newKeyMismatchError=t.newUnexpectedMessageError=t.newUnknownMethodError=t.newUnknownTransactionError=t.newTimeoutError=t.newUserCancelledError=void 0,t.newVerificationError=i,t.errorFactory=o;var r=n(19);function i(e,t,n){return(n=n||{}).code=e,n.reason=t,new r.MatrixEvent({type:"m.key.verification.cancel",content:n})}function o(e,t){return function(n){return i(e,t,n)}}t.newUserCancelledError=o("m.user","Cancelled by user"),t.newTimeoutError=o("m.timeout","Timed out"),t.newUnknownTransactionError=o("m.unknown_transaction","Unknown transaction"),t.newUnknownMethodError=o("m.unknown_method","Unknown method"),t.newUnexpectedMessageError=o("m.unexpected_message","Unexpected message"),t.newKeyMismatchError=o("m.key_mismatch","Key mismatch"),t.newUserMismatchError=o("m.user_error","User mismatch"),t.newInvalidMessageError=o("m.invalid_message","Invalid message")},function(e,t,n){"use strict";var r=n(2);e.exports={getHttpUriForMxc:function(e,t,n,i,o,s){if("string"!==typeof t||!t)return"";if(0!==t.indexOf("mxc://"))return s?t:"";var a=t.slice(6),u="/_matrix/media/r0/download/",c={};n&&(c.width=Math.round(n)),i&&(c.height=Math.round(i)),o&&(c.method=o),r.keys(c).length>0&&(u="/_matrix/media/r0/thumbnail/");var l=a.indexOf("#"),d="";return l>=0&&(d=a.substr(l),a=a.substr(0,l)),e+u+a+(0===r.keys(c).length?"":"?"+r.encodeParams(c))+d},getIdenticonUri:function(e,t,n,i){if(!t)return null;n||(n=96),i||(i=96);var o={width:n,height:i};return e+r.encodeUri("/_matrix/media/unstable/identicon/$ident",{$ident:t})+(0===r.keys(o).length?"":"?"+r.encodeParams(o))}}},function(e,t,n){var r=n(14),i=n(11).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(14);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(49);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(78)("keys"),i=n(61);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=n(11),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(50)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(50),i=n(7),o=n(110),s=n(27),a=n(43),u=n(173),c=n(51),l=n(81),d=n(15)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,v,m,y){u(n,t,h);var g,_,b,k=function(e){if(!f&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",E="values"==v,S=!1,x=e.prototype,T=x[d]||x["@@iterator"]||v&&x[v],R=T||k(v),I=v?E?k("entries"):R:void 0,C="Array"==t&&x.entries||T;if(C&&(b=l(C.call(new e)))!==Object.prototype&&b.next&&(c(b,w,!0),r||"function"==typeof b[d]||s(b,d,p)),E&&T&&"values"!==T.name&&(S=!0,R=function(){return T.call(this)}),r&&!y||!f&&!S&&x[d]||s(x,d,R),a[t]=R,a[w]=p,v)if(g={values:E?R:k("values"),keys:m?R:k("keys"),entries:I},y)for(_ in g)_ in x||o(x,_,g[_]);else i(i.P+i.F*(f||S),t,g);return g}},function(e,t,n){var r=n(30),i=n(34),o=n(77)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){t.f=n(15)},function(e,t,n){var r=n(11),i=n(4),o=n(50),s=n(82),a=n(20).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(65),i=n(15)("iterator"),o=n(43);e.exports=n(4).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(7),i=n(4),o=n(28);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(41)),i=a(n(205)),o=a(n(208)),s=a(n(211));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n="Store is invalid because "+e+", please stop the client, delete all data and start the client again",r=(0,s.default)(Error,[n]);return(0,o.default)(r,(0,i.default)(this)),r.reason=e,r.value=t,r}function c(e){var t="Crypto store is invalid because "+e+", please stop the client, delete all data and start the client again",n=(0,s.default)(Error,[t]);return(0,o.default)(n,(0,i.default)(this)),n.reason=e,n.name="InvalidCryptoStoreError",n}t.InvalidStoreError=u,t.InvalidCryptoStoreError=c,u.TOGGLED_LAZY_LOADING="TOGGLED_LAZY_LOADING",u.prototype=(0,r.default)(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),(0,o.default)(u,Error),c.TOO_NEW="TOO_NEW",c.prototype=(0,r.default)(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),(0,o.default)(c,Error)},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(14);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(5)),i=s(n(10)),o=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,i.default)(this,e),this.target=t,this.boundHandlers={}}return(0,o.default)(e,[{key:"_handleEvent",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.target).emit.apply(t,[e].concat(r))}},{key:"reEmit",value:function(e,t){var n=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,r.concat([e]))},i=!0,o=!1,s=void 0;try{for(var a,u=(0,r.default)(t);!(i=(a=u.next()).done);i=!0){var c=a.value;void 0===this.boundHandlers[c]&&(this.boundHandlers[c]=this._handleEvent.bind(this,c));var l=n.bind(this,this.boundHandlers[c]);e.on(c,l)}}catch(d){o=!0,s=d}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(67)),i=f(n(9)),o=f(n(22)),s=f(n(5)),a=f(n(10)),u=f(n(12)),c=f(n(1)),l=f(n(3)),d=f(n(2));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){(0,a.default)(this,e),this._outgoingRoomKeyRequests=[],this._account=null,this._crossSigningKeys=null,this._sessions={},this._inboundGroupSessions={},this._deviceData=null,this._rooms={},this._sessionsNeedingBackup={}}return(0,u.default)(e,[{key:"deleteAllData",value:function(){return c.default.resolve()}},{key:"getOrAddOutgoingRoomKeyRequest",value:function(e){var t=this,n=e.requestBody;return c.default.try((function(){var r=t._getOutgoingRoomKeyRequest(n);return r?(l.default.log("already have key request outstanding for "+n.room_id+" / "+n.session_id+": not sending another"),r):(l.default.log("enqueueing key request for "+n.room_id+" / "+n.session_id),t._outgoingRoomKeyRequests.push(e),e)}))}},{key:"getOutgoingRoomKeyRequest",value:function(e){return c.default.resolve(this._getOutgoingRoomKeyRequest(e))}},{key:"_getOutgoingRoomKeyRequest",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,s.default)(this._outgoingRoomKeyRequests);!(t=(i=o.next()).done);t=!0){var a=i.value;if(d.default.deepCompare(a.requestBody,e))return a}}catch(u){n=!0,r=u}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return null}},{key:"getOutgoingRoomKeyRequestByState",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,s.default)(this._outgoingRoomKeyRequests);!(t=(i=o.next()).done);t=!0){var a=i.value,u=!0,l=!1,d=void 0;try{for(var f,p=(0,s.default)(e);!(u=(f=p.next()).done);u=!0){var h=f.value;if(a.state===h)return c.default.resolve(a)}}catch(v){l=!0,d=v}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}}}catch(v){n=!0,r=v}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return c.default.resolve(null)}},{key:"getOutgoingRoomKeyRequestsByTarget",value:function(e,t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var u,l=(0,s.default)(this._outgoingRoomKeyRequests);!(i=(u=l.next()).done);i=!0){var d=u.value,f=!0,p=!1,h=void 0;try{for(var v,m=(0,s.default)(n);!(f=(v=m.next()).done);f=!0){var y=v.value;d.state===y&&d.recipients.includes({userId:e,deviceId:t})&&r.push(d)}}catch(g){p=!0,h=g}finally{try{!f&&m.return&&m.return()}finally{if(p)throw h}}}}catch(g){o=!0,a=g}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return c.default.resolve(r)}},{key:"updateOutgoingRoomKeyRequest",value:function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var u,d=(0,s.default)(this._outgoingRoomKeyRequests);!(r=(u=d.next()).done);r=!0){var f=u.value;if(f.requestId===e)return f.state!=t?(l.default.warn("Cannot update room key request from "+t+" as it was already updated to "+f.state),c.default.resolve(null)):((0,o.default)(f,n),c.default.resolve(f))}}catch(p){i=!0,a=p}finally{try{!r&&d.return&&d.return()}finally{if(i)throw a}}return c.default.resolve(null)}},{key:"deleteOutgoingRoomKeyRequest",value:function(e,t){for(var n=0;n<this._outgoingRoomKeyRequests.length;n++){var r=this._outgoingRoomKeyRequests[n];if(r.requestId===e)return r.state!=t?(l.default.warn("Cannot delete room key request in state "+r.state+" (expected "+t+")"),c.default.resolve(null)):(this._outgoingRoomKeyRequests.splice(n,1),c.default.resolve(r))}return c.default.resolve(null)}},{key:"getAccount",value:function(e,t){t(this._account)}},{key:"storeAccount",value:function(e,t){this._account=t}},{key:"getCrossSigningKeys",value:function(e,t){t(this._crossSigningKeys)}},{key:"storeCrossSigningKeys",value:function(e,t){this._crossSigningKeys=t}},{key:"countEndToEndSessions",value:function(e,t){return(0,i.default)(this._sessions).length}},{key:"getEndToEndSession",value:function(e,t,n,r){r((this._sessions[e]||{})[t]||null)}},{key:"getEndToEndSessions",value:function(e,t,n){n(this._sessions[e]||{})}},{key:"getAllEndToEndSessions",value:function(e,t){var n=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)((0,r.default)(this._sessions));!(n=(a=u.next()).done);n=!0){var c=a.value,l=!0,d=!1,f=void 0;try{for(var p,h=(0,s.default)((0,r.default)(c));!(l=(p=h.next()).done);l=!0){t(p.value)}}catch(v){d=!0,f=v}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}}}catch(v){i=!0,o=v}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}}},{key:"storeEndToEndSession",value:function(e,t,n,r){var i=this._sessions[e];void 0===i&&(i={},this._sessions[e]=i),i[t]=n}},{key:"getEndToEndInboundGroupSession",value:function(e,t,n,r){r(this._inboundGroupSessions[e+"/"+t]||null)}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,u=(0,s.default)((0,i.default)(this._inboundGroupSessions));!(n=(a=u.next()).done);n=!0){var c=a.value;t({senderKey:c.substr(0,43),sessionId:c.substr(44),sessionData:this._inboundGroupSessions[c]})}}catch(l){r=!0,o=l}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}t(null)}},{key:"addEndToEndInboundGroupSession",value:function(e,t,n,r){var i=e+"/"+t;void 0===this._inboundGroupSessions[i]&&(this._inboundGroupSessions[i]=n)}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,n,r){this._inboundGroupSessions[e+"/"+t]=n}},{key:"getEndToEndDeviceData",value:function(e,t){t(this._deviceData)}},{key:"storeEndToEndDeviceData",value:function(e,t){this._deviceData=e}},{key:"storeEndToEndRoom",value:function(e,t,n){this._rooms[e]=t}},{key:"getEndToEndRooms",value:function(e,t){t(this._rooms)}},{key:"getSessionsNeedingBackup",value:function(e){var t=[];for(var n in this._sessionsNeedingBackup)if(this._inboundGroupSessions[n]&&(t.push({senderKey:n.substr(0,43),sessionId:n.substr(44),sessionData:this._inboundGroupSessions[n]}),e&&n.length>=e))break;return c.default.resolve(t)}},{key:"countSessionsNeedingBackup",value:function(){return c.default.resolve((0,i.default)(this._sessionsNeedingBackup).length)}},{key:"unmarkSessionsNeedingBackup",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,s.default)(e);!(t=(i=o.next()).done);t=!0){var a=i.value,u=a.senderKey+"/"+a.sessionId;delete this._sessionsNeedingBackup[u]}}catch(l){n=!0,r=l}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return c.default.resolve()}},{key:"markSessionsNeedingBackup",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,s.default)(e);!(t=(i=o.next()).done);t=!0){var a=i.value,u=a.senderKey+"/"+a.sessionId;this._sessionsNeedingBackup[u]=!0}}catch(l){n=!0,r=l}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return c.default.resolve()}},{key:"doTxn",value:function(e,t,n){return c.default.resolve(n(null))}}]),e}();t.default=p},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(234),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){"use strict";for(var r=/[\\\"\x00-\x1F]/g,i={},o=0;o<32;++o)i[String.fromCharCode(o)]="\\U"+("0000"+o.toString(16)).slice(-4).toUpperCase();function s(e){return r.lastIndex=0,e.replace(r,(function(e){return i[e]}))}function a(e){switch(typeof e){case"string":return'"'+s(e)+'"';case"number":return isFinite(e)?e:"null";case"boolean":return e;case"object":return null===e?"null":Array.isArray(e)?function(e){for(var t="[",n="",r=0;r<e.length;++r)n+=t,t=",",n+=a(e[r]);return","!=t?"[]":n+"]"}(e):function(e){var t="{",n="",r=Object.keys(e);r.sort();for(var i=0;i<r.length;++i){var o=r[i];n+=t+'"'+s(o)+'":',t=",",n+=a(e[o])}return","!=t?"{}":n+"}"}(e);default:throw new Error("Cannot stringify: "+typeof e)}}i["\b"]="\\b",i["\t"]="\\t",i["\n"]="\\n",i["\f"]="\\f",i["\r"]="\\r",i['"']='\\"',i["\\"]="\\\\",e.exports={stringify:a}},function(e,t,n){"use strict";var r=n(29);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownDeviceError=t.DecryptionError=t.DecryptionAlgorithm=t.EncryptionAlgorithm=t.DECRYPTION_CLASSES=t.ENCRYPTION_CLASSES=void 0;var r=l(n(9)),i=l(n(24)),o=l(n(25)),s=l(n(26)),a=l(n(10)),u=l(n(12));t.registerAlgorithm=function(e,t,n){d[e]=t,f[e]=n};var c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var d=t.ENCRYPTION_CLASSES={},f=t.DECRYPTION_CLASSES={},p=function(){function e(t){(0,a.default)(this,e),this._userId=t.userId,this._deviceId=t.deviceId,this._crypto=t.crypto,this._olmDevice=t.olmDevice,this._baseApis=t.baseApis,this._roomId=t.roomId}return(0,u.default)(e,[{key:"onRoomMembership",value:function(e,t,n){}}]),e}();t.EncryptionAlgorithm=p;var h=function(){function e(t){(0,a.default)(this,e),this._userId=t.userId,this._crypto=t.crypto,this._olmDevice=t.olmDevice,this._baseApis=t.baseApis,this._roomId=t.roomId}return(0,u.default)(e,[{key:"onRoomKeyEvent",value:function(e){}},{key:"importRoomKey",value:function(e){}},{key:"hasKeysForKeyRequest",value:function(e){return c.default.resolve(!1)}},{key:"shareKeysWithDevice",value:function(e){throw new Error("shareKeysWithDevice not supported for this DecryptionAlgorithm")}}]),e}();t.DecryptionAlgorithm=h;var v=function(e){function t(e,n,s){(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));return u.code=e,u.name="DecryptionError",u.detailedString=function(e,t){var n=e.name+"[msg: "+e.message;t&&(n+=", "+(0,r.default)(t).map((function(e){return e+": "+t[e]})).join(", "));return n+="]"}(u,s),u}return(0,s.default)(t,e),t}(Error);t.DecryptionError=v;t.UnknownDeviceError=function(e){function t(e,n){(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.name="UnknownDeviceError",r.devices=n,r}return(0,s.default)(t,e),t}(Error)},function(e,t,n){"use strict";var r=u(n(32)),i=u(n(5)),o=u(n(21)),s=u(n(9)),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=["override","content","room","sender","underride"],l=[{rule_id:".m.rule.tombstone",default:!0,enabled:!0,conditions:[{kind:"event_match",key:"type",pattern:"m.room.tombstone"},{kind:"event_match",key:"state_key",pattern:""}],actions:["notify",{set_tweak:"highlight",value:!0}]},{rule_id:".m.rule.reaction",default:!0,enabled:!0,conditions:[{kind:"event_match",key:"type",pattern:"m.reaction"}],actions:["dont_notify"]}];function d(e){var t=this,n={},r=function(e,n,r){for(var i=0;i<c.length;++i)for(var o=c[i],s=n[o],a=0;a<s.length;++a){var l=s[a];if(l.enabled){var d=u(o,l,r);if(d&&t.ruleMatchesEvent(d,e))return l.kind=o,l}}return null},u=function(e,t,n){var r={rule_id:t.rule_id,actions:t.actions,conditions:[]};switch(e){case"underride":case"override":r.conditions=t.conditions;break;case"room":if(!t.rule_id)return null;r.conditions.push({kind:"event_match",key:"room_id",value:t.rule_id});break;case"sender":if(!t.rule_id)return null;r.conditions.push({kind:"event_match",key:"user_id",value:t.rule_id});break;case"content":if(!t.pattern)return null;r.conditions.push({kind:"event_match",key:"content.body",pattern:t.pattern})}return n&&r.conditions.push({kind:"device",profile_tag:n}),r},f=function(e,t){var n={event_match:y,device:m,contains_display_name:v,room_member_count:h,sender_notification_permission:p};return!!n[e.kind]&&n[e.kind](e,t)},p=function(t,n){var r=t.key;if(!r)return!1;var i=e.getRoom(n.getRoomId());return!(!i||!i.currentState)&&i.currentState.mayTriggerNotifOfType(r,n.getSender())},h=function(t,n){if(!t.is)return!1;var r=e.getRoom(n.getRoomId());if(!r||!r.currentState||!r.currentState.members)return!1;var i=r.currentState.getJoinedMemberCount(),o=t.is.match(/^([=<>]*)([0-9]*)$/);if(!o)return!1;var s=o[1],a=parseInt(o[2]);if(isNaN(a))return!1;switch(s){case"":case"==":return i==a;case"<":return i<a;case">":return i>a;case"<=":return i<=a;case">=":return i>=a;default:return!1}},v=function(t,n){var r=n.getContent();if(n.isEncrypted()&&n.getClearContent()&&(r=n.getClearContent()),!r||!r.body||"string"!=typeof r.body)return!1;var i=e.getRoom(n.getRoomId());if(!i||!i.currentState||!i.currentState.members||!i.currentState.getMember(e.credentials.userId))return!1;var o=i.currentState.getMember(e.credentials.userId).name,s=new RegExp("(^|\\W)"+(0,a.escapeRegExp)(o)+"(\\W|$)","i");return r.body.search(s)>-1},m=function(e,t){return!1},y=function(e,t){if(!e.key)return!1;var n=_(e.key,t);if("string"!==typeof n)return!1;if(e.value)return e.value===n;var r=void 0;return r="content.body"==e.key?g("(^|\\W)",e.pattern,"(\\W|$)"):g("^",e.pattern,"$"),!!n.match(r)},g=function(e,t,r){return n[t]||(n[t]=new RegExp(e+(0,a.globToRegexp)(t)+r,"i")),n[t]},_=function(e,t){var n=e.split("."),r=void 0,i=n[0];for("content"===i?(r=t.getContent(),n.shift()):"type"===i?(r=t.getType(),n.shift()):r=t.event;n.length>0;){var o=n.shift();if((0,a.isNullOrUndefined)(r[o]))return null;r=r[o]}return r},b=function(t,n){var i=function(t,n){if(!n||!n.device)return null;if(t.getSender()==e.credentials.userId)return null;for(var i=(0,s.default)(n.device),o=0;o<i.length;++o){var a=i[o],u=n.device[a],c=r(u,a);if(c)return c}return r(t,n.global)}(t,n);if(!i)return{};var o=d.actionListToActionsObject(i.actions);return void 0===o.tweaks.highlight&&(o.tweaks.highlight="content"==i.kind),o};this.ruleMatchesEvent=function(e,t){for(var n=!0,r=0;r<e.conditions.length;++r){var i=e.conditions[r];n&=f(i,t)}return n},this.actionsForEvent=function(t){var n=function(e){var t=JSON.parse((0,o.default)(e));e.global||(e.global={}),e.global.override||(e.global.override=[]);var n=e.global.override,r=!0,s=!1,a=void 0;try{for(var u,c=function(){var e=u.value;if(!n.find((function(t){return t.rule_id===e.rule_id}))){var t=e.rule_id;console.warn("Adding default global override for "+t),n.push(e)}},d=(0,i.default)(l);!(r=(u=d.next()).done);r=!0)c()}catch(f){s=!0,a=f}finally{try{!r&&d.return&&d.return()}finally{if(s)throw a}}return t}(e.pushRules);return b(t,n)},this.getPushRuleById=function(t){for(var n=["device","global"],r=0;r<n.length;r++){var o=n[r];if(void 0!==e.pushRules[o]){var s=!0,a=!1,u=void 0;try{for(var l,d=(0,i.default)(c);!(s=(l=d.next()).done);s=!0){var f=l.value;if(void 0!==e.pushRules[o][f]){var p=!0,h=!1,v=void 0;try{for(var m,y=(0,i.default)(e.pushRules[o][f]);!(p=(m=y.next()).done);p=!0){var g=m.value;if(g.rule_id===t)return g}}catch(_){h=!0,v=_}finally{try{!p&&y.return&&y.return()}finally{if(h)throw v}}}}}catch(_){a=!0,u=_}finally{try{!s&&d.return&&d.return()}finally{if(a)throw u}}}}return null}}d.actionListToActionsObject=function(e){for(var t={notify:!1,tweaks:{}},n=0;n<e.length;++n){var i=e[n];"notify"===i?t.notify=!0:"object"===("undefined"===typeof i?"undefined":(0,r.default)(i))&&(void 0===i.value&&(i.value=!0),t.tweaks[i.set_tweak]=i.value)}return t},d.rewriteDefaultRules=function(e){var t=JSON.parse((0,o.default)(e));return t||(t={}),t.global||(t.global={}),t.global.override||(t.global.override=[]),t.global.override=t.global.override.map((function(e){var t=l.find((function(t){return t.rule_id===e.rule_id}));return t?(e.default=t.default,e.conditions=t.conditions,e.actions=t.actions,e):e})),t},e.exports=d},function(e,t,n){"use strict";var r=n(265),i=n(267);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=_,t.resolve=function(e,t){return _(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=_(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(268);function _(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var _=e=c.join(a);if(_=_.trim(),!n&&1===e.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=s.exec(_);if(k){var w=(k=k[0]).toLowerCase();this.protocol=w,_=_.substr(k.length)}if(n||k||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||k&&m[k]||(_=_.substr(2),this.slashes=!0)}if(!m[k]&&(E||k&&!y[k])){for(var S,x,T=-1,R=0;R<f.length;R++){-1!==(I=_.indexOf(f[R]))&&(-1===T||I<T)&&(T=I)}-1!==(x=-1===T?_.lastIndexOf("@"):_.lastIndexOf("@",T))&&(S=_.slice(0,x),_=_.slice(x+1),this.auth=decodeURIComponent(S)),T=-1;for(R=0;R<d.length;R++){var I;-1!==(I=_.indexOf(d[R]))&&(-1===T||I<T)&&(T=I)}-1===T&&(T=_.length),this.host=_.slice(0,T),_=_.slice(T),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var O=this.hostname.split(/\./),A=(R=0,O.length);R<A;R++){var D=O[R];if(D&&!D.match(p)){for(var P="",M=0,U=D.length;M<U;M++)D.charCodeAt(M)>127?P+="x":P+=D[M];if(!P.match(p)){var N=O.slice(0,R),L=O.slice(R+1),F=D.match(h);F&&(N.push(F[1]),L.unshift(F[2])),L.length&&(_="/"+L.join(".")+_),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",K=this.hostname||"";this.host=K+j,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!v[w])for(R=0,A=l.length;R<A;R++){var q=l[R];if(-1!==_.indexOf(q)){var B=encodeURIComponent(q);B===q&&(B=escape(q)),_=_.split(q).join(B)}}var V=_.indexOf("#");-1!==V&&(this.hash=_.substr(V),_=_.slice(0,V));var G=_.indexOf("?");if(-1!==G?(this.search=_.substr(G),this.query=_.substr(G+1),t&&(this.query=g.parse(this.query)),_=_.slice(0,G)):t&&(this.search="",this.query={}),_&&(this.pathname=_),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var $=this.search||"";this.path=j+$}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=g.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=b||_||n.host&&e.pathname,w=k,E=n.pathname&&n.pathname.split("/")||[],S=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),k=k&&(""===h[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=E.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=E.slice(-1)[0],T=(n.host||e.host||E.length>1)&&("."===x||".."===x)||""===x,R=0,I=E.length;I>=0;I--)"."===(x=E[I])?E.splice(I,1):".."===x?(E.splice(I,1),R++):R&&(E.splice(I,1),R--);if(!k&&!w)for(;R--;R)E.unshift("..");!k||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),T&&"/"!==E.join("/").substr(-1)&&E.push("");var C,O=""===E[0]||E[0]&&"/"===E[0].charAt(0);S&&(n.hostname=n.host=O?"":E.length?E.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift()));return(k=k||n.host&&E.length)&&!O&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";var r=n(13).EventEmitter,i=n(71),o=n(2);function s(e,t){this.roomId=e,this.userId=t,this.typing=!1,this.name=t,this.rawDisplayName=t,this.powerLevel=0,this.powerLevelNorm=0,this.user=null,this.membership=null,this.events={member:null},this._isOutOfBand=!1,this._updateModifiedTime()}o.inherits(s,r),s.prototype.markOutOfBand=function(){this._isOutOfBand=!0},s.prototype.isOutOfBand=function(){return this._isOutOfBand},s.prototype.setMembershipEvent=function(e,t){if("m.room.member"===e.getType()){this._isOutOfBand=!1,this.events.member=e;var n=this.membership;this.membership=e.getDirectionalContent().membership;var r=this.name;this.name=function(e,t,n){if(!t||t===e)return e;if(!o.removeHiddenChars(t))return e;if(!n)return t;var r=/@.+:.+/.test(t);if(!r){var i=n.getUserIdsWithDisplayName(t);r=i.some((function(t){return t!==e}))}if(r)return t+" ("+e+")";return t}(this.userId,e.getDirectionalContent().displayname,t),this.rawDisplayName=e.getDirectionalContent().displayname||this.userId,n!==this.membership&&(this._updateModifiedTime(),this.emit("RoomMember.membership",e,this,n)),r!==this.name&&(this._updateModifiedTime(),this.emit("RoomMember.name",e,this,r))}},s.prototype.setPowerLevelEvent=function(e){if("m.room.power_levels"===e.getType()){var t=e.getDirectionalContent(),n=t.users_default||0;o.forEach(o.values(t.users),(function(e){n=Math.max(n,e)}));var r=this.powerLevel,i=this.powerLevelNorm;t.users&&void 0!==t.users[this.userId]?this.powerLevel=t.users[this.userId]:void 0!==t.users_default?this.powerLevel=t.users_default:this.powerLevel=0,this.powerLevelNorm=0,n>0&&(this.powerLevelNorm=100*this.powerLevel/n),r===this.powerLevel&&i===this.powerLevelNorm||(this._updateModifiedTime(),this.emit("RoomMember.powerLevel",e,this))}},s.prototype.setTypingEvent=function(e){if("m.typing"===e.getType()){var t=this.typing;this.typing=!1;var n=e.getContent().user_ids;o.isArray(n)&&(-1!==n.indexOf(this.userId)&&(this.typing=!0),t!==this.typing&&(this._updateModifiedTime(),this.emit("RoomMember.typing",e,this)))}},s.prototype._updateModifiedTime=function(){this._modified=Date.now()},s.prototype.getLastModifiedTime=function(){return this._modified},s.prototype.isKicked=function(){return"leave"===this.membership&&this.events.member.getSender()!==this.events.member.getStateKey()},s.prototype.getDMInviter=function(){if(this.events.member){var e=this.events.member,t=e.getContent(),n=e.getSender();if("join"===t.membership&&(t=e.getPrevContent(),n=e.getUnsigned().prev_sender),"invite"===t.membership&&t.is_direct)return n}},s.prototype.getAvatarUrl=function(e,t,n,r,o,s){void 0===o&&(o=!0);var a=this.getMxcAvatarUrl();if(!a&&!o)return null;var u=i.getHttpUriForMxc(e,a,t,n,r,s);return u||(o?i.getIdenticonUri(e,this.userId,t,n):null)},s.prototype.getMxcAvatarUrl=function(){return this.events.member?this.events.member.getDirectionalContent().avatar_url:this.user?this.user.avatarUrl:null},e.exports=s},function(e,t,n){"use strict";var r=n(276);function i(e,t,n){for(var r=t.split("."),i=e,o=0;o<r.length-1;o++)i[r[o]]||(i[r[o]]={}),i=i[r[o]];i[r[r.length-1]]=n}function o(e,t){this.userId=e,this.filterId=t,this.definition={}}o.LAZY_LOADING_MESSAGES_FILTER={lazy_load_members:!0},o.LAZY_LOADING_SYNC_FILTER={room:{state:o.LAZY_LOADING_MESSAGES_FILTER}},o.prototype.getFilterId=function(){return this.filterId},o.prototype.getDefinition=function(){return this.definition},o.prototype.setDefinition=function(e){this.definition=e;var t=e.room,n={};t&&(t.rooms&&(n.rooms=t.rooms),t.rooms&&(n.not_rooms=t.not_rooms),this._include_leave=t.include_leave||!1),this._room_filter=new r(n),this._room_timeline_filter=new r(t&&t.timeline||{})},o.prototype.getRoomTimelineFilterComponent=function(){return this._room_timeline_filter},o.prototype.filterRoomTimeline=function(e){return this._room_timeline_filter.filter(this._room_filter.filter(e))},o.prototype.setTimelineLimit=function(e){i(this.definition,"room.timeline.limit",e)},o.prototype.setIncludeLeaveRooms=function(e){i(this.definition,"room.include_leave",e)},o.fromJson=function(e,t,n){var r=new o(e,t);return r.setDefinition(n),r},e.exports=o},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],s=o.obj[o.prop],a=Object.keys(s),u=0;u<a.length;++u){var c=a[u],l=s[c];"object"===typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:s,prop:c}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)"undefined"!==typeof n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(e,t,n){if(0===e.length)return e;var r=e;if("symbol"===typeof e?r=Symbol.prototype.toString.call(e):"string"!==typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",s=0;s<r.length;++s){var a=r.charCodeAt(s);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=r.charAt(s):a<128?i+=o[a]:a<2048?i+=o[192|a>>6]+o[128|63&a]:a<55296||a>=57344?i+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(s+=1,a=65536+((1023&a)<<10|1023&r.charCodeAt(s)),i+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return i},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,o){if(!n)return t;if("object"!==typeof n){if(i(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var a=t;return i(t)&&!i(n)&&(a=s(t,o)),i(t)&&i(n)?(n.forEach((function(n,i){if(r.call(t,i)){var s=t[i];s&&"object"===typeof s&&n&&"object"===typeof n?t[i]=e(s,n,o):t.push(n)}else t[i]=n})),t):Object.keys(n).reduce((function(t,i){var s=n[i];return r.call(t,i)?t[i]=e(t[i],s,o):t[i]=s,t}),a)}}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,u=s(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var d=0;d<a.length;d++)o.call(n,a[d])&&(u[a[d]]=n[a[d]])}}return u}},function(e,t,n){"use strict";(function(t){e.exports.ContentHelpers=n(104),e.exports.MatrixEvent=n(19).MatrixEvent,e.exports.EventStatus=n(19).EventStatus,e.exports.MemoryStore=n(115).MemoryStore,e.exports.MatrixInMemoryStore=e.exports.MemoryStore,e.exports.IndexedDBStore=n(116).IndexedDBStore,e.exports.IndexedDBStoreBackend=n(116).IndexedDBStoreBackend,e.exports.SyncAccumulator=n(119),e.exports.MatrixHttpApi=n(66).MatrixHttpApi,e.exports.MatrixError=n(66).MatrixError,e.exports.InvalidStoreError=n(87).InvalidStoreError,e.exports.MatrixClient=n(123).MatrixClient,e.exports.Room=n(145),e.exports.Group=n(147),e.exports.EventTimeline=n(46),e.exports.EventTimelineSet=n(146),e.exports.RoomMember=n(99),e.exports.RoomState=n(144),e.exports.User=n(64),e.exports.MatrixScheduler=n(288),e.exports.WebStorageSessionStore=n(289),e.exports.CRYPTO_ENABLED=n(123).CRYPTO_ENABLED,e.exports.ContentRepo=n(71),e.exports.Filter=n(100),e.exports.TimelineWindow=n(290).TimelineWindow,e.exports.InteractiveAuth=n(291),e.exports.AutoDiscovery=n(292).AutoDiscovery,e.exports.SERVICE_TYPES=n(148).SERVICE_TYPES,e.exports.MemoryCryptoStore=n(92).default,e.exports.IndexedDBCryptoStore=n(55).default,e.exports.createNewMatrixCall=n(58).createNewMatrixCall,e.exports.setMatrixCallAudioOutput=n(58).setAudioOutput,e.exports.setMatrixCallAudioInput=n(58).setAudioInput,e.exports.setMatrixCallVideoInput=n(58).setVideoInput;var r=void 0;e.exports.request=function(e){r=e},e.exports.getRequest=function(){return r},e.exports.wrapRequest=function(e){var t=r;r=function(n,r){return e(t,n,r)}};var i=function(){return new e.exports.MemoryCryptoStore};e.exports.setCryptoStoreFactory=function(e){i=e},e.exports.createClient=function(n){return"string"===typeof n&&(n={baseUrl:n}),n.request=n.request||r,n.store=n.store||new e.exports.MemoryStore({localStorage:t.localStorage}),n.scheduler=n.scheduler||new e.exports.MatrixScheduler,n.cryptoStore=n.cryptoStore||i(),new e.exports.MatrixClient(n)}}).call(this,n(6))},function(e,t,n){"use strict";e.exports={makeHtmlMessage:function(e,t){return{msgtype:"m.text",format:"org.matrix.custom.html",body:e,formatted_body:t}},makeHtmlNotice:function(e,t){return{msgtype:"m.notice",format:"org.matrix.custom.html",body:e,formatted_body:t}},makeHtmlEmote:function(e,t){return{msgtype:"m.emote",format:"org.matrix.custom.html",body:e,formatted_body:t}},makeTextMessage:function(e){return{msgtype:"m.text",body:e}},makeNotice:function(e){return{msgtype:"m.notice",body:e}},makeEmoteMessage:function(e){return{msgtype:"m.emote",body:e}}}},function(e,t,n){e.exports={default:n(159),__esModule:!0}},function(e,t,n){e.exports=!n(17)&&!n(28)((function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a}))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(30),i=n(31),o=n(168)(!1),s=n(77)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(11).document;e.exports=r&&r.documentElement},function(e,t,n){e.exports=n(27)},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(49);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(108),i=n(79).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(52),i=n(47),o=n(31),s=n(73),a=n(30),u=n(106),c=Object.getOwnPropertyDescriptor;t.f=n(17)?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=o(n(22)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(2),a=n(64);e.exports.MemoryStore=function(e){e=e||{},this.rooms={},this.groups={},this.users={},this.syncToken=null,this.filters={},this.accountData={},this.localStorage=e.localStorage,this._oobMembers={},this._clientOptions={}},e.exports.MemoryStore.prototype={getSyncToken:function(){return this.syncToken},isNewlyCreated:function(){return i.default.resolve(!0)},setSyncToken:function(e){this.syncToken=e},storeGroup:function(e){this.groups[e.groupId]=e},getGroup:function(e){return this.groups[e]||null},getGroups:function(){return s.values(this.groups)},storeRoom:function(e){this.rooms[e.roomId]=e,e.currentState.on("RoomState.members",this._onRoomMember.bind(this));var t=this;e.currentState.getMembers().forEach((function(n){t._onRoomMember(null,e.currentState,n)}))},_onRoomMember:function(e,t,n){if("invite"!==n.membership){var r=this.users[n.userId]||new a(n.userId);n.name&&(r.setDisplayName(n.name),n.events.member&&r.setRawDisplayName(n.events.member.getDirectionalContent().displayname)),n.events.member&&n.events.member.getContent().avatar_url&&r.setAvatarUrl(n.events.member.getContent().avatar_url),this.users[r.userId]=r}},getRoom:function(e){return this.rooms[e]||null},getRooms:function(){return s.values(this.rooms)},removeRoom:function(e){this.rooms[e]&&this.rooms[e].removeListener("RoomState.members",this._onRoomMember),delete this.rooms[e]},getRoomSummaries:function(){return s.map(s.values(this.rooms),(function(e){return e.summary}))},storeUser:function(e){this.users[e.userId]=e},getUser:function(e){return this.users[e]||null},getUsers:function(){return s.values(this.users)},scrollback:function(e,t){return[]},storeEvents:function(e,t,n,r){},storeFilter:function(e){e&&(this.filters[e.userId]||(this.filters[e.userId]={}),this.filters[e.userId][e.filterId]=e)},getFilter:function(e,t){return this.filters[e]&&this.filters[e][t]?this.filters[e][t]:null},getFilterIdByName:function(e){if(!this.localStorage)return null;try{return this.localStorage.getItem("mxjssdk_memory_filter_"+e)}catch(t){}return null},setFilterIdByName:function(e,t){if(this.localStorage)try{this.localStorage.setItem("mxjssdk_memory_filter_"+e,t)}catch(n){}},storeAccountDataEvents:function(e){var t=this;e.forEach((function(e){t.accountData[e.getType()]=e}))},getAccountData:function(e){return this.accountData[e]},setSyncData:function(e){return i.default.resolve()},wantsSave:function(){return!1},save:function(e){},startup:function(){return i.default.resolve()},getSavedSync:function(){return i.default.resolve(null)},getSavedSyncToken:function(){return i.default.resolve(null)},deleteAllData:function(){return this.rooms={},this.users={},this.syncToken=null,this.filters={},this.accountData={},i.default.resolve()},getOutOfBandMembers:function(e){return i.default.resolve(this._oobMembers[e]||null)},setOutOfBandMembers:function(e,t){return this._oobMembers[e]=t,i.default.resolve()},clearOutOfBandMembers:function(){return this._oobMembers={},i.default.resolve()},getClientOptions:function(){return i.default.resolve(this._clientOptions)},storeClientOptions:function(e){return this._clientOptions=(0,r.default)({},e),i.default.resolve()}}},function(e,t,n){"use strict";(function(t){var r=y(n(8)),i=y(n(117)),o=n(1),s=y(o),a=y(n(5)),u=y(n(18)),c=n(115),l=y(n(2)),d=n(13),f=y(n(197)),p=y(n(202)),h=y(n(64)),v=n(19),m=y(n(3));function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){if(c.MemoryStore.call(this,e),!e.indexedDB)throw new Error("Missing required option: indexedDB");if(e.workerScript){var n=e.workerApi;n||(n=t.Worker),this.backend=new p.default(e.workerScript,e.dbName,n)}else this.backend=new f.default(e.indexedDB,e.dbName);this.startedUp=!1,this._syncTs=0,this._userModifiedMap={}};function _(e,t){return function(){var n=(0,o.coroutine)(r.default.mark((function n(){for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];var l;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,o.resolve)(e.call.apply(e,[this].concat(a)));case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),m.default.error("IndexedDBStore failure, degrading to MemoryStore",n.t0),this.emit("degraded",n.t0),n.prev=10,m.default.log("IndexedDBStore trying to delete degraded data"),n.next=14,(0,o.resolve)(this.backend.clearDatabase());case 14:m.default.log("IndexedDBStore delete after degrading succeeeded"),n.next=20;break;case 17:n.prev=17,n.t1=n.catch(10),m.default.warn("IndexedDBStore delete after degrading failed",n.t1);case 20:if((0,i.default)(this,c.MemoryStore.prototype),!t){n.next=25;break}return n.next=24,(0,o.resolve)((l=c.MemoryStore.prototype[t]).call.apply(l,[this].concat(a)));case 24:return n.abrupt("return",n.sent);case 25:case"end":return n.stop()}}),n,this,[[0,6],[10,17]])})));return function(e){return n.apply(this,arguments)}}()}l.default.inherits(g,c.MemoryStore),l.default.extend(g.prototype,d.EventEmitter.prototype),g.exists=function(e,t){return f.default.exists(e,t)},g.prototype.startup=function(){var e=this;return this.startedUp?(m.default.log("IndexedDBStore.startup: already started"),s.default.resolve()):(m.default.log("IndexedDBStore.startup: connecting to backend"),this.backend.connect().then((function(){return m.default.log("IndexedDBStore.startup: loading presence events"),e.backend.getUserPresenceEvents()})).then((function(t){m.default.log("IndexedDBStore.startup: processing presence events"),t.forEach((function(t){var n=(0,u.default)(t,2),r=n[0],i=n[1],o=new h.default(r);i&&o.setPresenceEvent(new v.MatrixEvent(i)),e._userModifiedMap[o.userId]=o.getLastModifiedTime(),e.storeUser(o)}))})))},g.prototype.getSavedSync=_((function(){return this.backend.getSavedSync()}),"getSavedSync"),g.prototype.isNewlyCreated=_((function(){return this.backend.isNewlyCreated()}),"isNewlyCreated"),g.prototype.getSavedSyncToken=_((function(){return this.backend.getNextBatchToken()}),"getSavedSyncToken"),g.prototype.deleteAllData=_((function(){return c.MemoryStore.prototype.deleteAllData.call(this),this.backend.clearDatabase().then((function(){m.default.log("Deleted indexeddb data.")}),(function(e){throw m.default.error("Failed to delete indexeddb data: "+e),e}))})),g.prototype.wantsSave=function(){return Date.now()-this._syncTs>3e5},g.prototype.save=function(e){return e||this.wantsSave()?this._reallySave():s.default.resolve()},g.prototype._reallySave=_((function(){this._syncTs=Date.now();var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=(0,a.default)(this.getUsers());!(t=(i=o.next()).done);t=!0){var s=i.value;this._userModifiedMap[s.userId]!==s.getLastModifiedTime()&&(s.events.presence&&(e.push([s.userId,s.events.presence.event]),this._userModifiedMap[s.userId]=s.getLastModifiedTime()))}}catch(u){n=!0,r=u}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return this.backend.syncToDatabase(e)})),g.prototype.setSyncData=_((function(e){return this.backend.setSyncData(e)}),"setSyncData"),g.prototype.getOutOfBandMembers=_((function(e){return this.backend.getOutOfBandMembers(e)}),"getOutOfBandMembers"),g.prototype.setOutOfBandMembers=_((function(e,t){return c.MemoryStore.prototype.setOutOfBandMembers.call(this,e,t),this.backend.setOutOfBandMembers(e,t)}),"setOutOfBandMembers"),g.prototype.clearOutOfBandMembers=_((function(e){return c.MemoryStore.prototype.clearOutOfBandMembers.call(this),this.backend.clearOutOfBandMembers(e)}),"clearOutOfBandMembers"),g.prototype.getClientOptions=_((function(){return this.backend.getClientOptions()}),"getClientOptions"),g.prototype.storeClientOptions=_((function(e){return c.MemoryStore.prototype.storeClientOptions.call(this,e),this.backend.storeClientOptions(e)}),"storeClientOptions"),e.exports.IndexedDBStore=g}).call(this,n(6))},function(e,t,n){e.exports={default:n(190),__esModule:!0}},function(e,t,n){var r=n(14),i=n(16),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(23)(Function.call,n(114).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var r=c(n(41)),i=c(n(9)),o=c(n(10)),s=c(n(12)),a=c(n(2)),u=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,o.default)(this,e),(t=t||{}).maxTimelineEntries=t.maxTimelineEntries||50,this.opts=t,this.accountData={},this.inviteRooms={},this.joinRooms={},this.nextBatch=null,this.groups={invite:{},join:{},leave:{}}}return(0,s.default)(e,[{key:"accumulate",value:function(e){this._accumulateRooms(e),this._accumulateGroups(e),this._accumulateAccountData(e),this.nextBatch=e.next_batch}},{key:"_accumulateAccountData",value:function(e){var t=this;e.account_data&&e.account_data.events&&e.account_data.events.forEach((function(e){t.accountData[e.type]=e}))}},{key:"_accumulateRooms",value:function(e){var t=this;e.rooms&&(e.rooms.invite&&(0,i.default)(e.rooms.invite).forEach((function(n){t._accumulateRoom(n,"invite",e.rooms.invite[n])})),e.rooms.join&&(0,i.default)(e.rooms.join).forEach((function(n){t._accumulateRoom(n,"join",e.rooms.join[n])})),e.rooms.leave&&(0,i.default)(e.rooms.leave).forEach((function(n){t._accumulateRoom(n,"leave",e.rooms.leave[n])})))}},{key:"_accumulateRoom",value:function(e,t,n){switch(t){case"invite":this._accumulateInviteState(e,n);break;case"join":this.inviteRooms[e]&&delete this.inviteRooms[e],this._accumulateJoinState(e,n);break;case"leave":this.inviteRooms[e]?delete this.inviteRooms[e]:delete this.joinRooms[e];break;default:u.default.error("Unknown cateogory: ",t)}}},{key:"_accumulateInviteState",value:function(e,t){if(t.invite_state&&t.invite_state.events)if(this.inviteRooms[e]){var n=this.inviteRooms[e];t.invite_state.events.forEach((function(e){for(var t=!1,r=0;r<n.invite_state.events.length;r++){var i=n.invite_state.events[r];i.type===e.type&&i.state_key==e.state_key&&(n.invite_state.events[r]=e,t=!0)}t||n.invite_state.events.push(e)}))}else this.inviteRooms[e]={invite_state:t.invite_state}}},{key:"_accumulateJoinState",value:function(e,t){this.joinRooms[e]||(this.joinRooms[e]={_currentState:(0,r.default)(null),_timeline:[],_accountData:(0,r.default)(null),_unreadNotifications:{},_summary:{},_readReceipts:{}});var n=this.joinRooms[e];if(t.account_data&&t.account_data.events&&t.account_data.events.forEach((function(e){n._accountData[e.type]=e})),t.unread_notifications&&(n._unreadNotifications=t.unread_notifications),t.summary){var o=n._summary,s=t.summary;o["m.heroes"]=s["m.heroes"]||o["m.heroes"],o["m.joined_member_count"]=s["m.joined_member_count"]||o["m.joined_member_count"],o["m.invited_member_count"]=s["m.invited_member_count"]||o["m.invited_member_count"]}if(t.ephemeral&&t.ephemeral.events&&t.ephemeral.events.forEach((function(e){"m.receipt"===e.type&&e.content&&(0,i.default)(e.content).forEach((function(t){e.content[t]["m.read"]&&(0,i.default)(e.content[t]["m.read"]).forEach((function(r){n._readReceipts[r]={data:e.content[t]["m.read"][r],eventId:t}}))}))})),t.timeline&&t.timeline.limited&&(n._timeline=[]),t.state&&t.state.events&&t.state.events.forEach((function(e){d(n._currentState,e)})),t.timeline&&t.timeline.events&&t.timeline.events.forEach((function(e,r){d(n._currentState,e),n._timeline.push({event:e,token:0===r?t.timeline.prev_batch:null})})),n._timeline.length>this.opts.maxTimelineEntries)for(var a=n._timeline.length-this.opts.maxTimelineEntries;a<n._timeline.length;a++)if(n._timeline[a].token){n._timeline=n._timeline.slice(a,n._timeline.length);break}}},{key:"_accumulateGroups",value:function(e){var t=this;e.groups&&(e.groups.invite&&(0,i.default)(e.groups.invite).forEach((function(n){t._accumulateGroup(n,"invite",e.groups.invite[n])})),e.groups.join&&(0,i.default)(e.groups.join).forEach((function(n){t._accumulateGroup(n,"join",e.groups.join[n])})),e.groups.leave&&(0,i.default)(e.groups.leave).forEach((function(n){t._accumulateGroup(n,"leave",e.groups.leave[n])})))}},{key:"_accumulateGroup",value:function(e,t,n){for(var r=["invite","join","leave"],i=0;i<r.length;i++){var o=r[i];delete this.groups[o][e]}this.groups[t][e]=n}},{key:"getJSON",value:function(){var e=this,t={join:{},invite:{},leave:{}};(0,i.default)(this.inviteRooms).forEach((function(n){t.invite[n]=e.inviteRooms[n]})),(0,i.default)(this.joinRooms).forEach((function(n){var o=e.joinRooms[n],s={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:o._unreadNotifications,summary:o._summary};(0,i.default)(o._accountData).forEach((function(e){s.account_data.events.push(o._accountData[e])}));var u={type:"m.receipt",room_id:n,content:{}};(0,i.default)(o._readReceipts).forEach((function(e){var t=o._readReceipts[e];u.content[t.eventId]||(u.content[t.eventId]={"m.read":{}}),u.content[t.eventId]["m.read"][e]=t.data})),(0,i.default)(u.content).length>0&&s.ephemeral.events.push(u),o._timeline.forEach((function(e){if(!s.timeline.prev_batch){if(!e.token)return;s.timeline.prev_batch=e.token}s.timeline.events.push(e.event)}));for(var c=(0,r.default)(null),l=s.timeline.events.length-1;l>=0;l--){var f=s.timeline.events[l];if(null!==f.state_key&&void 0!==f.state_key){var p=a.default.deepCopy(f);p.unsigned&&(p.unsigned.prev_content&&(p.content=p.unsigned.prev_content),p.unsigned.prev_sender&&(p.sender=p.unsigned.prev_sender)),d(c,p)}}(0,i.default)(o._currentState).forEach((function(e){(0,i.default)(o._currentState[e]).forEach((function(t){var n=o._currentState[e][t];c[e]&&c[e][t]&&(n=c[e][t]),s.state.events.push(n)}))})),t.join[n]=s}));var n=[];return(0,i.default)(this.accountData).forEach((function(t){n.push(e.accountData[t])})),{nextBatch:this.nextBatch,roomsData:t,groupsData:this.groups,accountData:n}}},{key:"getNextBatchToken",value:function(){return this.nextBatch}}]),e}();function d(e,t){null!==t.state_key&&void 0!==t.state_key&&t.type&&(e[t.type]||(e[t.type]=(0,r.default)(null)),e[t.type][t.state_key]=t)}e.exports=l},function(e,t,n){e.exports={default:n(200),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exists=function(e,t){return new o.default((function(n,r){var i=!0,o=e.open(t);o.onupgradeneeded=function(){i=!1},o.onblocked=function(){return r()},o.onsuccess=function(){o.result.close(),i||e.deleteDatabase(t),n(i)},o.onerror=function(e){return r(e.target.error)}}))};var r,i=n(1),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";(function(t){var r=S(n(21)),i=S(n(22)),o=S(n(53)),s=S(n(32)),a=n(1),u=S(a),c=S(n(8)),l=S(n(9)),d=S(n(18)),f=S(n(45)),p=S(n(5)),h=function(){var e=(0,a.coroutine)(c.default.mark((function e(t,n,r,i,o,s){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._crypto){e.next=2;break}throw new Error("End-to-End encryption disabled");case 2:return e.next=4,(0,a.resolve)(t._crypto.setDeviceVerification(n,r,i,o,s));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s){return e.apply(this,arguments)}}(),v=n(2),m=S(n(91)),y=S(n(226)),g=S(n(3)),_=n(233),b=S(_),k=n(140),w=n(139),E=n(68);function S(e){return e&&e.__esModule?e:{default:e}}var x=n(97),T=n(13).EventEmitter,R=n(98),I=n(66),C=n(19).MatrixEvent,O=n(19).EventStatus,A=n(46),D=n(273),P=n(275),M=n(58),U=n(2),N=n(71),L=n(100),F=n(277),j=n(287),K=I.MatrixError,q=n(104),B=n(35);u.default.config({warnings:!1});var V=(0,_.isCryptoAvailable)();function G(e,t,n){var r=[],i=!0,o=!1,s=void 0;try{for(var a,u=(0,p.default)((0,f.default)(e));!(i=(a=u.next()).done);i=!0){var c=(0,d.default)(a.value,2),l=c[0],h=c[1];try{var v=$(h,t);v.session_id=l,v.room_id=n,r.push(v)}catch(m){g.default.log("Failed to decrypt megolm session from backup",m)}}}catch(y){o=!0,s=y}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}return r}function $(e,t){return JSON.parse(t.decrypt(e.session_data.ephemeral,e.session_data.mac,e.session_data.ciphertext))}function z(e){var t=this;e.baseUrl=U.ensureNoTrailingSlash(e.baseUrl),e.idBaseUrl=U.ensureNoTrailingSlash(e.idBaseUrl),j.call(this,e),this.olmVersion=null,this.reEmitter=new m.default(this),this.store=e.store||new P,this.deviceId=e.deviceId||null;var n=e.userId||null;if(this.credentials={userId:n},this.scheduler=e.scheduler,this.scheduler){var r=this;this.scheduler.setProcessFunction((function(e){var t=r.getRoom(e.getRoomId());return e.status!==O.SENDING&&Q(t,e,O.SENDING),X(r,e)}))}this.clientRunning=!1,this.callList={};var i=M.createNewMatrixCall(this);this._supportsVoip=!1,i&&(!function(e){var t={},n=[];function r(){if("SYNCING"===e.getSyncState()){if(n.some((function(e){return e.isBeingDecrypted()})))return;for(var t={},r=n.length-1;r>=0;r--){var o=n[r];"m.call.answer"!==o.getType()&&"m.call.hangup"!==o.getType()||(t[o.getContent().call_id]="yep")}n.forEach((function(e){"m.call.invite"===e.getType()&&t[e.getContent().call_id]||i(e)})),n=[]}}function i(n){var r=n.getContent(),i=r.call_id?e.callList[r.call_id]:void 0,o=void 0;if("m.call.invite"===n.getType()){if(n.getSender()===e.credentials.userId)return;if(n.getAge()>r.lifetime)return;if(i&&"ended"===i.state)return;if(i&&g.default.log("WARN: Already have a MatrixCall with id %s but got an invite. Clobbering.",r.call_id),!(i=M.createNewMatrixCall(e,n.getRoomId(),{forceTURN:e._forceTURN})))return void g.default.log("Incoming call ID "+r.call_id+" but this client doesn't support WebRTC");if(i.callId=r.call_id,i._initWithInvite(n),e.callList[i.callId]=i,t[i.callId])for(o=0;o<t[i.callId].length;o++)i._gotRemoteIceCandidate(t[i.callId][o]);var s=void 0,a=U.values(e.callList);for(o=0;o<a.length;++o){var u=a[o];if(i.roomId===u.roomId&&"outbound"===u.direction&&-1!==["wait_local_media","create_offer","invite_sent"].indexOf(u.state)){s=u;break}}s?"wait_local_media"===s.state||"create_offer"===s.state||s.callId>i.callId?(g.default.log("Glare detected: answering incoming call "+i.callId+" and canceling outgoing call "+s.callId),s._replacedBy(i),i.answer()):(g.default.log("Glare detected: rejecting incoming call "+i.callId+" and keeping outgoing call "+s.callId),i.hangup()):e.emit("Call.incoming",i)}else if("m.call.answer"===n.getType()){if(!i)return;n.getSender()===e.credentials.userId?"ringing"===i.state&&i._onAnsweredElsewhere(r):i._receivedAnswer(r)}else if("m.call.candidates"===n.getType()){if(n.getSender()===e.credentials.userId)return;if(i)for(o=0;o<r.candidates.length;o++)i._gotRemoteIceCandidate(r.candidates[o]);else t[r.call_id]||(t[r.call_id]=[]),t[r.call_id]=t[r.call_id].concat(r.candidates)}else"m.call.hangup"===n.getType()&&(i?"ended"!==i.state&&(i._onHangupReceived(r),delete e.callList[r.call_id]):(i=M.createNewMatrixCall(e,n.getRoomId()))&&(i.callId=r.call_id,i._initWithHangup(n),e.callList[r.call_id]=i))}e.on("sync",r),e.on("event",(function(e){(0===e.getType().indexOf("m.call.")||e.isBeingDecrypted())&&n.push(e),(e.isBeingDecrypted()||e.isDecryptionFailure())&&e.once("Event.decrypted",(function(){-1!==e.getType().indexOf("m.call.")&&(n.includes(e)?r():i(e))}))}))}(this),this._supportsVoip=!0),this._syncingRetry=null,this._syncApi=null,this._peekSync=null,this._isGuest=!1,this._ongoingScrollbacks={},this.timelineSupport=Boolean(e.timelineSupport),this.urlPreviewCache={},this._notifTimelineSet=null,this.unstableClientRelationAggregation=!!e.unstableClientRelationAggregation,this._crypto=null,this._cryptoStore=e.cryptoStore,this._sessionStore=e.sessionStore,this._verificationMethods=e.verificationMethods,this._cryptoCallbacks=e.cryptoCallbacks,this._forceTURN=e.forceTURN||!1,this._fallbackICEServerAllowed=e.fallbackICEServerAllowed||!1,this._roomList=new y.default(this._cryptoStore),this._pushProcessor=new x(this),this._serverVersionsCache=null,this._cachedCapabilities=null,this.on("Event.decrypted",(function(e){var n=e.getPushActions(),r=t._pushProcessor.actionsForEvent(e);e.setPushActions(r);var i=t.getRoom(e.getRoomId());if(i){var o=i.getUnreadNotificationCount("highlight"),s=!(!n||!n.tweaks)&&!!n.tweaks.highlight,a=!(!r||!r.tweaks)&&!!r.tweaks.highlight;if((s!==a||o>0)&&!i.hasUserReadEvent(t.getUserId(),e.getId())){var u=o;a&&!s&&u++,!a&&s&&u--,i.setUnreadNotificationCount("highlight",u),i.getUnreadNotificationCount("total")<u&&i.setUnreadNotificationCount("total",u)}}})),this.on("Room.receipt",(function(e,n){if(n&&t.isRoomEncrypted(n.roomId)){var r=e.getContent();if(!((0,l.default)(r).filter((function(e){return(0,l.default)(r[e]["m.read"]).includes(t.getUserId())})).length>0))return;for(var i=n.getLiveTimeline().getEvents(),o=0,s=i.length-1;s>=0;s--){if(s===i.length-20)return;var a=i[s];if(n.hasUserReadEvent(t.getUserId(),a.getId()))break;o+=t.getPushActionsForEvent(a).tweaks.highlight?1:0}n.setUnreadNotificationCount("highlight",o)}}))}function W(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=function(){var t=o.value;e.prototype[t]=function(){var e;if(!this._crypto)throw new Error("End-to-end encryption disabled");return(e=this._crypto)[t].apply(e,arguments)}},a=(0,p.default)(t);!(n=(o=a.next()).done);n=!0)s()}catch(u){r=!0,i=u}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}function H(e,t,n,r){return u.default.resolve().then((function(){var r=function(e,t,n){if(t.isEncrypted())return null;if(!e.isRoomEncrypted(t.getRoomId()))return null;if("m.reaction"===t.getType())return null;if(!e._crypto)throw new Error("This room is configured to use encryption, but your client does not support encryption.");return e._crypto.encryptEvent(t,n)}(e,n,t);return r?(Q(t,n,O.ENCRYPTING),r.then((function(){Q(t,n,O.SENDING)}))):null})).then((function(){var r=void 0;return e.scheduler&&(r=e.scheduler.queueEvent(n))&&e.scheduler.getQueueForEvent(n).length>1&&Q(t,n,O.QUEUED),r||(r=X(e,n)),r})).then((function(e){return t&&t.updatePendingEvent(n,O.SENT,e.event_id),r&&r(null,e),e}),(function(e){g.default.error("Error sending event",e.stack||e);try{n.error=e,Q(t,n,O.NOT_SENT),e.event=n,r&&r(e)}catch(i){g.default.error("Exception in error handler!",i.stack||e)}throw e}))}function Y(e,t,n){return"m.reaction"===n?n:e.isRoomEncrypted(t)?"m.room.encrypted":n}function Q(e,t,n){e?e.updatePendingEvent(t,n):t.setStatus(n)}function X(e,t){var n=t._txnId?t._txnId:e.makeTxnId(),r={$roomId:t.getRoomId(),$eventType:t.getWireType(),$stateKey:t.getStateKey(),$txnId:n},o=void 0;if(t.isState()){var s="/rooms/$roomId/state/$eventType";t.getStateKey()&&t.getStateKey().length>0&&(s="/rooms/$roomId/state/$eventType/$stateKey"),o=U.encodeUri(s,r)}else if(t.isRedaction()){o=U.encodeUri("/rooms/$roomId/redact/$redactsEventId/$txnId",(0,i.default)({$redactsEventId:t.event.redacts},r))}else o=U.encodeUri("/rooms/$roomId/send/$eventType/$txnId",r);return e._http.authedRequest(void 0,"PUT",o,void 0,t.getWireContent()).then((function(e){return g.default.log("Event sent to "+t.getRoomId()+" with event id "+e.event_id),e}))}function J(e,t,n,r,i,o){U.isFunction(i)&&(o=i,i=void 0);var s=U.encodeUri("/rooms/$room_id/$membership",{$room_id:t,$membership:r});return e._http.authedRequest(o,"POST",s,void 0,{user_id:n,reason:i})}function Z(e,t,n,r){var i=U.encodeUri("/presence/list/$userId",{$userId:t.credentials.userId});return t._http.authedRequest(e,r,i,void 0,n)}function ee(e,t,n){e&&e(n),t(n)}function te(e,t,n){e&&e(null,n),t(n)}function ne(e){return function(t){var n=new C(t);n.isEncrypted()&&(e.reEmitter.reEmit(n,["Event.decrypted"]),n.attemptDecryption(e._crypto));var r=e.getRoom(n.getRoomId());return r&&r.reEmitter.reEmit(n,["Event.replaced"]),n}}U.inherits(z,T),U.extend(z.prototype,j.prototype),z.prototype.clearStores=function(){if(this._clientRunning)throw new Error("Cannot clear stores while client is running");var e=[];return e.push(this.store.deleteAllData()),this._cryptoStore&&e.push(this._cryptoStore.deleteAllData()),u.default.all(e)},z.prototype.getUserId=function(){return this.credentials&&this.credentials.userId?this.credentials.userId:null},z.prototype.getDomain=function(){return this.credentials&&this.credentials.userId?this.credentials.userId.replace(/^.*?:/,""):null},z.prototype.getUserIdLocalpart=function(){return this.credentials&&this.credentials.userId?this.credentials.userId.split(":")[0].substring(1):null},z.prototype.getDeviceId=function(){return this.deviceId},z.prototype.supportsVoip=function(){return this._supportsVoip},z.prototype.setForceTURN=function(e){this._forceTURN=e},z.prototype.getSyncState=function(){return this._syncApi?this._syncApi.getSyncState():null},z.prototype.getSyncStateData=function(){return this._syncApi?this._syncApi.getSyncStateData():null},z.prototype.isGuest=function(){return this._isGuest},z.prototype.getScheduler=function(){return this.scheduler},z.prototype.setGuest=function(e){this._isGuest=e},z.prototype.retryImmediately=function(){return this._syncApi.retryImmediately()},z.prototype.getNotifTimelineSet=function(){return this._notifTimelineSet},z.prototype.setNotifTimelineSet=function(e){this._notifTimelineSet=e},z.prototype.getCapabilities=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(new Date).getTime();return this._cachedCapabilities&&!t&&n<this._cachedCapabilities.expiration?(g.default.log("Returning cached capabilities"),u.default.resolve(this._cachedCapabilities.capabilities)):this._http.authedRequest(void 0,"GET","/capabilities").catch((function(e){return g.default.error(e),null})).then((function(t){t||(t={});var r=t.capabilities||{},i=(0,l.default)(r).length?216e5:6e4+5e3*Math.random();return e._cachedCapabilities={capabilities:r,expiration:n+i},g.default.log("Caching capabilities: ",r),r}))},z.prototype.initCrypto=(0,a.coroutine)(c.default.mark((function e(){var t,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_.isCryptoAvailable)()){e.next=2;break}throw new Error("End-to-end encryption not supported in this js-sdk build: did you remember to load the olm library?");case 2:if(!this._crypto){e.next=5;break}return g.default.warn("Attempt to re-initialise e2e encryption on MatrixClient"),e.abrupt("return");case 5:if(this._sessionStore){e.next=7;break}throw new Error("Cannot enable encryption: no sessionStore provided");case 7:if(this._cryptoStore){e.next=9;break}throw new Error("Cannot enable encryption: no cryptoStore provided");case 9:return g.default.log("Crypto: initialising roomlist..."),e.next=12,(0,a.resolve)(this._roomList.init());case 12:if(null!==(t=this.getUserId())){e.next=15;break}throw new Error("Cannot enable encryption on MatrixClient with unknown userId: ensure userId is passed in createClient().");case 15:if(null!==this.deviceId){e.next=17;break}throw new Error("Cannot enable encryption on MatrixClient with unknown deviceId: ensure deviceId is passed in createClient().");case 17:return n=new b.default(this,this._sessionStore,t,this.deviceId,this.store,this._cryptoStore,this._roomList,this._verificationMethods),this.reEmitter.reEmit(n,["crypto.keyBackupFailed","crypto.keyBackupSessionsRemaining","crypto.roomKeyRequest","crypto.roomKeyRequestCancellation","crypto.warning","crypto.devicesUpdated","deviceVerificationChanged","userVerificationChanged","crossSigning.keysChanged"]),g.default.log("Crypto: initialising crypto object..."),e.next=22,(0,a.resolve)(n.init());case 22:this.olmVersion=b.default.getOlmVersion(),n.registerEventHandlers(this),this._crypto=n;case 25:case"end":return e.stop()}}),e,this)}))),z.prototype.isCryptoEnabled=function(){return null!==this._crypto},z.prototype.getDeviceEd25519Key=function(){return this._crypto?this._crypto.getDeviceEd25519Key():null},z.prototype.uploadKeys=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.uploadDeviceKeys()},z.prototype.downloadKeys=function(e,t){return null===this._crypto?u.default.reject(new Error("End-to-end encryption disabled")):this._crypto.downloadKeys(e,t)},z.prototype.getStoredDevicesForUser=function(){var e=(0,a.method)((function(e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getStoredDevicesForUser(e)||[]}));return function(t){return e.apply(this,arguments)}}(),z.prototype.getStoredDevice=function(){var e=(0,a.method)((function(e,t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getStoredDevice(e,t)||null}));return function(t,n){return e.apply(this,arguments)}}(),z.prototype.setDeviceVerified=function(e,t,n){void 0===n&&(n=!0);var r=h(this,e,t,n,null);return e==this.credentials.userId&&this._crypto.checkKeyBackup(),r},z.prototype.setDeviceBlocked=function(e,t,n){return void 0===n&&(n=!0),h(this,e,t,null,n)},z.prototype.setDeviceKnown=function(e,t,n){return void 0===n&&(n=!0),h(this,e,t,null,null,n)},z.prototype.requestVerificationDM=function(e,t,n){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.requestVerificationDM(e,t,n)},z.prototype.acceptVerificationDM=function(e,t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.acceptVerificationDM(e,t)},z.prototype.requestVerification=function(e,t,n){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.requestVerification(e,t,n)},z.prototype.beginKeyVerification=function(e,t,n){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.beginKeyVerification(e,t,n)},z.prototype.setGlobalBlacklistUnverifiedDevices=function(e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.setGlobalBlacklistUnverifiedDevices(e)},z.prototype.getGlobalBlacklistUnverifiedDevices=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getGlobalBlacklistUnverifiedDevices()},W(z,["doesCrossSigningHaveKeys","resetCrossSigningKeys","getCrossSigningId","getStoredCrossSigningForUser","checkUserTrust","checkDeviceTrust","checkOwnCrossSigningTrust","checkPrivateKey"]),z.prototype.checkEventSenderTrust=function(){var e=(0,a.coroutine)(c.default.mark((function e(t){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getEventSenderDeviceInfo(t));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",0);case 5:return e.next=7,(0,a.resolve)(this._crypto.checkDeviceTrust(t.getSender(),n.deviceId));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),W(z,["addSecretKey","storeSecret","getSecret","isSecretStored","requestSecret","getDefaultSecretStorageKeyId","setDefaultSecretStorageKeyId"]),z.prototype.getEventSenderDeviceInfo=function(){var e=(0,a.method)((function(e){return this._crypto?this._crypto.getEventSenderDeviceInfo(e):null}));return function(t){return e.apply(this,arguments)}}(),z.prototype.isEventSenderVerified=function(){var e=(0,a.coroutine)(c.default.mark((function e(t){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getEventSenderDeviceInfo(t));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",n.isVerified());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),z.prototype.cancelAndResendEventRoomKeyRequest=function(e){return e.cancelAndResendKeyRequest(this._crypto,this.getUserId())},z.prototype.setRoomEncryption=function(e,t){if(!this._crypto)throw new Error("End-to-End encryption disabled");return this._crypto.setRoomEncryption(e,t)},z.prototype.isRoomEncrypted=function(e){var t=this.getRoom(e);return!!t&&(!!t.currentState.getStateEvents("m.room.encryption","")||this._roomList.isRoomEncrypted(e))},z.prototype.forceDiscardSession=function(e){if(!this._crypto)throw new Error("End-to-End encryption disabled");this._crypto.forceDiscardSession(e)},z.prototype.exportRoomKeys=function(){return this._crypto?this._crypto.exportRoomKeys():u.default.reject(new Error("End-to-end encryption disabled"))},z.prototype.importRoomKeys=function(e){if(!this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.importRoomKeys(e)},z.prototype.checkKeyBackup=function(){return this._crypto.checkKeyBackup()},z.prototype.getKeyBackupVersion=function(){return this._http.authedRequest(void 0,"GET","/room_keys/version",void 0,void 0,{prefix:I.PREFIX_UNSTABLE}).then((function(e){if(e.algorithm!==B.MEGOLM_BACKUP_ALGORITHM){var t="Unknown backup algorithm: "+e.algorithm;return u.default.reject(t)}if("object"===(0,s.default)(e.auth_data)&&e.auth_data.public_key)return e;return u.default.reject("Invalid backup data returned")})).catch((function(e){if("M_NOT_FOUND"===e.errcode)return null;throw e}))},z.prototype.isKeyBackupTrusted=function(e){return this._crypto.isKeyBackupTrusted(e)},z.prototype.getKeyBackupEnabled=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return Boolean(this._crypto.backupKey)},z.prototype.enableKeyBackup=function(e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.backupInfo=e,this._crypto.backupKey&&this._crypto.backupKey.free(),this._crypto.backupKey=new t.Olm.PkEncryption,this._crypto.backupKey.set_recipient_key(e.auth_data.public_key),this.emit("crypto.keyBackupStatus",!0),this._crypto.scheduleKeyBackupSend()},z.prototype.disableKeyBackup=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.backupInfo=null,this._crypto.backupKey&&this._crypto.backupKey.free(),this._crypto.backupKey=null,this.emit("crypto.keyBackupStatus",!1)},z.prototype.prepareKeyBackupVersion=function(){var e=(0,a.coroutine)(c.default.mark((function e(n){var r,i,o,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:if(r=new t.Olm.PkDecryption,e.prev=3,i=void 0,o={},!n){e.next=15;break}return e.next=9,(0,a.resolve)((0,w.keyFromPassphrase)(n));case 9:s=e.sent,i=r.init_with_private_key(s.key),o.private_key_salt=s.salt,o.private_key_iterations=s.iterations,e.next=16;break;case 15:i=r.generate_key();case 16:return o.public_key=i,e.abrupt("return",{algorithm:B.MEGOLM_BACKUP_ALGORITHM,auth_data:o,recovery_key:(0,k.encodeRecoveryKey)(r.get_private_key())});case 18:return e.prev=18,r.free(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,,18,21]])})));return function(t){return e.apply(this,arguments)}}(),z.prototype.createKeyBackupVersion=function(){var e=(0,a.coroutine)(c.default.mark((function e(t){var n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:return n={algorithm:t.algorithm,auth_data:t.auth_data},e.next=5,(0,a.resolve)(this._crypto._signObject(n.auth_data));case 5:if(!this._crypto._crossSigningInfo.getId()){e.next=8;break}return e.next=8,(0,a.resolve)(this._crypto._crossSigningInfo.signObject(n.auth_data,"master"));case 8:return e.next=10,(0,a.resolve)(this._http.authedRequest(void 0,"POST","/room_keys/version",void 0,n,{prefix:I.PREFIX_UNSTABLE}));case 10:return r=e.sent,this.enableKeyBackup({algorithm:t.algorithm,auth_data:t.auth_data,version:r.version}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),z.prototype.deleteKeyBackupVersion=function(e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.backupInfo&&this._crypto.backupInfo.version===e&&this.disableKeyBackup();var t=U.encodeUri("/room_keys/version/$version",{$version:e});return this._http.authedRequest(void 0,"DELETE",t,void 0,void 0,{prefix:I.PREFIX_UNSTABLE})},z.prototype._makeKeyBackupPath=function(e,t,n){return{path:void 0!==t?U.encodeUri("/room_keys/keys/$roomId/$sessionId",{$roomId:e,$sessionId:t}):void 0!==e?U.encodeUri("/room_keys/keys/$roomId",{$roomId:e}):"/room_keys/keys",queryData:void 0===n?void 0:{version:n}}},z.prototype.sendKeyBackup=function(e,t,n,r){if(null===this._crypto)throw new Error("End-to-end encryption disabled");var i=this._makeKeyBackupPath(e,t,n);return this._http.authedRequest(void 0,"PUT",i.path,i.queryData,r,{prefix:I.PREFIX_UNSTABLE})},z.prototype.scheduleAllGroupSessionsForBackup=(0,a.coroutine)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:return e.next=4,(0,a.resolve)(this._crypto.scheduleAllGroupSessionsForBackup());case 4:case"end":return e.stop()}}),e,this)}))),z.prototype.flagAllGroupSessionsForBackup=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.flagAllGroupSessionsForBackup()},z.prototype.isValidRecoveryKey=function(e){try{return(0,k.decodeRecoveryKey)(e),!0}catch(t){return!1}},z.RESTORE_BACKUP_ERROR_BAD_KEY="RESTORE_BACKUP_ERROR_BAD_KEY",z.prototype.restoreKeyBackupWithPassword=function(){var e=(0,a.coroutine)(c.default.mark((function e(t,n,r,i){var o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)((0,w.keyFromAuthData)(i.auth_data,t));case 2:return o=e.sent,e.abrupt("return",this._restoreKeyBackup(o,n,r,i));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),z.prototype.restoreKeyBackupWithRecoveryKey=function(e,t,n,r){var i=(0,k.decodeRecoveryKey)(e);return this._restoreKeyBackup(i,t,n,r)},z.prototype._restoreKeyBackup=function(e,n,r,i){var o=this;if(null===this._crypto)throw new Error("End-to-end encryption disabled");var s=0,a=[],c=this._makeKeyBackupPath(n,r,i.version),h=new t.Olm.PkDecryption,v=void 0;try{v=h.init_with_private_key(e)}catch(m){throw h.free(),m}return v!==i.auth_data.public_key?u.default.reject({errcode:z.RESTORE_BACKUP_ERROR_BAD_KEY}):this._http.authedRequest(void 0,"GET",c.path,c.queryData,void 0,{prefix:I.PREFIX_UNSTABLE}).then((function(e){if(e.rooms){var t=!0,i=!1,u=void 0;try{for(var c,v=(0,p.default)((0,f.default)(e.rooms));!(t=(c=v.next()).done);t=!0){var y=(0,d.default)(c.value,2),_=y[0],b=y[1];if(b.sessions){s+=(0,l.default)(b.sessions).length;var k=G(b.sessions,h,_),w=!0,E=!1,S=void 0;try{for(var x,T=(0,p.default)(k);!(w=(x=T.next()).done);w=!0){var R=x.value;R.room_id=_,a.push(R)}}catch(C){E=!0,S=C}finally{try{!w&&T.return&&T.return()}finally{if(E)throw S}}}}}catch(C){i=!0,u=C}finally{try{!t&&v.return&&v.return()}finally{if(i)throw u}}}else if(e.sessions)s=(0,l.default)(e.sessions).length,a=G(e.sessions,h,n);else{s=1;try{var I=$(e,h);I.room_id=n,I.session_id=r,a.push(I)}catch(m){g.default.log("Failed to decrypt megolm session from backup",m)}}return o.importRoomKeys(a)})).then((function(){return o._crypto.setTrustedBackupPubKey(v)})).then((function(){return{total:s,imported:a.length}})).finally((function(){h.free()}))},z.prototype.deleteKeysFromBackup=function(e,t,n){if(null===this._crypto)throw new Error("End-to-end encryption disabled");var r=this._makeKeyBackupPath(e,t,n);return this._http.authedRequest(void 0,"DELETE",r.path,r.queryData,void 0,{prefix:I.PREFIX_UNSTABLE})},z.prototype.getGroup=function(e){return this.store.getGroup(e)},z.prototype.getGroups=function(){return this.store.getGroups()},z.prototype.getMediaConfig=function(e){return this._http.authedRequest(e,"GET","/config",void 0,void 0,{prefix:I.PREFIX_MEDIA_R0})},z.prototype.getRoom=function(e){return this.store.getRoom(e)},z.prototype.getRooms=function(){return this.store.getRooms()},z.prototype.getVisibleRooms=function(){var e=this.store.getRooms(),t=new o.default,n=!0,r=!1,i=void 0;try{for(var s,a=(0,p.default)(e);!(n=(s=a.next()).done);n=!0){var u=s.value.currentState.getStateEvents("m.room.create","");if(u){var c=u.getContent().predecessor;c&&c.room_id&&t.add(c.room_id)}}}catch(l){r=!0,i=l}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e.filter((function(e){return!e.currentState.getStateEvents("m.room.tombstone","")||!t.has(e.roomId)}))},z.prototype.getUser=function(e){return this.store.getUser(e)},z.prototype.getUsers=function(){return this.store.getUsers()},z.prototype.setAccountData=function(e,t,n){var r=U.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:e});return this._http.authedRequest(n,"PUT",r,void 0,t)},z.prototype.getAccountData=function(e){return this.store.getAccountData(e)},z.prototype.getIgnoredUsers=function(){var e=this.getAccountData("m.ignored_user_list");return e&&e.getContent()&&e.getContent().ignored_users?(0,l.default)(e.getContent().ignored_users):[]},z.prototype.setIgnoredUsers=function(e,t){var n={ignored_users:{}};return e.map((function(e){return n.ignored_users[e]={}})),this.setAccountData("m.ignored_user_list",n,t)},z.prototype.isUserIgnored=function(e){return-1!==this.getIgnoredUsers().indexOf(e)},z.prototype.joinRoom=function(e,t,n){if(U.isFunction(t))throw new Error("Expected 'opts' object, got function.");void 0===(t=t||{}).syncRoom&&(t.syncRoom=!0);var r=this.getRoom(e);if(r&&r.hasMembershipState(this.credentials.userId,"join"))return u.default.resolve(r);var i=u.default.resolve();t.inviteSignUrl&&(i=this._http.requestOtherUrl(void 0,"POST",t.inviteSignUrl,{mxid:this.credentials.userId}));var o={};t.viaServers&&(o.server_name=t.viaServers);var s={qsStringifyOptions:{arrayFormat:"repeat"}},a=this;return new u.default((function(r,c){i.then((function(t){var n={};t&&(n.third_party_signed=t);var r=U.encodeUri("/join/$roomid",{$roomid:e});return a._http.authedRequest(void 0,"POST",r,o,n,s)})).then((function(e){var n=e.room_id,r=new F(a,a._clientOpts).createRoom(n);return t.syncRoom,u.default.resolve(r)})).done((function(e){te(n,r,e)}),(function(e){ee(n,c,e)}))}))},z.prototype.resendEvent=function(e,t){return Q(t,e,O.SENDING),H(this,t,e)},z.prototype.cancelPendingEvent=function(e){if([O.QUEUED,O.NOT_SENT].indexOf(e.status)<0)throw new Error("cannot cancel an event with status "+e.status);this.scheduler&&this.scheduler.removeEventFromQueue(e),Q(this.getRoom(e.getRoomId()),e,O.CANCELLED)},z.prototype.setRoomName=function(e,t,n){return this.sendStateEvent(e,"m.room.name",{name:t},void 0,n)},z.prototype.setRoomTopic=function(e,t,n){return this.sendStateEvent(e,"m.room.topic",{topic:t},void 0,n)},z.prototype.getRoomTags=function(e,t){var n=U.encodeUri("/user/$userId/rooms/$roomId/tags/",{$userId:this.credentials.userId,$roomId:e});return this._http.authedRequest(t,"GET",n,void 0)},z.prototype.setRoomTag=function(e,t,n,r){var i=U.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this._http.authedRequest(r,"PUT",i,void 0,n)},z.prototype.deleteRoomTag=function(e,t,n){var r=U.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this._http.authedRequest(n,"DELETE",r,void 0,void 0)},z.prototype.setRoomAccountData=function(e,t,n,r){var i=U.encodeUri("/user/$userId/rooms/$roomId/account_data/$type",{$userId:this.credentials.userId,$roomId:e,$type:t});return this._http.authedRequest(r,"PUT",i,void 0,n)},z.prototype.setPowerLevel=function(e,t,n,r,i){var o={users:{}};r&&"m.room.power_levels"===r.getType()&&(o=U.deepCopy(r.getContent())),o.users[t]=n;var s=U.encodeUri("/rooms/$roomId/state/m.room.power_levels",{$roomId:e});return this._http.authedRequest(i,"PUT",s,void 0,o)},z.prototype.sendEvent=function(e,t,n,r,i){return this._sendCompleteEvent(e,{type:t,content:n},r,i)},z.prototype._sendCompleteEvent=function(e,t,n,r){U.isFunction(n)&&(r=n,n=void 0),n||(n=this.makeTxnId());var o=new C((0,i.default)(t,{event_id:"~"+e+":"+n,user_id:this.credentials.userId,room_id:e,origin_server_ts:(new Date).getTime()})),s=this.getRoom(e),a=o.getAssociatedId();if(a&&a.startsWith("~")){var c=s.getPendingEvents().find((function(e){return e.getId()===a}));c.once("Event.localEventIdReplaced",(function(){o.updateAssociatedId(c.getId())}))}var l=o.getType();return g.default.log("sendEvent of type "+l+" in "+e+" with txnId "+n),o._txnId=n,o.setStatus(O.SENDING),s&&s.addPendingEvent(o,n),o.status===O.NOT_SENT?u.default.reject(new Error("Event blocked by other events not yet sent")):H(this,s,o,r)},z.prototype.redactEvent=function(e,t,n,r){return this._sendCompleteEvent(e,{type:"m.room.redaction",content:{},redacts:t},n,r)},z.prototype.sendMessage=function(e,t,n,r){return U.isFunction(n)&&(r=n,n=void 0),this.sendEvent(e,"m.room.message",t,n,r)},z.prototype.sendTextMessage=function(e,t,n,r){var i=q.makeTextMessage(t);return this.sendMessage(e,i,n,r)},z.prototype.sendNotice=function(e,t,n,r){var i=q.makeNotice(t);return this.sendMessage(e,i,n,r)},z.prototype.sendEmoteMessage=function(e,t,n,r){var i=q.makeEmoteMessage(t);return this.sendMessage(e,i,n,r)},z.prototype.sendImageMessage=function(e,t,n,r,i){U.isFunction(r)&&(i=r,r=void 0),r||(r="Image");var o={msgtype:"m.image",url:t,info:n,body:r};return this.sendMessage(e,o,i)},z.prototype.sendStickerMessage=function(e,t,n,r,i){U.isFunction(r)&&(i=r,r=void 0),r||(r="Sticker");var o={url:t,info:n,body:r};return this.sendEvent(e,"m.sticker",o,i,void 0)},z.prototype.sendHtmlMessage=function(e,t,n,r){var i=q.makeHtmlMessage(t,n);return this.sendMessage(e,i,r)},z.prototype.sendHtmlNotice=function(e,t,n,r){var i=q.makeHtmlNotice(t,n);return this.sendMessage(e,i,r)},z.prototype.sendHtmlEmote=function(e,t,n,r){var i=q.makeHtmlEmote(t,n);return this.sendMessage(e,i,r)},z.prototype.sendReceipt=function(e,t,n,r){if("function"===typeof n&&(r=n,n={}),this.isGuest())return u.default.resolve({});var i=U.encodeUri("/rooms/$roomId/receipt/$receiptType/$eventId",{$roomId:e.getRoomId(),$receiptType:t,$eventId:e.getId()}),o=this._http.authedRequest(r,"POST",i,void 0,n||{}),s=this.getRoom(e.getRoomId());return s&&s._addLocalEchoReceipt(this.credentials.userId,e,t),o},z.prototype.sendReadReceipt=function(){var e=(0,a.method)((function(e,t,n){"function"===typeof t&&(n=t,t={}),t||(t={});var r=e.getId(),i=this.getRoom(e.getRoomId());if(i&&i.hasPendingEvent(r))throw new Error("Cannot set read receipt to a pending event ("+r+")");var o={"m.hidden":Boolean(t.hidden)};return this.sendReceipt(e,"m.read",o,n)}));return function(t,n,r){return e.apply(this,arguments)}}(),z.prototype.setRoomReadMarkers=function(){var e=(0,a.method)((function(e,t,n,r){var i=this.getRoom(e);if(i&&i.hasPendingEvent(t))throw new Error("Cannot set read marker to a pending event ("+t+")");var o=void 0;if(n){if(o=n.getId(),i&&i.hasPendingEvent(o))throw new Error("Cannot set read receipt to a pending event ("+o+")");i&&i._addLocalEchoReceipt(this.credentials.userId,n,"m.read")}return this.setRoomReadMarkersHttpRequest(e,t,o,r)}));return function(t,n,r,i){return e.apply(this,arguments)}}(),z.prototype.getUrlPreview=function(e,t,n){var r=t+"_"+e,i=this.urlPreviewCache[r];if(i)return u.default.resolve(i);var o=this;return this._http.authedRequest(n,"GET","/preview_url",{url:e,ts:t},void 0,{prefix:I.PREFIX_MEDIA_R0}).then((function(e){return o.urlPreviewCache[r]=e,e}))},z.prototype.sendTyping=function(e,t,n,r){if(this.isGuest())return u.default.resolve({});var i=U.encodeUri("/rooms/$roomId/typing/$userId",{$roomId:e,$userId:this.credentials.userId}),o={typing:t};return t&&(o.timeout=n||2e4),this._http.authedRequest(r,"PUT",i,void 0,o)},z.prototype.getRoomUpgradeHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRoom(e);if(!n)return[];for(var r=[n],i=n.currentState.getStateEvents("m.room.create","");i;){g.default.log("Looking at "+i.getId());var s=i.getContent().predecessor;if(!s||!s.room_id)break;g.default.log("Looking at predecessor "+s.room_id);var a=this.getRoom(s.room_id);if(!a)break;if(t){var u=a.currentState.getStateEvents("m.room.tombstone","");if(!u||u.getContent().replacement_room!==a.roomId)break}r.splice(0,0,a),i=a.currentState.getStateEvents("m.room.create","")}for(var c=n.currentState.getStateEvents("m.room.tombstone","");c;){var l=this.getRoom(c.getContent().replacement_room);if(!l)break;if(l.roomId===n.roomId)break;if(t){if(!(i=l.currentState.getStateEvents("m.room.create",""))||!i.getContent().predecessor)break;var d=i.getContent().predecessor;if(d.room_id!==n.roomId)break}r.push(l);var f=new o.default(r.map((function(e){return e.roomId})));if(f.size<r.length)return r.slice(0,r.length-1);c=(n=l).currentState.getStateEvents("m.room.tombstone","")}return r},z.prototype.invite=function(e,t,n){return J(this,e,t,"invite",void 0,n)},z.prototype.inviteByEmail=function(e,t,n){return this.inviteByThreePid(e,"email",t,n)},z.prototype.inviteByThreePid=function(){var e=(0,a.coroutine)(c.default.mark((function e(t,n,r,i){var o,s,l,d;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=U.encodeUri("/rooms/$roomId/invite",{$roomId:t}),s=this.getIdentityServerUrl(!0)){e.next=4;break}return e.abrupt("return",u.default.reject(new K({error:"No supplied identity server URL",errcode:"ORG.MATRIX.JSSDK_MISSING_PARAM"})));case 4:if(l={id_server:s,medium:n,address:r},e.t0=this.identityServer&&this.identityServer.getAccessToken,!e.t0){e.next=10;break}return e.next=9,(0,a.resolve)(this.doesServerAcceptIdentityAccessToken());case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=15;break}return e.next=13,(0,a.resolve)(this.identityServer.getAccessToken());case 13:(d=e.sent)&&(l.id_access_token=d);case 15:return e.abrupt("return",this._http.authedRequest(i,"POST",o,void 0,l));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),z.prototype.leave=function(e,t){return J(this,e,void 0,"leave",void 0,t)},z.prototype.leaveRoomChain=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getRoomUpgradeHistory(e),i=r;if(!n){i=[];var o=!0,s=!1,a=void 0;try{for(var c,l=(0,p.default)(r);!(o=(c=l.next()).done);o=!0){var d=c.value;if(i.push(d),d.roomId===e)break}}catch(w){s=!0,a=w}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}}var f={},h=[],v=function(e){return t.leave(e).then((function(){f[e]=null})).catch((function(t){return f[e]=t,null}))},m=!0,y=!1,g=void 0;try{for(var _,b=(0,p.default)(i);!(m=(_=b.next()).done);m=!0){var k=_.value;h.push(v(k.roomId))}}catch(w){y=!0,g=w}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}return u.default.all(h).then((function(){return f}))},z.prototype.ban=function(e,t,n,r){return J(this,e,t,"ban",n,r)},z.prototype.forget=function(e,t,n){void 0===t&&(t=!0);var r=J(this,e,void 0,"forget",void 0,n);if(!t)return r;var i=this;return r.then((function(t){return i.store.removeRoom(e),i.emit("deleteRoom",e),t}))},z.prototype.unban=function(e,t,n){var r=U.encodeUri("/rooms/$roomId/unban",{$roomId:e}),i={user_id:t};return this._http.authedRequest(n,"POST",r,void 0,i)},z.prototype.kick=function(e,t,n,r){return function(e,t,n,r,i,o){U.isFunction(i)&&(o=i,i=void 0);var s=U.encodeUri("/rooms/$roomId/state/m.room.member/$userId",{$roomId:t,$userId:n});return e._http.authedRequest(o,"PUT",s,void 0,{membership:r,reason:i})}(this,e,t,"leave",n,r)},z.prototype.getPushActionsForEvent=function(e){return e.getPushActions()||e.setPushActions(this._pushProcessor.actionsForEvent(e)),e.getPushActions()},z.prototype.setProfileInfo=function(e,t,n){var r=U.encodeUri("/profile/$userId/$info",{$userId:this.credentials.userId,$info:e});return this._http.authedRequest(n,"PUT",r,void 0,t)},z.prototype.setDisplayName=function(e,t){return this.setProfileInfo("displayname",{displayname:e},t)},z.prototype.setAvatarUrl=function(e,t){return this.setProfileInfo("avatar_url",{avatar_url:e},t)},z.prototype.mxcUrlToHttp=function(e,t,n,r,i){return N.getHttpUriForMxc(this.baseUrl,e,t,n,r,i)},z.prototype._unstable_setStatusMessage=function(e){var t=this,n="im.vector.user_status";return u.default.all(this.getRooms().map((function(r){var i="join"===r.getMyMembership(),o=2===r.getInvitedAndJoinedMemberCount();return i&&o&&r.currentState.mayClientSendStateEvent(n,t)?t.sendStateEvent(r.roomId,n,{status:e},t.getUserId()):u.default.resolve()})))},z.prototype.setPresence=function(e,t){var n=U.encodeUri("/presence/$userId/status",{$userId:this.credentials.userId});"string"===typeof e&&(e={presence:e});if(-1==["offline","online","unavailable"].indexOf(e.presence))throw new Error("Bad presence value: "+e.presence);return this._http.authedRequest(t,"PUT",n,void 0,e)},z.prototype.getPresenceList=function(e){return Z(e,this,void 0,"GET")},z.prototype.inviteToPresenceList=function(e,t){return Z(e,this,{invite:t},"POST")},z.prototype.dropFromPresenceList=function(e,t){return Z(e,this,{drop:t},"POST")},z.prototype.scrollback=function(e,t,n){U.isFunction(t)&&(n=t,t=void 0),t=t||30;var r=0,i=this._ongoingScrollbacks[e.roomId]||{};if(i.promise)return i.promise;if(i.errorTs){var o=Date.now()-i.errorTs;r=Math.max(3e3-o,0)}if(null===e.oldState.paginationToken)return u.default.resolve(e);var s=this.store.scrollback(e,t).length;if(s===t)return u.default.resolve(e);t-=s;var a=this,c=new u.default((function(i,o){(0,v.sleep)(r).then((function(){return a._createMessagesRequest(e.roomId,e.oldState.paginationToken,t,"b")})).done((function(t){var r=U.map(t.chunk,ne(a));if(t.state){var o=U.map(t.state,ne(a));e.currentState.setUnknownStateEvents(o)}e.addEventsToTimeline(r,!0,e.getLiveTimeline()),e.oldState.paginationToken=t.end,0===t.chunk.length&&(e.oldState.paginationToken=null),a.store.storeEvents(e,r,t.end,!0),a._ongoingScrollbacks[e.roomId]=null,te(n,i,e)}),(function(t){a._ongoingScrollbacks[e.roomId]={errorTs:Date.now()},ee(n,o,t)}))}));return i={promise:c,errorTs:null},this._ongoingScrollbacks[e.roomId]=i,c},z.prototype.getEventTimeline=function(e,t){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(e.getTimelineForEvent(t))return u.default.resolve(e.getTimelineForEvent(t));var n=U.encodeUri("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:t}),i=void 0;this._clientOpts.lazyLoadMembers&&(i={filter:(0,r.default)(L.LAZY_LOADING_MESSAGES_FILTER)});var o=this;return o._http.authedRequest(void 0,"GET",n,i).then((function(n){if(!n.event)throw new Error("'event' not in '/context' result - homeserver too old?");if(e.getTimelineForEvent(t))return e.getTimelineForEvent(t);n.events_after.reverse();var r=n.events_after.concat([n.event]).concat(n.events_before),i=U.map(r,o.getEventMapper()),s=e.getTimelineForEvent(i[0].getId());if(s){var a=U.map(n.state,o.getEventMapper());s.getState(A.BACKWARDS).setUnknownStateEvents(a)}else(s=e.addTimeline()).initialiseState(U.map(n.state,o.getEventMapper())),s.getState(A.FORWARDS).paginationToken=n.end;return e.addEventsToTimeline(i,!0,s,n.start),e.getTimelineForEvent(t)||s}))},z.prototype._createMessagesRequest=function(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=U.encodeUri("/rooms/$roomId/messages",{$roomId:e});void 0===n&&(n=30);var u={from:t,limit:n,dir:o},c=null;return this._clientOpts.lazyLoadMembers&&(c=(0,i.default)({},L.LAZY_LOADING_MESSAGES_FILTER)),s&&(c=c||{},(0,i.default)(c,s.getRoomTimelineFilterComponent())),c&&(u.filter=(0,r.default)(c)),this._http.authedRequest(void 0,"GET",a,u)},z.prototype.paginateEventTimeline=function(e,t){var n=e.getTimelineSet()===this._notifTimelineSet,r=(t=t||{}).backwards||!1;if(n&&!r)throw new Error("paginateNotifTimeline can only paginate backwards");var i=r?A.BACKWARDS:A.FORWARDS,o=e.getPaginationToken(i);if(!o)return u.default.resolve(!1);var s=e._paginationRequests[i];if(s)return s;var a=void 0,c=void 0,l=void 0,d=this;if(n)a="/notifications",c={limit:"limit"in t?t.limit:30,only:"highlight"},o&&"end"!==o&&(c.from=o),l=this._http.authedRequest(void 0,"GET",a,c,void 0).then((function(t){for(var n=t.next_token,o=[],s=0;s<t.notifications.length;s++){var a=t.notifications[s],u=d.getEventMapper()(a.event);u.setPushActions(x.actionListToActionsObject(a.actions)),u.event.room_id=a.room_id,o[s]=u}return e.getTimelineSet().addEventsToTimeline(o,r,e,n),r&&!t.next_token&&e.setPaginationToken(null,i),!!t.next_token})).finally((function(){e._paginationRequests[i]=null})),e._paginationRequests[i]=l;else{if(!this.getRoom(e.getRoomId()))throw new Error("Unknown room "+e.getRoomId());(l=this._createMessagesRequest(e.getRoomId(),o,t.limit,i,e.getFilter())).then((function(t){if(t.state){var n=e.getState(i),o=U.map(t.state,d.getEventMapper());n.setUnknownStateEvents(o)}var s=t.end,a=U.map(t.chunk,d.getEventMapper());return e.getTimelineSet().addEventsToTimeline(a,r,e,s),r&&t.end==t.start&&e.setPaginationToken(null,i),t.end!=t.start})).finally((function(){e._paginationRequests[i]=null})),e._paginationRequests[i]=l}return l},z.prototype.resetNotifTimelineSet=function(){this._notifTimelineSet&&this._notifTimelineSet.resetLiveTimeline("end",null)},z.prototype.peekInRoom=function(e){return this._peekSync&&this._peekSync.stopPeeking(),this._peekSync=new F(this,this._clientOpts),this._peekSync.peek(e)},z.prototype.stopPeeking=function(){this._peekSync&&(this._peekSync.stopPeeking(),this._peekSync=null)},z.prototype.setGuestAccess=function(e,t){var n=this.sendStateEvent(e,"m.room.guest_access",{guest_access:t.allowJoin?"can_join":"forbidden"}),r=u.default.resolve();return t.allowRead&&(r=this.sendStateEvent(e,"m.room.history_visibility",{history_visibility:"world_readable"})),u.default.all([r,n])},z.prototype.requestRegisterEmailToken=function(e,t,n,r){return this._requestTokenFromEndpoint("/register/email/requestToken",{email:e,client_secret:t,send_attempt:n,next_link:r})},z.prototype.requestRegisterMsisdnToken=function(e,t,n,r,i){return this._requestTokenFromEndpoint("/register/msisdn/requestToken",{country:e,phone_number:t,client_secret:n,send_attempt:r,next_link:i})},z.prototype.requestAdd3pidEmailToken=function(e,t,n,r){return this._requestTokenFromEndpoint("/account/3pid/email/requestToken",{email:e,client_secret:t,send_attempt:n,next_link:r})},z.prototype.requestAdd3pidMsisdnToken=function(e,t,n,r,i){return this._requestTokenFromEndpoint("/account/3pid/msisdn/requestToken",{country:e,phone_number:t,client_secret:n,send_attempt:r,next_link:i})},z.prototype.requestPasswordEmailToken=function(e,t,n,r){return this._requestTokenFromEndpoint("/account/password/email/requestToken",{email:e,client_secret:t,send_attempt:n,next_link:r})},z.prototype.requestPasswordMsisdnToken=function(e,t,n,r,i){return this._requestTokenFromEndpoint("/account/password/msisdn/requestToken",{country:e,phone_number:t,client_secret:n,send_attempt:r,next_link:i})},z.prototype._requestTokenFromEndpoint=function(){var e=(0,a.coroutine)(c.default.mark((function e(t,n){var r,o,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.default)({},n),e.next=3,(0,a.resolve)(this.doesServerSupportSeparateAddAndBind());case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=this.idBaseUrl;case 6:if(!e.t0){e.next=21;break}if((o=R.parse(this.idBaseUrl)).host){e.next=10;break}throw new Error("Invalid ID server URL: "+this.idBaseUrl);case 10:if(r.id_server=o.host,e.t1=this.identityServer&&this.identityServer.getAccessToken,!e.t1){e.next=16;break}return e.next=15,(0,a.resolve)(this.doesServerAcceptIdentityAccessToken());case 15:e.t1=e.sent;case 16:if(!e.t1){e.next=21;break}return e.next=19,(0,a.resolve)(this.identityServer.getAccessToken());case 19:(s=e.sent)&&(r.id_access_token=s);case 21:return e.abrupt("return",this._http.request(void 0,"POST",t,void 0,r));case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),z.prototype.getRoomPushRule=function(e,t){if(!this.pushRules)throw new Error("SyncApi.sync() must be done before accessing to push rules.");for(var n=0;n<this.pushRules[e].room.length;n++){var r=this.pushRules[e].room[n];if(r.rule_id===t)return r}},z.prototype.setRoomMutePushRule=function(e,t,n){var r=this,i=void 0,o=void 0,s=this.getRoomPushRule(e,t);if(s&&0<=s.actions.indexOf("dont_notify")&&(o=!0),n?s?o||(i=U.defer(),this.deletePushRule(e,"room",s.rule_id).done((function(){r.addPushRule(e,"room",t,{actions:["dont_notify"]}).done((function(){i.resolve()}),(function(e){i.reject(e)}))}),(function(e){i.reject(e)})),i=i.promise):i=this.addPushRule(e,"room",t,{actions:["dont_notify"]}):o&&(i=this.deletePushRule(e,"room",s.rule_id)),i)return new u.default((function(e,t){i.done((function(){r.getPushRules().done((function(t){r.pushRules=t,e()}),(function(e){t(e)}))}),(function(e){r.getPushRules().done((function(n){r.pushRules=n,t(e)}),(function(n){t(e)}))}))}))},z.prototype.searchMessageText=function(e,t){var n={search_term:e.query};return"keys"in e&&(n.keys=e.keys),this.search({body:{search_categories:{room_events:n}}},t)},z.prototype.searchRoomEvents=function(e){var t={search_categories:{room_events:{search_term:e.term,filter:e.filter,order_by:"recent",event_context:{before_limit:1,after_limit:1,include_profile:!0}}}},n={_query:t,results:[],highlights:[]};return this.search({body:t}).then(this._processRoomEventsSearch.bind(this,n))},z.prototype.backPaginateRoomEventsSearch=function(e){if(!e.next_batch)return u.default.reject(new Error("Cannot backpaginate event search any further"));if(e.pendingRequest)return e.pendingRequest;var t={body:e._query,next_batch:e.next_batch},n=this.search(t).then(this._processRoomEventsSearch.bind(this,e)).finally((function(){e.pendingRequest=null}));return e.pendingRequest=n,n},z.prototype._processRoomEventsSearch=function(e,t){var n=t.search_categories.room_events;e.count=n.count,e.next_batch=n.next_batch;var r={};n.highlights.forEach((function(e){r[e]=1})),e.highlights.forEach((function(e){r[e]=1})),e.highlights=(0,l.default)(r);for(var i=0;i<n.results.length;i++){var o=D.fromJson(n.results[i],this.getEventMapper());e.results.push(o)}return e},z.prototype.syncLeftRooms=function(){if(this._syncedLeftRooms)return u.default.resolve([]);if(this._syncLeftRoomsPromise)return this._syncLeftRoomsPromise;var e=this,t=new F(this,this._clientOpts);return this._syncLeftRoomsPromise=t.syncLeftRooms(),this._syncLeftRoomsPromise.then((function(t){g.default.log("Marking success of sync left room request"),e._syncedLeftRooms=!0})).finally((function(){e._syncLeftRoomsPromise=null})),this._syncLeftRoomsPromise},z.prototype.createFilter=function(e){var t=this,n=U.encodeUri("/user/$userId/filter",{$userId:this.credentials.userId});return this._http.authedRequest(void 0,"POST",n,void 0,e).then((function(n){var r=L.fromJson(t.credentials.userId,n.filter_id,e);return t.store.storeFilter(r),r}))},z.prototype.getFilter=function(e,t,n){if(n){var r=this.store.getFilter(e,t);if(r)return u.default.resolve(r)}var i=this,o=U.encodeUri("/user/$userId/filter/$filterId",{$userId:e,$filterId:t});return this._http.authedRequest(void 0,"GET",o,void 0,void 0).then((function(n){var r=L.fromJson(e,t,n);return i.store.storeFilter(r),r}))},z.prototype.getOrCreateFilter=function(e,t){var n=this.store.getFilterIdByName(e),r=u.default.resolve(),i=this;return n&&(r=i.getFilter(i.credentials.userId,n,!0).then((function(r){var o=r.getDefinition(),s=t.getDefinition();if(U.deepCompare(o,s))return u.default.resolve(n);i.store.setFilterIdByName(e,void 0)}),(function(t){if(404!==t.httpStatus||"M_UNKNOWN"!==t.errcode&&"M_NOT_FOUND"!==t.errcode)throw t;i.store.setFilterIdByName(e,void 0)}))),r.then((function(n){return n||i.createFilter(t.getDefinition()).then((function(t){return i.store.setFilterIdByName(e,t.filterId),t.filterId}))}))},z.prototype.getOpenIdToken=function(){var e=U.encodeUri("/user/$userId/openid/request_token",{$userId:this.credentials.userId});return this._http.authedRequest(void 0,"POST",e,void 0,{})},z.prototype.turnServer=function(e){return this._http.authedRequest(e,"GET","/voip/turnServer")},z.prototype.getTurnServers=function(){return this._turnServers||[]},z.prototype.setFallbackICEServerAllowed=function(e){this._fallbackICEServerAllowed=e},z.prototype.isFallbackICEServerAllowed=function(){return this._fallbackICEServerAllowed},z.prototype.isSynapseAdministrator=function(){var e=U.encodeUri("/_synapse/admin/v1/users/$userId/admin",{$userId:this.getUserId()});return this._http.authedRequest(void 0,"GET",e,void 0,void 0,{prefix:""}).then((function(e){return e.admin}))},z.prototype.whoisSynapseUser=function(e){var t=U.encodeUri("/_synapse/admin/v1/whois/$userId",{$userId:e});return this._http.authedRequest(void 0,"GET",t,void 0,void 0,{prefix:""})},z.prototype.deactivateSynapseUser=function(e){var t=U.encodeUri("/_synapse/admin/v1/deactivate/$userId",{$userId:e});return this._http.authedRequest(void 0,"POST",t,void 0,void 0,{prefix:""})},z.prototype.startClient=function(){var e=(0,a.method)((function(e){var t=this;this.clientRunning||(this.clientRunning=!0,"number"===typeof e&&(e={initialSyncLimit:e}),this._crypto&&(this._crypto.uploadDeviceKeys().done(),this._crypto.start()),function e(t){if(!t._supportsVoip)return;if(t.isGuest())return;t.turnServer().done((function(n){if(n.uris){g.default.log("Got TURN URIs: "+n.uris+" refresh in "+n.ttl+" secs");var r={urls:n.uris,username:n.username,credential:n.password};t._turnServers=[r],t._checkTurnServersTimeoutID=setTimeout((function(){e(t)}),1e3*(n.ttl||3600)*.9)}}),(function(n){g.default.error("Failed to get TURN URIs"),t._checkTurnServersTimeoutID=setTimeout((function(){e(t)}),6e4)}))}(this),this._syncApi&&(g.default.error("Still have sync object whilst not running: stopping old one"),this._syncApi.stop()),(e=(0,i.default)({},e)).crypto=this._crypto,e.canResetEntireTimeline=function(e){return!!t._canResetTimelineCallback&&t._canResetTimelineCallback(e)},this._clientOpts=e,this._syncApi=new F(this,e),this._syncApi.sync())}));return function(t){return e.apply(this,arguments)}}(),z.prototype._storeClientOptions=function(){var e=["boolean","string","number"],t=(0,f.default)(this._clientOpts).filter((function(t){var n=(0,d.default)(t,2),r=(n[0],n[1]);return e.includes("undefined"===typeof r?"undefined":(0,s.default)(r))})).reduce((function(e,t){var n=(0,d.default)(t,2),r=n[0],i=n[1];return e[r]=i,e}),{});return this.store.storeClientOptions(t)},z.prototype.stopClient=function(){g.default.log("stopping MatrixClient"),this.clientRunning=!1,this._syncApi&&(this._syncApi.stop(),this._syncApi=null),this._crypto&&this._crypto.stop(),this._peekSync&&this._peekSync.stopPeeking(),t.clearTimeout(this._checkTurnServersTimeoutID)},z.prototype.getVersions=(0,a.coroutine)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._serverVersionsCache){e.next=4;break}return e.next=3,(0,a.resolve)(this._http.request(void 0,"GET","/_matrix/client/versions",void 0,void 0,{prefix:""}));case 3:this._serverVersionsCache=e.sent;case 4:return e.abrupt("return",this._serverVersionsCache);case 5:case"end":return e.stop()}}),e,this)}))),z.prototype.isVersionSupported=function(){var e=(0,a.coroutine)(c.default.mark((function e(t){var n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getVersions());case 2:return n=e.sent,r=n.versions,e.abrupt("return",r&&r.includes(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),z.prototype.doesServerSupportLazyLoading=(0,a.coroutine)(c.default.mark((function e(){var t,n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getVersions());case 2:return t=e.sent,n=t.versions,r=t.unstable_features,e.abrupt("return",n&&n.includes("r0.5.0")||r&&r["m.lazy_load_members"]);case 6:case"end":return e.stop()}}),e,this)}))),z.prototype.doesServerRequireIdServerParam=(0,a.coroutine)(c.default.mark((function e(){var t,n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getVersions());case 2:if(t=e.sent,!(n=t.versions)||!n.includes("r0.6.0")){e.next=6;break}return e.abrupt("return",!1);case 6:if(void 0!==(r=t.unstable_features)["m.require_identity_server"]){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",r["m.require_identity_server"]);case 12:case"end":return e.stop()}}),e,this)}))),z.prototype.doesServerAcceptIdentityAccessToken=(0,a.coroutine)(c.default.mark((function e(){var t,n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getVersions());case 2:return t=e.sent,n=t.versions,r=t.unstable_features,e.abrupt("return",n&&n.includes("r0.6.0")||r&&r["m.id_access_token"]);case 6:case"end":return e.stop()}}),e,this)}))),z.prototype.doesServerSupportSeparateAddAndBind=(0,a.coroutine)(c.default.mark((function e(){var t,n,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getVersions());case 2:return t=e.sent,n=t.versions,r=t.unstable_features,e.abrupt("return",n&&n.includes("r0.6.0")||r&&r["m.separate_add_and_bind"]);case 6:case"end":return e.stop()}}),e,this)}))),z.prototype.hasLazyLoadMembersEnabled=function(){return!!this._clientOpts.lazyLoadMembers},z.prototype.setCanResetTimelineCallback=function(e){this._canResetTimelineCallback=e},z.prototype.getCanResetTimelineCallback=function(){return this._canResetTimelineCallback},z.prototype.relations=function(){var e=(0,a.coroutine)(c.default.mark((function e(t,n,r,i){var o,s,l,d,f,p,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Y(this,t,i),e.next=3,(0,a.resolve)(this.fetchRelations(t,n,r,o,h));case 3:if(s=e.sent,l=this.getEventMapper(),d=void 0,s.original_event&&(d=l(s.original_event)),f=s.chunk.map(l),"m.room.encrypted"!==o){e.next=13;break}return p=d?f.concat(d):f,e.next=12,(0,a.resolve)(u.default.all(p.map((function(e){return new u.default((function(t){return e.once("Event.decrypted",t)}))}))));case 12:f=f.filter((function(e){return e.getType()===i}));case 13:return e.abrupt("return",{originalEvent:d,events:f,nextBatch:s.next_batch});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),z.prototype.getEventMapper=function(){return ne(this)},z.prototype.generateClientSecret=function(){return(0,E.randomString)(32)},e.exports.MatrixClient=z,e.exports.CRYPTO_ENABLED=V}).call(this,n(6))},function(e,t,n){"use strict";var r=n(20).f,i=n(48),o=n(88),s=n(23),a=n(89),u=n(54),c=n(80),l=n(111),d=n(127),f=n(17),p=n(62).fastKey,h=n(90),v=f?"_s":"size",m=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){a(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)}));return o(l.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=h(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){h(this,t);for(var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(h(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return h(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(16);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e.return;throw void 0!==o&&r(o.call(e)),s}}},function(e,t,n){var r=n(43),i=n(15)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(4),o=n(20),s=n(17),a=n(15)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(11),i=n(7),o=n(62),s=n(28),a=n(27),u=n(88),c=n(54),l=n(89),d=n(14),f=n(51),p=n(20).f,h=n(217)(0),v=n(17);e.exports=function(e,t,n,m,y,g){var _=r[e],b=_,k=y?"set":"add",w=b&&b.prototype,E={};return v&&"function"==typeof b&&(g||w.forEach&&!s((function(){(new b).entries().next()})))?(b=t((function(t,n){l(t,b,e,"_c"),t._c=new _,void 0!=n&&c(n,y,t[k],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in w)||g&&"clear"==e||a(b.prototype,e,(function(n,r){if(l(this,b,e),!t&&g&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),g||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=m.getConstructor(t,e,y,k),u(b.prototype,n),o.NEED=!0),f(b,e),E[e]=b,i(i.G+i.W+i.F,E),g||m.setStrong(b,e,y),b}},function(e,t,n){var r=n(65),i=n(221);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(7),i=n(29),o=n(23),s=n(54);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,a,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),void 0==e?new this:(n=[],t?(r=0,a=o(u,arguments[2],2),s(e,!1,(function(e){n.push(a(e,r++))}))):s(e,!1,n.push,n),new this(n))}})}},function(e,t,n){var r=n(17),i=n(42),o=n(31),s=n(52).f;e.exports=function(e){return function(t){for(var n,a=o(t),u=i(a),c=u.length,l=0,d=[];c>l;)n=u[l++],r&&!s.call(a,n)||d.push(e?[n,a[n]]:a[n]);return d}}},function(e,t,n){var r=n(15)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceTrustLevel=t.UserTrustLevel=t.CrossSigningLevel=t.CrossSigningInfo=void 0;var r=n(1),i=g(n(22)),o=g(n(18)),s=g(n(56)),a=g(n(9)),u=g(n(8)),c=g(n(24)),l=g(n(10)),d=g(n(12)),f=g(n(25)),p=g(n(26)),h=g(n(45)),v=n(35),m=n(13),y=g(n(3));function g(e){return e&&e.__esModule?e:{default:e}}function _(e){return(0,h.default)(e.keys)[0]}t.CrossSigningInfo=function(t){function n(e,t){(0,l.default)(this,n);var r=(0,f.default)(this,(n.__proto__||(0,c.default)(n)).call(this));return Object.defineProperty(r,"userId",{enumerable:!0,value:e}),r._callbacks=t||{},r.keys={},r.firstUse=!0,r}return(0,p.default)(n,t),(0,d.default)(n,[{key:"getCrossSigningKey",value:function(){var t=(0,r.coroutine)(u.default.mark((function t(n,i){var o,s,a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._callbacks.getCrossSigningKey){t.next=2;break}throw new Error("No getCrossSigningKey callback supplied");case 2:return void 0===i&&(i=this.getId(n)),t.next=5,(0,r.resolve)(this._callbacks.getCrossSigningKey(n,i));case 5:if(o=t.sent){t.next=8;break}throw new Error("getCrossSigningKey callback for  "+n+" returned falsey");case 8:if(s=new e.Olm.PkSigning,(a=s.init_with_seed(o))===i){t.next=15;break}throw s.free(),new Error("Key type "+n+" from getCrossSigningKey callback did not match");case 15:return t.abrupt("return",[a,s]);case 16:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"toStorage",value:function(){return{keys:this.keys,firstUse:this.firstUse}}},{key:"hasKeys",value:function(){return(0,a.default)(this.keys).length>0}},{key:"getId",value:function(e){return e=e||"master",this.keys[e]?_(this.keys[e])[1]:null}},{key:"resetKeys",value:function(){var t=(0,r.coroutine)(u.default.mark((function t(n){var a,c,l,d,f,p,h,m,y,g;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._callbacks.saveCrossSigningKeys){t.next=2;break}throw new Error("No saveCrossSigningKeys callback supplied");case 2:if(!(void 0===n||n&b.MASTER)&&this.keys.master){t.next=6;break}n=b.MASTER|b.USER_SIGNING|b.SELF_SIGNING,t.next=8;break;case 6:if(0!==n){t.next=8;break}return t.abrupt("return");case 8:if(a={},c={},l=void 0,d=void 0,t.prev=12,!(n&b.MASTER)){t.next=20;break}l=new e.Olm.PkSigning,a.master=l.generate_seed(),d=l.init_with_seed(a.master),c.master={user_id:this.userId,usage:["master"],keys:(0,s.default)({},"ed25519:"+d,d)},t.next=26;break;case 20:return t.next=22,(0,r.resolve)(this.getCrossSigningyKey("master"));case 22:f=t.sent,p=(0,o.default)(f,2),d=p[0],l=p[1];case 26:if(n&b.SELF_SIGNING){h=new e.Olm.PkSigning;try{a.self_signing=h.generate_seed(),m=h.init_with_seed(a.self_signing),c.self_signing={user_id:this.userId,usage:["self_signing"],keys:(0,s.default)({},"ed25519:"+m,m)},(0,v.pkSign)(c.self_signing,l,this.userId,d)}finally{h.free()}}if(n&b.USER_SIGNING){y=new e.Olm.PkSigning;try{a.user_signing=y.generate_seed(),g=y.init_with_seed(a.user_signing),c.user_signing={user_id:this.userId,usage:["user_signing"],keys:(0,s.default)({},"ed25519:"+g,g)},(0,v.pkSign)(c.user_signing,l,this.userId,d)}finally{y.free()}}(0,i.default)(this.keys,c),this._callbacks.saveCrossSigningKeys(a);case 30:return t.prev=30,l&&l.free(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[12,,30,33]])})));return function(e){return t.apply(this,arguments)}}()},{key:"setKeys",value:function(e){var t={};if(e.master){if(e.master.user_id!==this.userId){var n="Mismatched user ID "+e.master.user_id+" in master key from "+this.userId;throw y.default.error(n),new Error(n)}this.keys.master?_(e.master)[1]!==this.getId()&&(this.firstUse=!1):this.firstUse=!0,t.master=e.master}else{if(!this.keys.master)throw new Error("Tried to set cross-signing keys without a master key");t.master=this.keys.master}var r=_(t.master)[1];if(e.user_signing){if(e.user_signing.user_id!==this.userId){var i="Mismatched user ID "+e.master.user_id+" in user_signing key from "+this.userId;throw y.default.error(i),new Error(i)}try{(0,v.pkVerify)(e.user_signing,r,this.userId)}catch(s){throw y.default.error("invalid signature on user-signing key"),s}}if(e.self_signing){if(e.self_signing.user_id!==this.userId){var o="Mismatched user ID "+e.master.user_id+" in self_signing key from "+this.userId;throw y.default.error(o),new Error(o)}try{(0,v.pkVerify)(e.self_signing,r,this.userId)}catch(s){throw y.default.error("invalid signature on self-signing key"),s}}e.master&&(this.keys.master=e.master,delete this.keys.self_signing,delete this.keys.user_signing),e.self_signing&&(this.keys.self_signing=e.self_signing),e.user_signing&&(this.keys.user_signing=e.user_signing)}},{key:"signObject",value:function(){var e=(0,r.coroutine)(u.default.mark((function e(t,n){var i,s,a,c;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keys[n]){e.next=2;break}throw new Error("Attempted to sign with "+n+" key but no such key present");case 2:return e.next=4,(0,r.resolve)(this.getCrossSigningKey(n));case 4:return i=e.sent,s=(0,o.default)(i,2),a=s[0],c=s[1],e.prev=8,(0,v.pkSign)(t,c,this.userId,a),e.abrupt("return",t);case 11:return e.prev=11,c.free(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[8,,11,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signUser",value:function(){var e=(0,r.method)((function(e){if(this.keys.user_signing)return this.signObject(e.keys.master,"user_signing")}));return function(t){return e.apply(this,arguments)}}()},{key:"signDevice",value:function(){var e=(0,r.method)((function(e,t){if(e!==this.userId)throw new Error("Trying to sign "+e+"'s device; can only sign our own device");if(this.keys.self_signing)return this.signObject({algorithms:t.algorithms,keys:t.keys,device_id:t.deviceId,user_id:e},"self_signing")}));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkUserTrust",value:function(e){if(this.userId===e.userId&&this.getId()&&this.getId()===e.getId()&&this.getId("self_signing")&&this.getId("self_signing")===e.getId("self_signing"))return new k(!0,this.firstUse);if(!this.keys.user_signing)return new k(!1,e.firstUse);var t=void 0,n=e.keys.master,r=this.getId("user_signing");try{(0,v.pkVerify)(n,r,this.userId),t=!0}catch(i){t=!1}return new k(t,e.firstUse)}},{key:"checkDeviceTrust",value:function(e,t,n){var r=this.checkUserTrust(e),i=e.keys.self_signing;if(!i)return new w(!1,!1,n);var o=function(e,t){return{algorithms:e.algorithms,keys:e.keys,device_id:e.deviceId,user_id:t,signatures:e.signatures}}(t,e.userId);try{return(0,v.pkVerify)(i,e.getId(),e.userId),(0,v.pkVerify)(o,_(i)[1],e.userId),w.fromUserTrustLevel(r,n)}catch(s){return new w(!1,!1,n)}}}],[{key:"fromStorage",value:function(e,t){var r=new n(t);for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r}}]),n}(m.EventEmitter);var b=t.CrossSigningLevel={MASTER:4,USER_SIGNING:2,SELF_SIGNING:1},k=t.UserTrustLevel=function(){function e(t,n){(0,l.default)(this,e),this._crossSigningVerified=t,this._tofu=n}return(0,d.default)(e,[{key:"isVerified",value:function(){return this.isCrossSigningVerified()}},{key:"isCrossSigningVerified",value:function(){return this._crossSigningVerified}},{key:"isTofu",value:function(){return this._tofu}}]),e}(),w=t.DeviceTrustLevel=function(){function e(t,n,r){(0,l.default)(this,e),this._crossSigningVerified=t,this._tofu=n,this._localVerified=r}return(0,d.default)(e,[{key:"isVerified",value:function(){return this.isCrossSigningVerified()||this.isLocallyVerified()}},{key:"isCrossSigningVerified",value:function(){return this._crossSigningVerified}},{key:"isLocallyVerified",value:function(){return this._localVerified}},{key:"isTofu",value:function(){return this._tofu}}],[{key:"fromUserTrustLevel",value:function(t,n){return new e(t._crossSigningVerified,t._tofu,n)}}]),e}()}).call(this,n(6))},function(e,t,n){var r=n(16),i=n(29),o=n(15)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(23),a=n(122),u=n(109),c=n(72),l=n(11),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,m=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){a("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete y[e]},"process"==n(49)(d)?r=function(e){d.nextTick(s(g,e,1))}:v&&v.now?r=function(e){v.now(s(g,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(s(g,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(16),i=n(14),o=n(95);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.keyFromPassphrase=t.keyFromAuthData=void 0;var r,i=n(8),o=(r=i)&&r.__esModule?r:{default:r},s=n(1),a=(t.keyFromAuthData=function(){var t=(0,s.coroutine)(o.default.mark((function t(n,r){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Olm){t.next=2;break}throw new Error("Olm is not available");case 2:if(n.private_key_salt&&n.private_key_iterations){t.next=4;break}throw new Error("Salt and/or iterations not found: this backup cannot be restored with a passphrase");case 4:return t.next=6,(0,s.resolve)(a(r,n.private_key_salt,n.private_key_iterations));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),t.keyFromPassphrase=function(){var t=(0,s.coroutine)(o.default.mark((function t(n){var r,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Olm){t.next=2;break}throw new Error("Olm is not available");case 2:return r=(0,u.randomString)(32),t.next=5,(0,s.resolve)(a(n,r,c));case 5:return i=t.sent,t.abrupt("return",{key:i,salt:r,iterations:c});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),function(){var t=(0,s.coroutine)(o.default.mark((function t(n,r,i){var a,u,c,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.crypto.subtle,u=e.TextEncoder,a&&u){t.next=4;break}throw new Error("Password-based backup is not avaiable on this platform");case 4:return t.next=6,(0,s.resolve)(a.importKey("raw",(new u).encode(n),{name:"PBKDF2"},!1,["deriveBits"]));case 6:return c=t.sent,t.next=9,(0,s.resolve)(a.deriveBits({name:"PBKDF2",salt:(new u).encode(r),iterations:i,hash:"SHA-512"},c,8*e.Olm.PRIVATE_KEY_LENGTH));case 9:return l=t.sent,t.abrupt("return",new Uint8Array(l));case 11:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()),u=n(68);var c=5e5}).call(this,n(6))},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(5));t.encodeRecoveryKey=function(t){var n=new e(a.length+t.length+1);n.set(a,0),n.set(t,a.length);for(var r=0,i=0;i<n.length-1;++i)r^=n[i];return n[n.length-1]=r,o.default.encode(n).match(/.{1,4}/g).join(" ")},t.decodeRecoveryKey=function(e){var t=o.default.decode(e.replace(/ /g,"")),n=0,s=!0,u=!1,c=void 0;try{for(var l,d=(0,i.default)(t);!(s=(l=d.next()).done);s=!0){var f=l.value;n^=f}}catch(h){u=!0,c=h}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}if(0!==n)throw new Error("Incorrect parity");for(var p=0;p<a.length;++p)if(t[p]!==a[p])throw new Error("Incorrect prefix");if(t.length!==a.length+r.Olm.PRIVATE_KEY_LENGTH+1)throw new Error("Incorrect length");return t.slice(a.length,a.length+r.Olm.PRIVATE_KEY_LENGTH)};var o=s(n(254));function s(e){return e&&e.__esModule?e:{default:e}}var a=[139,1]}).call(this,n(141).Buffer,n(6))},function(e,t,n){"use strict";(function(e){var r=n(251),i=n(252),o=n(253);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function b(e,t,n,r){return B(K(t,e.length-n),e,n,r)}function k(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return k(e,t,n,r)}function E(e,t,n,r){return B(q(t),e,n,r)}function S(e,t,n,r){return B(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128===(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128===(192&o)&&128===(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"===typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),d=0;d<a;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return o||U(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||U(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:K(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=k(n(8)),i=k(n(18)),o=k(n(45)),s=k(n(5)),a=n(1),u=k(n(56)),c=k(n(57)),l=k(n(22)),d=k(n(24)),f=k(n(10)),p=k(n(12)),h=k(n(25)),v=k(n(26)),m=n(19),y=n(13),g=k(n(3)),_=k(n(69)),b=n(70);function k(e){return e&&e.__esModule?e:{default:e}}var w=new Error("Verification timed out"),E=function(e){function t(e,n,r,i,o,s,a){(0,f.default)(this,t);var u=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return u._baseApis=e,u.userId=n,u.deviceId=r,u.transactionId=i,"string"===typeof o||o instanceof String?(u.roomId=o,u.startEvent=s,u.request=a):(u.startEvent=o,u.request=s),u.cancelled=!1,u._done=!1,u._promise=null,u._transactionTimeoutTimer=null,u._eventsSubscription=null,u._resetTimer(),u.roomId?u._sendWithTxnId=u._sendMessage:u._sendWithTxnId=u._sendToDevice,u}return(0,v.default)(t,e),(0,p.default)(t,[{key:"_resetTimer",value:function(){var e=this;g.default.info("Refreshing/starting the verification transaction timeout timer"),null!==this._transactionTimeoutTimer&&clearTimeout(this._transactionTimeoutTimer),this._transactionTimeoutTimer=setTimeout((function(){e._done||e.cancelled||(g.default.info("Triggering verification timeout"),e.cancel(w))}),6e5)}},{key:"_endTimer",value:function(){null!==this._transactionTimeoutTimer&&(clearTimeout(this._transactionTimeoutTimer),this._transactionTimeoutTimer=null)}},{key:"_contentFromEventWithTxnId",value:function(e){if(this.roomId){var t=(0,l.default)({},e.getContent());return t["m.relates_to"]=e.getRelation(),t}return e.getContent()}},{key:"_contentWithTxnId",value:function(e){var t=(0,l.default)({},e);return this.roomId?t["m.relates_to"]={rel_type:"m.reference",event_id:this.transactionId}:t.transaction_id=this.transactionId,t}},{key:"_send",value:function(e,t){var n=this._contentWithTxnId(t);return this._sendWithTxnId(e,n)}},{key:"_sendToDevice",value:function(e,t){return this._done?c.default.reject(new Error("Verification is already done")):this._baseApis.sendToDevice(e,(0,u.default)({},this.userId,(0,u.default)({},this.deviceId,t)))}},{key:"_sendMessage",value:function(e,t){return this._done?c.default.reject(new Error("Verification is already done")):this._baseApis.sendEvent(this.roomId,e,t)}},{key:"_waitForEvent",value:function(e){var t=this;return this._done?c.default.reject(new Error("Verification is already done")):(this._expectedEvent=e,new c.default((function(e,n){t._resolveEvent=e,t._rejectEvent=n})))}},{key:"handleEvent",value:function(e){if(!this._done)if(e.getType()===this._expectedEvent)this._expectedEvent=void 0,this._rejectEvent=void 0,this._resetTimer(),this._resolveEvent(e);else if("m.key.verification.cancel"===e.getType()){var t=this._reject;this._reject=void 0,t(new Error("Other side cancelled verification"))}else{var n=new Error("Unexpected message: expecting "+this._expectedEvent+" but got "+e.getType());if(this._expectedEvent=void 0,this._rejectEvent){var r=this._rejectEvent;this._rejectEvent=void 0,r(n)}this.cancel(n)}}},{key:"done",value:function(){this._endTimer(),this._done||(this.roomId&&this._send("m.key.verification.done",{}),this._resolve())}},{key:"cancel",value:function(e){if(this._endTimer(),!this._done){if(this.cancelled=!0,this.userId&&this.deviceId&&this.transactionId)if(e===w){var t=(0,b.newTimeoutError)();this._send(t.getType(),t.getContent())}else if(e instanceof m.MatrixEvent){if(e.getSender()!==this.userId){var n=e.getContent();"m.key.verification.cancel"===e.getType()?(n.code=n.code||"m.unknown",n.reason=n.reason||n.body||"Unknown reason",n.transaction_id=this.transactionId,this._send("m.key.verification.cancel",n)):this._send("m.key.verification.cancel",{code:"m.unknown",reason:n.body||"Unknown reason",transaction_id:this.transactionId})}}else this._send("m.key.verification.cancel",{code:"m.unknown",reason:e.toString(),transaction_id:this.transactionId});null!==this._promise?this._reject&&this._reject(e):(this._eventsSubscription&&(this._eventsSubscription=this._eventsSubscription()),this._promise=c.default.reject(e)),this.emit("cancel",e)}}},{key:"verify",value:function(){var e=this;return this._promise||(this._promise=new c.default((function(t,n){e._resolve=function(){e._done=!0,e._endTimer(),e.handler&&e._eventsSubscription&&(e._eventsSubscription=e._eventsSubscription()),t.apply(void 0,arguments)},e._reject=function(){e._done=!0,e._endTimer(),e.handler&&e._eventsSubscription&&(e._eventsSubscription=e._eventsSubscription()),n.apply(void 0,arguments)}})),this._doVerification&&!this._started&&(this._started=!0,this._resetTimer(),c.default.resolve(this._doVerification()).then(this.done.bind(this),this.cancel.bind(this)))),this._promise}},{key:"_verifyKeys",value:function(){var e=(0,a.coroutine)(r.default.mark((function e(t,n,c){var l,d,f,p,h,v,m,y,b,k,w,E,S,x,T,R,I,C;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=[],d=!0,f=!1,p=void 0,e.prev=4,h=(0,s.default)((0,o.default)(n));case 6:if(d=(v=h.next()).done){e.next=29;break}return m=(0,i.default)(v.value,2),y=m[0],b=m[1],k=y.split(":",2)[1],e.next=11,(0,a.resolve)(this._baseApis.getStoredDevice(t,k));case 11:if(!(w=e.sent)){e.next=18;break}return e.next=15,(0,a.resolve)(c(y,w,b));case 15:l.push(k),e.next=26;break;case 18:if(!(E=this._baseApis._crypto._deviceList.getStoredCrossSigningForUser(t))||E.getId()!==k){e.next=25;break}return e.next=22,(0,a.resolve)(c(y,_.default.fromStorage({keys:(0,u.default)({},y,k)},k),b));case 22:l.push(k),e.next=26;break;case 25:g.default.warn("verification: Could not find device "+k+" to verify");case 26:d=!0,e.next=6;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(4),f=!0,p=e.t0;case 35:e.prev=35,e.prev=36,!d&&h.return&&h.return();case 38:if(e.prev=38,!f){e.next=41;break}throw p;case 41:return e.finish(38);case 42:return e.finish(35);case 43:if(l.length){e.next=45;break}throw new Error("No devices could be verified");case 45:S=!0,x=!1,T=void 0,e.prev=48,R=(0,s.default)(l);case 50:if(S=(I=R.next()).done){e.next=57;break}return C=I.value,e.next=54,(0,a.resolve)(this._baseApis.setDeviceVerified(t,C));case 54:S=!0,e.next=50;break;case 57:e.next=63;break;case 59:e.prev=59,e.t1=e.catch(48),x=!0,T=e.t1;case 63:e.prev=63,e.prev=64,!S&&R.return&&R.return();case 66:if(e.prev=66,!x){e.next=69;break}throw T;case 69:return e.finish(66);case 70:return e.finish(63);case 71:case"end":return e.stop()}}),e,this,[[4,31,35,43],[36,,38,42],[48,59,63,71],[64,,66,70]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setEventsSubscription",value:function(e){this._eventsSubscription=e}}]),t}(y.EventEmitter);t.default=E},function(e,t,n){e.exports={default:n(271),__esModule:!0}},function(e,t,n){"use strict";var r=a(n(105)),i=a(n(9)),o=a(n(67)),s=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var u=n(13).EventEmitter,c=n(2),l=n(99);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.roomId=e,this.members={},this.events={},this.paginationToken=null,this._sentinels={},this._updateModifiedTime(),this._displayNameToUserIds={},this._userIdsToDisplayNames={},this._tokenToInvite={},this._joinedMemberCount=null,this._summaryJoinedMemberCount=null,this._invitedMemberCount=null,this._summaryInvitedMemberCount=null,t||(t={status:1}),this._oobMemberFlags=t}function f(e,t,n){var r=e._userIdsToDisplayNames[t];if(delete e._userIdsToDisplayNames[t],r){var i=c.removeHiddenChars(r),o=e._displayNameToUserIds[i];if(o){var s=o.filter((function(e){return e!==t}));e._displayNameToUserIds[i]=s}}e._userIdsToDisplayNames[t]=n;var a=n&&c.removeHiddenChars(n);a&&(e._displayNameToUserIds[a]||(e._displayNameToUserIds[a]=[]),e._displayNameToUserIds[a].push(t))}c.inherits(d,u),d.prototype.getJoinedMemberCount=function(){return null!==this._summaryJoinedMemberCount?this._summaryJoinedMemberCount:(null===this._joinedMemberCount&&(this._joinedMemberCount=this.getMembers().reduce((function(e,t){return"join"===t.membership?e+1:e}),0)),this._joinedMemberCount)},d.prototype.setJoinedMemberCount=function(e){this._summaryJoinedMemberCount=e},d.prototype.getInvitedMemberCount=function(){return null!==this._summaryInvitedMemberCount?this._summaryInvitedMemberCount:(null===this._invitedMemberCount&&(this._invitedMemberCount=this.getMembers().reduce((function(e,t){return"invite"===t.membership?e+1:e}),0)),this._invitedMemberCount)},d.prototype.setInvitedMemberCount=function(e){this._summaryInvitedMemberCount=e},d.prototype.getMembers=function(){return c.values(this.members)},d.prototype.getMembersExcept=function(e){return c.values(this.members).filter((function(t){return!e.includes(t.userId)}))},d.prototype.getMember=function(e){return this.members[e]||null},d.prototype.getSentinelMember=function(e){if(!e)return null;var t=this._sentinels[e];if(void 0===t){t=new l(this.roomId,e);var n=this.members[e];n&&t.setMembershipEvent(n.events.member,this),this._sentinels[e]=t}return t},d.prototype.getStateEvents=function(e,t){if(!this.events[e])return void 0===t?[]:null;if(void 0===t)return c.values(this.events[e]);var n=this.events[e][t];return n||null},d.prototype.clone=function(){var e=new d(this.roomId,this._oobMemberFlags),t=this._oobMemberFlags.status;return this._oobMemberFlags.status=1,(0,o.default)(this.events).forEach((function(t){var n=(0,o.default)(t);e.setStateEvents(n)})),this._oobMemberFlags.status=t,null!==this._summaryInvitedMemberCount&&e.setInvitedMemberCount(this.getInvitedMemberCount()),null!==this._summaryJoinedMemberCount&&e.setJoinedMemberCount(this.getJoinedMemberCount()),3==this._oobMemberFlags.status&&this.getMembers().forEach((function(t){t.isOutOfBand()&&e.getMember(t.userId).markOutOfBand()})),e},d.prototype.setUnknownStateEvents=function(e){var t=this,n=e.filter((function(e){return void 0===t.events[e.getType()]||void 0===t.events[e.getType()][e.getStateKey()]}));this.setStateEvents(n)},d.prototype.setStateEvents=function(e){var t=this;this._updateModifiedTime(),c.forEach(e,(function(e){e.getRoomId()===t.roomId&&e.isState()&&(t._setStateEvent(e),"m.room.member"===e.getType()&&(f(t,e.getStateKey(),e.getContent().displayname),function(e,t){if(!t.getContent().third_party_invite)return;var n=(t.getContent().third_party_invite.signed||{}).token;if(!n)return;if(!e.getStateEvents("m.room.third_party_invite",n))return;e._tokenToInvite[n]=t}(t,e)),t.emit("RoomState.events",e,t))})),c.forEach(e,(function(e){if(e.getRoomId()===t.roomId&&e.isState())if("m.room.member"===e.getType()){var n=e.getStateKey();"leave"!==e.getContent().membership&&"ban"!==e.getContent().membership||(e.getContent().avatar_url=e.getContent().avatar_url||e.getPrevContent().avatar_url,e.getContent().displayname=e.getContent().displayname||e.getPrevContent().displayname);var r=t._getOrCreateMember(n,e);r.setMembershipEvent(e,t),t._updateMember(r),t.emit("RoomState.members",e,t,r)}else if("m.room.power_levels"===e.getType()){var i=c.values(t.members);c.forEach(i,(function(n){n.setPowerLevelEvent(e),t.emit("RoomState.members",e,t,n)})),t._sentinels={}}}))},d.prototype._getOrCreateMember=function(e,t){var n=this.members[e];return n||(n=new l(this.roomId,e),this.members[e]=n,this.emit("RoomState.newMember",t,this,n)),n},d.prototype._setStateEvent=function(e){void 0===this.events[e.getType()]&&(this.events[e.getType()]={}),this.events[e.getType()][e.getStateKey()]=e},d.prototype._updateMember=function(e){var t=this.getStateEvents("m.room.power_levels","");t&&e.setPowerLevelEvent(t),delete this._sentinels[e.userId],this.members[e.userId]=e,this._joinedMemberCount=null,this._invitedMemberCount=null},d.prototype.needsOutOfBandMembers=function(){return 1===this._oobMemberFlags.status},d.prototype.markOutOfBandMembersStarted=function(){1===this._oobMemberFlags.status&&(this._oobMemberFlags.status=2)},d.prototype.markOutOfBandMembersFailed=function(){2===this._oobMemberFlags.status&&(this._oobMemberFlags.status=1)},d.prototype.clearOutOfBandMembers=function(){var e=this,t=0;(0,i.default)(this.members).forEach((function(n){e.members[n].isOutOfBand()&&(++t,delete e.members[n])})),s.default.log("LL: RoomState removed "+t+" members..."),this._oobMemberFlags.status=1},d.prototype.setOutOfBandMembers=function(e){var t=this;s.default.log("LL: RoomState about to set "+e.length+" OOB members ..."),2===this._oobMemberFlags.status&&(s.default.log("LL: RoomState put in OOB_STATUS_FINISHED state ..."),this._oobMemberFlags.status=3,e.forEach((function(e){return t._setOutOfBandMember(e)})))},d.prototype._setOutOfBandMember=function(e){if("m.room.member"===e.getType()){var t=e.getStateKey(),n=this.getMember(t);if(!n||n.isOutOfBand()){var r=this._getOrCreateMember(t,e);r.setMembershipEvent(e,this),r.markOutOfBand(),f(this,r.userId,r.name),this._setStateEvent(e),this._updateMember(r),this.emit("RoomState.members",e,this,r)}}},d.prototype.setTypingEvent=function(e){c.forEach(c.values(this.members),(function(t){t.setTypingEvent(e)}))},d.prototype.getInviteForThreePidToken=function(e){return this._tokenToInvite[e]||null},d.prototype._updateModifiedTime=function(){this._modified=Date.now()},d.prototype.getLastModifiedTime=function(){return this._modified},d.prototype.getUserIdsWithDisplayName=function(e){return this._displayNameToUserIds[c.removeHiddenChars(e)]||[]},d.prototype.maySendRedactionForEvent=function(e,t){var n=this.getMember(t);if(!n||"leave"===n.membership)return!1;if(e.status||e.isRedacted())return!1;var r=this.maySendEvent("m.room.redaction",t);return e.getSender()===t?r:this._hasSufficientPowerLevelFor("redact",n.powerLevel)},d.prototype._hasSufficientPowerLevelFor=function(e,t){var n=this.getStateEvents("m.room.power_levels",""),r={};n&&(r=n.getContent());var i=50;return c.isNumber(r[e])&&(i=r[e]),t>=i},d.prototype.maySendMessage=function(e){return this._maySendEventOfType("m.room.message",e,!1)},d.prototype.maySendEvent=function(e,t){return this._maySendEventOfType(e,t,!1)},d.prototype.mayClientSendStateEvent=function(e,t){return!t.isGuest()&&this.maySendStateEvent(e,t.credentials.userId)},d.prototype.maySendStateEvent=function(e,t){return this._maySendEventOfType(e,t,!0)},d.prototype._maySendEventOfType=function(e,t,n){var i=this.getStateEvents("m.room.power_levels",""),o=void 0,s={},a=0,u=0,c=0;if(i){s=(o=i.getContent()).events||{},a=(0,r.default)(o.state_default)?o.state_default:50;var l=o.users&&o.users[t];(0,r.default)(l)?c=l:(0,r.default)(o.users_default)&&(c=o.users_default),(0,r.default)(o.events_default)&&(u=o.events_default)}var d=n?a:u;return(0,r.default)(s[e])&&(d=s[e]),c>=d},d.prototype.mayTriggerNotifOfType=function(e,t){var n=this.getMember(t);if(!n)return!1;var r=this.getStateEvents("m.room.power_levels",""),i=50;return r&&r.getContent()&&r.getContent().notifications&&c.isNumber(r.getContent().notifications[e])&&(i=r.getContent().notifications[e]),n.powerLevel>=i},e.exports=d},function(e,t,n){"use strict";var r=h(n(18)),i=h(n(22)),o=h(n(278)),s=h(n(282)),a=h(n(9)),u=h(n(8)),c=h(n(5)),l=n(1),d=h(n(57)),f=h(n(3)),p=h(n(91));function h(e){return e&&e.__esModule?e:{default:e}}var v=n(13).EventEmitter,m=n(19).EventStatus,y=n(285),g=n(99),_=n(19).MatrixEvent,b=n(2),k=n(71),w=n(46),E=n(146),S=["1","2","3","4"];function x(e,t,n){var r={content:{},type:"m.receipt",room_id:t.getRoomId()};return r.content[t.getId()]={},r.content[t.getId()][n]={},r.content[t.getId()][n][e]={ts:t.getTs()},new _(r)}function T(e,t,n,r){if((r=r||{}).pendingEventOrdering=r.pendingEventOrdering||"chronological",this.reEmitter=new p.default(this),-1===["chronological","detached"].indexOf(r.pendingEventOrdering))throw new Error("opts.pendingEventOrdering MUST be either 'chronological' or 'detached'. Got: '"+r.pendingEventOrdering+"'");this.myUserId=n,this.roomId=e,this.name=e,this.tags={},this.accountData={},this.summary=null,this.storageToken=r.storageToken,this._opts=r,this._txnToEvent={},this._receipts={},this._receiptCacheByEventId={},this._realReceipts={},this._notificationCounts={},this._timelineSets=[new E(this,r)],this.reEmitter.reEmit(this.getUnfilteredTimelineSet(),["Room.timeline","Room.timelineReset"]),this._fixUpLegacyTimelineFields(),this._filteredTimelineSets={},"detached"==this._opts.pendingEventOrdering&&(this._pendingEventList=[]),this._blacklistUnverifiedDevices=null,this._selfMembership=null,this._summaryHeroes=null,this._client=t,this._opts.lazyLoadMembers?this._membersPromise=null:this._membersPromise=d.default.resolve()}b.inherits(T,v),T.prototype.getVersion=function(){var e=this.currentState.getStateEvents("m.room.create","");if(!e)return f.default.warn("Room "+this.room_id+" does not have an m.room.create event"),"1";var t=e.getContent().room_version;return void 0===t?"1":t},T.prototype.shouldUpgradeToVersion=function(){return S.includes(this.getVersion())?null:"4"},T.prototype.getRecommendedVersion=(0,l.coroutine)(u.default.mark((function e(){var t,n,r,i,o,s,a,d,p,h;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.resolve)(this._client.getCapabilities());case 2:if(t=e.sent,n=t["m.room_versions"]){e.next=25;break}for(n={default:"4",available:{}},r=!0,i=!1,o=void 0,e.prev=9,s=(0,c.default)(S);!(r=(a=s.next()).done);r=!0)d=a.value,n.available[d]="stable";e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),i=!0,o=e.t0;case 17:e.prev=17,e.prev=18,!r&&s.return&&s.return();case 20:if(e.prev=20,!i){e.next=23;break}throw o;case 23:return e.finish(20);case 24:return e.finish(17);case 25:if(!(p=this._checkVersionAgainstCapability(n)).urgent||!p.needsUpgrade){e.next=38;break}return f.default.warn("Refreshing room version capability because the server looks to be supporting a newer room version we don't know about."),e.next=30,(0,l.resolve)(this._client.getCapabilities(!0));case 30:if(h=e.sent,n=h["m.room_versions"]){e.next=37;break}return f.default.warn("No room version capability - assuming upgrade required."),e.abrupt("return",p);case 37:p=this._checkVersionAgainstCapability(n);case 38:return e.abrupt("return",p);case 39:case"end":return e.stop()}}),e,this,[[9,13,17,25],[18,,20,24]])}))),T.prototype._checkVersionAgainstCapability=function(e){var t=this.getVersion();f.default.log("["+this.roomId+"] Current version: "+t),f.default.log("["+this.roomId+"] Version capability: ",e);var n={version:t,needsUpgrade:!1,urgent:!1};return t===e.default||(0,a.default)(e.available).filter((function(t){return"stable"===e.available[t]})).includes(t)||(n.version=e.default,n.needsUpgrade=!0,n.urgent=!!this.getVersion().match(/^[0-9]+[0-9.]*$/g),n.urgent?f.default.warn("URGENT upgrade required on "+this.roomId):f.default.warn("Non-urgent upgrade required on "+this.roomId)),n},T.prototype.userMayUpgradeRoom=function(e){return this.currentState.maySendStateEvent("m.room.tombstone",e)},T.prototype.getPendingEvents=function(){if("detached"!==this._opts.pendingEventOrdering)throw new Error("Cannot call getPendingEvents with pendingEventOrdering == "+this._opts.pendingEventOrdering);return this._pendingEventList},T.prototype.hasPendingEvent=function(e){if("detached"!==this._opts.pendingEventOrdering)throw new Error("Cannot call hasPendingEvent with pendingEventOrdering == "+this._opts.pendingEventOrdering);return this._pendingEventList.some((function(t){return t.getId()===e}))},T.prototype.getLiveTimeline=function(){return this.getUnfilteredTimelineSet().getLiveTimeline()},T.prototype.getLastActiveTimestamp=function(){var e=this.getLiveTimeline().getEvents();return e.length?e[e.length-1].getTs():s.default},T.prototype.getMyMembership=function(){return this._selfMembership},T.prototype.getDMInviter=function(){if(this.myUserId){var e=this.getMember(this.myUserId);if(e)return e.getDMInviter()}if("invite"===this._selfMembership&&(2==this.getInvitedAndJoinedMemberCount()&&this._summaryHeroes.length))return this._summaryHeroes[0]},T.prototype.guessDMUserId=function(){var e=this,t=this.getMember(this.myUserId);if(t){var n=t.getDMInviter();if(n)return n}if(Array.isArray(this._summaryHeroes)&&this._summaryHeroes.length)return this._summaryHeroes[0];var r=this.currentState.getMembers().find((function(t){return t.userId!==e.myUserId}));return r?r.userId:this.myUserId},T.prototype.getAvatarFallbackMember=function(){var e=this;if(!(this.getInvitedAndJoinedMemberCount()>2)){var t=Array.isArray(this._summaryHeroes)&&this._summaryHeroes.length;if(t){var n=this._summaryHeroes.map((function(t){return e.getMember(t)})).find((function(e){return!!e}));if(n)return n}var r=this.currentState.getMembers();if(r.length<=2){var i=r.find((function(t){return t.userId!==e.myUserId}));if(i)return i}if(t){var o=this._summaryHeroes.map((function(t){return e._client.getUser(t)})).find((function(e){return!!e}));if(o){var s=new g(this.roomId,o.userId);return s.user=o,s}}}},T.prototype.updateMyMembership=function(e){var t=this._selfMembership;this._selfMembership=e,t!==e&&("leave"===e&&this._cleanupAfterLeaving(),this.emit("Room.myMembership",this,e,t))},T.prototype._loadMembersFromServer=(0,l.coroutine)(u.default.mark((function e(){var t,n,r,i,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._client.store.getSyncToken(),n=b.encodeParams({not_membership:"leave",at:t}),r=b.encodeUri("/rooms/$roomId/members?"+n,{$roomId:this.roomId}),i=this._client._http,e.next=6,(0,l.resolve)(i.authedRequest(void 0,"GET",r));case 6:return o=e.sent,e.abrupt("return",o.chunk);case 8:case"end":return e.stop()}}),e,this)}))),T.prototype._loadMembers=(0,l.coroutine)(u.default.mark((function e(){var t,n,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,(0,l.resolve)(this._client.store.getOutOfBandMembers(this.roomId));case 3:if(null!==(n=e.sent)){e.next=10;break}return t=!0,e.next=8,(0,l.resolve)(this._loadMembersFromServer());case 8:n=e.sent,f.default.log("LL: got "+n.length+" members from server for room "+this.roomId);case 10:return r=n.map(this._client.getEventMapper()),e.abrupt("return",{memberEvents:r,fromServer:t});case 12:case"end":return e.stop()}}),e,this)}))),T.prototype.loadMembersIfNeeded=function(){var e=this;if(this._membersPromise)return this._membersPromise;this.currentState.markOutOfBandMembersStarted();var t=this._loadMembers().then((function(t){return e.currentState.setOutOfBandMembers(t.memberEvents),e._client.isCryptoEnabled()&&e._client.isRoomEncrypted(e.roomId)&&e._client._crypto.trackRoomDevices(e.roomId),t.fromServer})).catch((function(t){throw e._membersPromise=null,e.currentState.markOutOfBandMembersFailed(),t}));return t.then((function(t){if(t){var n=e.currentState.getMembers().filter((function(e){return e.isOutOfBand()})).map((function(e){return e.events.member.event}));return f.default.log("LL: telling store to write "+n.length+" members for room "+e.roomId),e._client.store.setOutOfBandMembers(e.roomId,n).catch((function(e){f.default.log("LL: storing OOB room members failed, oh well",e)}))}})).catch((function(e){f.default.error(e)})),this._membersPromise=t,this._membersPromise},T.prototype.clearLoadedMembersIfNeeded=(0,l.coroutine)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._opts.lazyLoadMembers||!this._membersPromise){e.next=7;break}return e.next=3,(0,l.resolve)(this.loadMembersIfNeeded());case 3:return e.next=5,(0,l.resolve)(this._client.store.clearOutOfBandMembers(this.roomId));case 5:this.currentState.clearOutOfBandMembers(),this._membersPromise=null;case 7:case"end":return e.stop()}}),e,this)}))),T.prototype._cleanupAfterLeaving=function(){var e=this;this.clearLoadedMembersIfNeeded().catch((function(t){f.default.error("error after clearing loaded members from room "+e.roomId+" after leaving"),f.default.log(t)}))},T.prototype.resetLiveTimeline=function(e,t){for(var n=0;n<this._timelineSets.length;n++)this._timelineSets[n].resetLiveTimeline(e,t);this._fixUpLegacyTimelineFields()},T.prototype._fixUpLegacyTimelineFields=function(){this.timeline=this.getLiveTimeline().getEvents(),this.oldState=this.getLiveTimeline().getState(w.BACKWARDS),this.currentState=this.getLiveTimeline().getState(w.FORWARDS)},T.prototype.hasUnverifiedDevices=(0,l.coroutine)(u.default.mark((function e(){var t,n,r,i,o,s,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._client.isRoomEncrypted(this.roomId)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,l.resolve)(this.getEncryptionTargetMembers());case 4:t=e.sent,n=!0,r=!1,i=void 0,e.prev=8,o=(0,c.default)(t);case 10:if(n=(s=o.next()).done){e.next=20;break}return a=s.value,e.next=14,(0,l.resolve)(this._client.getStoredDevicesForUser(a.userId));case 14:if(!e.sent.some((function(e){return e.isUnverified()}))){e.next=17;break}return e.abrupt("return",!0);case 17:n=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),r=!0,i=e.t0;case 26:e.prev=26,e.prev=27,!n&&o.return&&o.return();case 29:if(e.prev=29,!r){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,this,[[8,22,26,34],[27,,29,33]])}))),T.prototype.getTimelineSets=function(){return this._timelineSets},T.prototype.getUnfilteredTimelineSet=function(){return this._timelineSets[0]},T.prototype.getTimelineForEvent=function(e){return this.getUnfilteredTimelineSet().getTimelineForEvent(e)},T.prototype.addTimeline=function(){return this.getUnfilteredTimelineSet().addTimeline()},T.prototype.findEventById=function(e){return this.getUnfilteredTimelineSet().findEventById(e)},T.prototype.getUnreadNotificationCount=function(e){return e=e||"total",this._notificationCounts[e]},T.prototype.setUnreadNotificationCount=function(e,t){this._notificationCounts[e]=t},T.prototype.setSummary=function(e){var t=this,n=e["m.heroes"],r=e["m.joined_member_count"],i=e["m.invited_member_count"];(0,o.default)(r)&&this.currentState.setJoinedMemberCount(r),(0,o.default)(i)&&this.currentState.setInvitedMemberCount(i),Array.isArray(n)&&(this._summaryHeroes=n.filter((function(e){return e!==t.myUserId})))},T.prototype.setBlacklistUnverifiedDevices=function(e){this._blacklistUnverifiedDevices=e},T.prototype.getBlacklistUnverifiedDevices=function(){return this._blacklistUnverifiedDevices},T.prototype.getAvatarUrl=function(e,t,n,r,i){var o=this.currentState.getStateEvents("m.room.avatar","");if(void 0===i&&(i=!0),!o&&!i)return null;var s=o?o.getContent().url:null;return s?k.getHttpUriForMxc(e,s,t,n,r):i?k.getIdenticonUri(e,this.roomId,t,n):null},T.prototype.getAliases=function(){var e=[],t=this.currentState.getStateEvents("m.room.aliases");if(t)for(var n=function(n){var r=t[n];if(b.isArray(r.getContent().aliases)){var i=r.getContent().aliases.filter((function(e){return"string"===typeof e&&("#"===e[0]&&!!e.endsWith(":"+r.getStateKey()))}));Array.prototype.push.apply(e,i)}},r=0;r<t.length;++r)n(r);return e},T.prototype.getCanonicalAlias=function(){var e=this.currentState.getStateEvents("m.room.canonical_alias","");return e?e.getContent().alias:null},T.prototype.addEventsToTimeline=function(e,t,n,r){n.getTimelineSet().addEventsToTimeline(e,t,n,r)},T.prototype.getMember=function(e){return this.currentState.getMember(e)},T.prototype.getJoinedMembers=function(){return this.getMembersWithMembership("join")},T.prototype.getJoinedMemberCount=function(){return this.currentState.getJoinedMemberCount()},T.prototype.getInvitedMemberCount=function(){return this.currentState.getInvitedMemberCount()},T.prototype.getInvitedAndJoinedMemberCount=function(){return this.getInvitedMemberCount()+this.getJoinedMemberCount()},T.prototype.getMembersWithMembership=function(e){return b.filter(this.currentState.getMembers(),(function(t){return t.membership===e}))},T.prototype.getEncryptionTargetMembers=(0,l.coroutine)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.resolve)(this.loadMembersIfNeeded());case 2:return t=this.getMembersWithMembership("join"),this.shouldEncryptForInvitedMembers()&&(t=t.concat(this.getMembersWithMembership("invite"))),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),T.prototype.shouldEncryptForInvitedMembers=function(){var e=this.currentState.getStateEvents("m.room.history_visibility","");return e&&e.getContent()&&"joined"!==e.getContent().history_visibility},T.prototype.getDefaultRoomName=function(e){return I(this,e,!0)},T.prototype.hasMembershipState=function(e,t){var n=this.getMember(e);return!!n&&n.membership===t},T.prototype.getOrCreateFilteredTimelineSet=function(e){if(this._filteredTimelineSets[e.filterId])return this._filteredTimelineSets[e.filterId];var t=(0,i.default)({filter:e},this._opts),n=new E(this,t);this.reEmitter.reEmit(n,["Room.timeline","Room.timelineReset"]),this._filteredTimelineSets[e.filterId]=n,this._timelineSets.push(n);var r=this.getLiveTimeline();r.getEvents().forEach((function(e){n.addLiveEvent(e)}));for(var o=r;o.getNeighbouringTimeline(w.BACKWARDS);)o=o.getNeighbouringTimeline(w.BACKWARDS);return n.getLiveTimeline().setPaginationToken(o.getPaginationToken(w.BACKWARDS),w.BACKWARDS),n},T.prototype.removeFilteredTimelineSet=function(e){var t=this._filteredTimelineSets[e.filterId];delete this._filteredTimelineSets[e.filterId];var n=this._timelineSets.indexOf(t);n>-1&&this._timelineSets.splice(n,1)},T.prototype._addLiveEvent=function(e,t){if(e.isRedaction()){var n=e.event.redacts,r=this.getUnfilteredTimelineSet().findEventById(n);if(r){if(r.makeRedacted(e),r.getStateKey())this.currentState.getStateEvents(r.getType(),r.getStateKey()).getId()===r.getId()&&this.currentState.setStateEvents([r]);this.emit("Room.redaction",e,this)}}if(e.getUnsigned().transaction_id){var i=this._txnToEvent[e.getUnsigned().transaction_id];if(i)return void this._handleRemoteEcho(e,i)}for(var o=0;o<this._timelineSets.length;o++)this._timelineSets[o].addLiveEvent(e,t);e.sender&&"m.room.redaction"!==e.getType()&&this.addReceipt(x(e.sender.userId,e,"m.read"),!0)},T.prototype.addPendingEvent=function(e,t){if(e.status!==m.SENDING)throw new Error("addPendingEvent called on an event with status "+e.status);if(this._txnToEvent[t])throw new Error("addPendingEvent called on an event with known txnId "+t);if(w.setEventMetadata(e,this.getLiveTimeline().getState(w.FORWARDS),!1),this._txnToEvent[t]=e,"detached"==this._opts.pendingEventOrdering){if(this._pendingEventList.some((function(e){return e.status===m.NOT_SENT}))&&(f.default.warn("Setting event as NOT_SENT due to messages in the same state"),e.setStatus(m.NOT_SENT)),this._pendingEventList.push(e),e.isRelation()&&this._aggregateNonLiveRelation(e),e.isRedaction()){var n=e.event.redacts,r=this._pendingEventList&&this._pendingEventList.find((function(e){return e.getId()===n}));r||(r=this.getUnfilteredTimelineSet().findEventById(n)),r&&(r.markLocallyRedacted(e),this.emit("Room.redaction",e,this))}}else for(var i=0;i<this._timelineSets.length;i++){var o=this._timelineSets[i];o.getFilter()?o.getFilter().filterRoomTimeline([e]).length&&o.addEventToTimeline(e,o.getLiveTimeline(),!1):o.addEventToTimeline(e,o.getLiveTimeline(),!1)}this.emit("Room.localEchoUpdated",e,this,null,null)},T.prototype._aggregateNonLiveRelation=function(e){for(var t=0;t<this._timelineSets.length;t++){var n=this._timelineSets[t];n.getFilter()?n.getFilter().filterRoomTimeline([e]).length&&n.aggregateRelations(e):n.aggregateRelations(e)}},T.prototype._handleRemoteEcho=function(e,t){var n=t.getId(),r=e.getId(),i=t.status;delete this._txnToEvent[e.getUnsigned().transaction_id],this._pendingEventList&&b.removeElement(this._pendingEventList,(function(e){return e.getId()==n}),!1),t.handleRemoteEcho(e.event);for(var o=0;o<this._timelineSets.length;o++){this._timelineSets[o].handleRemoteEcho(t,n,r)}this.emit("Room.localEchoUpdated",t,this,n,i)};var R={};function I(e,t,n){if(!n){var r=e.currentState.getStateEvents("m.room.name","");if(r&&r.getContent()&&r.getContent().name)return r.getContent().name}var i=e.getCanonicalAlias();if(!i){var o=e.getAliases();o.length&&(i=o[0])}if(i)return i;var s=e.currentState.getJoinedMemberCount()+e.currentState.getInvitedMemberCount()-1,a=null;if(e._summaryHeroes)a=e._summaryHeroes.map((function(t){var n=e.getMember(t);return n?n.name:t}));else{var u=e.currentState.getMembers().filter((function(e){return e.userId!==t&&("invite"===e.membership||"join"===e.membership)}));u.sort((function(e,t){return e.userId.localeCompare(t.userId)})),a=(u=u.slice(0,5)).map((function(e){return e.name}))}if(s)return C(a,s);if("join"==e.getMyMembership()){var c=e.currentState.getStateEvents("m.room.third_party_invite");if(c&&c.length)return"Inviting "+C(c.map((function(e){return e.getContent().display_name})))}var l=a;return l.length||(l=e.currentState.getMembers().filter((function(e){return e.userId!==t&&"invite"!==e.membership&&"join"!==e.membership})).map((function(e){return e.name}))),l.length?"Empty room (was "+C(l)+")":"Empty room"}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length+1,n=t-1;if(e.length){if(1===e.length&&n<=1)return e[0];if(2===e.length&&n<=2)return e[0]+" and "+e[1];var r=n>1;return r?e[0]+" and "+n+" others":e[0]+" and 1 other"}return"Empty room"}R[m.ENCRYPTING]=[m.SENDING,m.NOT_SENT],R[m.SENDING]=[m.ENCRYPTING,m.QUEUED,m.NOT_SENT,m.SENT],R[m.QUEUED]=[m.SENDING,m.CANCELLED],R[m.SENT]=[],R[m.NOT_SENT]=[m.SENDING,m.QUEUED,m.CANCELLED],R[m.CANCELLED]=[],T.prototype.updatePendingEvent=function(e,t,n){if(f.default.log("setting pendingEvent status to "+t+" in "+e.getRoomId()),t==m.SENT&&!n)throw new Error("updatePendingEvent called with status=SENT, but no new event id");if(t==m.SENT&&this.getUnfilteredTimelineSet().eventIdToTimeline(n))return;var i=e.status,o=e.getId();if(!i)throw new Error("updatePendingEventStatus called on an event which is not a local echo.");var s=R[i];if(!s||s.indexOf(t)<0)throw new Error("Invalid EventStatus transition "+i+"->"+t);if(e.setStatus(t),t==m.SENT){e.replaceLocalEventId(n);for(var a=0;a<this._timelineSets.length;a++)this._timelineSets[a].replaceEventId(o,n)}else if(t==m.CANCELLED){if(this._pendingEventList){var u=this._pendingEventList.findIndex((function(e){return e.getId()===o}));if(-1!==u){var c=this._pendingEventList.splice(u,1),l=(0,r.default)(c,1)[0];l.isRedaction()&&this._revertRedactionLocalEcho(l)}}this.removeEvent(o)}this.emit("Room.localEchoUpdated",e,this,o,i)},T.prototype._revertRedactionLocalEcho=function(e){var t=e.event.redacts;if(t){var n=this.getUnfilteredTimelineSet().findEventById(t);n&&(n.unmarkLocallyRedacted(),this.emit("Room.redactionCancelled",e,this),n.isRelation()&&this._aggregateNonLiveRelation(n))}},T.prototype.addLiveEvents=function(e,t){var n=void 0;if(t&&-1===["replace","ignore"].indexOf(t))throw new Error("duplicateStrategy MUST be either 'replace' or 'ignore'");for(n=0;n<this._timelineSets.length;n++){var r=this._timelineSets[n].getLiveTimeline();if(r.getPaginationToken(w.FORWARDS))throw new Error("live timeline "+n+" is no longer live - it has a pagination token ("+r.getPaginationToken(w.FORWARDS)+")");if(r.getNeighbouringTimeline(w.FORWARDS))throw new Error("live timeline "+n+" is no longer live - it has a neighbouring timeline")}for(n=0;n<e.length;n++)this._addLiveEvent(e[n],t)},T.prototype.addEphemeralEvents=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=(0,c.default)(e);!(t=(i=o.next()).done);t=!0){var s=i.value;"m.typing"===s.getType()?this.currentState.setTypingEvent(s):"m.receipt"===s.getType()&&this.addReceipt(s)}}catch(a){n=!0,r=a}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},T.prototype.removeEvents=function(e){for(var t=0;t<e.length;++t)this.removeEvent(e[t])},T.prototype.removeEvent=function(e){for(var t=!1,n=0;n<this._timelineSets.length;n++){var r=this._timelineSets[n].removeEvent(e);r&&(r.isRedaction()&&this._revertRedactionLocalEcho(r),t=!0)}return t},T.prototype.recalculate=function(){var e=this,t=this.currentState.getStateEvents("m.room.member",this.myUserId);if(t&&"invite"===t.getContent().membership){var n=t.event.invite_room_state||[];b.forEach(n,(function(t){e.currentState.getStateEvents(t.type,t.state_key)||e.currentState.setStateEvents([new _({type:t.type,state_key:t.state_key,content:t.content,event_id:"$fake"+Date.now(),room_id:e.roomId,user_id:e.myUserId})])}))}var r=this.name;this.name=I(this,this.myUserId),this.summary=new y(this.roomId,{title:this.name}),r!==this.name&&this.emit("Room.name",this)},T.prototype.getUsersReadUpTo=function(e){return this.getReceiptsForEvent(e).filter((function(e){return"m.read"===e.type})).map((function(e){return e.userId}))},T.prototype.getEventReadUpTo=function(e,t){var n=this._receipts;return t&&(n=this._realReceipts),void 0===n["m.read"]||void 0===n["m.read"][e]?null:n["m.read"][e].eventId},T.prototype.hasUserReadEvent=function(e,t){var n=this.getEventReadUpTo(e,!1);if(n===t)return!0;if(this.timeline.length&&this.timeline[this.timeline.length-1].getSender()&&this.timeline[this.timeline.length-1].getSender()===e)return!0;for(var r=this.timeline.length-1;r>=0;--r){var i=this.timeline[r];if(i.getId()===t)return!1;if(i.getId()===n)return!0}return!1},T.prototype.getReceiptsForEvent=function(e){return this._receiptCacheByEventId[e.getId()]||[]},T.prototype.addReceipt=function(e,t){void 0===t&&(t=!1),t||this._addReceiptsToStructure(e,this._realReceipts),this._addReceiptsToStructure(e,this._receipts),this._receiptCacheByEventId=this._buildReceiptCache(this._receipts),this.emit("Room.receipt",e,this)},T.prototype._addReceiptsToStructure=function(e,t){var n=this;b.keys(e.getContent()).forEach((function(r){b.keys(e.getContent()[r]).forEach((function(i){b.keys(e.getContent()[r][i]).forEach((function(o){var s=e.getContent()[r][i][o];t[i]||(t[i]={});var a=t[i][o];if(a){var u=n.getUnfilteredTimelineSet().compareEventOrdering(a.eventId,r);if(null!==u&&u>=0)return}else t[i][o]={};t[i][o]={eventId:r,data:s}}))}))}))},T.prototype._buildReceiptCache=function(e){var t={};return b.keys(e).forEach((function(n){b.keys(e[n]).forEach((function(r){var i=e[n][r];t[i.eventId]||(t[i.eventId]=[]),t[i.eventId].push({userId:r,type:n,data:i.data})}))})),t},T.prototype._addLocalEchoReceipt=function(e,t,n){this.addReceipt(x(e,t,n),!0)},T.prototype.addTags=function(e){this.tags=e.getContent().tags||{},this.emit("Room.tags",e,this)},T.prototype.addAccountData=function(e){for(var t=0;t<e.length;t++){var n=e[t];"m.tag"===n.getType()&&this.addTags(n),this.accountData[n.getType()]=n,this.emit("Room.accountData",n,this)}},T.prototype.getAccountData=function(e){return this.accountData[e]},T.prototype.maySendMessage=function(){return"join"===this.getMyMembership()&&this.currentState.maySendEvent("m.room.message",this.myUserId)},e.exports=T},function(e,t,n){"use strict";var r=n(19),i=s(n(3)),o=s(n(286));function s(e){return e&&e.__esModule?e:{default:e}}var a=n(13).EventEmitter,u=n(2),c=n(46),l=void 0;function d(e,t){this.room=e,this._timelineSupport=Boolean(t.timelineSupport),this._liveTimeline=new c(this),this._unstableClientRelationAggregation=!!t.unstableClientRelationAggregation,this._timelines=[this._liveTimeline],this._eventIdToTimeline={},this._filter=t.filter||null,this._unstableClientRelationAggregation&&(this._relations={})}l=i.default.log.bind(i.default),u.inherits(d,a),d.prototype.getTimelines=function(){return this._timelines},d.prototype.getFilter=function(){return this._filter},d.prototype.setFilter=function(e){this._filter=e},d.prototype.getPendingEvents=function(){return this.room?this._filter?this._filter.filterRoomTimeline(this.room.getPendingEvents()):this.room.getPendingEvents():[]},d.prototype.getLiveTimeline=function(){return this._liveTimeline},d.prototype.eventIdToTimeline=function(e){return this._eventIdToTimeline[e]},d.prototype.replaceEventId=function(e,t){var n=this._eventIdToTimeline[e];n&&(delete this._eventIdToTimeline[e],this._eventIdToTimeline[t]=n)},d.prototype.resetLiveTimeline=function(e,t){var n=!this._timelineSupport||!t,r=this._liveTimeline,i=n?r.forkLive(c.FORWARDS):r.fork(c.FORWARDS);n?(this._timelines=[i],this._eventIdToTimeline={}):this._timelines.push(i),t&&r.setPaginationToken(t,c.FORWARDS),i.setPaginationToken(e,c.BACKWARDS),this._liveTimeline=i,this.emit("Room.timelineReset",this.room,this,n)},d.prototype.getTimelineForEvent=function(e){var t=this._eventIdToTimeline[e];return void 0===t?null:t},d.prototype.findEventById=function(e){var t=this.getTimelineForEvent(e);if(t)return u.findElement(t.getEvents(),(function(t){return t.getId()==e}))},d.prototype.addTimeline=function(){if(!this._timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");var e=new c(this);return this._timelines.push(e),e},d.prototype.addEventsToTimeline=function(e,t,n,r){if(!n)throw new Error("'timeline' not specified for EventTimelineSet.addEventsToTimeline");if(!t&&n==this._liveTimeline)throw new Error("EventTimelineSet.addEventsToTimeline cannot be used for adding events to the live timeline - use Room.addLiveEvents instead");if(!this._filter||(e=this._filter.filterRoomTimeline(e)).length){for(var o=t?c.BACKWARDS:c.FORWARDS,s=t?c.FORWARDS:c.BACKWARDS,a=!1,u=!1,d=0;d<e.length;d++){var f=e[d],p=f.getId(),h=this._eventIdToTimeline[p];if(h)if(u=!1,h!=n){var v=n.getNeighbouringTimeline(o);if(v)l(h==v?"Event "+p+" in neighbouring timeline - switching to "+h:"Event "+p+" already in a different timeline "+h),n=h;else{i.default.info("Already have timeline for "+p+" - joining timeline "+n+" to "+h);var m=h===this._liveTimeline,y=n===this._liveTimeline,g=o===c.BACKWARDS&&m,_=o===c.FORWARDS&&y;g||_?(g&&i.default.warn("Refusing to set a preceding existingTimeLine on our timeline as the existingTimeLine is live ("+h+")"),_&&i.default.warn("Refusing to set our preceding timeline on a existingTimeLine as our timeline is live ("+n+")")):(n.setNeighbouringTimeline(h,o),h.setNeighbouringTimeline(n,s),n=h,a=!0)}}else l("Event "+p+" already in timeline "+n);else this.addEventToTimeline(f,n,t),u=!0,a=!0}if(u||!a){if(o===c.FORWARDS&&n===this._liveTimeline)return i.default.warn({lastEventWasNew:u,didUpdate:a}),void i.default.warn("Refusing to set forwards pagination token of live timeline "+n+" to "+r);n.setPaginationToken(r,o)}}},d.prototype.addLiveEvent=function(e,t){if(this._filter&&!this._filter.filterRoomTimeline([e]).length)return;var n=this._eventIdToTimeline[e.getId()];if(n)if("replace"===t){l("EventTimelineSet.addLiveEvent: replacing duplicate event "+e.getId());for(var r=n.getEvents(),i=0;i<r.length;i++)if(r[i].getId()===e.getId()){c.setEventMetadata(e,n.getState(c.FORWARDS),!1),r[i].encryptedType||(r[i]=e);break}}else l("EventTimelineSet.addLiveEvent: ignoring duplicate event "+e.getId());else this.addEventToTimeline(e,this._liveTimeline,!1)},d.prototype.addEventToTimeline=function(e,t,n){var r=e.getId();t.addEvent(e,n),this._eventIdToTimeline[r]=t,this.setRelationsTarget(e),this.aggregateRelations(e);var i={timeline:t,liveEvent:!n&&t==this._liveTimeline};this.emit("Room.timeline",e,this.room,Boolean(n),!1,i)},d.prototype.handleRemoteEcho=function(e,t,n){var r=this._eventIdToTimeline[t];r?(delete this._eventIdToTimeline[t],this._eventIdToTimeline[n]=r):this._filter?this._filter.filterRoomTimeline([e]).length&&this.addEventToTimeline(e,this._liveTimeline,!1):this.addEventToTimeline(e,this._liveTimeline,!1)},d.prototype.removeEvent=function(e){var t=this._eventIdToTimeline[e];if(!t)return null;var n=t.removeEvent(e);if(n){delete this._eventIdToTimeline[e];var r={timeline:t};this.emit("Room.timeline",n,this.room,void 0,!0,r)}return n},d.prototype.compareEventOrdering=function(e,t){if(e==t)return 0;var n=this._eventIdToTimeline[e],r=this._eventIdToTimeline[t];if(void 0===n)return null;if(void 0===r)return null;if(n===r){for(var i=void 0,o=void 0,s=n.getEvents(),a=0;a<s.length&&(void 0===i||void 0===o);a++){var u=s[a].getId();u==e&&(i=a),u==t&&(o=a)}return i-o}for(var l=n;l;){if(l===r)return-1;l=l.getNeighbouringTimeline(c.FORWARDS)}for(l=n;l;){if(l===r)return 1;l=l.getNeighbouringTimeline(c.BACKWARDS)}return null},d.prototype.getRelationsForEvent=function(e,t,n){if(!this._unstableClientRelationAggregation)throw new Error("Client-side relation aggregation is disabled");if(!e||!t||!n)throw new Error("Invalid arguments for `getRelationsForEvent`");return((this._relations[e]||{})[t]||{})[n]},d.prototype.setRelationsTarget=function(e){if(this._unstableClientRelationAggregation){var t=this._relations[e.getId()];if(t){var n=t["m.replace"];if(n){var r=n["m.room.message"];r&&r.setTargetEvent(e)}}}},d.prototype.aggregateRelations=function(e){var t=this;if(this._unstableClientRelationAggregation&&!e.isRedacted()&&e.status!==r.EventStatus.CANCELLED)if(e.isBeingDecrypted())e.once("Event.decrypted",(function(){t.aggregateRelations(e)}));else{var n=e.getRelation();if(n){var i=n.event_id,s=n.rel_type,a=e.getType(),u=this._relations[i];u||(u=this._relations[i]={});var c=u[s];c||(c=u[s]={});var l=c[a],d=!1,f=void 0;l||(l=c[a]=new o.default(s,a,this.room),d=!0,(f=this.findEventById(i))&&l.setTargetEvent(f)),l.addEvent(e),d&&f&&f.emit("Event.relationsCreated",s,a)}}},e.exports=d},function(e,t,n){"use strict";var r=n(13).EventEmitter;function i(e){this.groupId=e,this.name=null,this.avatarUrl=null,this.myMembership=null,this.inviter=null}n(2).inherits(i,r),i.prototype.setProfile=function(e,t){this.name===e&&this.avatarUrl===t||(this.name=e||this.groupId,this.avatarUrl=t,this.emit("Group.profile",this))},i.prototype.setMyMembership=function(e){this.myMembership!==e&&(this.myMembership=e,this.emit("Group.myMembership",this))},i.prototype.setInviter=function(e){this.inviter=e},e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SERVICE_TYPES=void 0;var r,i=n(143),o=(r=i)&&r.__esModule?r:{default:r};t.SERVICE_TYPES=(0,o.default)({IS:"SERVICE_TYPE_IS",IM:"SERVICE_TYPE_IM"})},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g,o=n(101),s={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=o.assign({default:s.RFC3986,formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return String(e)}}},s)},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(155)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(59);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){(function(t){var r,i=n(103),o=n(293),s=n(294);i.request((function(e,t){return e.qs=s.stringify(e.qs||{},e.qsStringifyOptions),o(e,t)}));try{r=t.indexedDB}catch(a){}r&&i.setCryptoStoreFactory((function(){return new i.IndexedDBCryptoStore(r,"matrix-js-sdk:crypto")})),e.exports=i,t.matrixcs=i}).call(this,n(6))},,function(e,t,n){"use strict";var r=n(102),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,h=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||g}function k(){}function w(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||g}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=b.prototype;var E=w.prototype=new k;E.constructor=w,r(E,b.prototype),E.isPureReactComponent=!0;var S={current:null},x=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var C=/\/+/g,O=[];function A(e,t,n,r){if(O.length){var i=O.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function P(e,t,n){return null==e?0:function e(t,n,r,i){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var u=!1;if(null===t)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case s:u=!0}}if(u)return r(i,t,""===n?"."+M(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+M(a=t[c],c);u+=e(a,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=m&&t[m]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(a=t.next()).done;)u+=e(a=a.value,l=n+M(a,c++),r,i);else if("object"===a)throw r=""+t,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function U(e,t){e.func.call(e.context,t,e.count++)}function N(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?L(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),r.push(e))}function L(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(C,"$&/")+"/"),P(e,N,t=A(t,o,r,i)),D(t)}var F={current:null};function j(){var e=F.current;if(null===e)throw Error(y(321));return e}var K={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return L(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;P(e,U,t=A(null,null,t,n)),D(t)},count:function(e){return P(e,(function(){return null}),null)},toArray:function(e){var t=[];return L(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(y(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=c,t.PureComponent=w,t.StrictMode=u,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),s=e.key,a=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,u=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)x.call(t,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=R,t.createFactory=function(e){var t=R.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";var r=n(0),i=n(102),o=n(156);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,d=null,f={onError:function(e){u=!0,c=e}};function p(e,t,n,r,i,o,s,l,d){u=!1,c=null,a.apply(f,arguments)}var h=null,v=null,m=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,r,i,o,a,f,h){if(p.apply(this,arguments),u){if(!u)throw Error(s(198));var v=c;u=!1,c=null,l||(l=!0,d=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,_={};function b(){if(g)for(var e in _){var t=_[e],n=g.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!w[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in w[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,u=r;if(E.hasOwnProperty(u))throw Error(s(99,u));E[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&k(c[i],a,u);i=!0}else o.registrationName?(k(o.registrationName,a,u),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function k(e,t,n){if(S[e])throw Error(s(100,e));S[e]=t,x[e]=t.eventTypes[n].dependencies}var w=[],E={},S={},x={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!_.hasOwnProperty(t)||_[t]!==r){if(_[t])throw Error(s(102,t));_[t]=r,n=!0}}n&&b()}var R=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),I=null,C=null,O=null;function A(e){if(e=v(e)){if("function"!==typeof I)throw Error(s(280));var t=e.stateNode;t&&(t=h(t),I(e.stateNode,e.type,t))}}function D(e){C?O?O.push(e):O=[e]:C=e}function P(){if(C){var e=C,t=O;if(O=C=null,A(e),t)for(e=0;e<t.length;e++)A(t[e])}}function M(e,t){return e(t)}function U(e,t,n,r,i){return e(t,n,r,i)}function N(){}var L=M,F=!1,j=!1;function K(){null===C&&null===O||(N(),P())}function q(e,t,n){if(j)return e(t,n);j=!0;try{return L(e,t,n)}finally{j=!1,K()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V=Object.prototype.hasOwnProperty,G={},$={};function z(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new z(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new z(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new z(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new z(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new z(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new z(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new z(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new z(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new z(e,5,!1,e.toLowerCase(),null,!1)}));var H=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(H,Y);W[t]=new z(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(H,Y);W[t]=new z(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(H,Y);W[t]=new z(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new z(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new z(e,1,!1,e.toLowerCase(),null,!0)}));var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,n,r){var i=W.hasOwnProperty(t)?W[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!V.call($,e)||!V.call(G,e)&&(B.test(e)?$[e]=!0:(G[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Q.hasOwnProperty("ReactCurrentDispatcher")||(Q.ReactCurrentDispatcher={current:null}),Q.hasOwnProperty("ReactCurrentBatchConfig")||(Q.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,ue=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,de=Z?Symbol.for("react.memo"):60115,fe=Z?Symbol.for("react.lazy"):60116,pe=Z?Symbol.for("react.block"):60121,he="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=he&&e[he]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return me(e.type);case pe:return me(e.render);case fe:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=me(e.type);n=null,r&&(n=me(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=_e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_e(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Se(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function xe(e,t){Se(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Re(e,t.type,n):t.hasOwnProperty("defaultValue")&&Re(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Re(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ie(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ce(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function De(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Me="http://www.w3.org/1999/xhtml",Ue="http://www.w3.org/2000/svg";function Ne(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ne(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,je=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Ue||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ke(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Be={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},Ve={},Ge={};function $e(e){if(Ve[e])return Ve[e];if(!Be[e])return e;var t,n=Be[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ve[e]=n[t];return e}R&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete Be.animationend.animation,delete Be.animationiteration.animation,delete Be.animationstart.animation),"TransitionEvent"in window||delete Be.transitionend.transition);var ze=$e("animationend"),We=$e("animationiteration"),He=$e("animationstart"),Ye=$e("transitionend"),Qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Je(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(s(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return tt(i),e;if(o===r)return tt(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function at(e){if(null!==e&&(ot=rt(ot,e)),e=ot,ot=null,e){if(it(e,st),ot)throw Error(s(95));if(l)throw e=d,l=!1,d=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!R)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var lt=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function ft(e,t,n,r){if(lt.length){var i=lt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Rn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,u=0;u<w.length;u++){var c=w[u];c&&(c=c.extractEvents(r,t,o,i,s))&&(a=rt(a,c))}at(a)}}function ht(e,t,n){if(!n.has(e)){switch(e){case"scroll":Ht(t,"scroll",!0);break;case"focus":case"blur":Ht(t,"focus",!0),Ht(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Ht(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qe.indexOf(e)&&Wt(e,t)}n.set(e,null)}}var vt,mt,yt,gt=!1,_t=[],bt=null,kt=null,wt=null,Et=new Map,St=new Map,xt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Rt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function It(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ct(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=It(t,n,r,i,o),null!==t&&(null!==(t=In(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function At(e){var t=Rn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=In(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Pt(e,t,n){Dt(e)&&n.delete(t)}function Mt(){for(gt=!1;0<_t.length;){var e=_t[0];if(null!==e.blockedOn){null!==(e=In(e.blockedOn))&&vt(e);break}var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:_t.shift()}null!==bt&&Dt(bt)&&(bt=null),null!==kt&&Dt(kt)&&(kt=null),null!==wt&&Dt(wt)&&(wt=null),Et.forEach(Pt),St.forEach(Pt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,gt||(gt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Mt)))}function Nt(e){function t(t){return Ut(t,e)}if(0<_t.length){Ut(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==bt&&Ut(bt,e),null!==kt&&Ut(kt,e),null!==wt&&Ut(wt,e),Et.forEach(t),St.forEach(t),n=0;n<xt.length;n++)(r=xt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)At(n),null===n.blockedOn&&xt.shift()}var Lt={},Ft=new Map,jt=new Map,Kt=["abort","abort",ze,"animationEnd",We,"animationIteration",He,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function qt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},jt.set(r,t),Ft.set(r,o),Lt[i]=o}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(Kt,2);for(var Bt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Vt=0;Vt<Bt.length;Vt++)jt.set(Bt[Vt],0);var Gt=o.unstable_UserBlockingPriority,$t=o.unstable_runWithPriority,zt=!0;function Wt(e,t){Ht(t,e,!1)}function Ht(e,t,n){var r=jt.get(t);switch(void 0===r?2:r){case 0:r=Yt.bind(null,t,1,e);break;case 1:r=Qt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Yt(e,t,n,r){F||N();var i=Xt,o=F;F=!0;try{U(i,e,t,n,r)}finally{(F=o)||K()}}function Qt(e,t,n,r){$t(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(zt)if(0<_t.length&&-1<Tt.indexOf(e))e=It(null,e,t,n,r),_t.push(e);else{var i=Jt(e,t,n,r);if(null===i)Ct(e,r);else if(-1<Tt.indexOf(e))e=It(i,e,t,n,r),_t.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return bt=Ot(bt,e,t,n,r,i),!0;case"dragenter":return kt=Ot(kt,e,t,n,r,i),!0;case"mouseover":return wt=Ot(wt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Et.set(o,Ot(Et.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Ot(St.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Ct(e,r),e=ft(e,r,null,t);try{q(pt,e)}finally{dt(e)}}}}function Jt(e,t,n,r){if(null!==(n=Rn(n=ut(r)))){var i=Ze(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=et(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{q(pt,e)}finally{dt(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Zt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=Me;function un(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var r=0;r<t.length;r++)ht(t[r],e,n)}function cn(){}function ln(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(){for(var e=window,t=ln();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ln((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn=null,mn=null;function yn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,bn="function"===typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function wn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),Sn="__reactInternalInstance$"+En,xn="__reactEventHandlers$"+En,Tn="__reactContainere$"+En;function Rn(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Tn]||n[Sn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wn(e);null!==e;){if(n=e[Sn])return n;e=wn(e)}return t}n=(e=n).parentNode}return null}function In(e){return!(e=e[Sn]||e[Tn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Cn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function On(e){return e[xn]||null}function An(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Dn(e,t){var n=e.stateNode;if(!n)return null;var r=h(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Pn(e,t,n){(t=Dn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Mn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=An(t);for(t=n.length;0<t--;)Pn(n[t],"captured",e);for(t=0;t<n.length;t++)Pn(n[t],"bubbled",e)}}function Un(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Dn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Nn(e){e&&e.dispatchConfig.registrationName&&Un(e._targetInst,null,e)}function Ln(e){it(e,Mn)}var Fn=null,jn=null,Kn=null;function qn(){if(Kn)return Kn;var e,t,n=jn,r=n.length,i="value"in Fn?Fn.value:Fn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Kn=i.slice(e,1<t?1-t:void 0)}function Bn(){return!0}function Vn(){return!1}function Gn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Bn:Vn,this.isPropagationStopped=Vn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function zn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Wn(e){e.eventPool=[],e.getPooled=$n,e.release=zn}i(Gn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){this.isPersistent=Bn},isPersistent:Vn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Vn,this._dispatchInstances=this._dispatchListeners=null}}),Gn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Gn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Wn(n),n},Wn(Gn);var Hn=Gn.extend({data:null}),Yn=Gn.extend({data:null}),Qn=[9,13,27,32],Xn=R&&"CompositionEvent"in window,Jn=null;R&&"documentMode"in document&&(Jn=document.documentMode);var Zn=R&&"TextEvent"in window&&!Jn,er=R&&(!Xn||Jn&&8<Jn&&11>=Jn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==Qn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var sr=!1;var ar={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Xn)e:{switch(e){case"compositionstart":var o=nr.compositionStart;break e;case"compositionend":o=nr.compositionEnd;break e;case"compositionupdate":o=nr.compositionUpdate;break e}o=void 0}else sr?ir(e,n)&&(o=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=nr.compositionStart);return o?(er&&"ko"!==n.locale&&(sr||o!==nr.compositionStart?o===nr.compositionEnd&&sr&&(i=qn()):(jn="value"in(Fn=r)?Fn.value:Fn.textContent,sr=!0)),o=Hn.getPooled(o,t,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Ln(o),i=o):i=null,(e=Zn?function(e,t){switch(e){case"compositionend":return or(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(sr)return"compositionend"===e||!Xn&&ir(e,t)?(e=qn(),Kn=jn=Fn=null,sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Yn.getPooled(nr.beforeInput,t,n,r)).data=e,Ln(t)):t=null,null===i?t:null===t?i:[i,t]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ur[e.type]:"textarea"===t}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function dr(e,t,n){return(e=Gn.getPooled(lr.change,e,t,n)).type="change",D(n),Ln(e),e}var fr=null,pr=null;function hr(e){at(e)}function vr(e){if(ke(Cn(e)))return e}function mr(e,t){if("change"===e)return t}var yr=!1;function gr(){fr&&(fr.detachEvent("onpropertychange",_r),pr=fr=null)}function _r(e){if("value"===e.propertyName&&vr(pr))if(e=dr(pr,e,ut(e)),F)at(e);else{F=!0;try{M(hr,e)}finally{F=!1,K()}}}function br(e,t,n){"focus"===e?(gr(),pr=n,(fr=t).attachEvent("onpropertychange",_r)):"blur"===e&&gr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return vr(pr)}function wr(e,t){if("click"===e)return vr(t)}function Er(e,t){if("input"===e||"change"===e)return vr(t)}R&&(yr=ct("input")&&(!document.documentMode||9<document.documentMode));var Sr={eventTypes:lr,_isInputEventSupported:yr,extractEvents:function(e,t,n,r){var i=t?Cn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=mr;else if(cr(i))if(yr)s=Er;else{s=kr;var a=br}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=wr);if(s&&(s=s(e,t)))return dr(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Re(i,"number",i.value)}},xr=Gn.extend({view:null,detail:null}),Tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tr[e])&&!!t[e]}function Ir(){return Rr}var Cr=0,Or=0,Ar=!1,Dr=!1,Pr=xr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ir,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Cr;return Cr=e.screenX,Ar?"mousemove"===e.type?e.screenX-t:0:(Ar=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Or;return Or=e.screenY,Dr?"mousemove"===e.type?e.screenY-t:0:(Dr=!0,0)}}),Mr=Pr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ur={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Nr={eventTypes:Ur,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?Rn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Pr,u=Ur.mouseLeave,c=Ur.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Mr,u=Ur.pointerLeave,c=Ur.pointerEnter,l="pointer");if(e=null==s?o:Cn(s),o=null==t?o:Cn(t),(u=a.getPooled(u,s,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=a.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=s)&&l)e:{for(c=l,s=0,e=a=r;e;e=An(e))s++;for(e=0,t=c;t;t=An(t))e++;for(;0<s-e;)a=An(a),s--;for(;0<e-s;)c=An(c),e--;for(;s--;){if(a===c||a===c.alternate)break e;a=An(a),c=An(c)}a=null}else a=null;for(c=a,a=[];r&&r!==c&&(null===(s=r.alternate)||s!==c);)a.push(r),r=An(r);for(r=[];l&&l!==c&&(null===(s=l.alternate)||s!==c);)r.push(l),l=An(l);for(l=0;l<a.length;l++)Un(a[l],"bubbled",u);for(l=r.length;0<l--;)Un(r[l],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Fr=Object.prototype.hasOwnProperty;function jr(e,t){if(Lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Fr.call(t,n[r])||!Lr(e[n[r]],t[n[r]]))return!1;return!0}var Kr=R&&"documentMode"in document&&11>=document.documentMode,qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Br=null,Vr=null,Gr=null,$r=!1;function zr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==Br||Br!==ln(n)?null:("selectionStart"in(n=Br)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gr&&jr(Gr,n)?null:(Gr=n,(e=Gn.getPooled(qr.select,Vr,e,t)).type="select",e.target=Br,Ln(e),e))}var Wr={eventTypes:qr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Je(i),o=x.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Cn(t):window,e){case"focus":(cr(i)||"true"===i.contentEditable)&&(Br=i,Vr=t,Gr=null);break;case"blur":Gr=Vr=Br=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,zr(n,r);case"selectionchange":if(Kr)break;case"keydown":case"keyup":return zr(n,r)}return null}},Hr=Gn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yr=Gn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qr=xr.extend({relatedTarget:null});function Xr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=xr.extend({key:function(e){if(e.key){var t=Jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?Xr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Pr.extend({dataTransfer:null}),ni=xr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ir}),ri=Gn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Pr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Lt,extractEvents:function(e,t,n,r){var i=Ft.get(e);if(!i)return null;switch(e){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Qr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case ze:case We:case He:e=Hr;break;case Ye:e=ri;break;case"scroll":e=xr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Mr;break;default:e=Gn}return Ln(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(s(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),h=On,v=In,m=Cn,T({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Nr,ChangeEventPlugin:Sr,SelectEventPlugin:Wr,BeforeInputEventPlugin:ar});var si=[],ai=-1;function ui(e){0>ai||(e.current=si[ai],si[ai]=null,ai--)}function ci(e,t){ai++,si[ai]=e.current,e.current=t}var li={},di={current:li},fi={current:!1},pi=li;function hi(e,t){var n=e.type.contextTypes;if(!n)return li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mi(){ui(fi),ui(di)}function yi(e,t,n){if(di.current!==li)throw Error(s(168));ci(di,t),ci(fi,n)}function gi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,me(t)||"Unknown",o));return i({},n,{},r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,pi=di.current,ci(di,e),ci(fi,fi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=gi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(di),ci(di,e)):ui(fi),ci(fi,n)}var ki=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Si=o.unstable_requestPaint,xi=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Ii=o.unstable_UserBlockingPriority,Ci=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,Ai=o.unstable_IdlePriority,Di={},Pi=o.unstable_shouldYield,Mi=void 0!==Si?Si:function(){},Ui=null,Ni=null,Li=!1,Fi=xi(),ji=1e4>Fi?xi:function(){return xi()-Fi};function Ki(){switch(Ti()){case Ri:return 99;case Ii:return 98;case Ci:return 97;case Oi:return 96;case Ai:return 95;default:throw Error(s(332))}}function qi(e){switch(e){case 99:return Ri;case 98:return Ii;case 97:return Ci;case 96:return Oi;case 95:return Ai;default:throw Error(s(332))}}function Bi(e,t){return e=qi(e),ki(e,t)}function Vi(e,t,n){return e=qi(e),wi(e,t,n)}function Gi(e){return null===Ui?(Ui=[e],Ni=wi(Ri,zi)):Ui.push(e),Di}function $i(){if(null!==Ni){var e=Ni;Ni=null,Ei(e)}zi()}function zi(){if(!Li&&null!==Ui){Li=!0;var e=0;try{var t=Ui;Bi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),wi(Ri,$i),n}finally{Li=!1}}}function Wi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Hi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Yi={current:null},Qi=null,Xi=null,Ji=null;function Zi(){Ji=Xi=Qi=null}function eo(e){var t=Yi.current;ui(Yi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function no(e,t){Qi=e,Ji=Xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Os=!0),e.firstContext=null)}function ro(e,t){if(Ji!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Ji=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xi){if(null===Qi)throw Error(s(308));Xi=t,Qi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Xi=Xi.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ao(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function co(e,t){var n=e.alternate;null!==n&&so(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function lo(e,t,n,r){var o=e.updateQueue;io=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var u=s.next;s.next=a.next,a.next=u}s=a,o.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=a))}if(null!==s){u=s.next;var c=o.baseState,l=0,d=null,f=null,p=null;if(null!==u)for(var h=u;;){if((a=h.expirationTime)<r){var v={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(f=p=v,d=c):p=p.next=v,a>l&&(l=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),ou(a,h.suspenseConfig);e:{var m=e,y=h;switch(a=t,v=n,y.tag){case 1:if("function"===typeof(m=y.payload)){c=m.call(v,c,a);break e}c=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(a="function"===typeof(m=y.payload)?m.call(v,c,a):m)||void 0===a)break e;c=i({},c,a);break e;case 2:io=!0}}null!==h.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[h]:a.push(h))}if(null===(h=h.next)||h===u){if(null===(a=o.shared.pending))break;h=s.next=a.next,a.next=u,o.baseQueue=s=a,o.shared.pending=null}}null===p?d=c:p.next=f,o.baseState=d,o.baseQueue=p,su(l),e.expirationTime=l,e.memoizedState=c}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var po=Q.ReactCurrentBatchConfig,ho=(new r.Component).refs;function vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=za(),i=po.suspense;(i=ao(r=Wa(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),uo(e,i),Ha(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=za(),i=po.suspense;(i=ao(r=Wa(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),uo(e,i),Ha(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=za(),r=po.suspense;(r=ao(n=Wa(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),uo(e,r),Ha(e,n)}};function yo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!jr(n,r)||!jr(i,o))}function go(e,t,n){var r=!1,i=li,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=vi(t)?pi:di.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?hi(e,i):li),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ho,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=vi(t)?pi:di.current,i.context=hi(e,o)),lo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&mo.enqueueReplaceState(i,i.state,null),lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function wo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ho&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Eo(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Tu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Cu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wo(e,t,n),r.return=e,r):((r=Ru(n.type,n.key,n.props,null,e.mode,r)).ref=wo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Iu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Cu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ru(t.type,t.key,t.props,null,e.mode,n)).ref=wo(e,null,t),n.return=e,n;case te:return(t=Ou(t,e.mode,n)).return=e,t}if(ko(t)||ve(t))return(t=Iu(t,e.mode,n,null)).return=e,t;Eo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?d(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(ko(n)||ve(n))return null!==i?null:d(e,t,n,r,null);Eo(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?d(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||ve(r))return d(t,e=e.get(n)||null,r,i,null);Eo(t,r)}return null}function v(i,s,a,u){for(var c=null,l=null,d=s,v=s=0,m=null;null!==d&&v<a.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var y=p(i,d,a[v],u);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,v),null===l?c=y:l.sibling=y,l=y,d=m}if(v===a.length)return n(i,d),c;if(null===d){for(;v<a.length;v++)null!==(d=f(i,a[v],u))&&(s=o(d,s,v),null===l?c=d:l.sibling=d,l=d);return c}for(d=r(i,d);v<a.length;v++)null!==(m=h(d,i,v,a[v],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),s=o(m,s,v),null===l?c=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),c}function m(i,a,u,c){var l=ve(u);if("function"!==typeof l)throw Error(s(150));if(null==(u=l.call(u)))throw Error(s(151));for(var d=l=null,v=a,m=a=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var _=p(i,v,g.value,c);if(null===_){null===v&&(v=y);break}e&&v&&null===_.alternate&&t(i,v),a=o(_,a,m),null===d?l=_:d.sibling=_,d=_,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(a=o(g,a,m),null===d?l=g:d.sibling=g,d=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=h(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),a=o(g,a,m),null===d?l=g:d.sibling=g,d=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case ee:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===ne){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=wo(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===ne?((r=Iu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Ru(o.type,o.key,o.props,null,e.mode,u)).ref=wo(e,r,o),u.return=e,e=u)}return a(e);case te:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ou(o,e.mode,u)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Cu(o,e.mode,u)).return=e,e=r),a(e);if(ko(o))return v(e,r,o,u);if(ve(o))return m(e,r,o,u);if(l&&Eo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var xo=So(!0),To=So(!1),Ro={},Io={current:Ro},Co={current:Ro},Oo={current:Ro};function Ao(e){if(e===Ro)throw Error(s(174));return e}function Do(e,t){switch(ci(Oo,t),ci(Co,e),ci(Io,Ro),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Le(null,"");break;default:t=Le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Io),ci(Io,t)}function Po(){ui(Io),ui(Co),ui(Oo)}function Mo(e){Ao(Oo.current);var t=Ao(Io.current),n=Le(t,e.type);t!==n&&(ci(Co,e),ci(Io,n))}function Uo(e){Co.current===e&&(ui(Io),ui(Co))}var No={current:0};function Lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Fo(e,t){return{responder:e,props:t}}var jo=Q.ReactCurrentDispatcher,Ko=Q.ReactCurrentBatchConfig,qo=0,Bo=null,Vo=null,Go=null,$o=!1;function zo(){throw Error(s(321))}function Wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lr(e[n],t[n]))return!1;return!0}function Ho(e,t,n,r,i,o){if(qo=o,Bo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,jo.current=null===e||null===e.memoizedState?ys:gs,e=n(r,i),t.expirationTime===qo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Go=Vo=null,t.updateQueue=null,jo.current=_s,e=n(r,i)}while(t.expirationTime===qo)}if(jo.current=ms,t=null!==Vo&&null!==Vo.next,qo=0,Go=Vo=Bo=null,$o=!1,t)throw Error(s(300));return e}function Yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Go?Bo.memoizedState=Go=e:Go=Go.next=e,Go}function Qo(){if(null===Vo){var e=Bo.alternate;e=null!==e?e.memoizedState:null}else e=Vo.next;var t=null===Go?Bo.memoizedState:Go.next;if(null!==t)Go=t,Vo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Vo=e).memoizedState,baseState:Vo.baseState,baseQueue:Vo.baseQueue,queue:Vo.queue,next:null},null===Go?Bo.memoizedState=Go=e:Go=Go.next=e}return Go}function Xo(e,t){return"function"===typeof t?t(e):t}function Jo(e){var t=Qo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,c=i;do{var l=c.expirationTime;if(l<qo){var d={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(a=u=d,o=r):u=u.next=d,l>Bo.expirationTime&&(Bo.expirationTime=l,su(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=a,Lr(r,t.memoizedState)||(Os=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Zo(e){var t=Qo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Lr(o,t.memoizedState)||(Os=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function es(e){var t=Yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:e}).dispatch=vs.bind(null,Bo,e),[t.memoizedState,e]}function ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Bo.updateQueue)?(t={lastEffect:null},Bo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ns(){return Qo().memoizedState}function rs(e,t,n,r){var i=Yo();Bo.effectTag|=e,i.memoizedState=ts(1|t,n,void 0,void 0===r?null:r)}function is(e,t,n,r){var i=Qo();r=void 0===r?null:r;var o=void 0;if(null!==Vo){var s=Vo.memoizedState;if(o=s.destroy,null!==r&&Wo(r,s.deps))return void ts(t,n,o,r)}Bo.effectTag|=e,i.memoizedState=ts(1|t,n,o,r)}function os(e,t){return rs(516,4,e,t)}function ss(e,t){return is(516,4,e,t)}function as(e,t){return is(4,2,e,t)}function us(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function cs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,is(4,2,us.bind(null,t,e),n)}function ls(){}function ds(e,t){return Yo().memoizedState=[e,void 0===t?null:t],e}function fs(e,t){var n=Qo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ps(e,t){var n=Qo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hs(e,t,n){var r=Ki();Bi(98>r?98:r,(function(){e(!0)})),Bi(97<r?97:r,(function(){var r=Ko.suspense;Ko.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ko.suspense=r}}))}function vs(e,t,n){var r=za(),i=po.suspense;i={expirationTime:r=Wa(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Bo||null!==o&&o===Bo)$o=!0,i.expirationTime=qo,Bo.expirationTime=qo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,Lr(a,s))return}catch(u){}Ha(e,r)}}var ms={readContext:ro,useCallback:zo,useContext:zo,useEffect:zo,useImperativeHandle:zo,useLayoutEffect:zo,useMemo:zo,useReducer:zo,useRef:zo,useState:zo,useDebugValue:zo,useResponder:zo,useDeferredValue:zo,useTransition:zo},ys={readContext:ro,useCallback:ds,useContext:ro,useEffect:os,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,rs(4,2,us.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rs(4,2,e,t)},useMemo:function(e,t){var n=Yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=vs.bind(null,Bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Yo().memoizedState=e},useState:es,useDebugValue:ls,useResponder:Fo,useDeferredValue:function(e,t){var n=es(e),r=n[0],i=n[1];return os((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}),[e,t]),r},useTransition:function(e){var t=es(!1),n=t[0];return t=t[1],[ds(hs.bind(null,t,e),[t,e]),n]}},gs={readContext:ro,useCallback:fs,useContext:ro,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:ps,useReducer:Jo,useRef:ns,useState:function(){return Jo(Xo)},useDebugValue:ls,useResponder:Fo,useDeferredValue:function(e,t){var n=Jo(Xo),r=n[0],i=n[1];return ss((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Jo(Xo),n=t[0];return t=t[1],[fs(hs.bind(null,t,e),[t,e]),n]}},_s={readContext:ro,useCallback:fs,useContext:ro,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:ps,useReducer:Zo,useRef:ns,useState:function(){return Zo(Xo)},useDebugValue:ls,useResponder:Fo,useDeferredValue:function(e,t){var n=Zo(Xo),r=n[0],i=n[1];return ss((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Zo(Xo),n=t[0];return t=t[1],[fs(hs.bind(null,t,e),[t,e]),n]}},bs=null,ks=null,ws=!1;function Es(e,t){var n=Su(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ss(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function xs(e){if(ws){var t=ks;if(t){var n=t;if(!Ss(e,t)){if(!(t=kn(n.nextSibling))||!Ss(e,t))return e.effectTag=-1025&e.effectTag|2,ws=!1,void(bs=e);Es(bs,n)}bs=e,ks=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,ws=!1,bs=e}}function Ts(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;bs=e}function Rs(e){if(e!==bs)return!1;if(!ws)return Ts(e),ws=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gn(t,e.memoizedProps))for(t=ks;t;)Es(e,t),t=kn(t.nextSibling);if(Ts(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ks=kn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ks=null}}else ks=bs?kn(e.stateNode.nextSibling):null;return!0}function Is(){ks=bs=null,ws=!1}var Cs=Q.ReactCurrentOwner,Os=!1;function As(e,t,n,r){t.child=null===e?To(t,null,n,r):xo(t,e.child,n,r)}function Ds(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=Ho(e,t,n,r,o,i),null===e||Os?(t.effectTag|=1,As(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Hs(e,t,i))}function Ps(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||xu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ru(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ms(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:jr)(i,r)&&e.ref===t.ref)?Hs(e,t,o):(t.effectTag|=1,(e=Tu(s,r)).ref=t.ref,e.return=t,t.child=e)}function Ms(e,t,n,r,i,o){return null!==e&&jr(e.memoizedProps,r)&&e.ref===t.ref&&(Os=!1,i<o)?(t.expirationTime=e.expirationTime,Hs(e,t,o)):Ns(e,t,n,r,o)}function Us(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ns(e,t,n,r,i){var o=vi(n)?pi:di.current;return o=hi(t,o),no(t,i),n=Ho(e,t,n,r,o,i),null===e||Os?(t.effectTag|=1,As(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Hs(e,t,i))}function Ls(e,t,n,r,i){if(vi(n)){var o=!0;_i(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),go(t,n,r),bo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=hi(t,c=vi(n)?pi:di.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&_o(t,s,r,c),io=!1;var f=t.memoizedState;s.state=f,lo(t,r,s,i),u=t.memoizedState,a!==r||f!==u||fi.current||io?("function"===typeof l&&(vo(t,n,l,r),u=t.memoizedState),(a=io||yo(t,n,a,r,f,u,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,so(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:Hi(t.type,a),u=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=hi(t,c=vi(n)?pi:di.current),(d="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&_o(t,s,r,c),io=!1,u=t.memoizedState,s.state=u,lo(t,r,s,i),f=t.memoizedState,a!==r||u!==f||fi.current||io?("function"===typeof l&&(vo(t,n,l,r),f=t.memoizedState),(l=io||yo(t,n,a,r,u,f,c))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Fs(e,t,n,r,o,i)}function Fs(e,t,n,r,i,o){Us(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&bi(t,n,!1),Hs(e,t,o);r=t.stateNode,Cs.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,a,o)):As(e,t,a,o),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Do(e,t.containerInfo)}var Ks,qs,Bs,Vs={dehydrated:null,retryTime:0};function Gs(e,t,n){var r,i=t.mode,o=t.pendingProps,s=No.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),ci(No,1&s),null===e){if(void 0!==o.fallback&&xs(t),a){if(a=o.fallback,(o=Iu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Iu(a,i,n,null)).return=t,o.sibling=n,t.memoizedState=Vs,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=To(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(n=Tu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=Tu(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Vs,t.child=n,i}return n=xo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=o.fallback,(o=Iu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Iu(a,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Vs,t.child=o,n}return t.memoizedState=null,t.child=xo(t,e,o.children,n)}function $s(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),to(e.return,t)}function zs(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(As(e,t,r.children,n),0!==(2&(r=No.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,n);else if(19===e.tag)$s(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(No,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,o,t.lastEffect);break;case"together":zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Hs(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&su(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Tu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qs(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return vi(t.type)&&mi(),null;case 3:return Po(),ui(fi),ui(di),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Rs(t)||(t.effectTag|=4),null;case 5:Uo(t),n=Ao(Oo.current);var o=t.type;if(null!==e&&null!=t.stateNode)qs(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ao(Io.current),Rs(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Sn]=t,r[xn]=a,o){case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(e=0;e<Qe.length;e++)Wt(Qe[e],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"form":Wt("reset",r),Wt("submit",r);break;case"details":Wt("toggle",r);break;case"input":Ee(r,a),Wt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Wt("invalid",r),un(n,"onChange");break;case"textarea":Ae(r,a),Wt("invalid",r),un(n,"onChange")}for(var u in on(o,a),e=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):S.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":be(r),Te(r,a,!0);break;case"textarea":be(r),Pe(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===an&&(e=Ne(o)),e===an?"script"===o?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(o,{is:r.is}):(e=u.createElement(o),"select"===o&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,o),e[Sn]=t,e[xn]=r,Ks(e,t),t.stateNode=e,u=sn(o,r),o){case"iframe":case"object":case"embed":Wt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Qe.length;c++)Wt(Qe[c],e);c=r;break;case"source":Wt("error",e),c=r;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),c=r;break;case"form":Wt("reset",e),Wt("submit",e),c=r;break;case"details":Wt("toggle",e),c=r;break;case"input":Ee(e,r),c=we(e,r),Wt("invalid",e),un(n,"onChange");break;case"option":c=Ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Wt("invalid",e),un(n,"onChange");break;case"textarea":Ae(e,r),c=Oe(e,r),Wt("invalid",e),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];"style"===a?nn(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&je(e,d):"children"===a?"string"===typeof d?("textarea"!==o||""!==d)&&Ke(e,d):"number"===typeof d&&Ke(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?null!=d&&un(n,a):null!=d&&X(e,a,d,u))}switch(o){case"input":be(e),Te(e,r,!1);break;case"textarea":be(e),Pe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ce(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ce(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=cn)}yn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Bs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Ao(Oo.current),Ao(Io.current),Rs(t)?(n=t.stateNode,r=t.memoizedProps,n[Sn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Sn]=t,t.stateNode=n)}return null;case 13:return ui(No),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Rs(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&No.current)?Ra===ba&&(Ra=ka):(Ra!==ba&&Ra!==ka||(Ra=wa),0!==Da&&null!==Sa&&(Pu(Sa,Ta),Mu(Sa,Da)))),(n||r)&&(t.effectTag|=4),null);case 4:return Po(),null;case 10:return eo(t),null;case 17:return vi(t.type)&&mi(),null;case 19:if(ui(No),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(a=r.rendering)){if(o)Ys(r,!1);else if(Ra!==ba||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Lo(a))){for(t.effectTag|=64,Ys(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return ci(No,1&No.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=Lo(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Ys(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Ys(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ji()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=No.current,ci(No,o?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function Xs(e){switch(e.tag){case 1:vi(e.type)&&mi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Po(),ui(fi),ui(di),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Uo(e),null;case 13:return ui(No),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ui(No),null;case 4:return Po(),null;case 10:return eo(e),null;default:return null}}function Js(e,t){return{value:e,source:t,stack:ye(t)}}Ks=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qs=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a,u,c=t.stateNode;switch(Ao(Io.current),e=null,n){case"input":s=we(c,s),r=we(c,r),e=[];break;case"option":s=Ie(c,s),r=Ie(c,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=Oe(c,s),r=Oe(c,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(a in on(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(u in c=s[a])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var l=r[a];if(c=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&l!==c&&(null!=l||null!=c))if("style"===a)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(a,n)),n=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(a,l)):"children"===a?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(S.hasOwnProperty(a)?(null!=l&&un(o,a),e||c===l||(e=[])):(e=e||[]).push(a,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Bs=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Zs="function"===typeof WeakSet?WeakSet:Set;function ea(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ta(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){gu(e,n)}else t.current=null}function na(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Hi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function ra(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ia(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oa(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ia(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Hi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&yn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Nt(n)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function sa(e,t,n){switch("function"===typeof wu&&wu(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Bi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){gu(i,o)}}e=e.next}while(e!==r)}))}break;case 1:ta(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){gu(e,n)}}(t,n);break;case 5:ta(t);break;case 4:la(e,t,n)}}function aa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&aa(t)}function ua(e){return 5===e.tag||3===e.tag||4===e.tag}function ca(e){e:{for(var t=e.return;null!==t;){if(ua(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Ke(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ua(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function la(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,d=c;;)if(sa(u,d,l),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===c)break e;for(;null===d.sibling;){if(null===d.return||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(sa(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function da(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ra(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[xn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Se(n,r),sn(e,i),t=sn(e,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?nn(n,u):"dangerouslySetInnerHTML"===a?je(n,u):"children"===a?Ke(n,u):X(n,a,u,t)}switch(e){case"input":xe(n,r);break;case"textarea":De(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ce(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ce(n,!!r.multiple,r.defaultValue,!0):Ce(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Nt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ma=ji()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void fa(t);case 19:return void fa(t);case 17:return}throw Error(s(163))}function fa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function ha(e,t,n){(n=ao(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Na||(Na=!0,La=r),ea(e,t)},n}function va(e,t,n){(n=ao(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ea(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Fa?Fa=new Set([this]):Fa.add(this),ea(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ma,ya=Math.ceil,ga=Q.ReactCurrentDispatcher,_a=Q.ReactCurrentOwner,ba=0,ka=3,wa=4,Ea=0,Sa=null,xa=null,Ta=0,Ra=ba,Ia=null,Ca=1073741823,Oa=1073741823,Aa=null,Da=0,Pa=!1,Ma=0,Ua=null,Na=!1,La=null,Fa=null,ja=!1,Ka=null,qa=90,Ba=null,Va=0,Ga=null,$a=0;function za(){return 0!==(48&Ea)?1073741821-(ji()/10|0):0!==$a?$a:$a=1073741821-(ji()/10|0)}function Wa(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Ki();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&Ea))return Ta;if(null!==n)e=Wi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Wi(e,150,100);break;case 97:case 96:e=Wi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Sa&&e===Ta&&--e,e}function Ha(e,t){if(50<Va)throw Va=0,Ga=null,Error(s(185));if(null!==(e=Ya(e,t))){var n=Ki();1073741823===t?0!==(8&Ea)&&0===(48&Ea)?Za(e):(Xa(e),0===Ea&&$i()):Xa(e),0===(4&Ea)||98!==n&&99!==n||(null===Ba?Ba=new Map([[e,t]]):(void 0===(n=Ba.get(e))||n>t)&&Ba.set(e,t))}}function Ya(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Sa===i&&(su(t),Ra===wa&&Pu(i,Ta)),Mu(i,t)),i}function Qa(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Du(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Xa(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Gi(Za.bind(null,e));else{var t=Qa(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=za();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Di&&Ei(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Gi(Za.bind(null,e)):Vi(r,Ja.bind(null,e),{timeout:10*(1073741821-t)-ji()}),e.callbackNode=t}}}function Ja(e,t){if($a=0,t)return Uu(e,t=za()),Xa(e),null;var n=Qa(e);if(0!==n){if(t=e.callbackNode,0!==(48&Ea))throw Error(s(327));if(vu(),e===Sa&&n===Ta||nu(e,n),null!==xa){var r=Ea;Ea|=16;for(var i=iu();;)try{uu();break}catch(u){ru(e,u)}if(Zi(),Ea=r,ga.current=i,1===Ra)throw t=Ia,nu(e,n),Pu(e,n),Xa(e),t;if(null===xa)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ra,Sa=null,r){case ba:case 1:throw Error(s(345));case 2:Uu(e,2<n?2:n);break;case ka:if(Pu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=du(i)),1073741823===Ca&&10<(i=Ma+500-ji())){if(Pa){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,nu(e,n);break}}if(0!==(o=Qa(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=_n(fu.bind(null,e),i);break}fu(e);break;case wa:if(Pu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=du(i)),Pa&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,nu(e,n);break}if(0!==(i=Qa(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Oa?r=10*(1073741821-Oa)-ji():1073741823===Ca?r=0:(r=10*(1073741821-Ca)-5e3,0>(r=(i=ji())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ya(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=_n(fu.bind(null,e),r);break}fu(e);break;case 5:if(1073741823!==Ca&&null!==Aa){o=Ca;var a=Aa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=ji()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Pu(e,n),e.timeoutHandle=_n(fu.bind(null,e),r);break}}fu(e);break;default:throw Error(s(329))}if(Xa(e),e.callbackNode===t)return Ja.bind(null,e)}}return null}function Za(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Ea))throw Error(s(327));if(vu(),e===Sa&&t===Ta||nu(e,t),null!==xa){var n=Ea;Ea|=16;for(var r=iu();;)try{au();break}catch(i){ru(e,i)}if(Zi(),Ea=n,ga.current=r,1===Ra)throw n=Ia,nu(e,t),Pu(e,t),Xa(e),n;if(null!==xa)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Sa=null,fu(e),Xa(e)}return null}function eu(e,t){var n=Ea;Ea|=1;try{return e(t)}finally{0===(Ea=n)&&$i()}}function tu(e,t){var n=Ea;Ea&=-2,Ea|=8;try{return e(t)}finally{0===(Ea=n)&&$i()}}function nu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,bn(n)),null!==xa)for(n=xa.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Po(),ui(fi),ui(di);break;case 5:Uo(r);break;case 4:Po();break;case 13:case 19:ui(No);break;case 10:eo(r)}n=n.return}Sa=e,xa=Tu(e.current,null),Ta=t,Ra=ba,Ia=null,Oa=Ca=1073741823,Aa=null,Da=0,Pa=!1}function ru(e,t){for(;;){try{if(Zi(),jo.current=ms,$o)for(var n=Bo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qo=0,Go=Vo=Bo=null,$o=!1,null===xa||null===xa.return)return Ra=1,Ia=t,xa=null;e:{var i=e,o=xa.return,s=xa,a=t;if(t=Ta,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var u=a;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var l=0!==(1&No.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(f){var v=d.updateQueue;if(null===v){var m=new Set;m.add(u),d.updateQueue=m}else v.add(u);if(0===(2&d.mode)){if(d.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ao(1073741823,null);y.tag=2,uo(s,y)}s.expirationTime=1073741823;break e}a=void 0,s=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new pa,a=new Set,g.set(u,a)):void 0===(a=g.get(u))&&(a=new Set,g.set(u,a)),!a.has(s)){a.add(s);var _=_u.bind(null,i,u,s);u.then(_,_)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);a=Error((me(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(s))}5!==Ra&&(Ra=2),a=Js(a,s),d=o;do{switch(d.tag){case 3:u=a,d.effectTag|=4096,d.expirationTime=t,co(d,ha(d,u,t));break e;case 1:u=a;var b=d.type,k=d.stateNode;if(0===(64&d.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Fa||!Fa.has(k)))){d.effectTag|=4096,d.expirationTime=t,co(d,va(d,u,t));break e}}d=d.return}while(null!==d)}xa=lu(xa)}catch(w){t=w;continue}break}}function iu(){var e=ga.current;return ga.current=ms,null===e?ms:e}function ou(e,t){e<Ca&&2<e&&(Ca=e),null!==t&&e<Oa&&2<e&&(Oa=e,Aa=t)}function su(e){e>Da&&(Da=e)}function au(){for(;null!==xa;)xa=cu(xa)}function uu(){for(;null!==xa&&!Pi();)xa=cu(xa)}function cu(e){var t=ma(e.alternate,e,Ta);return e.memoizedProps=e.pendingProps,null===t&&(t=lu(e)),_a.current=null,t}function lu(e){xa=e;do{var t=xa.alternate;if(e=xa.return,0===(2048&xa.effectTag)){if(t=Qs(t,xa,Ta),1===Ta||1!==xa.childExpirationTime){for(var n=0,r=xa.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}xa.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=xa.firstEffect),null!==xa.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=xa.firstEffect),e.lastEffect=xa.lastEffect),1<xa.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=xa:e.firstEffect=xa,e.lastEffect=xa))}else{if(null!==(t=Xs(xa)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=xa.sibling))return t;xa=e}while(null!==xa);return Ra===ba&&(Ra=5),null}function du(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function fu(e){var t=Ki();return Bi(99,pu.bind(null,e,t)),null}function pu(e,t){do{vu()}while(null!==Ka);if(0!==(48&Ea))throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=du(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Sa&&(xa=Sa=null,Ta=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ea;Ea|=32,_a.current=null,vn=zt;var a=pn();if(hn(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{var c=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{u.nodeType,d.nodeType}catch(T){u=null;break e}var f=0,p=-1,h=-1,v=0,m=0,y=a,g=null;t:for(;;){for(var _;y!==u||0!==l&&3!==y.nodeType||(p=f+l),y!==d||0!==c&&3!==y.nodeType||(h=f+c),3===y.nodeType&&(f+=y.nodeValue.length),null!==(_=y.firstChild);)g=y,y=_;for(;;){if(y===a)break t;if(g===u&&++v===l&&(p=f),g===d&&++m===c&&(h=f),null!==(_=y.nextSibling))break;g=(y=g).parentNode}y=_}u=-1===p||-1===h?null:{start:p,end:h}}else u=null}u=u||{start:0,end:0}}else u=null;mn={activeElementDetached:null,focusedElem:a,selectionRange:u},zt=!1,Ua=i;do{try{hu()}catch(T){if(null===Ua)throw Error(s(330));gu(Ua,T),Ua=Ua.nextEffect}}while(null!==Ua);Ua=i;do{try{for(a=e,u=t;null!==Ua;){var b=Ua.effectTag;if(16&b&&Ke(Ua.stateNode,""),128&b){var k=Ua.alternate;if(null!==k){var w=k.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ca(Ua),Ua.effectTag&=-3;break;case 6:ca(Ua),Ua.effectTag&=-3,da(Ua.alternate,Ua);break;case 1024:Ua.effectTag&=-1025;break;case 1028:Ua.effectTag&=-1025,da(Ua.alternate,Ua);break;case 4:da(Ua.alternate,Ua);break;case 8:la(a,l=Ua,u),aa(l)}Ua=Ua.nextEffect}}catch(T){if(null===Ua)throw Error(s(330));gu(Ua,T),Ua=Ua.nextEffect}}while(null!==Ua);if(w=mn,k=pn(),b=w.focusedElem,u=w.selectionRange,k!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&hn(b)&&(k=u.start,void 0===(w=u.end)&&(w=k),"selectionStart"in b?(b.selectionStart=k,b.selectionEnd=Math.min(w,b.value.length)):(w=(k=b.ownerDocument||document)&&k.defaultView||window).getSelection&&(w=w.getSelection(),l=b.textContent.length,a=Math.min(u.start,l),u=void 0===u.end?a:Math.min(u.end,l),!w.extend&&a>u&&(l=u,u=a,a=l),l=fn(b,a),d=fn(b,u),l&&d&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==d.node||w.focusOffset!==d.offset)&&((k=k.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),a>u?(w.addRange(k),w.extend(d.node,d.offset)):(k.setEnd(d.node,d.offset),w.addRange(k))))),k=[];for(w=b;w=w.parentNode;)1===w.nodeType&&k.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<k.length;b++)(w=k[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}zt=!!vn,mn=vn=null,e.current=n,Ua=i;do{try{for(b=e;null!==Ua;){var E=Ua.effectTag;if(36&E&&oa(b,Ua.alternate,Ua),128&E){k=void 0;var S=Ua.ref;if(null!==S){var x=Ua.stateNode;switch(Ua.tag){case 5:k=x;break;default:k=x}"function"===typeof S?S(k):S.current=k}}Ua=Ua.nextEffect}}catch(T){if(null===Ua)throw Error(s(330));gu(Ua,T),Ua=Ua.nextEffect}}while(null!==Ua);Ua=null,Mi(),Ea=o}else e.current=n;if(ja)ja=!1,Ka=e,qa=t;else for(Ua=i;null!==Ua;)t=Ua.nextEffect,Ua.nextEffect=null,Ua=t;if(0===(t=e.firstPendingTime)&&(Fa=null),1073741823===t?e===Ga?Va++:(Va=0,Ga=e):Va=0,"function"===typeof ku&&ku(n.stateNode,r),Xa(e),Na)throw Na=!1,e=La,La=null,e;return 0!==(8&Ea)||$i(),null}function hu(){for(;null!==Ua;){var e=Ua.effectTag;0!==(256&e)&&na(Ua.alternate,Ua),0===(512&e)||ja||(ja=!0,Vi(97,(function(){return vu(),null}))),Ua=Ua.nextEffect}}function vu(){if(90!==qa){var e=97<qa?97:qa;return qa=90,Bi(e,mu)}}function mu(){if(null===Ka)return!1;var e=Ka;if(Ka=null,0!==(48&Ea))throw Error(s(331));var t=Ea;for(Ea|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ra(5,n),ia(5,n)}}catch(r){if(null===e)throw Error(s(330));gu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ea=t,$i(),!0}function yu(e,t,n){uo(e,t=ha(e,t=Js(n,t),1073741823)),null!==(e=Ya(e,1073741823))&&Xa(e)}function gu(e,t){if(3===e.tag)yu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){yu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Fa||!Fa.has(r))){uo(n,e=va(n,e=Js(t,e),1073741823)),null!==(n=Ya(n,1073741823))&&Xa(n);break}}n=n.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Sa===e&&Ta===n?Ra===wa||Ra===ka&&1073741823===Ca&&ji()-Ma<500?nu(e,Ta):Pa=!0:Du(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Xa(e)))}function bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Wa(t=za(),e,null)),null!==(e=Ya(e,t))&&Xa(e)}ma=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||fi.current)Os=!0;else{if(r<n){switch(Os=!1,t.tag){case 3:js(t),Is();break;case 5:if(Mo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vi(t.type)&&_i(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Gs(e,t,n):(ci(No,1&No.current),null!==(t=Hs(e,t,n))?t.sibling:null);ci(No,1&No.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Ws(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ci(No,No.current),!r)return null}return Hs(e,t,n)}Os=!1}}else Os=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=hi(t,di.current),no(t,n),i=Ho(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&vo(t,r,a,e),i.updater=mo,t.stateNode=i,i._reactInternalFiber=t,bo(t,r,e,n),t=Fs(null,t,r,!0,o,n)}else t.tag=0,As(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return xu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ue)return 11;if(e===de)return 14}return 2}(i),e=Hi(i,e),o){case 0:t=Ns(null,t,i,e,n);break e;case 1:t=Ls(null,t,i,e,n);break e;case 11:t=Ds(null,t,i,e,n);break e;case 14:t=Ps(null,t,i,Hi(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ls(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 3:if(js(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,so(e,t),lo(t,r,null,n),(r=t.memoizedState.element)===i)Is(),t=Hs(e,t,n);else{if((i=t.stateNode.hydrate)&&(ks=kn(t.stateNode.containerInfo.firstChild),bs=t,i=ws=!0),i)for(n=To(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else As(e,t,r,n),Is();t=t.child}return t;case 5:return Mo(t),null===e&&xs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,gn(r,i)?a=null:null!==o&&gn(r,o)&&(t.effectTag|=16),Us(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(As(e,t,a,n),t=t.child),t;case 6:return null===e&&xs(t),null;case 13:return Gs(e,t,n);case 4:return Do(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):As(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ds(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 7:return As(e,t,t.pendingProps,n),t.child;case 8:case 12:return As(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var u=t.type._context;if(ci(Yi,u._currentValue),u._currentValue=o,null!==a)if(u=a.value,0===(o=Lr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!fi.current){t=Hs(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=ao(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),to(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}As(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.effectTag|=1,As(e,t,r,n),t.child;case 14:return o=Hi(i=t.type,t.pendingProps),Ps(e,t,i,o=Hi(i.type,o),r,n);case 15:return Ms(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vi(r)?(e=!0,_i(t)):e=!1,no(t,n),go(t,r,i),bo(t,r,i,n),Fs(null,t,r,!0,e,n);case 19:return Ws(e,t,n)}throw Error(s(156,t.tag))};var ku=null,wu=null;function Eu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Su(e,t,n,r){return new Eu(e,t,n,r)}function xu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tu(e,t){var n=e.alternate;return null===n?((n=Su(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ru(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)xu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Iu(n.children,i,o,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=Su(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=Su(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case le:return(e=Su(19,n,t,i)).elementType=le,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case ue:a=11;break e;case de:a=14;break e;case fe:a=16,r=null;break e;case pe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Su(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Iu(e,t,n,r){return(e=Su(7,e,r,t)).expirationTime=n,e}function Cu(e,t,n){return(e=Su(6,e,null,t)).expirationTime=n,e}function Ou(e,t,n){return(t=Su(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Au(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Du(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Pu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Mu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Uu(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Nu(e,t,n,r){var i=t.current,o=za(),a=po.suspense;o=Wa(o,i,a);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(vi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=gi(n,c,u);break e}}n=u}else n=li;return null===t.context?t.context=n:t.pendingContext=n,(t=ao(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),Ha(i,o),o}function Lu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Fu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function ju(e,t){Fu(e,t),(e=e.alternate)&&Fu(e,t)}function Ku(e,t,n){var r=new Au(e,t,n=null!=n&&!0===n.hydrate),i=Su(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,oo(i),e[Tn]=r.current,n&&0!==t&&function(e,t){var n=Je(t);Tt.forEach((function(e){ht(e,t,n)})),Rt.forEach((function(e){ht(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=Lu(s);a.call(e)}}Nu(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ku(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Lu(s);u.call(e)}}tu((function(){Nu(t,s,e,i)}))}return Lu(s)}function Vu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Gu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(t))throw Error(s(200));return Vu(e,t,null,n)}Ku.prototype.render=function(e){Nu(e,this._internalRoot,null,null)},Ku.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Nu(null,e,null,(function(){t[Tn]=null}))},vt=function(e){if(13===e.tag){var t=Wi(za(),150,100);Ha(e,t),ju(e,t)}},mt=function(e){13===e.tag&&(Ha(e,3),ju(e,3))},yt=function(e){if(13===e.tag){var t=za();Ha(e,t=Wa(t,e,null)),ju(e,t)}},I=function(e,t,n){switch(t){case"input":if(xe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=On(r);if(!i)throw Error(s(90));ke(r),xe(r,i)}}}break;case"textarea":De(e,n);break;case"select":null!=(t=n.value)&&Ce(e,!!n.multiple,t,!1)}},M=eu,U=function(e,t,n,r,i){var o=Ea;Ea|=4;try{return Bi(98,e.bind(null,t,n,r,i))}finally{0===(Ea=o)&&$i()}},N=function(){0===(49&Ea)&&(function(){if(null!==Ba){var e=Ba;Ba=null,e.forEach((function(e,t){Uu(t,e),Xa(t)})),$i()}}(),vu())},L=function(e,t){var n=Ea;Ea|=2;try{return e(t)}finally{0===(Ea=n)&&$i()}};var $u={Events:[In,Cn,On,T,E,Ln,function(e){it(e,Nn)},D,P,Xt,at,vu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ku=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Rn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$u,t.createPortal=Gu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Ea))throw Error(s(187));var n=Ea;Ea|=1;try{return Bi(99,e.bind(null,t))}finally{Ea=n,$i()}},t.hydrate=function(e,t,n){if(!qu(t))throw Error(s(200));return Bu(null,e,t,!0,n)},t.render=function(e,t,n){if(!qu(t))throw Error(s(200));return Bu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qu(e))throw Error(s(40));return!!e._reactRootContainer&&(tu((function(){Bu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Tn]=null}))})),!0)},t.unstable_batchedUpdates=eu,t.unstable_createPortal=function(e,t){return Gu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return Bu(e,t,n,!1,r)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(157)},function(e,t,n){"use strict";var r,i,o,s,a;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},d=Date.now();t.unstable_now=function(){return Date.now()-d},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},s=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,h=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var y=p.now();t.unstable_now=function(){return p.now()-y}}var g=!1,_=null,b=-1,k=5,w=0;s=function(){return t.unstable_now()>=w},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):k=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,S=E.port2;E.port1.onmessage=function(){if(null!==_){var e=t.unstable_now();w=e+k;try{_(!0,e)?S.postMessage(null):(g=!1,_=null)}catch(n){throw S.postMessage(null),n}}else g=!1},r=function(e){_=e,g||(g=!0,S.postMessage(null))},i=function(e,n){b=h((function(){e(t.unstable_now())}),n)},o=function(){v(b),b=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function R(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,u=e[a];if(void 0!==s&&0>I(s,n))void 0!==u&&0>I(u,s)?(e[r]=u,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==u&&0>I(u,n)))break e;e[r]=u,e[a]=n,r=a}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],O=[],A=1,D=null,P=3,M=!1,U=!1,N=!1;function L(e){for(var t=T(O);null!==t;){if(null===t.callback)R(O);else{if(!(t.startTime<=e))break;R(O),t.sortIndex=t.expirationTime,x(C,t)}t=T(O)}}function F(e){if(N=!1,L(e),!U)if(null!==T(C))U=!0,r(j);else{var t=T(O);null!==t&&i(F,t.startTime-e)}}function j(e,n){U=!1,N&&(N=!1,o()),M=!0;var r=P;try{for(L(n),D=T(C);null!==D&&(!(D.expirationTime>n)||e&&!s());){var a=D.callback;if(null!==a){D.callback=null,P=D.priorityLevel;var u=a(D.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?D.callback=u:D===T(C)&&R(C),L(n)}else R(C);D=T(C)}if(null!==D)var c=!0;else{var l=T(O);null!==l&&i(F,l.startTime-n),c=!1}return c}finally{D=null,P=r,M=!1}}function K(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){U||M||(U=!0,r(j))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return T(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=q,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var u=s.delay;u="number"===typeof u&&0<u?a+u:a,s="number"===typeof s.timeout?s.timeout:K(e)}else s=K(e),u=a;return e={id:A++,callback:n,priorityLevel:e,startTime:u,expirationTime:s=u+s,sortIndex:-1},u>a?(e.sortIndex=u,x(O,e),null===T(C)&&e===T(O)&&(N?o():N=!0,i(F,u-a))):(e.sortIndex=s,x(C,e),U||M||(U=!0,r(j))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=T(C);return n!==D&&null!==D&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<D.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},,function(e,t,n){n(160),e.exports=n(4).Number.isFinite},function(e,t,n){var r=n(7),i=n(11).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(162),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag",u="object"===typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=v;var l={},d={};d[o]=function(){return this};var f=Object.getPrototypeOf,p=f&&f(f(T([])));p&&p!==n&&r.call(p,o)&&(d=p);var h=_.prototype=y.prototype=Object.create(d);g.prototype=h.constructor=_,_.constructor=g,_[a]=g.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(h),e},c.awrap=function(e){return{__await:e}},b(k.prototype),k.prototype[s]=function(){return this},c.AsyncIterator=k,c.async=function(e,t,n,r){var i=new k(v(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(h),h[a]="Generator",h[o]=function(){return this},h.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}}}function v(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),s=new x(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=m(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,s),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function y(){}function g(){}function _(){}function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function k(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,s){var a=m(e[n],e,i);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"===typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(c).then((function(e){u.value=e,o(u)}),s)}s(a.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=m(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(164),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},s=!1,a=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var e=a.documentElement;r=function(t){var n=a.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return o[i]=s,r(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(s)setTimeout(l,0,e);else{var t=o[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{c(e),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(6),n(107))},function(e,t,n){n(166);var r=n(4).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(7);r(r.S,"Object",{create:n(48)})},function(e,t,n){var r=n(20),i=n(16),o=n(42);e.exports=n(17)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},function(e,t,n){var r=n(31),i=n(60),o=n(169);e.exports=function(e){return function(t,n,s){var a,u=r(t),c=i(u.length),l=o(s,c);if(e&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(76),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){e.exports={default:n(171),__esModule:!0}},function(e,t,n){n(33),n(44),e.exports=n(82).f("iterator")},function(e,t,n){var r=n(76),i=n(75);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(48),i=n(47),o=n(51),s={};n(27)(s,n(15)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(175),i=n(111),o=n(43),s=n(31);e.exports=n(80)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(177),__esModule:!0}},function(e,t,n){n(178),n(63),n(181),n(182),e.exports=n(4).Symbol},function(e,t,n){"use strict";var r=n(11),i=n(30),o=n(17),s=n(7),a=n(110),u=n(62).KEY,c=n(28),l=n(78),d=n(51),f=n(61),p=n(15),h=n(82),v=n(83),m=n(179),y=n(112),g=n(16),_=n(14),b=n(34),k=n(31),w=n(73),E=n(47),S=n(48),x=n(180),T=n(114),R=n(84),I=n(20),C=n(42),O=T.f,A=I.f,D=x.f,P=r.Symbol,M=r.JSON,U=M&&M.stringify,N=p("_hidden"),L=p("toPrimitive"),F={}.propertyIsEnumerable,j=l("symbol-registry"),K=l("symbols"),q=l("op-symbols"),B=Object.prototype,V="function"==typeof P&&!!R.f,G=r.QObject,$=!G||!G.prototype||!G.prototype.findChild,z=o&&c((function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=O(B,t);r&&delete B[t],A(e,t,n),r&&e!==B&&A(B,t,r)}:A,W=function(e){var t=K[e]=S(P.prototype);return t._k=e,t},H=V&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,n){return e===B&&Y(q,t,n),g(e),t=w(t,!0),g(n),i(K,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:E(0,!1)})):(i(e,N)||A(e,N,E(1,{})),e[N][t]=!0),z(e,t,n)):A(e,t,n)},Q=function(e,t){g(e);for(var n,r=m(t=k(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},X=function(e){var t=F.call(this,e=w(e,!0));return!(this===B&&i(K,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(K,e)||i(this,N)&&this[N][e])||t)},J=function(e,t){if(e=k(e),t=w(t,!0),e!==B||!i(K,t)||i(q,t)){var n=O(e,t);return!n||!i(K,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(k(e)),r=[],o=0;n.length>o;)i(K,t=n[o++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=D(n?q:k(e)),o=[],s=0;r.length>s;)!i(K,t=r[s++])||n&&!i(B,t)||o.push(K[t]);return o};V||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===B&&t.call(q,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),z(this,e,E(1,n))};return o&&$&&z(B,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),T.f=J,I.f=Y,n(113).f=x.f=Z,n(52).f=X,R.f=ee,o&&!n(50)&&a(B,"propertyIsEnumerable",X,!0),h.f=function(e){return W(p(e))}),s(s.G+s.W+s.F*!V,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=C(p.store),ie=0;re.length>ie;)v(re[ie++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=P(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){$=!0},useSimple:function(){$=!1}}),s(s.S+s.F*!V,"Object",{create:function(e,t){return void 0===t?S(e):Q(S(e),t)},defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=c((function(){R.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return R.f(b(e))}}),M&&s(s.S+s.F*(!V||c((function(){var e=P();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!H(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!H(t))return t}),r[1]=t,U.apply(M,r)}}),P.prototype[L]||n(27)(P.prototype,L,P.prototype.valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(42),i=n(84),o=n(52);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,a=n(e),u=o.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},function(e,t,n){var r=n(31),i=n(113).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return s.slice()}}(e):i(r(e))}},function(e,t,n){n(83)("asyncIterator")},function(e,t,n){n(83)("observable")},function(e,t,n){var r=n(4),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";var r=n(185);var i=RegExp(Object.keys(r).map((function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")})).join("|"),"g");function o(e){return r[e]}e.exports=function(e){return e.replace(i,o)}},function(e){e.exports=JSON.parse('{"0":"O","1":"l","\u05ad":"\u0596","\u05ae":"\u0598","\u05a8":"\u0599","\u05a4":"\u059a","\u1ab4":"\u06db","\u20db":"\u06db","\u0619":"\u0313","\u08f3":"\u0313","\u0343":"\u0313","\u0315":"\u0313","\u064f":"\u0313","\u065d":"\u0314","\u059c":"\u0301","\u059d":"\u0301","\u0618":"\u0301","\u0747":"\u0301","\u0341":"\u0301","\u0954":"\u0301","\u064e":"\u0301","\u0340":"\u0300","\u0953":"\u0300","\u030c":"\u0306","\ua67c":"\u0306","\u0658":"\u0306","\u065a":"\u0306","\u036e":"\u0306","\u06e8":"\u0306\u0307","\u0310":"\u0306\u0307","\u0901":"\u0306\u0307","\u0981":"\u0306\u0307","\u0a81":"\u0306\u0307","\u0b01":"\u0306\u0307","\u0c00":"\u0306\u0307","\u0c81":"\u0306\u0307","\u0d01":"\u0306\u0307","\ud805\udcbf":"\u0306\u0307","\u1cd0":"\u0302","\u0311":"\u0302","\u065b":"\u0302","\u07ee":"\u0302","\ua6f0":"\u0302","\u05af":"\u030a","\u06df":"\u030a","\u17d3":"\u030a","\u309a":"\u030a","\u0652":"\u030a","\u0b82":"\u030a","\u1036":"\u030a","\u17c6":"\u030a","\ud804\udf00":"\u030a","\u0e4d":"\u030a","\u0ecd":"\u030a","\u0366":"\u030a","\u2dea":"\u030a","\u08eb":"\u0308","\u07f3":"\u0308","\u064b":"\u030b","\u08f0":"\u030b","\u0342":"\u0303","\u0653":"\u0303","\u05c4":"\u0307","\u06ec":"\u0307","\u0740":"\u0307","\u08ea":"\u0307","\u0741":"\u0307","\u0358":"\u0307","\u05b9":"\u0307","\u05ba":"\u0307","\u05c2":"\u0307","\u05c1":"\u0307","\u07ed":"\u0307","\u0902":"\u0307","\u0a02":"\u0307","\u0a82":"\u0307","\u0bcd":"\u0307","\u0337":"\u0338","\u1ab7":"\u0328","\u0322":"\u0328","\u0345":"\u0328","\u1cd2":"\u0304","\u0305":"\u0304","\u0659":"\u0304","\u07eb":"\u0304","\ua6f1":"\u0304","\u1cda":"\u030e","\u0657":"\u0312","\u0357":"\u0350","\u08ff":"\u0350","\u08f8":"\u0350","\u0900":"\u0352","\u1ced":"\u0316","\u1cdc":"\u0329","\u0656":"\u0329","\u1cd5":"\u032b","\u0347":"\u0333","\u08f9":"\u0354","\u08fa":"\u0355","\u309b":"\uff9e","\u309c":"\uff9f","\u0336":"\u0335","\u302c":"\u0309","\u05c5":"\u0323","\u08ed":"\u0323","\u1cdd":"\u0323","\u05b4":"\u0323","\u065c":"\u0323","\u093c":"\u0323","\u09bc":"\u0323","\u0a3c":"\u0323","\u0abc":"\u0323","\u0b3c":"\u0323","\ud804\uddca":"\u0323","\ud805\udcc3":"\u0323","\ud802\ude3a":"\u0323","\u08ee":"\u0324","\u1cde":"\u0324","\u0f37":"\u0325","\u302d":"\u0325","\u0327":"\u0326","\u0321":"\u0326","\u0339":"\u0326","\u1cd9":"\u032d","\u1cd8":"\u032e","\u0952":"\u0331","\u0320":"\u0331","\u08f1":"\u064c","\u08e8":"\u064c","\u08e5":"\u064c","\ufc5e":"\ufe72\u0651","\u08f2":"\u064d","\ufc5f":"\ufe74\u0651","\ufcf2":"\ufe77\u0651","\ufc60":"\ufe76\u0651","\ufcf3":"\ufe79\u0651","\ufc61":"\ufe78\u0651","\u061a":"\u0650","\u0317":"\u0650","\ufcf4":"\ufe7b\u0651","\ufc62":"\ufe7a\u0651","\ufc63":"\ufe7c\u0670","\u065f":"\u0655","\u030d":"\u0670","\u0742":"\u073c","\u0a03":"\u0983","\u0c03":"\u0983","\u0c83":"\u0983","\u0d03":"\u0983","\u0d83":"\u0983","\u1038":"\u0983","\ud805\udcc1":"\u0983","\u17cb":"\u0e48","\u0ec8":"\u0e48","\u0ec9":"\u0e49","\u0eca":"\u0e4a","\u0ecb":"\u0e4b","\ua66f":"\u20e9","\\u2028":" ","\\u2029":" ","\u1680":" ","\u2000":" ","\u2001":" ","\u2002":" ","\u2003":" ","\u2004":" ","\u2005":" ","\u2006":" ","\u2008":" ","\u2009":" ","\u200a":" ","\u205f":" ","\xa0":" ","\u2007":" ","\u202f":" ","\u07fa":"_","\ufe4d":"_","\ufe4e":"_","\ufe4f":"_","\u2010":"-","\u2011":"-","\u2012":"-","\u2013":"-","\ufe58":"-","\u06d4":"-","\u2043":"-","\u02d7":"-","\u2212":"-","\u2796":"-","\u2cba":"-","\u2a29":"-\u0313","\u2e1a":"-\u0308","\ufb29":"-\u0307","\u2238":"-\u0307","\u2a2a":"-\u0323","\ua4fe":"-.","\uff5e":"\u301c","\u060d":",","\u066b":",","\u201a":",","\xb8":",","\ua4f9":",","\u2e32":"\u060c","\u066c":"\u060c","\u037e":";","\u2e35":"\u061b","\u0903":":","\u0a83":":","\uff1a":":","\u0589":":","\u0703":":","\u0704":":","\u16ec":":","\ufe30":":","\u1803":":","\u1809":":","\u205a":":","\u05c3":":","\u02f8":":","\ua789":":","\u2236":":","\u02d0":":","\ua4fd":":","\u2a74":"::=","\u29f4":":\u2192","\uff01":"!","\u01c3":"!","\u2d51":"!","\u203c":"!!","\u2049":"!?","\u0294":"?","\u0241":"?","\u097d":"?","\u13ae":"?","\ua6eb":"?","\u2048":"?!","\u2047":"??","\u2e2e":"\u061f","\ud834\udd6d":".","\u2024":".","\u0701":".","\u0702":".","\ua60e":".","\ud802\ude50":".","\u0660":".","\u06f0":".","\ua4f8":".","\ua4fb":".,","\u2025":"..","\ua4fa":"..","\u2026":"...","\ua6f4":"\ua6f3\ua6f3","\u30fb":"\xb7","\uff65":"\xb7","\u16eb":"\xb7","\u0387":"\xb7","\u2e31":"\xb7","\ud800\udd01":"\xb7","\u2022":"\xb7","\u2027":"\xb7","\u2219":"\xb7","\u22c5":"\xb7","\ua78f":"\xb7","\u1427":"\xb7","\u22ef":"\xb7\xb7\xb7","\u2d48":"\xb7\xb7\xb7","\u1444":"\xb7<","\u22d7":"\xb7>","\u1437":"\xb7>","\u1440":"\xb7>","\u152f":"\xb74","\u147e":"\xb7b","\u1480":"\xb7b\u0307","\u147a":"\xb7d","\u1498":"\xb7J","\u14b6":"\xb7L","\u1476":"\xb7P","\u1457":"\xb7U","\u143a":"\xb7V","\u143c":"\xb7\u0245","\u14ae":"\xb7\u0393","\u140e":"\xb7\u0394","\u1459":"\xb7\u0548","\u140c":"\xb7\u1401","\u1410":"\xb7\u1404","\u1412":"\xb7\u1405","\u1414":"\xb7\u1406","\u1417":"\xb7\u140a","\u1419":"\xb7\u140b","\u143e":"\xb7\u1432","\u1442":"\xb7\u1434","\u1446":"\xb7\u1439","\u145b":"\xb7\u144f","\u1454":"\xb7\u1450","\u145d":"\xb7\u1450","\u145f":"\xb7\u1451","\u1461":"\xb7\u1455","\u1463":"\xb7\u1456","\u1474":"\xb7\u146b","\u1478":"\xb7\u146e","\u147c":"\xb7\u1470","\u1492":"\xb7\u1489","\u1494":"\xb7\u148b","\u1496":"\xb7\u148c","\u149a":"\xb7\u148e","\u149c":"\xb7\u1490","\u149e":"\xb7\u1491","\u14ac":"\xb7\u14a3","\u14b0":"\xb7\u14a6","\u14b2":"\xb7\u14a7","\u14b4":"\xb7\u14a8","\u14b8":"\xb7\u14ab","\u14c9":"\xb7\u14c0","\u18c6":"\xb7\u14c2","\u18c8":"\xb7\u14c3","\u18ca":"\xb7\u14c4","\u18cc":"\xb7\u14c5","\u14cb":"\xb7\u14c7","\u14cd":"\xb7\u14c8","\u14dc":"\xb7\u14d3","\u14de":"\xb7\u14d5","\u14e0":"\xb7\u14d6","\u14e2":"\xb7\u14d7","\u14e4":"\xb7\u14d8","\u14e6":"\xb7\u14da","\u14e8":"\xb7\u14db","\u14f6":"\xb7\u14ed","\u14f8":"\xb7\u14ef","\u14fa":"\xb7\u14f0","\u14fc":"\xb7\u14f1","\u14fe":"\xb7\u14f2","\u1500":"\xb7\u14f4","\u1502":"\xb7\u14f5","\u1517":"\xb7\u1510","\u1519":"\xb7\u1511","\u151b":"\xb7\u1512","\u151d":"\xb7\u1513","\u151f":"\xb7\u1514","\u1521":"\xb7\u1515","\u1523":"\xb7\u1516","\u1531":"\xb7\u1528","\u1533":"\xb7\u1529","\u1535":"\xb7\u152a","\u1537":"\xb7\u152b","\u1539":"\xb7\u152d","\u153b":"\xb7\u152e","\u18ce":"\xb7\u1543","\u18cf":"\xb7\u1546","\u18d0":"\xb7\u1547","\u18d1":"\xb7\u1548","\u18d2":"\xb7\u1549","\u18d3":"\xb7\u154b","\u154e":"\xb7\u154c","\u155b":"\xb7\u155a","\u1568":"\xb7\u1567","\u18b3":"\xb7\u18b1","\u18b6":"\xb7\u18b4","\u18b9":"\xb7\u18b8","\u18c2":"\xb7\u18c0","\ua830":"\u0964","\u0965":"\u0964\u0964","\u1c3c":"\u1c3b\u1c3b","\u104b":"\u104a\u104a","\u1aa9":"\u1aa8\u1aa8","\u1aab":"\u1aaa\u1aa8","\u1b5f":"\u1b5e\u1b5e","\ud802\ude57":"\ud802\ude56\ud802\ude56","\ud805\udc4c":"\ud805\udc4b\ud805\udc4b","\ud805\ude42":"\ud805\ude41\ud805\ude41","\ud807\udc42":"\ud807\udc41\ud807\udc41","\u1c7f":"\u1c7e\u1c7e","\u055d":"\'","\uff07":"\'","\u2018":"\'","\u2019":"\'","\u201b":"\'","\u2032":"\'","\u2035":"\'","\u055a":"\'","\u05f3":"\'","`":"\'","\u1fef":"\'","\uff40":"\'","\xb4":"\'","\u0384":"\'","\u1ffd":"\'","\u1fbd":"\'","\u1fbf":"\'","\u1ffe":"\'","\u02b9":"\'","\u0374":"\'","\u02c8":"\'","\u02ca":"\'","\u02cb":"\'","\u02f4":"\'","\u02bb":"\'","\u02bd":"\'","\u02bc":"\'","\u02be":"\'","\ua78c":"\'","\u05d9":"\'","\u07f4":"\'","\u07f5":"\'","\u144a":"\'","\u16cc":"\'","\ud81b\udf51":"\'","\ud81b\udf52":"\'","\u1cd3":"\'\'","\\"":"\'\'","\uff02":"\'\'","\u201c":"\'\'","\u201d":"\'\'","\u201f":"\'\'","\u2033":"\'\'","\u2036":"\'\'","\u3003":"\'\'","\u05f4":"\'\'","\u02dd":"\'\'","\u02ba":"\'\'","\u02f6":"\'\'","\u02ee":"\'\'","\u05f2":"\'\'","\u2034":"\'\'\'","\u2037":"\'\'\'","\u2057":"\'\'\'\'","\u0181":"\'B","\u018a":"\'D","\u0149":"\'n","\u01a4":"\'P","\u01ac":"\'T","\u01b3":"\'Y","\uff3b":"(","\u2768":"(","\u2772":"(","\u3014":"(","\ufd3e":"(","\u2e28":"((","\u3220":"(\u30fc)","\u2475":"(2)","\u2487":"(2O)","\u2476":"(3)","\u2477":"(4)","\u2478":"(5)","\u2479":"(6)","\u247a":"(7)","\u247b":"(8)","\u247c":"(9)","\u249c":"(a)","\ud83c\udd10":"(A)","\u249d":"(b)","\ud83c\udd11":"(B)","\u249e":"(c)","\ud83c\udd12":"(C)","\u249f":"(d)","\ud83c\udd13":"(D)","\u24a0":"(e)","\ud83c\udd14":"(E)","\u24a1":"(f)","\ud83c\udd15":"(F)","\u24a2":"(g)","\ud83c\udd16":"(G)","\u24a3":"(h)","\ud83c\udd17":"(H)","\u24a4":"(i)","\u24a5":"(j)","\ud83c\udd19":"(J)","\u24a6":"(k)","\ud83c\udd1a":"(K)","\u2474":"(l)","\ud83c\udd18":"(l)","\u24a7":"(l)","\ud83c\udd1b":"(L)","\u247f":"(l2)","\u2480":"(l3)","\u2481":"(l4)","\u2482":"(l5)","\u2483":"(l6)","\u2484":"(l7)","\u2485":"(l8)","\u2486":"(l9)","\u247e":"(ll)","\u247d":"(lO)","\ud83c\udd1c":"(M)","\u24a9":"(n)","\ud83c\udd1d":"(N)","\u24aa":"(o)","\ud83c\udd1e":"(O)","\u24ab":"(p)","\ud83c\udd1f":"(P)","\u24ac":"(q)","\ud83c\udd20":"(Q)","\u24ad":"(r)","\ud83c\udd21":"(R)","\u24a8":"(rn)","\u24ae":"(s)","\ud83c\udd22":"(S)","\ud83c\udd2a":"(S)","\u24af":"(t)","\ud83c\udd23":"(T)","\u24b0":"(u)","\ud83c\udd24":"(U)","\u24b1":"(v)","\ud83c\udd25":"(V)","\u24b2":"(w)","\ud83c\udd26":"(W)","\u24b3":"(x)","\ud83c\udd27":"(X)","\u24b4":"(y)","\ud83c\udd28":"(Y)","\u24b5":"(z)","\ud83c\udd29":"(Z)","\u3200":"(\u1100)","\u320e":"(\uac00)","\u3201":"(\u1102)","\u320f":"(\ub098)","\u3202":"(\u1103)","\u3210":"(\ub2e4)","\u3203":"(\u1105)","\u3211":"(\ub77c)","\u3204":"(\u1106)","\u3212":"(\ub9c8)","\u3205":"(\u1107)","\u3213":"(\ubc14)","\u3206":"(\u1109)","\u3214":"(\uc0ac)","\u3207":"(\u110b)","\u3215":"(\uc544)","\u321d":"(\uc624\uc804)","\u321e":"(\uc624\ud6c4)","\u3208":"(\u110c)","\u3216":"(\uc790)","\u321c":"(\uc8fc)","\u3209":"(\u110e)","\u3217":"(\ucc28)","\u320a":"(\u110f)","\u3218":"(\uce74)","\u320b":"(\u1110)","\u3219":"(\ud0c0)","\u320c":"(\u1111)","\u321a":"(\ud30c)","\u320d":"(\u1112)","\u321b":"(\ud558)","\u3226":"(\u4e03)","\u3222":"(\u4e09)","\ud83c\ude41":"(\u4e09)","\u3228":"(\u4e5d)","\u3221":"(\u4e8c)","\ud83c\ude42":"(\u4e8c)","\u3224":"(\u4e94)","\u3239":"(\u4ee3)","\u323d":"(\u4f01)","\u3241":"(\u4f11)","\u3227":"(\u516b)","\u3225":"(\u516d)","\u3238":"(\u52b4)","\ud83c\ude47":"(\u52dd)","\u3229":"(\u5341)","\u323f":"(\u5354)","\u3234":"(\u540d)","\u323a":"(\u547c)","\u3223":"(\u56db)","\u322f":"(\u571f)","\u323b":"(\u5b66)","\ud83c\ude43":"(\u5b89)","\ud83c\ude45":"(\u6253)","\ud83c\ude48":"(\u6557)","\u3230":"(\u65e5)","\u322a":"(\u6708)","\u3232":"(\u6709)","\u322d":"(\u6728)","\ud83c\ude40":"(\u672c)","\u3231":"(\u682a)","\u322c":"(\u6c34)","\u322b":"(\u706b)","\ud83c\ude44":"(\u70b9)","\u3235":"(\u7279)","\ud83c\ude46":"(\u76d7)","\u323c":"(\u76e3)","\u3233":"(\u793e)","\u3237":"(\u795d)","\u3240":"(\u796d)","\u3242":"(\u81ea)","\u3243":"(\u81f3)","\u3236":"(\u8ca1)","\u323e":"(\u8cc7)","\u322e":"(\u91d1)","\uff3d":")","\u2769":")","\u2773":")","\u3015":")","\ufd3f":")","\u2e29":"))","\u2774":"{","\ud834\udd14":"{","\u2775":"}","\u301a":"\u27e6","\u301b":"\u27e7","\u27e8":"\u276c","\u2329":"\u276c","\u3008":"\u276c","\u31db":"\u276c","\u304f":"\u276c","\ud847\udfe8":"\u276c","\u27e9":"\u276d","\u232a":"\u276d","\u3009":"\u276d","\uff3e":"\ufe3f","\u2e3f":"\xb6","\u204e":"*","\u066d":"*","\u2217":"*","\ud800\udf1f":"*","\u1735":"/","\u2041":"/","\u2215":"/","\u2044":"/","\u2571":"/","\u27cb":"/","\u29f8":"/","\ud834\ude3a":"/","\u31d3":"/","\u3033":"/","\u2cc6":"/","\u30ce":"/","\u4e3f":"/","\u2f03":"/","\u29f6":"/\u0304","\u2afd":"//","\u2afb":"///","\uff3c":"\\\\","\ufe68":"\\\\","\u2216":"\\\\","\u27cd":"\\\\","\u29f5":"\\\\","\u29f9":"\\\\","\ud834\ude0f":"\\\\","\ud834\ude3b":"\\\\","\u31d4":"\\\\","\u4e36":"\\\\","\u2f02":"\\\\","\u2cf9":"\\\\\\\\","\u244a":"\\\\\\\\","\u27c8":"\\\\\u1455","\ua778":"&","\u0af0":"\u0970","\ud804\udcbb":"\u0970","\ud804\uddc7":"\u0970","\u26ac":"\u0970","\ud804\udddb":"\ua8fc","\u17d9":"\u0e4f","\u17d5":"\u0e5a","\u17da":"\u0e5b","\u0f0c":"\u0f0b","\u0f0e":"\u0f0d\u0f0d","\u02c4":"^","\u02c6":"^","\ua67e":"\u02c7","\u02d8":"\u02c7","\u203e":"\u02c9","\ufe49":"\u02c9","\ufe4a":"\u02c9","\ufe4b":"\u02c9","\ufe4c":"\u02c9","\xaf":"\u02c9","\uffe3":"\u02c9","\u2594":"\u02c9","\u044a":"\u02c9b","\ua651":"\u02c9bi","\u0375":"\u02cf","\u02fb":"\u02ea","\ua716":"\u02ea","\ua714":"\u02eb","\u3002":"\u02f3","\u2e30":"\xb0","\u02da":"\xb0","\u2218":"\xb0","\u25cb":"\xb0","\u25e6":"\xb0","\u235c":"\xb0\u0332","\u2364":"\xb0\u0308","\u2103":"\xb0C","\u2109":"\xb0F","\u0bf5":"\u0bf3","\u0f1b":"\u0f1a\u0f1a","\u0f1f":"\u0f1a\u0f1d","\u0fce":"\u0f1d\u0f1a","\u0f1e":"\u0f1d\u0f1d","\u24b8":"\xa9","\u24c7":"\xae","\u24c5":"\u2117","\ud834\ude1b":"\u2144","\u2bec":"\u219e","\u2bed":"\u219f","\u2bee":"\u21a0","\u2bef":"\u21a1","\u21b5":"\u21b2","\u2965":"\u21c3\u21c2","\u296f":"\u21c3\u16da","\ud835\udedb":"\u2202","\ud835\udf15":"\u2202","\ud835\udf4f":"\u2202","\ud835\udf89":"\u2202","\ud835\udfc3":"\u2202","\ud83a\udccc":"\u2202","\ud83a\udccd":"\u2202\u0335","\xf0":"\u2202\u0335","\u2300":"\u2205","\ud835\udec1":"\u2207","\ud835\udefb":"\u2207","\ud835\udf35":"\u2207","\ud835\udf6f":"\u2207","\ud835\udfa9":"\u2207","\ud806\udca8":"\u2207","\u2362":"\u2207\u0308","\u236b":"\u2207\u0334","\u2588":"\u220e","\u25a0":"\u220e","\u2a3f":"\u2210","\u16ed":"+","\u2795":"+","\ud800\ude9b":"+","\u2a23":"+\u0302","\u2a22":"+\u030a","\u2a24":"+\u0303","\u2214":"+\u0307","\u2a25":"+\u0323","\u2a26":"+\u0330","\u2a27":"+\u2082","\u2797":"\xf7","\u2039":"<","\u276e":"<","\u02c2":"<","\ud834\ude36":"<","\u1438":"<","\u16b2":"<","\u22d6":"<\xb7","\u2cb4":"<\xb7","\u1445":"<\xb7","\u226a":"<<","\u22d8":"<<<","\u1400":"=","\u2e40":"=","\u30a0":"=","\ua4ff":"=","\u225a":"=\u0306","\u2259":"=\u0302","\u2257":"=\u030a","\u2250":"=\u0307","\u2251":"=\u0307\u0323","\u2a6e":"=\u20f0","\u2a75":"==","\u2a76":"===","\u225e":"=\u036b","\u203a":">","\u276f":">","\u02c3":">","\ud834\ude37":">","\u1433":">","\ud81b\udf3f":">","\u1441":">\xb7","\u2aa5":"><","\u226b":">>","\u2a20":">>","\u22d9":">>>","\u2053":"~","\u02dc":"~","\u1fc0":"~","\u223c":"~","\u2368":"~\u0308","\u2e1e":"~\u0307","\u2a6a":"~\u0307","\u2e1f":"~\u0323","\ud83a\udcc8":"\u2220","\u22c0":"\u2227","\u222f":"\u222e\u222e","\u2230":"\u222e\u222e\u222e","\u2e2b":"\u2234","\u2e2a":"\u2235","\u2e2c":"\u2237","\ud804\uddde":"\u2248","\u264e":"\u224f","\ud83d\udf5e":"\u224f","\u2263":"\u2261","\u2a03":"\u228d","\u2a04":"\u228e","\ud834\ude38":"\u228f","\ud834\ude39":"\u2290","\u2a05":"\u2293","\u2a06":"\u2294","\u2a02":"\u2297","\u235f":"\u229b","\ud83d\udf71":"\u22a0","\ud83d\udf55":"\u22a1","\u25c1":"\u22b2","\u25b7":"\u22b3","\u2363":"\u22c6\u0308","\ufe34":"\u2307","\u25e0":"\u2312","\u2a3d":"\u2319","\u2325":"\u2324","\u29c7":"\u233b","\u25ce":"\u233e","\u29be":"\u233e","\u29c5":"\u2342","\u29b0":"\u2349","\u23c3":"\u234b","\u23c2":"\u234e","\u23c1":"\u2355","\u23c6":"\u236d","\u2638":"\u2388","\ufe35":"\u23dc","\ufe36":"\u23dd","\ufe37":"\u23de","\ufe38":"\u23df","\ufe39":"\u23e0","\ufe3a":"\u23e1","\u25b1":"\u23e5","\u23fc":"\u23fb","\ufe31":"\u2502","\uff5c":"\u2502","\u2503":"\u2502","\u250f":"\u250c","\u2523":"\u251c","\u2590":"\u258c","\u2597":"\u2596","\u259d":"\u2598","\u2610":"\u25a1","\uffed":"\u25aa","\u25b8":"\u25b6","\u25ba":"\u25b6","\u2ce9":"\u2627","\ud83d\udf0a":"\u2629","\ud83c\udf12":"\u263d","\ud83c\udf19":"\u263d","\u23fe":"\u263e","\ud83c\udf18":"\u263e","\u29d9":"\u299a","\ud83d\udf3a":"\u29df","\u2a3e":"\u2a1f","\ud800\udda0":"\u2ce8","\u2669":"\ud834\udd58\ud834\udd65","\u266a":"\ud834\udd58\ud834\udd65\ud834\udd6e","\u24ea":"\ud83c\udd0d","\u21ba":"\ud83c\udd0e","\u02d9":"\u0971","\u0d4e":"\u0971","\uff0d":"\u30fc","\u2014":"\u30fc","\u2015":"\u30fc","\u2500":"\u30fc","\u2501":"\u30fc","\u31d0":"\u30fc","\ua7f7":"\u30fc","\u1173":"\u30fc","\u3161":"\u30fc","\u4e00":"\u30fc","\u2f00":"\u30fc","\u1196":"\u30fc\u30fc","\ud7b9":"\u30fc\u1161","\ud7ba":"\u30fc\u1165","\ud7bb":"\u30fc\u1165\u4e28","\ud7bc":"\u30fc\u1169","\u1195":"\u30fc\u116e","\u1174":"\u30fc\u4e28","\u3162":"\u30fc\u4e28","\u1197":"\u30fc\u4e28\u116e","\ud83c\udd0f":"$\u20e0","\u20a4":"\xa3","\u3012":"\u20b8","\u3036":"\u20b8","\u1b5c":"\u1b50","\ua9c6":"\ua9d0","\ud805\udcd1":"\u09e7","\u0ce7":"\u0c67","\u1065":"\u1041","\u2460":"\u2780","\u2469":"\u2789","\u23e8":"\u2081\u2080","\ud835\udfd0":"2","\ud835\udfda":"2","\ud835\udfe4":"2","\ud835\udfee":"2","\ud835\udff8":"2","\ud83e\udff2":"2","\ua75a":"2","\u01a7":"2","\u03e8":"2","\ua644":"2","\u14bf":"2","\ua6ef":"2","\ua9cf":"\u0662","\u06f2":"\u0662","\u0ae8":"\u0968","\ud805\udcd2":"\u09e8","\u0ce8":"\u0c68","\u2461":"\u2781","\u01bb":"2\u0335","\ud83c\udd03":"2,","\u2489":"2.","\u33f5":"22\u65e5","\u336e":"22\u70b9","\u33f6":"23\u65e5","\u336f":"23\u70b9","\u33f7":"24\u65e5","\u3370":"24\u70b9","\u33f8":"25\u65e5","\u33f9":"26\u65e5","\u33fa":"27\u65e5","\u33fb":"28\u65e5","\u33fc":"29\u65e5","\u33f4":"2l\u65e5","\u336d":"2l\u70b9","\u249b":"2O.","\u33f3":"2O\u65e5","\u336c":"2O\u70b9","\u0de9":"\u0de8\u0dcf","\u0def":"\u0de8\u0dd3","\u33e1":"2\u65e5","\u32c1":"2\u6708","\u335a":"2\u70b9","\ud834\ude06":"3","\ud835\udfd1":"3","\ud835\udfdb":"3","\ud835\udfe5":"3","\ud835\udfef":"3","\ud835\udff9":"3","\ud83e\udff3":"3","\ua7ab":"3","\u021c":"3","\u01b7":"3","\ua76a":"3","\u2ccc":"3","\u0417":"3","\u04e0":"3","\ud81b\udf3b":"3","\ud806\udcca":"3","\u06f3":"\u0663","\ud83a\udcc9":"\u0663","\u0ae9":"\u0969","\u2462":"\u2782","\u0498":"3\u0326","\ud83c\udd04":"3,","\u248a":"3.","\u33fe":"3l\u65e5","\u33fd":"3O\u65e5","\u33e2":"3\u65e5","\u32c2":"3\u6708","\u335b":"3\u70b9","\ud835\udfd2":"4","\ud835\udfdc":"4","\ud835\udfe6":"4","\ud835\udff0":"4","\ud835\udffa":"4","\ud83e\udff4":"4","\u13ce":"4","\ud806\udcaf":"4","\u06f4":"\u0664","\u0aea":"\u096a","\u2463":"\u2783","\ud83c\udd05":"4,","\u248b":"4.","\u1530":"4\xb7","\u33e3":"4\u65e5","\u32c3":"4\u6708","\u335c":"4\u70b9","\ud835\udfd3":"5","\ud835\udfdd":"5","\ud835\udfe7":"5","\ud835\udff1":"5","\ud835\udffb":"5","\ud83e\udff5":"5","\u01bc":"5","\ud806\udcbb":"5","\u2464":"\u2784","\ud83c\udd06":"5,","\u248c":"5.","\u33e4":"5\u65e5","\u32c4":"5\u6708","\u335d":"5\u70b9","\ud835\udfd4":"6","\ud835\udfde":"6","\ud835\udfe8":"6","\ud835\udff2":"6","\ud835\udffc":"6","\ud83e\udff6":"6","\u2cd2":"6","\u0431":"6","\u13ee":"6","\ud806\udcd5":"6","\u06f6":"\u0666","\ud805\udcd6":"\u09ec","\u2465":"\u2785","\ud83c\udd07":"6,","\u248d":"6.","\u33e5":"6\u65e5","\u32c5":"6\u6708","\u335e":"6\u70b9","\ud834\ude12":"7","\ud835\udfd5":"7","\ud835\udfdf":"7","\ud835\udfe9":"7","\ud835\udff3":"7","\ud835\udffd":"7","\ud83e\udff7":"7","\ud801\udcd2":"7","\ud806\udcc6":"7","\u2466":"\u2786","\ud83c\udd08":"7,","\u248e":"7.","\u33e6":"7\u65e5","\u32c6":"7\u6708","\u335f":"7\u70b9","\u0b03":"8","\u09ea":"8","\u0a6a":"8","\ud83a\udccb":"8","\ud835\udfd6":"8","\ud835\udfe0":"8","\ud835\udfea":"8","\ud835\udff4":"8","\ud835\udffe":"8","\ud83e\udff8":"8","\u0223":"8","\u0222":"8","\ud800\udf1a":"8","\u0aee":"\u096e","\u2467":"\u2787","\ud83c\udd09":"8,","\u248f":"8.","\u33e7":"8\u65e5","\u32c7":"8\u6708","\u3360":"8\u70b9","\u0a67":"9","\u0b68":"9","\u09ed":"9","\u0d6d":"9","\ud835\udfd7":"9","\ud835\udfe1":"9","\ud835\udfeb":"9","\ud835\udff5":"9","\ud835\udfff":"9","\ud83e\udff9":"9","\ua76e":"9","\u2cca":"9","\ud806\udccc":"9","\ud806\udcac":"9","\ud806\udcd6":"9","\u0967":"\u0669","\ud806\udce4":"\u0669","\u06f9":"\u0669","\u0cef":"\u0c6f","\u2468":"\u2788","\ud83c\udd0a":"9,","\u2490":"9.","\u33e8":"9\u65e5","\u32c8":"9\u6708","\u3361":"9\u70b9","\u237a":"a","\uff41":"a","\ud835\udc1a":"a","\ud835\udc4e":"a","\ud835\udc82":"a","\ud835\udcb6":"a","\ud835\udcea":"a","\ud835\udd1e":"a","\ud835\udd52":"a","\ud835\udd86":"a","\ud835\uddba":"a","\ud835\uddee":"a","\ud835\ude22":"a","\ud835\ude56":"a","\ud835\ude8a":"a","\u0251":"a","\u03b1":"a","\ud835\udec2":"a","\ud835\udefc":"a","\ud835\udf36":"a","\ud835\udf70":"a","\ud835\udfaa":"a","\u0430":"a","\u2df6":"\u0363","\uff21":"A","\ud835\udc00":"A","\ud835\udc34":"A","\ud835\udc68":"A","\ud835\udc9c":"A","\ud835\udcd0":"A","\ud835\udd04":"A","\ud835\udd38":"A","\ud835\udd6c":"A","\ud835\udda0":"A","\ud835\uddd4":"A","\ud835\ude08":"A","\ud835\ude3c":"A","\ud835\ude70":"A","\u0391":"A","\ud835\udea8":"A","\ud835\udee2":"A","\ud835\udf1c":"A","\ud835\udf56":"A","\ud835\udf90":"A","\u0410":"A","\u13aa":"A","\u15c5":"A","\ua4ee":"A","\ud81b\udf40":"A","\ud800\udea0":"A","\u2376":"a\u0332","\u01ce":"\u0103","\u01cd":"\u0102","\u0227":"\xe5","\u0226":"\xc5","\u1e9a":"\u1ea3","\u2100":"a/c","\u2101":"a/s","\ua733":"aa","\ua732":"AA","\xe6":"ae","\u04d5":"ae","\xc6":"AE","\u04d4":"AE","\ua735":"ao","\ua734":"AO","\ud83d\udf07":"AR","\ua737":"au","\ua736":"AU","\ua739":"av","\ua73b":"av","\ua738":"AV","\ua73a":"AV","\ua73d":"ay","\ua73c":"AY","\uab7a":"\u1d00","\u2200":"\u2c6f","\ud834\ude17":"\u2c6f","\u15c4":"\u2c6f","\ua4ef":"\u2c6f","\ud801\udc1f":"\u2c70","\ud835\udc1b":"b","\ud835\udc4f":"b","\ud835\udc83":"b","\ud835\udcb7":"b","\ud835\udceb":"b","\ud835\udd1f":"b","\ud835\udd53":"b","\ud835\udd87":"b","\ud835\uddbb":"b","\ud835\uddef":"b","\ud835\ude23":"b","\ud835\ude57":"b","\ud835\ude8b":"b","\u0184":"b","\u042c":"b","\u13cf":"b","\u1472":"b","\u15af":"b","\uff22":"B","\u212c":"B","\ud835\udc01":"B","\ud835\udc35":"B","\ud835\udc69":"B","\ud835\udcd1":"B","\ud835\udd05":"B","\ud835\udd39":"B","\ud835\udd6d":"B","\ud835\udda1":"B","\ud835\uddd5":"B","\ud835\ude09":"B","\ud835\ude3d":"B","\ud835\ude71":"B","\ua7b4":"B","\u0392":"B","\ud835\udea9":"B","\ud835\udee3":"B","\ud835\udf1d":"B","\ud835\udf57":"B","\ud835\udf91":"B","\u0412":"B","\u13f4":"B","\u15f7":"B","\ua4d0":"B","\ud800\ude82":"B","\ud800\udea1":"B","\ud800\udf01":"B","\u0253":"b\u0314","\u1473":"b\u0307","\u0183":"b\u0304","\u0182":"b\u0304","\u0411":"b\u0304","\u0180":"b\u0335","\u048d":"b\u0335","\u048c":"b\u0335","\u0463":"b\u0335","\u0462":"b\u0335","\u147f":"b\xb7","\u1481":"b\u0307\xb7","\u1488":"b\'","\u042b":"bl","\u0432":"\u0299","\u13fc":"\u0299","\uff43":"c","\u217d":"c","\ud835\udc1c":"c","\ud835\udc50":"c","\ud835\udc84":"c","\ud835\udcb8":"c","\ud835\udcec":"c","\ud835\udd20":"c","\ud835\udd54":"c","\ud835\udd88":"c","\ud835\uddbc":"c","\ud835\uddf0":"c","\ud835\ude24":"c","\ud835\ude58":"c","\ud835\ude8c":"c","\u1d04":"c","\u03f2":"c","\u2ca5":"c","\u0441":"c","\uabaf":"c","\ud801\udc3d":"c","\u2ded":"\u0368","\ud83d\udf4c":"C","\ud806\udcf2":"C","\ud806\udce9":"C","\uff23":"C","\u216d":"C","\u2102":"C","\u212d":"C","\ud835\udc02":"C","\ud835\udc36":"C","\ud835\udc6a":"C","\ud835\udc9e":"C","\ud835\udcd2":"C","\ud835\udd6e":"C","\ud835\udda2":"C","\ud835\uddd6":"C","\ud835\ude0a":"C","\ud835\ude3e":"C","\ud835\ude72":"C","\u03f9":"C","\u2ca4":"C","\u0421":"C","\u13df":"C","\ua4da":"C","\ud800\udea2":"C","\ud800\udf02":"C","\ud801\udc15":"C","\ud801\udd1c":"C","\xa2":"c\u0338","\u023c":"c\u0338","\u20a1":"C\u20eb","\ud83c\udd6e":"C\u20e0","\xe7":"c\u0326","\u04ab":"c\u0326","\xc7":"C\u0326","\u04aa":"C\u0326","\u0187":"C\'","\u2105":"c/o","\u2106":"c/u","\ud83c\udd6d":"\u33c4\\t\u20dd","\u22f4":"\ua793","\u025b":"\ua793","\u03b5":"\ua793","\u03f5":"\ua793","\ud835\udec6":"\ua793","\ud835\udedc":"\ua793","\ud835\udf00":"\ua793","\ud835\udf16":"\ua793","\ud835\udf3a":"\ua793","\ud835\udf50":"\ua793","\ud835\udf74":"\ua793","\ud835\udf8a":"\ua793","\ud835\udfae":"\ua793","\ud835\udfc4":"\ua793","\u2c89":"\ua793","\u0454":"\ua793","\u0511":"\ua793","\uab9b":"\ua793","\ud806\udcce":"\ua793","\ud801\udc29":"\ua793","\u20ac":"\ua792","\u2c88":"\ua792","\u0404":"\ua792","\u2377":"\ua793\u0332","\u037d":"\ua73f","\u03ff":"\ua73e","\u217e":"d","\u2146":"d","\ud835\udc1d":"d","\ud835\udc51":"d","\ud835\udc85":"d","\ud835\udcb9":"d","\ud835\udced":"d","\ud835\udd21":"d","\ud835\udd55":"d","\ud835\udd89":"d","\ud835\uddbd":"d","\ud835\uddf1":"d","\ud835\ude25":"d","\ud835\ude59":"d","\ud835\ude8d":"d","\u0501":"d","\u13e7":"d","\u146f":"d","\ua4d2":"d","\u216e":"D","\u2145":"D","\ud835\udc03":"D","\ud835\udc37":"D","\ud835\udc6b":"D","\ud835\udc9f":"D","\ud835\udcd3":"D","\ud835\udd07":"D","\ud835\udd3b":"D","\ud835\udd6f":"D","\ud835\udda3":"D","\ud835\uddd7":"D","\ud835\ude0b":"D","\ud835\ude3f":"D","\ud835\ude73":"D","\u13a0":"D","\u15de":"D","\u15ea":"D","\ua4d3":"D","\u0257":"d\u0314","\u0256":"d\u0328","\u018c":"d\u0304","\u0111":"d\u0335","\u0110":"D\u0335","\xd0":"D\u0335","\u0189":"D\u0335","\u20ab":"d\u0335\u0331","\ua77a":"\ua779","\u147b":"d\xb7","\u1487":"d\'","\u02a4":"d\u021d","\u01f3":"dz","\u02a3":"dz","\u01f2":"Dz","\u01f1":"DZ","\u01c6":"d\u017e","\u01c5":"D\u017e","\u01c4":"D\u017d","\u02a5":"d\u0291","\uab70":"\u1d05","\u2e39":"\u1e9f","\u03b4":"\u1e9f","\ud835\udec5":"\u1e9f","\ud835\udeff":"\u1e9f","\ud835\udf39":"\u1e9f","\ud835\udf73":"\u1e9f","\ud835\udfad":"\u1e9f","\u056e":"\u1e9f","\u1577":"\u1e9f","\u212e":"e","\uff45":"e","\u212f":"e","\u2147":"e","\ud835\udc1e":"e","\ud835\udc52":"e","\ud835\udc86":"e","\ud835\udcee":"e","\ud835\udd22":"e","\ud835\udd56":"e","\ud835\udd8a":"e","\ud835\uddbe":"e","\ud835\uddf2":"e","\ud835\ude26":"e","\ud835\ude5a":"e","\ud835\ude8e":"e","\uab32":"e","\u0435":"e","\u04bd":"e","\u2df7":"\u0364","\u22ff":"E","\uff25":"E","\u2130":"E","\ud835\udc04":"E","\ud835\udc38":"E","\ud835\udc6c":"E","\ud835\udcd4":"E","\ud835\udd08":"E","\ud835\udd3c":"E","\ud835\udd70":"E","\ud835\udda4":"E","\ud835\uddd8":"E","\ud835\ude0c":"E","\ud835\ude40":"E","\ud835\ude74":"E","\u0395":"E","\ud835\udeac":"E","\ud835\udee6":"E","\ud835\udf20":"E","\ud835\udf5a":"E","\ud835\udf94":"E","\u0415":"E","\u2d39":"E","\u13ac":"E","\ua4f0":"E","\ud806\udca6":"E","\ud806\udcae":"E","\ud800\ude86":"E","\u011b":"\u0115","\u011a":"\u0114","\u0247":"e\u0338","\u0246":"E\u0338","\u04bf":"e\u0328","\uab7c":"\u1d07","\u0259":"\u01dd","\u04d9":"\u01dd","\u2203":"\u018e","\u2d3a":"\u018e","\ua4f1":"\u018e","\u025a":"\u01dd\u02de","\u1d14":"\u01ddo","\uab41":"\u01ddo\u0338","\uab42":"\u01ddo\u0335","\u04d8":"\u018f","\ud834\ude21":"\u0190","\u2107":"\u0190","\u0510":"\u0190","\u13cb":"\u0190","\ud81b\udf2d":"\u0190","\ud801\udc01":"\u0190","\u1d9f":"\u1d4b","\u1d08":"\u025c","\u0437":"\u025c","\u0499":"\u025c\u0326","\ud801\udc42":"\u025e","\ua79d":"\u029a","\ud801\udc2a":"\u029a","\ud835\udc1f":"f","\ud835\udc53":"f","\ud835\udc87":"f","\ud835\udcbb":"f","\ud835\udcef":"f","\ud835\udd23":"f","\ud835\udd57":"f","\ud835\udd8b":"f","\ud835\uddbf":"f","\ud835\uddf3":"f","\ud835\ude27":"f","\ud835\ude5b":"f","\ud835\ude8f":"f","\uab35":"f","\ua799":"f","\u017f":"f","\u1e9d":"f","\u0584":"f","\ud834\ude13":"F","\u2131":"F","\ud835\udc05":"F","\ud835\udc39":"F","\ud835\udc6d":"F","\ud835\udcd5":"F","\ud835\udd09":"F","\ud835\udd3d":"F","\ud835\udd71":"F","\ud835\udda5":"F","\ud835\uddd9":"F","\ud835\ude0d":"F","\ud835\ude41":"F","\ud835\ude75":"F","\ua798":"F","\u03dc":"F","\ud835\udfca":"F","\u15b4":"F","\ua4dd":"F","\ud806\udcc2":"F","\ud806\udca2":"F","\ud800\ude87":"F","\ud800\udea5":"F","\ud801\udd25":"F","\u0192":"f\u0326","\u0191":"F\u0326","\u1d6e":"f\u0334","\u213b":"FAX","\ufb00":"ff","\ufb03":"ffi","\ufb04":"ffl","\ufb01":"fi","\ufb02":"fl","\u02a9":"f\u014b","\u15b5":"\u2132","\ua4de":"\u2132","\ud834\ude30":"\ua7fb","\u15b7":"\ua7fb","\uff47":"g","\u210a":"g","\ud835\udc20":"g","\ud835\udc54":"g","\ud835\udc88":"g","\ud835\udcf0":"g","\ud835\udd24":"g","\ud835\udd58":"g","\ud835\udd8c":"g","\ud835\uddc0":"g","\ud835\uddf4":"g","\ud835\ude28":"g","\ud835\ude5c":"g","\ud835\ude90":"g","\u0261":"g","\u1d83":"g","\u018d":"g","\u0581":"g","\ud835\udc06":"G","\ud835\udc3a":"G","\ud835\udc6e":"G","\ud835\udca2":"G","\ud835\udcd6":"G","\ud835\udd0a":"G","\ud835\udd3e":"G","\ud835\udd72":"G","\ud835\udda6":"G","\ud835\uddda":"G","\ud835\ude0e":"G","\ud835\ude42":"G","\ud835\ude76":"G","\u050c":"G","\u13c0":"G","\u13f3":"G","\ua4d6":"G","\u1da2":"\u1d4d","\u0260":"g\u0314","\u01e7":"\u011f","\u01e6":"\u011e","\u01f5":"\u0123","\u01e5":"g\u0335","\u01e4":"G\u0335","\u0193":"G\'","\u050d":"\u0262","\uab90":"\u0262","\u13fb":"\u0262","\uff48":"h","\u210e":"h","\ud835\udc21":"h","\ud835\udc89":"h","\ud835\udcbd":"h","\ud835\udcf1":"h","\ud835\udd25":"h","\ud835\udd59":"h","\ud835\udd8d":"h","\ud835\uddc1":"h","\ud835\uddf5":"h","\ud835\ude29":"h","\ud835\ude5d":"h","\ud835\ude91":"h","\u04bb":"h","\u0570":"h","\u13c2":"h","\uff28":"H","\u210b":"H","\u210c":"H","\u210d":"H","\ud835\udc07":"H","\ud835\udc3b":"H","\ud835\udc6f":"H","\ud835\udcd7":"H","\ud835\udd73":"H","\ud835\udda7":"H","\ud835\udddb":"H","\ud835\ude0f":"H","\ud835\ude43":"H","\ud835\ude77":"H","\u0397":"H","\ud835\udeae":"H","\ud835\udee8":"H","\ud835\udf22":"H","\ud835\udf5c":"H","\ud835\udf96":"H","\u2c8e":"H","\u041d":"H","\u13bb":"H","\u157c":"H","\ua4e7":"H","\ud800\udecf":"H","\u1d78":"\u1d34","\u0266":"h\u0314","\ua695":"h\u0314","\u13f2":"h\u0314","\u2c67":"H\u0329","\u04a2":"H\u0329","\u0127":"h\u0335","\u210f":"h\u0335","\u045b":"h\u0335","\u0126":"H\u0335","\u04c9":"H\u0326","\u04c7":"H\u0326","\u043d":"\u029c","\uab8b":"\u029c","\u04a3":"\u029c\u0329","\u04ca":"\u029c\u0326","\u04c8":"\u029c\u0326","\u050a":"\u01f6","\uab80":"\u2c76","\u0370":"\u2c75","\u13a8":"\u2c75","\u13b0":"\u2c75","\ua6b1":"\u2c75","\ua795":"\ua727","\u02db":"i","\u2373":"i","\uff49":"i","\u2170":"i","\u2139":"i","\u2148":"i","\ud835\udc22":"i","\ud835\udc56":"i","\ud835\udc8a":"i","\ud835\udcbe":"i","\ud835\udcf2":"i","\ud835\udd26":"i","\ud835\udd5a":"i","\ud835\udd8e":"i","\ud835\uddc2":"i","\ud835\uddf6":"i","\ud835\ude2a":"i","\ud835\ude5e":"i","\ud835\ude92":"i","\u0131":"i","\ud835\udea4":"i","\u026a":"i","\u0269":"i","\u03b9":"i","\u1fbe":"i","\u037a":"i","\ud835\udeca":"i","\ud835\udf04":"i","\ud835\udf3e":"i","\ud835\udf78":"i","\ud835\udfb2":"i","\u0456":"i","\ua647":"i","\u04cf":"i","\uab75":"i","\u13a5":"i","\ud806\udcc3":"i","\u24db":"\u24be","\u2378":"i\u0332","\u01d0":"\u012d","\u01cf":"\u012c","\u0268":"i\u0335","\u1d7b":"i\u0335","\u1d7c":"i\u0335","\u2171":"ii","\u2172":"iii","\u0133":"ij","\u2173":"iv","\u2178":"ix","\uff4a":"j","\u2149":"j","\ud835\udc23":"j","\ud835\udc57":"j","\ud835\udc8b":"j","\ud835\udcbf":"j","\ud835\udcf3":"j","\ud835\udd27":"j","\ud835\udd5b":"j","\ud835\udd8f":"j","\ud835\uddc3":"j","\ud835\uddf7":"j","\ud835\ude2b":"j","\ud835\ude5f":"j","\ud835\ude93":"j","\u03f3":"j","\u0458":"j","\uff2a":"J","\ud835\udc09":"J","\ud835\udc3d":"J","\ud835\udc71":"J","\ud835\udca5":"J","\ud835\udcd9":"J","\ud835\udd0d":"J","\ud835\udd41":"J","\ud835\udd75":"J","\ud835\udda9":"J","\ud835\udddd":"J","\ud835\ude11":"J","\ud835\ude45":"J","\ud835\ude79":"J","\ua7b2":"J","\u037f":"J","\u0408":"J","\u13ab":"J","\u148d":"J","\ua4d9":"J","\u0249":"j\u0335","\u0248":"J\u0335","\u1499":"J\xb7","\ud835\udea5":"\u0237","\u0575":"\u0237","\uab7b":"\u1d0a","\ud835\udc24":"k","\ud835\udc58":"k","\ud835\udc8c":"k","\ud835\udcc0":"k","\ud835\udcf4":"k","\ud835\udd28":"k","\ud835\udd5c":"k","\ud835\udd90":"k","\ud835\uddc4":"k","\ud835\uddf8":"k","\ud835\ude2c":"k","\ud835\ude60":"k","\ud835\ude94":"k","\u212a":"K","\uff2b":"K","\ud835\udc0a":"K","\ud835\udc3e":"K","\ud835\udc72":"K","\ud835\udca6":"K","\ud835\udcda":"K","\ud835\udd0e":"K","\ud835\udd42":"K","\ud835\udd76":"K","\ud835\uddaa":"K","\ud835\uddde":"K","\ud835\ude12":"K","\ud835\ude46":"K","\ud835\ude7a":"K","\u039a":"K","\ud835\udeb1":"K","\ud835\udeeb":"K","\ud835\udf25":"K","\ud835\udf5f":"K","\ud835\udf99":"K","\u2c94":"K","\u041a":"K","\u13e6":"K","\u16d5":"K","\ua4d7":"K","\ud801\udd18":"K","\u0199":"k\u0314","\u2c69":"K\u0329","\u049a":"K\u0329","\u20ad":"K\u0335","\ua740":"K\u0335","\u049e":"K\u0335","\u0198":"K\'","\u05c0":"l","|":"l","\u2223":"l","\u23fd":"l","\uffe8":"l","\u0661":"l","\u06f1":"l","\ud800\udf20":"l","\ud83a\udcc7":"l","\ud835\udfcf":"l","\ud835\udfd9":"l","\ud835\udfe3":"l","\ud835\udfed":"l","\ud835\udff7":"l","\ud83e\udff1":"l","I":"l","\uff29":"l","\u2160":"l","\u2110":"l","\u2111":"l","\ud835\udc08":"l","\ud835\udc3c":"l","\ud835\udc70":"l","\ud835\udcd8":"l","\ud835\udd40":"l","\ud835\udd74":"l","\ud835\udda8":"l","\ud835\udddc":"l","\ud835\ude10":"l","\ud835\ude44":"l","\ud835\ude78":"l","\u0196":"l","\uff4c":"l","\u217c":"l","\u2113":"l","\ud835\udc25":"l","\ud835\udc59":"l","\ud835\udc8d":"l","\ud835\udcc1":"l","\ud835\udcf5":"l","\ud835\udd29":"l","\ud835\udd5d":"l","\ud835\udd91":"l","\ud835\uddc5":"l","\ud835\uddf9":"l","\ud835\ude2d":"l","\ud835\ude61":"l","\ud835\ude95":"l","\u01c0":"l","\u0399":"l","\ud835\udeb0":"l","\ud835\udeea":"l","\ud835\udf24":"l","\ud835\udf5e":"l","\ud835\udf98":"l","\u2c92":"l","\u0406":"l","\u04c0":"l","\u05d5":"l","\u05df":"l","\u0627":"l","\ud83b\ude00":"l","\ud83b\ude80":"l","\ufe8e":"l","\ufe8d":"l","\u07ca":"l","\u2d4f":"l","\u16c1":"l","\ua4f2":"l","\ud81b\udf28":"l","\ud800\ude8a":"l","\ud800\udf09":"l","\ud834\ude2a":"L","\u216c":"L","\u2112":"L","\ud835\udc0b":"L","\ud835\udc3f":"L","\ud835\udc73":"L","\ud835\udcdb":"L","\ud835\udd0f":"L","\ud835\udd43":"L","\ud835\udd77":"L","\ud835\uddab":"L","\ud835\udddf":"L","\ud835\ude13":"L","\ud835\ude47":"L","\ud835\ude7b":"L","\u2cd0":"L","\u13de":"L","\u14aa":"L","\ua4e1":"L","\ud81b\udf16":"L","\ud806\udca3":"L","\ud806\udcb2":"L","\ud801\udc1b":"L","\ud801\udd26":"L","\ufd3c":"l\u030b","\ufd3d":"l\u030b","\u0142":"l\u0338","\u0141":"L\u0338","\u026d":"l\u0328","\u0197":"l\u0335","\u019a":"l\u0335","\u026b":"l\u0334","\u0625":"l\u0655","\ufe88":"l\u0655","\ufe87":"l\u0655","\u0673":"l\u0655","\u0140":"l\xb7","\u013f":"l\xb7","\u14b7":"l\xb7","\ud83c\udd02":"l,","\u2488":"l.","\u05f1":"l\'","\u2493":"l2.","\u33eb":"l2\u65e5","\u32cb":"l2\u6708","\u3364":"l2\u70b9","\u2494":"l3.","\u33ec":"l3\u65e5","\u3365":"l3\u70b9","\u2495":"l4.","\u33ed":"l4\u65e5","\u3366":"l4\u70b9","\u2496":"l5.","\u33ee":"l5\u65e5","\u3367":"l5\u70b9","\u2497":"l6.","\u33ef":"l6\u65e5","\u3368":"l6\u70b9","\u2498":"l7.","\u33f0":"l7\u65e5","\u3369":"l7\u70b9","\u2499":"l8.","\u33f1":"l8\u65e5","\u336a":"l8\u70b9","\u249a":"l9.","\u33f2":"l9\u65e5","\u336b":"l9\u70b9","\u01c9":"lj","\u0132":"lJ","\u01c8":"Lj","\u01c7":"LJ","\u2016":"ll","\u2225":"ll","\u2161":"ll","\u01c1":"ll","\u05f0":"ll","\ud800\udd99":"l\u0335l\u0335","\u2492":"ll.","\u2162":"lll","\ud800\udd98":"l\u0335l\u0335S\u0335","\u33ea":"ll\u65e5","\u32ca":"ll\u6708","\u3363":"ll\u70b9","\u042e":"lO","\u2491":"lO.","\u33e9":"lO\u65e5","\u32c9":"lO\u6708","\u3362":"lO\u70b9","\u02aa":"ls","\u20b6":"lt","\u2163":"lV","\u2168":"lX","\u026e":"l\u021d","\u02ab":"lz","\u0623":"l\u0674","\ufe84":"l\u0674","\ufe83":"l\u0674","\u0672":"l\u0674","\u0675":"l\u0674","\ufdf3":"l\u0643\u0628\u0631","\ufdf2":"l\u0644\u0644\u0651\u0670o","\u33e0":"l\u65e5","\u32c0":"l\u6708","\u3359":"l\u70b9","\u2cd1":"\u029f","\uabae":"\u029f","\ud801\udc43":"\u029f","\uff2d":"M","\u216f":"M","\u2133":"M","\ud835\udc0c":"M","\ud835\udc40":"M","\ud835\udc74":"M","\ud835\udcdc":"M","\ud835\udd10":"M","\ud835\udd44":"M","\ud835\udd78":"M","\ud835\uddac":"M","\ud835\udde0":"M","\ud835\ude14":"M","\ud835\ude48":"M","\ud835\ude7c":"M","\u039c":"M","\ud835\udeb3":"M","\ud835\udeed":"M","\ud835\udf27":"M","\ud835\udf61":"M","\ud835\udf9b":"M","\u03fa":"M","\u2c98":"M","\u041c":"M","\u13b7":"M","\u15f0":"M","\u16d6":"M","\ua4df":"M","\ud800\udeb0":"M","\ud800\udf11":"M","\u04cd":"M\u0326","\ud83d\udf6b":"MB","\u2de8":"\u1ddf","\ud835\udc27":"n","\ud835\udc5b":"n","\ud835\udc8f":"n","\ud835\udcc3":"n","\ud835\udcf7":"n","\ud835\udd2b":"n","\ud835\udd5f":"n","\ud835\udd93":"n","\ud835\uddc7":"n","\ud835\uddfb":"n","\ud835\ude2f":"n","\ud835\ude63":"n","\ud835\ude97":"n","\u0578":"n","\u057c":"n","\uff2e":"N","\u2115":"N","\ud835\udc0d":"N","\ud835\udc41":"N","\ud835\udc75":"N","\ud835\udca9":"N","\ud835\udcdd":"N","\ud835\udd11":"N","\ud835\udd79":"N","\ud835\uddad":"N","\ud835\udde1":"N","\ud835\ude15":"N","\ud835\ude49":"N","\ud835\ude7d":"N","\u039d":"N","\ud835\udeb4":"N","\ud835\udeee":"N","\ud835\udf28":"N","\ud835\udf62":"N","\ud835\udf9c":"N","\u2c9a":"N","\ua4e0":"N","\ud801\udd13":"N","\ud800\udd8e":"N\u030a","\u0273":"n\u0328","\u019e":"n\u0329","\u03b7":"n\u0329","\ud835\udec8":"n\u0329","\ud835\udf02":"n\u0329","\ud835\udf3c":"n\u0329","\ud835\udf76":"n\u0329","\ud835\udfb0":"n\u0329","\u019d":"N\u0326","\u1d70":"n\u0334","\u01cc":"nj","\u01cb":"Nj","\u01ca":"NJ","\u2116":"No","\u0377":"\u1d0e","\u0438":"\u1d0e","\ud801\udc4d":"\u1d0e","\u0146":"\u0272","\u0c02":"o","\u0c82":"o","\u0d02":"o","\u0d82":"o","\u0966":"o","\u0a66":"o","\u0ae6":"o","\u0be6":"o","\u0c66":"o","\u0ce6":"o","\u0d66":"o","\u0e50":"o","\u0ed0":"o","\u1040":"o","\u0665":"o","\u06f5":"o","\uff4f":"o","\u2134":"o","\ud835\udc28":"o","\ud835\udc5c":"o","\ud835\udc90":"o","\ud835\udcf8":"o","\ud835\udd2c":"o","\ud835\udd60":"o","\ud835\udd94":"o","\ud835\uddc8":"o","\ud835\uddfc":"o","\ud835\ude30":"o","\ud835\ude64":"o","\ud835\ude98":"o","\u1d0f":"o","\u1d11":"o","\uab3d":"o","\u03bf":"o","\ud835\uded0":"o","\ud835\udf0a":"o","\ud835\udf44":"o","\ud835\udf7e":"o","\ud835\udfb8":"o","\u03c3":"o","\ud835\uded4":"o","\ud835\udf0e":"o","\ud835\udf48":"o","\ud835\udf82":"o","\ud835\udfbc":"o","\u2c9f":"o","\u043e":"o","\u10ff":"o","\u0585":"o","\u05e1":"o","\u0647":"o","\ud83b\ude24":"o","\ud83b\ude64":"o","\ud83b\ude84":"o","\ufeeb":"o","\ufeec":"o","\ufeea":"o","\ufee9":"o","\u06be":"o","\ufbac":"o","\ufbad":"o","\ufbab":"o","\ufbaa":"o","\u06c1":"o","\ufba8":"o","\ufba9":"o","\ufba7":"o","\ufba6":"o","\u06d5":"o","\u0d20":"o","\u101d":"o","\ud801\udcea":"o","\ud806\udcc8":"o","\ud806\udcd7":"o","\ud801\udc2c":"o","\u07c0":"O","\u09e6":"O","\u0b66":"O","\u3007":"O","\ud805\udcd0":"O","\ud806\udce0":"O","\ud835\udfce":"O","\ud835\udfd8":"O","\ud835\udfe2":"O","\ud835\udfec":"O","\ud835\udff6":"O","\ud83e\udff0":"O","\uff2f":"O","\ud835\udc0e":"O","\ud835\udc42":"O","\ud835\udc76":"O","\ud835\udcaa":"O","\ud835\udcde":"O","\ud835\udd12":"O","\ud835\udd46":"O","\ud835\udd7a":"O","\ud835\uddae":"O","\ud835\udde2":"O","\ud835\ude16":"O","\ud835\ude4a":"O","\ud835\ude7e":"O","\u039f":"O","\ud835\udeb6":"O","\ud835\udef0":"O","\ud835\udf2a":"O","\ud835\udf64":"O","\ud835\udf9e":"O","\u2c9e":"O","\u041e":"O","\u0555":"O","\u2d54":"O","\u12d0":"O","\u0b20":"O","\ud801\udcc2":"O","\ua4f3":"O","\ud806\udcb5":"O","\ud800\ude92":"O","\ud800\udeab":"O","\ud801\udc04":"O","\ud801\udd16":"O","\u2070":"\xba","\u1d52":"\xba","\u01d2":"\u014f","\u01d1":"\u014e","\u06ff":"o\u0302","\u0150":"\xd6","\xf8":"o\u0338","\uab3e":"o\u0338","\xd8":"O\u0338","\u2d41":"O\u0338","\u01fe":"O\u0338\u0301","\u0275":"o\u0335","\ua74b":"o\u0335","\u04e9":"o\u0335","\u0473":"o\u0335","\uab8e":"o\u0335","\uabbb":"o\u0335","\u2296":"O\u0335","\u229d":"O\u0335","\u236c":"O\u0335","\ud834\ude1a":"O\u0335","\ud83d\udf14":"O\u0335","\u019f":"O\u0335","\ua74a":"O\u0335","\u03b8":"O\u0335","\u03d1":"O\u0335","\ud835\udec9":"O\u0335","\ud835\udedd":"O\u0335","\ud835\udf03":"O\u0335","\ud835\udf17":"O\u0335","\ud835\udf3d":"O\u0335","\ud835\udf51":"O\u0335","\ud835\udf77":"O\u0335","\ud835\udf8b":"O\u0335","\ud835\udfb1":"O\u0335","\ud835\udfc5":"O\u0335","\u0398":"O\u0335","\u03f4":"O\u0335","\ud835\udeaf":"O\u0335","\ud835\udeb9":"O\u0335","\ud835\udee9":"O\u0335","\ud835\udef3":"O\u0335","\ud835\udf23":"O\u0335","\ud835\udf2d":"O\u0335","\ud835\udf5d":"O\u0335","\ud835\udf67":"O\u0335","\ud835\udf97":"O\u0335","\ud835\udfa1":"O\u0335","\u04e8":"O\u0335","\u0472":"O\u0335","\u2d31":"O\u0335","\u13be":"O\u0335","\u13eb":"O\u0335","\uab74":"o\u031b","\ufcd9":"o\u0670","\ud83c\udd01":"O,","\ud83c\udd00":"O.","\u01a1":"o\'","\u01a0":"O\'","\u13a4":"O\'","%":"\xba/\u2080","\u066a":"\xba/\u2080","\u2052":"\xba/\u2080","\u2030":"\xba/\u2080\u2080","\u0609":"\xba/\u2080\u2080","\u2031":"\xba/\u2080\u2080\u2080","\u060a":"\xba/\u2080\u2080\u2080","\u0153":"oe","\u0152":"OE","\u0276":"o\u1d07","\u221e":"oo","\ua74f":"oo","\ua699":"oo","\ua74e":"OO","\ua698":"OO","\ufcd7":"o\u062c","\ufc51":"o\u062c","\ufcd8":"o\u0645","\ufc52":"o\u0645","\ufd93":"o\u0645\u062c","\ufd94":"o\u0645\u0645","\ufc53":"o\u0649","\ufc54":"o\u0649","\u0d5f":"o\u0d30o","\u1010":"o\u102c","\u3358":"O\u70b9","\u2184":"\u0254","\u1d10":"\u0254","\u037b":"\u0254","\ud801\udc4b":"\u0254","\u2183":"\u0186","\u03fd":"\u0186","\ua4db":"\u0186","\ud801\udc23":"\u0186","\uab3f":"\u0254\u0338","\uab62":"\u0254e","\ud801\udc3f":"\u0277","\u2374":"p","\uff50":"p","\ud835\udc29":"p","\ud835\udc5d":"p","\ud835\udc91":"p","\ud835\udcc5":"p","\ud835\udcf9":"p","\ud835\udd2d":"p","\ud835\udd61":"p","\ud835\udd95":"p","\ud835\uddc9":"p","\ud835\uddfd":"p","\ud835\ude31":"p","\ud835\ude65":"p","\ud835\ude99":"p","\u03c1":"p","\u03f1":"p","\ud835\uded2":"p","\ud835\udee0":"p","\ud835\udf0c":"p","\ud835\udf1a":"p","\ud835\udf46":"p","\ud835\udf54":"p","\ud835\udf80":"p","\ud835\udf8e":"p","\ud835\udfba":"p","\ud835\udfc8":"p","\u2ca3":"p","\u0440":"p","\uff30":"P","\u2119":"P","\ud835\udc0f":"P","\ud835\udc43":"P","\ud835\udc77":"P","\ud835\udcab":"P","\ud835\udcdf":"P","\ud835\udd13":"P","\ud835\udd7b":"P","\ud835\uddaf":"P","\ud835\udde3":"P","\ud835\ude17":"P","\ud835\ude4b":"P","\ud835\ude7f":"P","\u03a1":"P","\ud835\udeb8":"P","\ud835\udef2":"P","\ud835\udf2c":"P","\ud835\udf66":"P","\ud835\udfa0":"P","\u2ca2":"P","\u0420":"P","\u13e2":"P","\u146d":"P","\ua4d1":"P","\ud800\ude95":"P","\u01a5":"p\u0314","\u1d7d":"p\u0335","\u1477":"p\xb7","\u1486":"P\'","\u1d29":"\u1d18","\uabb2":"\u1d18","\u03c6":"\u0278","\u03d5":"\u0278","\ud835\uded7":"\u0278","\ud835\udedf":"\u0278","\ud835\udf11":"\u0278","\ud835\udf19":"\u0278","\ud835\udf4b":"\u0278","\ud835\udf53":"\u0278","\ud835\udf85":"\u0278","\ud835\udf8d":"\u0278","\ud835\udfbf":"\u0278","\ud835\udfc7":"\u0278","\u2cab":"\u0278","\u0444":"\u0278","\ud835\udc2a":"q","\ud835\udc5e":"q","\ud835\udc92":"q","\ud835\udcc6":"q","\ud835\udcfa":"q","\ud835\udd2e":"q","\ud835\udd62":"q","\ud835\udd96":"q","\ud835\uddca":"q","\ud835\uddfe":"q","\ud835\ude32":"q","\ud835\ude66":"q","\ud835\ude9a":"q","\u051b":"q","\u0563":"q","\u0566":"q","\u211a":"Q","\ud835\udc10":"Q","\ud835\udc44":"Q","\ud835\udc78":"Q","\ud835\udcac":"Q","\ud835\udce0":"Q","\ud835\udd14":"Q","\ud835\udd7c":"Q","\ud835\uddb0":"Q","\ud835\udde4":"Q","\ud835\ude18":"Q","\ud835\ude4c":"Q","\ud835\ude80":"Q","\u2d55":"Q","\u02a0":"q\u0314","\ud83d\udf00":"QE","\u1d90":"\u024b","\u1d0b":"\u0138","\u03ba":"\u0138","\u03f0":"\u0138","\ud835\udecb":"\u0138","\ud835\udede":"\u0138","\ud835\udf05":"\u0138","\ud835\udf18":"\u0138","\ud835\udf3f":"\u0138","\ud835\udf52":"\u0138","\ud835\udf79":"\u0138","\ud835\udf8c":"\u0138","\ud835\udfb3":"\u0138","\ud835\udfc6":"\u0138","\u2c95":"\u0138","\u043a":"\u0138","\uabb6":"\u0138","\u049b":"\u0138\u0329","\u049f":"\u0138\u0335","\ud835\udc2b":"r","\ud835\udc5f":"r","\ud835\udc93":"r","\ud835\udcc7":"r","\ud835\udcfb":"r","\ud835\udd2f":"r","\ud835\udd63":"r","\ud835\udd97":"r","\ud835\uddcb":"r","\ud835\uddff":"r","\ud835\ude33":"r","\ud835\ude67":"r","\ud835\ude9b":"r","\uab47":"r","\uab48":"r","\u1d26":"r","\u2c85":"r","\u0433":"r","\uab81":"r","\ud834\ude16":"R","\u211b":"R","\u211c":"R","\u211d":"R","\ud835\udc11":"R","\ud835\udc45":"R","\ud835\udc79":"R","\ud835\udce1":"R","\ud835\udd7d":"R","\ud835\uddb1":"R","\ud835\udde5":"R","\ud835\ude19":"R","\ud835\ude4d":"R","\ud835\ude81":"R","\u01a6":"R","\u13a1":"R","\u13d2":"R","\ud801\udcb4":"R","\u1587":"R","\ua4e3":"R","\ud81b\udf35":"R","\u027d":"r\u0328","\u027c":"r\u0329","\u024d":"r\u0335","\u0493":"r\u0335","\u1d72":"r\u0334","\u0491":"r\'","\ud806\udce3":"rn","m":"rn","\u217f":"rn","\ud835\udc26":"rn","\ud835\udc5a":"rn","\ud835\udc8e":"rn","\ud835\udcc2":"rn","\ud835\udcf6":"rn","\ud835\udd2a":"rn","\ud835\udd5e":"rn","\ud835\udd92":"rn","\ud835\uddc6":"rn","\ud835\uddfa":"rn","\ud835\ude2e":"rn","\ud835\ude62":"rn","\ud835\ude96":"rn","\ud805\udf00":"rn","\u20a5":"rn\u0338","\u0271":"rn\u0326","\u1d6f":"rn\u0334","\u20a8":"Rs","\uab71":"\u0280","\uaba2":"\u0280","\u044f":"\u1d19","\u1d73":"\u027e\u0334","\u2129":"\u027f","\uff53":"s","\ud835\udc2c":"s","\ud835\udc60":"s","\ud835\udc94":"s","\ud835\udcc8":"s","\ud835\udcfc":"s","\ud835\udd30":"s","\ud835\udd64":"s","\ud835\udd98":"s","\ud835\uddcc":"s","\ud835\ude00":"s","\ud835\ude34":"s","\ud835\ude68":"s","\ud835\ude9c":"s","\ua731":"s","\u01bd":"s","\u0455":"s","\uabaa":"s","\ud806\udcc1":"s","\ud801\udc48":"s","\uff33":"S","\ud835\udc12":"S","\ud835\udc46":"S","\ud835\udc7a":"S","\ud835\udcae":"S","\ud835\udce2":"S","\ud835\udd16":"S","\ud835\udd4a":"S","\ud835\udd7e":"S","\ud835\uddb2":"S","\ud835\udde6":"S","\ud835\ude1a":"S","\ud835\ude4e":"S","\ud835\ude82":"S","\u0405":"S","\u054f":"S","\u13d5":"S","\u13da":"S","\ua4e2":"S","\ud81b\udf3a":"S","\ud800\ude96":"S","\ud801\udc20":"S","\u0282":"s\u0328","\u1d74":"s\u0334","\ua7b5":"\xdf","\u03b2":"\xdf","\u03d0":"\xdf","\ud835\udec3":"\xdf","\ud835\udefd":"\xdf","\ud835\udf37":"\xdf","\ud835\udf71":"\xdf","\ud835\udfab":"\xdf","\u13f0":"\xdf","\ud83d\udf5c":"sss","\ufb06":"st","\u222b":"\u0283","\uab4d":"\u0283","\u2211":"\u01a9","\u2140":"\u01a9","\u03a3":"\u01a9","\ud835\udeba":"\u01a9","\ud835\udef4":"\u01a9","\ud835\udf2e":"\u01a9","\ud835\udf68":"\u01a9","\ud835\udfa2":"\u01a9","\u2d49":"\u01a9","\u222c":"\u0283\u0283","\u222d":"\u0283\u0283\u0283","\u2a0c":"\u0283\u0283\u0283\u0283","\ud835\udc2d":"t","\ud835\udc61":"t","\ud835\udc95":"t","\ud835\udcc9":"t","\ud835\udcfd":"t","\ud835\udd31":"t","\ud835\udd65":"t","\ud835\udd99":"t","\ud835\uddcd":"t","\ud835\ude01":"t","\ud835\ude35":"t","\ud835\ude69":"t","\ud835\ude9d":"t","\u22a4":"T","\u27d9":"T","\ud83d\udf68":"T","\uff34":"T","\ud835\udc13":"T","\ud835\udc47":"T","\ud835\udc7b":"T","\ud835\udcaf":"T","\ud835\udce3":"T","\ud835\udd17":"T","\ud835\udd4b":"T","\ud835\udd7f":"T","\ud835\uddb3":"T","\ud835\udde7":"T","\ud835\ude1b":"T","\ud835\ude4f":"T","\ud835\ude83":"T","\u03a4":"T","\ud835\udebb":"T","\ud835\udef5":"T","\ud835\udf2f":"T","\ud835\udf69":"T","\ud835\udfa3":"T","\u2ca6":"T","\u0422":"T","\u13a2":"T","\ua4d4":"T","\ud81b\udf0a":"T","\ud806\udcbc":"T","\ud800\ude97":"T","\ud800\udeb1":"T","\ud800\udf15":"T","\u01ad":"t\u0314","\u2361":"T\u0308","\u023e":"T\u0338","\u021a":"\u0162","\u01ae":"T\u0328","\u04ac":"T\u0329","\u20ae":"T\u20eb","\u0167":"t\u0335","\u0166":"T\u0335","\u1d75":"t\u0334","\u10a0":"\ua786","\ua728":"T3","\u02a8":"t\u0255","\u2121":"TEL","\ua777":"tf","\u02a6":"ts","\u02a7":"t\u0283","\ua729":"t\u021d","\u03c4":"\u1d1b","\ud835\uded5":"\u1d1b","\ud835\udf0f":"\u1d1b","\ud835\udf49":"\u1d1b","\ud835\udf83":"\u1d1b","\ud835\udfbd":"\u1d1b","\u0442":"\u1d1b","\uab72":"\u1d1b","\u04ad":"\u1d1b\u0329","\u0163":"\u01ab","\u021b":"\u01ab","\u13bf":"\u01ab","\ud835\udc2e":"u","\ud835\udc62":"u","\ud835\udc96":"u","\ud835\udcca":"u","\ud835\udcfe":"u","\ud835\udd32":"u","\ud835\udd66":"u","\ud835\udd9a":"u","\ud835\uddce":"u","\ud835\ude02":"u","\ud835\ude36":"u","\ud835\ude6a":"u","\ud835\ude9e":"u","\ua79f":"u","\u1d1c":"u","\uab4e":"u","\uab52":"u","\u028b":"u","\u03c5":"u","\ud835\uded6":"u","\ud835\udf10":"u","\ud835\udf4a":"u","\ud835\udf84":"u","\ud835\udfbe":"u","\u057d":"u","\ud801\udcf6":"u","\ud806\udcd8":"u","\u222a":"U","\u22c3":"U","\ud835\udc14":"U","\ud835\udc48":"U","\ud835\udc7c":"U","\ud835\udcb0":"U","\ud835\udce4":"U","\ud835\udd18":"U","\ud835\udd4c":"U","\ud835\udd80":"U","\ud835\uddb4":"U","\ud835\udde8":"U","\ud835\ude1c":"U","\ud835\ude50":"U","\ud835\ude84":"U","\u054d":"U","\u1200":"U","\ud801\udcce":"U","\u144c":"U","\ua4f4":"U","\ud81b\udf42":"U","\ud806\udcb8":"U","\u01d4":"\u016d","\u01d3":"\u016c","\u1d7e":"u\u0335","\uab9c":"u\u0335","\u0244":"U\u0335","\u13cc":"U\u0335","\u1458":"U\xb7","\u1467":"U\'","\u1d6b":"ue","\uab63":"uo","\u1e43":"\uab51","\u057a":"\u0270","\u1223":"\u0270","\u2127":"\u01b1","\u162e":"\u01b1","\u1634":"\u01b1","\u1d7f":"\u028a\u0335","\u2228":"v","\u22c1":"v","\uff56":"v","\u2174":"v","\ud835\udc2f":"v","\ud835\udc63":"v","\ud835\udc97":"v","\ud835\udccb":"v","\ud835\udcff":"v","\ud835\udd33":"v","\ud835\udd67":"v","\ud835\udd9b":"v","\ud835\uddcf":"v","\ud835\ude03":"v","\ud835\ude37":"v","\ud835\ude6b":"v","\ud835\ude9f":"v","\u1d20":"v","\u03bd":"v","\ud835\udece":"v","\ud835\udf08":"v","\ud835\udf42":"v","\ud835\udf7c":"v","\ud835\udfb6":"v","\u0475":"v","\u05d8":"v","\ud805\udf06":"v","\uaba9":"v","\ud806\udcc0":"v","\ud834\ude0d":"V","\u0667":"V","\u06f7":"V","\u2164":"V","\ud835\udc15":"V","\ud835\udc49":"V","\ud835\udc7d":"V","\ud835\udcb1":"V","\ud835\udce5":"V","\ud835\udd19":"V","\ud835\udd4d":"V","\ud835\udd81":"V","\ud835\uddb5":"V","\ud835\udde9":"V","\ud835\ude1d":"V","\ud835\ude51":"V","\ud835\ude85":"V","\u0474":"V","\u2d38":"V","\u13d9":"V","\u142f":"V","\ua6df":"V","\ua4e6":"V","\ud81b\udf08":"V","\ud806\udca0":"V","\ud801\udd1d":"V","\ud800\udd97":"V\u0335","\u143b":"V\xb7","\ud83d\udf6c":"VB","\u2175":"vi","\u2176":"vii","\u2177":"viii","\u2165":"Vl","\u2166":"Vll","\u2167":"Vlll","\ud83d\udf08":"V\u1de4","\u1d27":"\u028c","\ud801\udcd8":"\u028c","\u0668":"\u0245","\u06f8":"\u0245","\u039b":"\u0245","\ud835\udeb2":"\u0245","\ud835\udeec":"\u0245","\ud835\udf26":"\u0245","\ud835\udf60":"\u0245","\ud835\udf9a":"\u0245","\u041b":"\u0245","\u2d37":"\u0245","\ud801\udcb0":"\u0245","\u1431":"\u0245","\ua6ce":"\u0245","\ua4e5":"\u0245","\ud81b\udf3d":"\u0245","\ud800\ude8d":"\u0245","\u04c5":"\u0245\u0326","\u143d":"\u0245\xb7","\u026f":"w","\ud835\udc30":"w","\ud835\udc64":"w","\ud835\udc98":"w","\ud835\udccc":"w","\ud835\udd00":"w","\ud835\udd34":"w","\ud835\udd68":"w","\ud835\udd9c":"w","\ud835\uddd0":"w","\ud835\ude04":"w","\ud835\ude38":"w","\ud835\ude6c":"w","\ud835\udea0":"w","\u1d21":"w","\u0461":"w","\u051d":"w","\u0561":"w","\ud805\udf0a":"w","\ud805\udf0e":"w","\ud805\udf0f":"w","\uab83":"w","\ud806\udcef":"W","\ud806\udce6":"W","\ud835\udc16":"W","\ud835\udc4a":"W","\ud835\udc7e":"W","\ud835\udcb2":"W","\ud835\udce6":"W","\ud835\udd1a":"W","\ud835\udd4e":"W","\ud835\udd82":"W","\ud835\uddb6":"W","\ud835\uddea":"W","\ud835\ude1e":"W","\ud835\ude52":"W","\ud835\ude86":"W","\u051c":"W","\u13b3":"W","\u13d4":"W","\ua4ea":"W","\u047d":"w\u0486\u0487","\ud805\udcc5":"w\u0307","\u20a9":"W\u0335","\ua761":"w\u0326","\u1d0d":"\u028d","\u043c":"\u028d","\uab87":"\u028d","\u04ce":"\u028d\u0326","\u166e":"x","\xd7":"x","\u292b":"x","\u292c":"x","\u2a2f":"x","\uff58":"x","\u2179":"x","\ud835\udc31":"x","\ud835\udc65":"x","\ud835\udc99":"x","\ud835\udccd":"x","\ud835\udd01":"x","\ud835\udd35":"x","\ud835\udd69":"x","\ud835\udd9d":"x","\ud835\uddd1":"x","\ud835\ude05":"x","\ud835\ude39":"x","\ud835\ude6d":"x","\ud835\udea1":"x","\u0445":"x","\u1541":"x","\u157d":"x","\u2def":"\u036f","\u166d":"X","\u2573":"X","\ud800\udf22":"X","\ud806\udcec":"X","\uff38":"X","\u2169":"X","\ud835\udc17":"X","\ud835\udc4b":"X","\ud835\udc7f":"X","\ud835\udcb3":"X","\ud835\udce7":"X","\ud835\udd1b":"X","\ud835\udd4f":"X","\ud835\udd83":"X","\ud835\uddb7":"X","\ud835\uddeb":"X","\ud835\ude1f":"X","\ud835\ude53":"X","\ud835\ude87":"X","\ua7b3":"X","\u03a7":"X","\ud835\udebe":"X","\ud835\udef8":"X","\ud835\udf32":"X","\ud835\udf6c":"X","\ud835\udfa6":"X","\u2cac":"X","\u0425":"X","\u2d5d":"X","\u16b7":"X","\ua4eb":"X","\ud800\ude90":"X","\ud800\udeb4":"X","\ud800\udf17":"X","\ud801\udd27":"X","\u2a30":"x\u0307","\u04b2":"X\u0329","\ud800\udd96":"X\u0335","\u217a":"xi","\u217b":"xii","\u216a":"Xl","\u216b":"Xll","\u0263":"y","\u1d8c":"y","\uff59":"y","\ud835\udc32":"y","\ud835\udc66":"y","\ud835\udc9a":"y","\ud835\udcce":"y","\ud835\udd02":"y","\ud835\udd36":"y","\ud835\udd6a":"y","\ud835\udd9e":"y","\ud835\uddd2":"y","\ud835\ude06":"y","\ud835\ude3a":"y","\ud835\ude6e":"y","\ud835\udea2":"y","\u028f":"y","\u1eff":"y","\uab5a":"y","\u03b3":"y","\u213d":"y","\ud835\udec4":"y","\ud835\udefe":"y","\ud835\udf38":"y","\ud835\udf72":"y","\ud835\udfac":"y","\u0443":"y","\u04af":"y","\u10e7":"y","\ud806\udcdc":"y","\uff39":"Y","\ud835\udc18":"Y","\ud835\udc4c":"Y","\ud835\udc80":"Y","\ud835\udcb4":"Y","\ud835\udce8":"Y","\ud835\udd1c":"Y","\ud835\udd50":"Y","\ud835\udd84":"Y","\ud835\uddb8":"Y","\ud835\uddec":"Y","\ud835\ude20":"Y","\ud835\ude54":"Y","\ud835\ude88":"Y","\u03a5":"Y","\u03d2":"Y","\ud835\udebc":"Y","\ud835\udef6":"Y","\ud835\udf30":"Y","\ud835\udf6a":"Y","\ud835\udfa4":"Y","\u2ca8":"Y","\u0423":"Y","\u04ae":"Y","\u13a9":"Y","\u13bd":"Y","\ua4ec":"Y","\ud81b\udf43":"Y","\ud806\udca4":"Y","\ud800\udeb2":"Y","\u01b4":"y\u0314","\u024f":"y\u0335","\u04b1":"y\u0335","\xa5":"Y\u0335","\u024e":"Y\u0335","\u04b0":"Y\u0335","\u0292":"\u021d","\ua76b":"\u021d","\u2ccd":"\u021d","\u04e1":"\u021d","\u10f3":"\u021d","\ud835\udc33":"z","\ud835\udc67":"z","\ud835\udc9b":"z","\ud835\udccf":"z","\ud835\udd03":"z","\ud835\udd37":"z","\ud835\udd6b":"z","\ud835\udd9f":"z","\ud835\uddd3":"z","\ud835\ude07":"z","\ud835\ude3b":"z","\ud835\ude6f":"z","\ud835\udea3":"z","\u1d22":"z","\uab93":"z","\ud806\udcc4":"z","\ud800\udef5":"Z","\ud806\udce5":"Z","\uff3a":"Z","\u2124":"Z","\u2128":"Z","\ud835\udc19":"Z","\ud835\udc4d":"Z","\ud835\udc81":"Z","\ud835\udcb5":"Z","\ud835\udce9":"Z","\ud835\udd85":"Z","\ud835\uddb9":"Z","\ud835\udded":"Z","\ud835\ude21":"Z","\ud835\ude55":"Z","\ud835\ude89":"Z","\u0396":"Z","\ud835\udead":"Z","\ud835\udee7":"Z","\ud835\udf21":"Z","\ud835\udf5b":"Z","\ud835\udf95":"Z","\u13c3":"Z","\ua4dc":"Z","\ud806\udca9":"Z","\u0290":"z\u0328","\u01b6":"z\u0335","\u01b5":"Z\u0335","\u0225":"z\u0326","\u0224":"Z\u0326","\u1d76":"z\u0334","\u01bf":"\xfe","\u03f8":"\xfe","\u03f7":"\xde","\ud801\udcc4":"\xde","\u2079":"\ua770","\u1d24":"\u01a8","\u03e9":"\u01a8","\ua645":"\u01a8","\u044c":"\u0185","\uab9f":"\u0185","\u044b":"\u0185i","\uab7e":"\u0242","\u02e4":"\u02c1","\ua6cd":"\u02a1","\u2299":"\u0298","\u2609":"\u0298","\u2a00":"\u0298","\ua668":"\u0298","\u2d59":"\u0298","\ud801\udcc3":"\u0298","\u213e":"\u0393","\ud835\udeaa":"\u0393","\ud835\udee4":"\u0393","\ud835\udf1e":"\u0393","\ud835\udf58":"\u0393","\ud835\udf92":"\u0393","\u2c84":"\u0393","\u0413":"\u0393","\u13b1":"\u0393","\u14a5":"\u0393","\ud81b\udf07":"\u0393","\u0492":"\u0393\u0335","\u14af":"\u0393\xb7","\u0490":"\u0393\'","\u2206":"\u0394","\u25b3":"\u0394","\ud83d\udf02":"\u0394","\ud835\udeab":"\u0394","\ud835\udee5":"\u0394","\ud835\udf1f":"\u0394","\ud835\udf59":"\u0394","\ud835\udf93":"\u0394","\u2c86":"\u0394","\u2d60":"\u0394","\u1403":"\u0394","\ud81b\udf1a":"\u0394","\ud800\ude85":"\u0394","\ud800\udea3":"\u0394","\u2359":"\u0394\u0332","\u140f":"\u0394\xb7","\u142c":"\u0394\u1420","\ud835\udfcb":"\u03dd","\ud835\udec7":"\u03b6","\ud835\udf01":"\u03b6","\ud835\udf3b":"\u03b6","\ud835\udf75":"\u03b6","\ud835\udfaf":"\u03b6","\u2ce4":"\u03d7","\ud835\udecc":"\u03bb","\ud835\udf06":"\u03bb","\ud835\udf40":"\u03bb","\ud835\udf7a":"\u03bb","\ud835\udfb4":"\u03bb","\u2c96":"\u03bb","\ud801\udcdb":"\u03bb","\xb5":"\u03bc","\ud835\udecd":"\u03bc","\ud835\udf07":"\u03bc","\ud835\udf41":"\u03bc","\ud835\udf7b":"\u03bc","\ud835\udfb5":"\u03bc","\ud835\udecf":"\u03be","\ud835\udf09":"\u03be","\ud835\udf43":"\u03be","\ud835\udf7d":"\u03be","\ud835\udfb7":"\u03be","\ud835\udeb5":"\u039e","\ud835\udeef":"\u039e","\ud835\udf29":"\u039e","\ud835\udf63":"\u039e","\ud835\udf9d":"\u039e","\u03d6":"\u03c0","\u213c":"\u03c0","\ud835\uded1":"\u03c0","\ud835\udee1":"\u03c0","\ud835\udf0b":"\u03c0","\ud835\udf1b":"\u03c0","\ud835\udf45":"\u03c0","\ud835\udf55":"\u03c0","\ud835\udf7f":"\u03c0","\ud835\udf8f":"\u03c0","\ud835\udfb9":"\u03c0","\ud835\udfc9":"\u03c0","\u1d28":"\u03c0","\u043f":"\u03c0","\u220f":"\u03a0","\u213f":"\u03a0","\ud835\udeb7":"\u03a0","\ud835\udef1":"\u03a0","\ud835\udf2b":"\u03a0","\ud835\udf65":"\u03a0","\ud835\udf9f":"\u03a0","\u2ca0":"\u03a0","\u041f":"\u03a0","\ua6db":"\u03a0","\ud800\udead":"\u03d8","\ud800\udf12":"\u03d8","\u03db":"\u03c2","\ud835\uded3":"\u03c2","\ud835\udf0d":"\u03c2","\ud835\udf47":"\u03c2","\ud835\udf81":"\u03c2","\ud835\udfbb":"\u03c2","\ud835\udebd":"\u03a6","\ud835\udef7":"\u03a6","\ud835\udf31":"\u03a6","\ud835\udf6b":"\u03a6","\ud835\udfa5":"\u03a6","\u2caa":"\u03a6","\u0424":"\u03a6","\u0553":"\u03a6","\u1240":"\u03a6","\u16f0":"\u03a6","\ud800\udeb3":"\u03a6","\uab53":"\u03c7","\uab55":"\u03c7","\ud835\uded8":"\u03c7","\ud835\udf12":"\u03c7","\ud835\udf4c":"\u03c7","\ud835\udf86":"\u03c7","\ud835\udfc0":"\u03c7","\u2cad":"\u03c7","\ud835\uded9":"\u03c8","\ud835\udf13":"\u03c8","\ud835\udf4d":"\u03c8","\ud835\udf87":"\u03c8","\ud835\udfc1":"\u03c8","\u0471":"\u03c8","\ud801\udcf9":"\u03c8","\ud835\udebf":"\u03a8","\ud835\udef9":"\u03a8","\ud835\udf33":"\u03a8","\ud835\udf6d":"\u03a8","\ud835\udfa7":"\u03a8","\u2cae":"\u03a8","\u0470":"\u03a8","\ud801\udcd1":"\u03a8","\u16d8":"\u03a8","\ud800\udeb5":"\u03a8","\u2375":"\u03c9","\ua7b7":"\u03c9","\ud835\udeda":"\u03c9","\ud835\udf14":"\u03c9","\ud835\udf4e":"\u03c9","\ud835\udf88":"\u03c9","\ud835\udfc2":"\u03c9","\u2cb1":"\u03c9","\ua64d":"\u03c9","\u2126":"\u03a9","\ud835\udec0":"\u03a9","\ud835\udefa":"\u03a9","\ud835\udf34":"\u03a9","\ud835\udf6e":"\u03a9","\ud835\udfa8":"\u03a9","\u162f":"\u03a9","\u1635":"\u03a9","\ud800\udeb6":"\u03a9","\u2379":"\u03c9\u0332","\u1f7d":"\u1ff4","\u2630":"\u2cb6","\u2cdc":"\u03ec","\u0497":"\u0436\u0329","\u0496":"\u0416\u0329","\ud834\ude0b":"\u0418","\u0376":"\u0418","\ua6a1":"\u0418","\ud801\udc25":"\u0418","\u0419":"\u040d","\u048a":"\u040d\u0326","\u045d":"\u0439","\u048b":"\u0439\u0326","\ud801\udcbc":"\u04c3","\u1d2b":"\u043b","\u04c6":"\u043b\u0326","\uab60":"\u0459","\ud801\udceb":"\ua669","\u1dee":"\u2dec","\ud801\udccd":"\u040b","\ud834\ude02":"\u04fe","\ud834\ude22":"\u0460","\u13c7":"\u0460","\u15ef":"\u0460","\u047c":"\u0460\u0486\u0487","\u18ed":"\u0460\xb7","\ua7b6":"\ua64c","\u04cc":"\u04b7","\u04cb":"\u04b6","\u04be":"\u04bc\u0328","\u2cbd":"\u0448","\u2cbc":"\u0428","\ua650":"\u042al","\u2108":"\u042d","\ud83d\udf01":"\ua658","\ud81b\udf1c":"\ua658","\ua992":"\u2c3f","\u0587":"\u0565\u0582","\u1294":"\u0571","\ufb14":"\u0574\u0565","\ufb15":"\u0574\u056b","\ufb17":"\u0574\u056d","\ufb13":"\u0574\u0576","\u2229":"\u0548","\u22c2":"\u0548","\ud834\ude45":"\u0548","\u1260":"\u0548","\u144e":"\u0548","\ua4f5":"\u0548","\u145a":"\u0548\xb7","\u1468":"\u0548\'","\ufb16":"\u057e\u0576","\u20bd":"\u0554","\u02d3":"\u0559","\u02bf":"\u0559","\u2135":"\u05d0","\ufb21":"\u05d0","\ufb2f":"\ufb2e","\ufb30":"\ufb2e","\ufb4f":"\u05d0\u05dc","\u2136":"\u05d1","\u2137":"\u05d2","\u2138":"\u05d3","\ufb22":"\u05d3","\ufb23":"\u05d4","\ufb39":"\ufb1d","\ufb24":"\u05db","\ufb25":"\u05dc","\ufb26":"\u05dd","\ufb20":"\u05e2","\ufb27":"\u05e8","\ufb2b":"\ufb2a","\ufb49":"\ufb2a","\ufb2d":"\ufb2c","\ufb28":"\u05ea","\ufe80":"\u0621","\u06fd":"\u0621\u0348","\ufe82":"\u0622","\ufe81":"\u0622","\ufb51":"\u0671","\ufb50":"\u0671","\ud83b\ude01":"\u0628","\ud83b\ude21":"\u0628","\ud83b\ude61":"\u0628","\ud83b\ude81":"\u0628","\ud83b\udea1":"\u0628","\ufe91":"\u0628","\ufe92":"\u0628","\ufe90":"\u0628","\ufe8f":"\u0628","\u0751":"\u0628\u06db","\u08b6":"\u0628\u06e2","\u08a1":"\u0628\u0654","\ufca0":"\u0628o","\ufce2":"\u0628o","\ufc9c":"\u0628\u062c","\ufc05":"\u0628\u062c","\ufc9d":"\u0628\u062d","\ufc06":"\u0628\u062d","\ufdc2":"\u0628\u062d\u0649","\ufc9e":"\u0628\u062e","\ufc07":"\u0628\u062e","\ufcd2":"\u0628\u062e","\ufc4b":"\u0628\u062e","\ufd9e":"\u0628\u062e\u0649","\ufc6a":"\u0628\u0631","\ufc6b":"\u0628\u0632","\ufc9f":"\u0628\u0645","\ufce1":"\u0628\u0645","\ufc6c":"\u0628\u0645","\ufc08":"\u0628\u0645","\ufc6d":"\u0628\u0646","\ufc6e":"\u0628\u0649","\ufc09":"\u0628\u0649","\ufc6f":"\u0628\u0649","\ufc0a":"\u0628\u0649","\ufb54":"\u067b","\ufb55":"\u067b","\ufb53":"\u067b","\ufb52":"\u067b","\u06d0":"\u067b","\ufbe6":"\u067b","\ufbe7":"\u067b","\ufbe5":"\u067b","\ufbe4":"\u067b","\ufb5c":"\u0680","\ufb5d":"\u0680","\ufb5b":"\u0680","\ufb5a":"\u0680","\u08a9":"\u0754","\u0767":"\u0754","\u2365":"\u0629","\xf6":"\u0629","\ufe94":"\u0629","\ufe93":"\u0629","\u06c3":"\u0629","\ud83b\ude15":"\u062a","\ud83b\ude35":"\u062a","\ud83b\ude75":"\u062a","\ud83b\ude95":"\u062a","\ud83b\udeb5":"\u062a","\ufe97":"\u062a","\ufe98":"\u062a","\ufe96":"\u062a","\ufe95":"\u062a","\ufca5":"\u062ao","\ufce4":"\u062ao","\ufca1":"\u062a\u062c","\ufc0b":"\u062a\u062c","\ufd50":"\u062a\u062c\u0645","\ufda0":"\u062a\u062c\u0649","\ufd9f":"\u062a\u062c\u0649","\ufca2":"\u062a\u062d","\ufc0c":"\u062a\u062d","\ufd52":"\u062a\u062d\u062c","\ufd51":"\u062a\u062d\u062c","\ufd53":"\u062a\u062d\u0645","\ufca3":"\u062a\u062e","\ufc0d":"\u062a\u062e","\ufd54":"\u062a\u062e\u0645","\ufda2":"\u062a\u062e\u0649","\ufda1":"\u062a\u062e\u0649","\ufc70":"\u062a\u0631","\ufc71":"\u062a\u0632","\ufca4":"\u062a\u0645","\ufce3":"\u062a\u0645","\ufc72":"\u062a\u0645","\ufc0e":"\u062a\u0645","\ufd55":"\u062a\u0645\u062c","\ufd56":"\u062a\u0645\u062d","\ufd57":"\u062a\u0645\u062e","\ufda4":"\u062a\u0645\u0649","\ufda3":"\u062a\u0645\u0649","\ufc73":"\u062a\u0646","\ufc74":"\u062a\u0649","\ufc0f":"\u062a\u0649","\ufc75":"\u062a\u0649","\ufc10":"\u062a\u0649","\ufb60":"\u067a","\ufb61":"\u067a","\ufb5f":"\u067a","\ufb5e":"\u067a","\ufb64":"\u067f","\ufb65":"\u067f","\ufb63":"\u067f","\ufb62":"\u067f","\ud83b\ude02":"\u062c","\ud83b\ude22":"\u062c","\ud83b\ude42":"\u062c","\ud83b\ude62":"\u062c","\ud83b\ude82":"\u062c","\ud83b\udea2":"\u062c","\ufe9f":"\u062c","\ufea0":"\u062c","\ufe9e":"\u062c","\ufe9d":"\u062c","\ufca7":"\u062c\u062d","\ufc15":"\u062c\u062d","\ufda6":"\u062c\u062d\u0649","\ufdbe":"\u062c\u062d\u0649","\ufdfb":"\u062c\u0644 \u062c\u0644l\u0644o","\ufca8":"\u062c\u0645","\ufc16":"\u062c\u0645","\ufd59":"\u062c\u0645\u062d","\ufd58":"\u062c\u0645\u062d","\ufda7":"\u062c\u0645\u0649","\ufda5":"\u062c\u0645\u0649","\ufd1d":"\u062c\u0649","\ufd01":"\u062c\u0649","\ufd1e":"\u062c\u0649","\ufd02":"\u062c\u0649","\ufb78":"\u0683","\ufb79":"\u0683","\ufb77":"\u0683","\ufb76":"\u0683","\ufb74":"\u0684","\ufb75":"\u0684","\ufb73":"\u0684","\ufb72":"\u0684","\ufb7c":"\u0686","\ufb7d":"\u0686","\ufb7b":"\u0686","\ufb7a":"\u0686","\ufb80":"\u0687","\ufb81":"\u0687","\ufb7f":"\u0687","\ufb7e":"\u0687","\ud83b\ude07":"\u062d","\ud83b\ude27":"\u062d","\ud83b\ude47":"\u062d","\ud83b\ude67":"\u062d","\ud83b\ude87":"\u062d","\ud83b\udea7":"\u062d","\ufea3":"\u062d","\ufea4":"\u062d","\ufea2":"\u062d","\ufea1":"\u062d","\u0685":"\u062d\u06db","\u0681":"\u062d\u0654","\u0772":"\u062d\u0654","\ufca9":"\u062d\u062c","\ufc17":"\u062d\u062c","\ufdbf":"\u062d\u062c\u0649","\ufcaa":"\u062d\u0645","\ufc18":"\u062d\u0645","\ufd5b":"\u062d\u0645\u0649","\ufd5a":"\u062d\u0645\u0649","\ufd1b":"\u062d\u0649","\ufcff":"\u062d\u0649","\ufd1c":"\u062d\u0649","\ufd00":"\u062d\u0649","\ud83b\ude17":"\u062e","\ud83b\ude37":"\u062e","\ud83b\ude57":"\u062e","\ud83b\ude77":"\u062e","\ud83b\ude97":"\u062e","\ud83b\udeb7":"\u062e","\ufea7":"\u062e","\ufea8":"\u062e","\ufea6":"\u062e","\ufea5":"\u062e","\ufcab":"\u062e\u062c","\ufc19":"\u062e\u062c","\ufc1a":"\u062e\u062d","\ufcac":"\u062e\u0645","\ufc1b":"\u062e\u0645","\ufd1f":"\u062e\u0649","\ufd03":"\u062e\u0649","\ufd20":"\u062e\u0649","\ufd04":"\u062e\u0649","\ud800\udee1":"\u062f","\ud83b\ude03":"\u062f","\ud83b\ude83":"\u062f","\ud83b\udea3":"\u062f","\ufeaa":"\u062f","\ufea9":"\u062f","\u0688":"\u062f\u0615","\ufb89":"\u062f\u0615","\ufb88":"\u062f\u0615","\u068e":"\u062f\u06db","\ufb87":"\u062f\u06db","\ufb86":"\u062f\u06db","\u06ee":"\u062f\u0302","\u08ae":"\u062f\u0324\u0323","\ud83b\ude18":"\u0630","\ud83b\ude98":"\u0630","\ud83b\udeb8":"\u0630","\ufeac":"\u0630","\ufeab":"\u0630","\ufc5b":"\u0630\u0670","\u068b":"\u068a\u0615","\ufb85":"\u068c","\ufb84":"\u068c","\ufb83":"\u068d","\ufb82":"\u068d","\ud83b\ude13":"\u0631","\ud83b\ude93":"\u0631","\ud83b\udeb3":"\u0631","\ufeae":"\u0631","\ufead":"\u0631","\u0691":"\u0631\u0615","\ufb8d":"\u0631\u0615","\ufb8c":"\u0631\u0615","\u0698":"\u0631\u06db","\ufb8b":"\u0631\u06db","\ufb8a":"\u0631\u06db","\u0692":"\u0631\u0306","\u08b9":"\u0631\u0306\u0307","\u06ef":"\u0631\u0302","\u076c":"\u0631\u0654","\ufc5c":"\u0631\u0670","\ufdf6":"\u0631\u0633\u0648\u0644","\ufdfc":"\u0631\u0649l\u0644","\ud83b\ude06":"\u0632","\ud83b\ude86":"\u0632","\ud83b\udea6":"\u0632","\ufeb0":"\u0632","\ufeaf":"\u0632","\u08b2":"\u0632\u0302","\u0771":"\u0697\u0615","\ud83b\ude0e":"\u0633","\ud83b\ude2e":"\u0633","\ud83b\ude4e":"\u0633","\ud83b\ude6e":"\u0633","\ud83b\ude8e":"\u0633","\ud83b\udeae":"\u0633","\ufeb3":"\u0633","\ufeb4":"\u0633","\ufeb2":"\u0633","\ufeb1":"\u0633","\u0634":"\u0633\u06db","\ud83b\ude14":"\u0633\u06db","\ud83b\ude34":"\u0633\u06db","\ud83b\ude54":"\u0633\u06db","\ud83b\ude74":"\u0633\u06db","\ud83b\ude94":"\u0633\u06db","\ud83b\udeb4":"\u0633\u06db","\ufeb7":"\u0633\u06db","\ufeb8":"\u0633\u06db","\ufeb6":"\u0633\u06db","\ufeb5":"\u0633\u06db","\u077e":"\u0633\u0302","\ufd31":"\u0633o","\ufce8":"\u0633o","\ufd32":"\u0633\u06dbo","\ufcea":"\u0633\u06dbo","\ufcad":"\u0633\u062c","\ufd34":"\u0633\u062c","\ufc1c":"\u0633\u062c","\ufd2d":"\u0633\u06db\u062c","\ufd37":"\u0633\u06db\u062c","\ufd25":"\u0633\u06db\u062c","\ufd09":"\u0633\u06db\u062c","\ufd5d":"\u0633\u062c\u062d","\ufd5e":"\u0633\u062c\u0649","\ufd69":"\u0633\u06db\u062c\u0649","\ufcae":"\u0633\u062d","\ufd35":"\u0633\u062d","\ufc1d":"\u0633\u062d","\ufd2e":"\u0633\u06db\u062d","\ufd38":"\u0633\u06db\u062d","\ufd26":"\u0633\u06db\u062d","\ufd0a":"\u0633\u06db\u062d","\ufd5c":"\u0633\u062d\u062c","\ufd68":"\u0633\u06db\u062d\u0645","\ufd67":"\u0633\u06db\u062d\u0645","\ufdaa":"\u0633\u06db\u062d\u0649","\ufcaf":"\u0633\u062e","\ufd36":"\u0633\u062e","\ufc1e":"\u0633\u062e","\ufd2f":"\u0633\u06db\u062e","\ufd39":"\u0633\u06db\u062e","\ufd27":"\u0633\u06db\u062e","\ufd0b":"\u0633\u06db\u062e","\ufda8":"\u0633\u062e\u0649","\ufdc6":"\u0633\u062e\u0649","\ufd2a":"\u0633\u0631","\ufd0e":"\u0633\u0631","\ufd29":"\u0633\u06db\u0631","\ufd0d":"\u0633\u06db\u0631","\ufcb0":"\u0633\u0645","\ufce7":"\u0633\u0645","\ufc1f":"\u0633\u0645","\ufd30":"\u0633\u06db\u0645","\ufce9":"\u0633\u06db\u0645","\ufd28":"\u0633\u06db\u0645","\ufd0c":"\u0633\u06db\u0645","\ufd61":"\u0633\u0645\u062c","\ufd60":"\u0633\u0645\u062d","\ufd5f":"\u0633\u0645\u062d","\ufd6b":"\u0633\u06db\u0645\u062e","\ufd6a":"\u0633\u06db\u0645\u062e","\ufd63":"\u0633\u0645\u0645","\ufd62":"\u0633\u0645\u0645","\ufd6d":"\u0633\u06db\u0645\u0645","\ufd6c":"\u0633\u06db\u0645\u0645","\ufd17":"\u0633\u0649","\ufcfb":"\u0633\u0649","\ufd18":"\u0633\u0649","\ufcfc":"\u0633\u0649","\ufd19":"\u0633\u06db\u0649","\ufcfd":"\u0633\u06db\u0649","\ufd1a":"\u0633\u06db\u0649","\ufcfe":"\u0633\u06db\u0649","\ud800\udef2":"\u0635","\ud83b\ude11":"\u0635","\ud83b\ude31":"\u0635","\ud83b\ude51":"\u0635","\ud83b\ude71":"\u0635","\ud83b\ude91":"\u0635","\ud83b\udeb1":"\u0635","\ufebb":"\u0635","\ufebc":"\u0635","\ufeba":"\u0635","\ufeb9":"\u0635","\u069e":"\u0635\u06db","\u08af":"\u0635\u0324\u0323","\ufcb1":"\u0635\u062d","\ufc20":"\u0635\u062d","\ufd65":"\u0635\u062d\u062d","\ufd64":"\u0635\u062d\u062d","\ufda9":"\u0635\u062d\u0649","\ufcb2":"\u0635\u062e","\ufd2b":"\u0635\u0631","\ufd0f":"\u0635\u0631","\ufdf5":"\u0635\u0644\u0639\u0645","\ufdf9":"\u0635\u0644\u0649","\ufdf0":"\u0635\u0644\u0649","\ufdfa":"\u0635\u0644\u0649 l\u0644\u0644o \u0639\u0644\u0649o \u0648\u0633\u0644\u0645","\ufcb3":"\u0635\u0645","\ufc21":"\u0635\u0645","\ufdc5":"\u0635\u0645\u0645","\ufd66":"\u0635\u0645\u0645","\ufd21":"\u0635\u0649","\ufd05":"\u0635\u0649","\ufd22":"\u0635\u0649","\ufd06":"\u0635\u0649","\ud83b\ude19":"\u0636","\ud83b\ude39":"\u0636","\ud83b\ude59":"\u0636","\ud83b\ude79":"\u0636","\ud83b\ude99":"\u0636","\ud83b\udeb9":"\u0636","\ufebf":"\u0636","\ufec0":"\u0636","\ufebe":"\u0636","\ufebd":"\u0636","\ufcb4":"\u0636\u062c","\ufc22":"\u0636\u062c","\ufcb5":"\u0636\u062d","\ufc23":"\u0636\u062d","\ufd6e":"\u0636\u062d\u0649","\ufdab":"\u0636\u062d\u0649","\ufcb6":"\u0636\u062e","\ufc24":"\u0636\u062e","\ufd70":"\u0636\u062e\u0645","\ufd6f":"\u0636\u062e\u0645","\ufd2c":"\u0636\u0631","\ufd10":"\u0636\u0631","\ufcb7":"\u0636\u0645","\ufc25":"\u0636\u0645","\ufd23":"\u0636\u0649","\ufd07":"\u0636\u0649","\ufd24":"\u0636\u0649","\ufd08":"\u0636\u0649","\ud800\udee8":"\u0637","\ud83b\ude08":"\u0637","\ud83b\ude68":"\u0637","\ud83b\ude88":"\u0637","\ud83b\udea8":"\u0637","\ufec3":"\u0637","\ufec4":"\u0637","\ufec2":"\u0637","\ufec1":"\u0637","\u069f":"\u0637\u06db","\ufcb8":"\u0637\u062d","\ufc26":"\u0637\u062d","\ufd33":"\u0637\u0645","\ufd3a":"\u0637\u0645","\ufc27":"\u0637\u0645","\ufd72":"\u0637\u0645\u062d","\ufd71":"\u0637\u0645\u062d","\ufd73":"\u0637\u0645\u0645","\ufd74":"\u0637\u0645\u0649","\ufd11":"\u0637\u0649","\ufcf5":"\u0637\u0649","\ufd12":"\u0637\u0649","\ufcf6":"\u0637\u0649","\ud83b\ude1a":"\u0638","\ud83b\ude7a":"\u0638","\ud83b\ude9a":"\u0638","\ud83b\udeba":"\u0638","\ufec7":"\u0638","\ufec8":"\u0638","\ufec6":"\u0638","\ufec5":"\u0638","\ufcb9":"\u0638\u0645","\ufd3b":"\u0638\u0645","\ufc28":"\u0638\u0645","\u060f":"\u0639","\ud83b\ude0f":"\u0639","\ud83b\ude2f":"\u0639","\ud83b\ude4f":"\u0639","\ud83b\ude6f":"\u0639","\ud83b\ude8f":"\u0639","\ud83b\udeaf":"\u0639","\ufecb":"\u0639","\ufecc":"\u0639","\ufeca":"\u0639","\ufec9":"\u0639","\ufcba":"\u0639\u062c","\ufc29":"\u0639\u062c","\ufdc4":"\u0639\u062c\u0645","\ufd75":"\u0639\u062c\u0645","\ufdf7":"\u0639\u0644\u0649o","\ufcbb":"\u0639\u0645","\ufc2a":"\u0639\u0645","\ufd77":"\u0639\u0645\u0645","\ufd76":"\u0639\u0645\u0645","\ufd78":"\u0639\u0645\u0649","\ufdb6":"\u0639\u0645\u0649","\ufd13":"\u0639\u0649","\ufcf7":"\u0639\u0649","\ufd14":"\u0639\u0649","\ufcf8":"\u0639\u0649","\ud83b\ude1b":"\u063a","\ud83b\ude3b":"\u063a","\ud83b\ude5b":"\u063a","\ud83b\ude7b":"\u063a","\ud83b\ude9b":"\u063a","\ud83b\udebb":"\u063a","\ufecf":"\u063a","\ufed0":"\u063a","\ufece":"\u063a","\ufecd":"\u063a","\ufcbc":"\u063a\u062c","\ufc2b":"\u063a\u062c","\ufcbd":"\u063a\u0645","\ufc2c":"\u063a\u0645","\ufd79":"\u063a\u0645\u0645","\ufd7b":"\u063a\u0645\u0649","\ufd7a":"\u063a\u0645\u0649","\ufd15":"\u063a\u0649","\ufcf9":"\u063a\u0649","\ufd16":"\u063a\u0649","\ufcfa":"\u063a\u0649","\ud83b\ude10":"\u0641","\ud83b\ude30":"\u0641","\ud83b\ude70":"\u0641","\ud83b\ude90":"\u0641","\ud83b\udeb0":"\u0641","\ufed3":"\u0641","\ufed4":"\u0641","\ufed2":"\u0641","\ufed1":"\u0641","\u06a7":"\u0641","\ufcbe":"\u0641\u062c","\ufc2d":"\u0641\u062c","\ufcbf":"\u0641\u062d","\ufc2e":"\u0641\u062d","\ufcc0":"\u0641\u062e","\ufc2f":"\u0641\u062e","\ufd7d":"\u0641\u062e\u0645","\ufd7c":"\u0641\u062e\u0645","\ufcc1":"\u0641\u0645","\ufc30":"\u0641\u0645","\ufdc1":"\u0641\u0645\u0649","\ufc7c":"\u0641\u0649","\ufc31":"\u0641\u0649","\ufc7d":"\u0641\u0649","\ufc32":"\u0641\u0649","\ud83b\ude1e":"\u06a1","\ud83b\ude7e":"\u06a1","\u08bb":"\u06a1","\u066f":"\u06a1","\ud83b\ude1f":"\u06a1","\ud83b\ude5f":"\u06a1","\u08bc":"\u06a1","\u06a4":"\u06a1\u06db","\ufb6c":"\u06a1\u06db","\ufb6d":"\u06a1\u06db","\ufb6b":"\u06a1\u06db","\ufb6a":"\u06a1\u06db","\u06a8":"\u06a1\u06db","\u08a4":"\u06a2\u06db","\ufb70":"\u06a6","\ufb71":"\u06a6","\ufb6f":"\u06a6","\ufb6e":"\u06a6","\ud83b\ude12":"\u0642","\ud83b\ude32":"\u0642","\ud83b\ude52":"\u0642","\ud83b\ude72":"\u0642","\ud83b\ude92":"\u0642","\ud83b\udeb2":"\u0642","\ufed7":"\u0642","\ufed8":"\u0642","\ufed6":"\u0642","\ufed5":"\u0642","\ufcc2":"\u0642\u062d","\ufc33":"\u0642\u062d","\ufdf1":"\u0642\u0644\u0649","\ufcc3":"\u0642\u0645","\ufc34":"\u0642\u0645","\ufdb4":"\u0642\u0645\u062d","\ufd7e":"\u0642\u0645\u062d","\ufd7f":"\u0642\u0645\u0645","\ufdb2":"\u0642\u0645\u0649","\ufc7e":"\u0642\u0649","\ufc35":"\u0642\u0649","\ufc7f":"\u0642\u0649","\ufc36":"\u0642\u0649","\ud83b\ude0a":"\u0643","\ud83b\ude2a":"\u0643","\ud83b\ude6a":"\u0643","\ufedb":"\u0643","\ufedc":"\u0643","\ufeda":"\u0643","\ufed9":"\u0643","\u06a9":"\u0643","\ufb90":"\u0643","\ufb91":"\u0643","\ufb8f":"\u0643","\ufb8e":"\u0643","\u06aa":"\u0643","\u06ad":"\u0643\u06db","\ufbd5":"\u0643\u06db","\ufbd6":"\u0643\u06db","\ufbd4":"\u0643\u06db","\ufbd3":"\u0643\u06db","\u0763":"\u0643\u06db","\ufc80":"\u0643l","\ufc37":"\u0643l","\ufcc4":"\u0643\u062c","\ufc38":"\u0643\u062c","\ufcc5":"\u0643\u062d","\ufc39":"\u0643\u062d","\ufcc6":"\u0643\u062e","\ufc3a":"\u0643\u062e","\ufcc7":"\u0643\u0644","\ufceb":"\u0643\u0644","\ufc81":"\u0643\u0644","\ufc3b":"\u0643\u0644","\ufcc8":"\u0643\u0645","\ufcec":"\u0643\u0645","\ufc82":"\u0643\u0645","\ufc3c":"\u0643\u0645","\ufdc3":"\u0643\u0645\u0645","\ufdbb":"\u0643\u0645\u0645","\ufdb7":"\u0643\u0645\u0649","\ufc83":"\u0643\u0649","\ufc3d":"\u0643\u0649","\ufc84":"\u0643\u0649","\ufc3e":"\u0643\u0649","\u0762":"\u06ac","\ufb94":"\u06af","\ufb95":"\u06af","\ufb93":"\u06af","\ufb92":"\u06af","\u08b0":"\u06af","\u06b4":"\u06af\u06db","\ufb9c":"\u06b1","\ufb9d":"\u06b1","\ufb9b":"\u06b1","\ufb9a":"\u06b1","\ufb98":"\u06b3","\ufb99":"\u06b3","\ufb97":"\u06b3","\ufb96":"\u06b3","\ud83b\ude0b":"\u0644","\ud83b\ude2b":"\u0644","\ud83b\ude4b":"\u0644","\ud83b\ude8b":"\u0644","\ud83b\udeab":"\u0644","\ufedf":"\u0644","\ufee0":"\u0644","\ufede":"\u0644","\ufedd":"\u0644","\u06b7":"\u0644\u06db","\u06b5":"\u0644\u0306","\ufefc":"\u0644l","\ufefb":"\u0644l","\ufefa":"\u0644l\u0655","\ufef9":"\u0644l\u0655","\ufef8":"\u0644l\u0674","\ufef7":"\u0644l\u0674","\ufccd":"\u0644o","\ufef6":"\u0644\u0622","\ufef5":"\u0644\u0622","\ufcc9":"\u0644\u062c","\ufc3f":"\u0644\u062c","\ufd83":"\u0644\u062c\u062c","\ufd84":"\u0644\u062c\u062c","\ufdba":"\u0644\u062c\u0645","\ufdbc":"\u0644\u062c\u0645","\ufdac":"\u0644\u062c\u0649","\ufcca":"\u0644\u062d","\ufc40":"\u0644\u062d","\ufdb5":"\u0644\u062d\u0645","\ufd80":"\u0644\u062d\u0645","\ufd82":"\u0644\u062d\u0649","\ufd81":"\u0644\u062d\u0649","\ufccb":"\u0644\u062e","\ufc41":"\u0644\u062e","\ufd86":"\u0644\u062e\u0645","\ufd85":"\u0644\u062e\u0645","\ufccc":"\u0644\u0645","\ufced":"\u0644\u0645","\ufc85":"\u0644\u0645","\ufc42":"\u0644\u0645","\ufd88":"\u0644\u0645\u062d","\ufd87":"\u0644\u0645\u062d","\ufdad":"\u0644\u0645\u0649","\ufc86":"\u0644\u0649","\ufc43":"\u0644\u0649","\ufc87":"\u0644\u0649","\ufc44":"\u0644\u0649","\ud83b\ude0c":"\u0645","\ud83b\ude2c":"\u0645","\ud83b\ude6c":"\u0645","\ud83b\ude8c":"\u0645","\ud83b\udeac":"\u0645","\ufee3":"\u0645","\ufee4":"\u0645","\ufee2":"\u0645","\ufee1":"\u0645","\u08a7":"\u0645\u06db","\u06fe":"\u0645\u0348","\ufc88":"\u0645l","\ufcce":"\u0645\u062c","\ufc45":"\u0645\u062c","\ufd8c":"\u0645\u062c\u062d","\ufd92":"\u0645\u062c\u062e","\ufd8d":"\u0645\u062c\u0645","\ufdc0":"\u0645\u062c\u0649","\ufccf":"\u0645\u062d","\ufc46":"\u0645\u062d","\ufd89":"\u0645\u062d\u062c","\ufd8a":"\u0645\u062d\u0645","\ufdf4":"\u0645\u062d\u0645\u062f","\ufd8b":"\u0645\u062d\u0649","\ufcd0":"\u0645\u062e","\ufc47":"\u0645\u062e","\ufd8e":"\u0645\u062e\u062c","\ufd8f":"\u0645\u062e\u0645","\ufdb9":"\u0645\u062e\u0649","\ufcd1":"\u0645\u0645","\ufc89":"\u0645\u0645","\ufc48":"\u0645\u0645","\ufdb1":"\u0645\u0645\u0649","\ufc49":"\u0645\u0649","\ufc4a":"\u0645\u0649","\ud83b\ude0d":"\u0646","\ud83b\ude2d":"\u0646","\ud83b\ude4d":"\u0646","\ud83b\ude6d":"\u0646","\ud83b\ude8d":"\u0646","\ud83b\udead":"\u0646","\ufee7":"\u0646","\ufee8":"\u0646","\ufee6":"\u0646","\ufee5":"\u0646","\u0768":"\u0646\u0615","\u0769":"\u0646\u0306","\ufcd6":"\u0646o","\ufcef":"\u0646o","\ufdb8":"\u0646\u062c\u062d","\ufdbd":"\u0646\u062c\u062d","\ufd98":"\u0646\u062c\u0645","\ufd97":"\u0646\u062c\u0645","\ufd99":"\u0646\u062c\u0649","\ufdc7":"\u0646\u062c\u0649","\ufcd3":"\u0646\u062d","\ufc4c":"\u0646\u062d","\ufd95":"\u0646\u062d\u0645","\ufd96":"\u0646\u062d\u0649","\ufdb3":"\u0646\u062d\u0649","\ufcd4":"\u0646\u062e","\ufc4d":"\u0646\u062e","\ufc8a":"\u0646\u0631","\ufc8b":"\u0646\u0632","\ufcd5":"\u0646\u0645","\ufcee":"\u0646\u0645","\ufc8c":"\u0646\u0645","\ufc4e":"\u0646\u0645","\ufd9b":"\u0646\u0645\u0649","\ufd9a":"\u0646\u0645\u0649","\ufc8d":"\u0646\u0646","\ufc8e":"\u0646\u0649","\ufc4f":"\u0646\u0649","\ufc8f":"\u0646\u0649","\ufc50":"\u0646\u0649","\u06c2":"\u06c0","\ufba5":"\u06c0","\ufba4":"\u06c0","\ud800\udee4":"\u0648","\ud83b\ude05":"\u0648","\ud83b\ude85":"\u0648","\ud83b\udea5":"\u0648","\ufeee":"\u0648","\ufeed":"\u0648","\u08b1":"\u0648","\u06cb":"\u0648\u06db","\ufbdf":"\u0648\u06db","\ufbde":"\u0648\u06db","\u06c7":"\u0648\u0313","\ufbd8":"\u0648\u0313","\ufbd7":"\u0648\u0313","\u06c6":"\u0648\u0306","\ufbda":"\u0648\u0306","\ufbd9":"\u0648\u0306","\u06c9":"\u0648\u0302","\ufbe3":"\u0648\u0302","\ufbe2":"\u0648\u0302","\u06c8":"\u0648\u0670","\ufbdc":"\u0648\u0670","\ufbdb":"\u0648\u0670","\u0624":"\u0648\u0674","\ufe86":"\u0648\u0674","\ufe85":"\u0648\u0674","\u0676":"\u0648\u0674","\u0677":"\u0648\u0313\u0674","\ufbdd":"\u0648\u0313\u0674","\ufdf8":"\u0648\u0633\u0644\u0645","\ufbe1":"\u06c5","\ufbe0":"\u06c5","\u066e":"\u0649","\ud83b\ude1c":"\u0649","\ud83b\ude7c":"\u0649","\u06ba":"\u0649","\ud83b\ude1d":"\u0649","\ud83b\ude5d":"\u0649","\ufb9f":"\u0649","\ufb9e":"\u0649","\u08bd":"\u0649","\ufbe8":"\u0649","\ufbe9":"\u0649","\ufef0":"\u0649","\ufeef":"\u0649","\u064a":"\u0649","\ud83b\ude09":"\u0649","\ud83b\ude29":"\u0649","\ud83b\ude49":"\u0649","\ud83b\ude69":"\u0649","\ud83b\ude89":"\u0649","\ud83b\udea9":"\u0649","\ufef3":"\u0649","\ufef4":"\u0649","\ufef2":"\u0649","\ufef1":"\u0649","\u06cc":"\u0649","\ufbfe":"\u0649","\ufbff":"\u0649","\ufbfd":"\u0649","\ufbfc":"\u0649","\u06d2":"\u0649","\ufbaf":"\u0649","\ufbae":"\u0649","\u0679":"\u0649\u0615","\ufb68":"\u0649\u0615","\ufb69":"\u0649\u0615","\ufb67":"\u0649\u0615","\ufb66":"\u0649\u0615","\u06bb":"\u0649\u0615","\ufba2":"\u0649\u0615","\ufba3":"\u0649\u0615","\ufba1":"\u0649\u0615","\ufba0":"\u0649\u0615","\u067e":"\u0649\u06db","\ufb58":"\u0649\u06db","\ufb59":"\u0649\u06db","\ufb57":"\u0649\u06db","\ufb56":"\u0649\u06db","\u062b":"\u0649\u06db","\ud83b\ude16":"\u0649\u06db","\ud83b\ude36":"\u0649\u06db","\ud83b\ude76":"\u0649\u06db","\ud83b\ude96":"\u0649\u06db","\ud83b\udeb6":"\u0649\u06db","\ufe9b":"\u0649\u06db","\ufe9c":"\u0649\u06db","\ufe9a":"\u0649\u06db","\ufe99":"\u0649\u06db","\u06bd":"\u0649\u06db","\u06d1":"\u0649\u06db","\u063f":"\u0649\u06db","\u08b7":"\u0649\u06db\u06e2","\u0756":"\u0649\u0306","\u06ce":"\u0649\u0306","\u08ba":"\u0649\u0306\u0307","\u063d":"\u0649\u0302","\u08a8":"\u0649\u0654","\ufc90":"\u0649\u0670","\ufc5d":"\u0649\u0670","\ufcde":"\u0649o","\ufcf1":"\u0649o","\ufce6":"\u0649\u06dbo","\u0626":"\u0649\u0674","\ufe8b":"\u0649\u0674","\ufe8c":"\u0649\u0674","\ufe8a":"\u0649\u0674","\ufe89":"\u0649\u0674","\u0678":"\u0649\u0674","\ufbeb":"\u0649\u0674l","\ufbea":"\u0649\u0674l","\ufc9b":"\u0649\u0674o","\ufce0":"\u0649\u0674o","\ufbed":"\u0649\u0674o","\ufbec":"\u0649\u0674o","\ufbf8":"\u0649\u0674\u067b","\ufbf7":"\u0649\u0674\u067b","\ufbf6":"\u0649\u0674\u067b","\ufc97":"\u0649\u0674\u062c","\ufc00":"\u0649\u0674\u062c","\ufc98":"\u0649\u0674\u062d","\ufc01":"\u0649\u0674\u062d","\ufc99":"\u0649\u0674\u062e","\ufc64":"\u0649\u0674\u0631","\ufc65":"\u0649\u0674\u0632","\ufc9a":"\u0649\u0674\u0645","\ufcdf":"\u0649\u0674\u0645","\ufc66":"\u0649\u0674\u0645","\ufc02":"\u0649\u0674\u0645","\ufc67":"\u0649\u0674\u0646","\ufbef":"\u0649\u0674\u0648","\ufbee":"\u0649\u0674\u0648","\ufbf1":"\u0649\u0674\u0648\u0313","\ufbf0":"\u0649\u0674\u0648\u0313","\ufbf3":"\u0649\u0674\u0648\u0306","\ufbf2":"\u0649\u0674\u0648\u0306","\ufbf5":"\u0649\u0674\u0648\u0670","\ufbf4":"\u0649\u0674\u0648\u0670","\ufbfb":"\u0649\u0674\u0649","\ufbfa":"\u0649\u0674\u0649","\ufc68":"\u0649\u0674\u0649","\ufbf9":"\u0649\u0674\u0649","\ufc03":"\u0649\u0674\u0649","\ufc69":"\u0649\u0674\u0649","\ufc04":"\u0649\u0674\u0649","\ufcda":"\u0649\u062c","\ufc55":"\u0649\u062c","\ufc11":"\u0649\u06db\u062c","\ufdaf":"\u0649\u062c\u0649","\ufcdb":"\u0649\u062d","\ufc56":"\u0649\u062d","\ufdae":"\u0649\u062d\u0649","\ufcdc":"\u0649\u062e","\ufc57":"\u0649\u062e","\ufc91":"\u0649\u0631","\ufc76":"\u0649\u06db\u0631","\ufc92":"\u0649\u0632","\ufc77":"\u0649\u06db\u0632","\ufcdd":"\u0649\u0645","\ufcf0":"\u0649\u0645","\ufc93":"\u0649\u0645","\ufc58":"\u0649\u0645","\ufca6":"\u0649\u06db\u0645","\ufce5":"\u0649\u06db\u0645","\ufc78":"\u0649\u06db\u0645","\ufc12":"\u0649\u06db\u0645","\ufd9d":"\u0649\u0645\u0645","\ufd9c":"\u0649\u0645\u0645","\ufdb0":"\u0649\u0645\u0649","\ufc94":"\u0649\u0646","\ufc79":"\u0649\u06db\u0646","\ufc95":"\u0649\u0649","\ufc59":"\u0649\u0649","\ufc96":"\u0649\u0649","\ufc5a":"\u0649\u0649","\ufc7a":"\u0649\u06db\u0649","\ufc13":"\u0649\u06db\u0649","\ufc7b":"\u0649\u06db\u0649","\ufc14":"\u0649\u06db\u0649","\ufbb1":"\u06d3","\ufbb0":"\u06d3","\ud800\udeb8":"\u2d40","\u205e":"\u2d42","\u2e3d":"\u2d42","\u2999":"\u2d42","\ufe19":"\u2d57","\u205d":"\u2d57","\u22ee":"\u2d57","\u0544":"\u1206","\u054c":"\u1261","\u053b":"\u12ae","\u054a":"\u1323","\u0906":"\u0905\u093e","\u0912":"\u0905\u093e\u0946","\u0913":"\u0905\u093e\u0947","\u0914":"\u0905\u093e\u0948","\u0904":"\u0905\u0946","\u0911":"\u0905\u0949","\u090d":"\u090f\u0945","\u090e":"\u090f\u0946","\u0910":"\u090f\u0947","\u0908":"\u0930\u094d\u0907","\u0abd":"\u093d","\ud804\udddc":"\ua8fb","\ud804\uddcb":"\u093a","\u0ac1":"\u0941","\u0ac2":"\u0942","\u0a4b":"\u0946","\u0a4d":"\u094d","\u0acd":"\u094d","\u0986":"\u0985\u09be","\u09e0":"\u098b\u09c3","\u09e1":"\u098b\u09c3","\ud805\udc92":"\u0998","\ud805\udc94":"\u099a","\ud805\udc96":"\u099c","\ud805\udc98":"\u099e","\ud805\udc99":"\u099f","\ud805\udc9b":"\u09a1","\ud805\udcaa":"\u09a3","\ud805\udc9e":"\u09a4","\ud805\udc9f":"\u09a5","\ud805\udca0":"\u09a6","\ud805\udca1":"\u09a7","\ud805\udca2":"\u09a8","\ud805\udca3":"\u09aa","\ud805\udca9":"\u09ac","\ud805\udca7":"\u09ae","\ud805\udca8":"\u09af","\ud805\udcab":"\u09b0","\ud805\udc9d":"\u09b2","\ud805\udcad":"\u09b7","\ud805\udcae":"\u09b8","\ud805\udcc4":"\u09bd","\ud805\udcb0":"\u09be","\ud805\udcb1":"\u09bf","\ud805\udcb9":"\u09c7","\ud805\udcbc":"\u09cb","\ud805\udcbe":"\u09cc","\ud805\udcc2":"\u09cd","\ud805\udcbd":"\u09d7","\u0a09":"\u0a73\u0a41","\u0a0a":"\u0a73\u0a42","\u0a06":"\u0a05\u0a3e","\u0a10":"\u0a05\u0a48","\u0a14":"\u0a05\u0a4c","\u0a07":"\u0a72\u0a3f","\u0a08":"\u0a72\u0a40","\u0a0f":"\u0a72\u0a47","\u0a86":"\u0a85\u0abe","\u0a91":"\u0a85\u0abe\u0ac5","\u0a93":"\u0a85\u0abe\u0ac7","\u0a94":"\u0a85\u0abe\u0ac8","\u0a8d":"\u0a85\u0ac5","\u0a8f":"\u0a85\u0ac7","\u0a90":"\u0a85\u0ac8","\u0b06":"\u0b05\u0b3e","\u0bee":"\u0b85","\u0bb0":"\u0b88","\u0bbe":"\u0b88","\u0beb":"\u0b88\u0bc1","\u0be8":"\u0b89","\u0d09":"\u0b89","\u0b8a":"\u0b89\u0bb3","\u0d0a":"\u0b89\u0d57","\u0bed":"\u0b8e","\u0bf7":"\u0b8e\u0bb5","\u0b9c":"\u0b90","\u0d1c":"\u0b90","\u0be7":"\u0b95","\u0bea":"\u0b9a","\u0bec":"\u0b9a\u0bc1","\u0bf2":"\u0b9a\u0bc2","\u0d3a":"\u0b9f\u0bbf","\u0d23":"\u0ba3","\u0bfa":"\u0ba8\u0bc0","\u0bf4":"\u0bae\u0bc0","\u0bf0":"\u0baf","\u0d34":"\u0bb4","\u0bd7":"\u0bb3","\u0bc8":"\u0ba9","\u0d36":"\u0bb6","\u0bf8":"\u0bb7","\u0d3f":"\u0bbf","\u0d40":"\u0bbf","\u0bca":"\u0bc6\u0b88","\u0bcc":"\u0bc6\u0bb3","\u0bcb":"\u0bc7\u0b88","\u0c85":"\u0c05","\u0c86":"\u0c06","\u0c87":"\u0c07","\u0c60":"\u0c0b\u0c3e","\u0c61":"\u0c0c\u0c3e","\u0c92":"\u0c12","\u0c14":"\u0c12\u0c4c","\u0c94":"\u0c12\u0c4c","\u0c13":"\u0c12\u0c55","\u0c93":"\u0c12\u0c55","\u0c9c":"\u0c1c","\u0c9e":"\u0c1e","\u0c22":"\u0c21\u0323","\u0ca3":"\u0c23","\u0c25":"\u0c27\u05bc","\u0c2d":"\u0c2c\u0323","\u0caf":"\u0c2f","\u0c20":"\u0c30\u05bc","\u0cb1":"\u0c31","\u0cb2":"\u0c32","\u0c37":"\u0c35\u0323","\u0c39":"\u0c35\u0c3e","\u0c2e":"\u0c35\u0c41","\u0c42":"\u0c41\u0c3e","\u0c44":"\u0c43\u0c3e","\u0ce1":"\u0c8c\u0cbe","\u0d08":"\u0d07\u0d57","\u0d10":"\u0d0e\u0d46","\u0d13":"\u0d12\u0d3e","\u0d14":"\u0d12\u0d57","\u0d61":"\u0d1e","\u0d6b":"\u0d26\u0d4d\u0d30","\u0d79":"\u0d28\u0d41","\u0d0c":"\u0d28\u0d41","\u0d19":"\u0d28\u0d41","\u0d6f":"\u0d28\u0d4d","\u0d7b":"\u0d28\u0d4d","\u0d6c":"\u0d28\u0d4d\u0d28","\u0d5a":"\u0d28\u0d4d\u0d2e","\u0d31":"\u0d30","\u0d6a":"\u0d30\u0d4d","\u0d7c":"\u0d30\u0d4d","\u0d6e":"\u0d35\u0d4d\u0d30","\u0d76":"\u0d39\u0d4d\u0d2e","\u0d42":"\u0d41","\u0d43":"\u0d41","\u0d48":"\u0d46\u0d46","\u0dea":"\u0da2","\u0deb":"\u0daf","\ud805\udc13":"\ud805\udc34\ud805\udc42\ud805\udc12","\ud805\udc19":"\ud805\udc34\ud805\udc42\ud805\udc18","\ud805\udc24":"\ud805\udc34\ud805\udc42\ud805\udc23","\ud805\udc2a":"\ud805\udc34\ud805\udc42\ud805\udc29","\ud805\udc2d":"\ud805\udc34\ud805\udc42\ud805\udc2c","\ud805\udc2f":"\ud805\udc34\ud805\udc42\ud805\udc2e","\ud805\uddd8":"\ud805\udd82","\ud805\uddd9":"\ud805\udd82","\ud805\uddda":"\ud805\udd83","\ud805\udddb":"\ud805\udd84","\ud805\udddc":"\ud805\uddb2","\ud805\udddd":"\ud805\uddb3","\u0e03":"\u0e02","\u0e14":"\u0e04","\u0e15":"\u0e04","\u0e21":"\u0e06","\u0e88":"\u0e08","\u0e0b":"\u0e0a","\u0e0f":"\u0e0e","\u0e17":"\u0e11","\u0e9a":"\u0e1a","\u0e9b":"\u0e1b","\u0e9d":"\u0e1d","\u0e9e":"\u0e1e","\u0e9f":"\u0e1f","\u0e26":"\u0e20","\u0e8d":"\u0e22","\u17d4":"\u0e2f","\u0e45":"\u0e32","\u0e33":"\u030a\u0e32","\u17b7":"\u0e34","\u17b8":"\u0e35","\u17b9":"\u0e36","\u17ba":"\u0e37","\u0eb8":"\u0e38","\u0eb9":"\u0e39","\u0e41":"\u0e40\u0e40","\u0edc":"\u0eab\u0e99","\u0edd":"\u0eab\u0ea1","\u0eb3":"\u030a\u0eb2","\u0f02":"\u0f60\u0f74\u0f82\u0f7f","\u0f03":"\u0f60\u0f74\u0f82\u0f14","\u0f6a":"\u0f62","\u0f00":"\u0f68\u0f7c\u0f7e","\u0f77":"\u0fb2\u0f71\u0f80","\u0f79":"\u0fb3\u0f71\u0f80","\ud807\udcb2":"\ud807\udcaa","\u1081":"\u1002\u103e","\u1000":"\u1002\u102c","\u1070":"\u1003\u103e","\u1066":"\u1015\u103e","\u101f":"\u1015\u102c","\u106f":"\u1015\u102c\u103e","\u107e":"\u107d\u103e","\u1029":"\u101e\u103c","\u102a":"\u101e\u103c\u1031\u102c\u103a","\u109e":"\u1083\u030a","\u17a3":"\u17a2","\u19d0":"\u199e","\u19d1":"\u19b1","\u1a80":"\u1a45","\u1a90":"\u1a45","\uaa53":"\uaa01","\uaa56":"\uaa23","\u1b52":"\u1b0d","\u1b53":"\u1b11","\u1b58":"\u1b28","\ua9a3":"\ua99d","\u1896":"\u185c","\u1855":"\u1835","\u1ff6":"\u13ef","\u140d":"\u1401\xb7","\u142b":"\u1401\u1420","\u1411":"\u1404\xb7","\u1413":"\u1405\xb7","\u142d":"\u1405\u1420","\u1415":"\u1406\xb7","\u1418":"\u140a\xb7","\u142e":"\u140a\u1420","\u141a":"\u140b\xb7","\u18dd":"\u141e\u18df","\u14d1":"\u1421","\u1540":"\u1429","\u143f":"\u1432\xb7","\u1443":"\u1434\xb7","\u2369":"\u1435","\u1447":"\u1439\xb7","\u145c":"\u144f\xb7","\u2e27":"\u1450","\u2283":"\u1450","\u145e":"\u1450\xb7","\u1469":"\u1450\'","\u27c9":"\u1450/","\u2ad7":"\u1450\u1455","\u1460":"\u1451\xb7","\u2e26":"\u1455","\u2282":"\u1455","\u1462":"\u1455\xb7","\u146a":"\u1455\'","\u1464":"\u1456\xb7","\u1475":"\u146b\xb7","\u1485":"\u146b\'","\u1479":"\u146e\xb7","\u147d":"\u1470\xb7","\u1603":"\u1489","\u1493":"\u1489\xb7","\u1495":"\u148b\xb7","\u1497":"\u148c\xb7","\u149b":"\u148e\xb7","\u1602":"\u1490","\u149d":"\u1490\xb7","\u149f":"\u1491\xb7","\u14ad":"\u14a3\xb7","\u14b1":"\u14a6\xb7","\u14b3":"\u14a7\xb7","\u14b5":"\u14a8\xb7","\u14b9":"\u14ab\xb7","\u14ca":"\u14c0\xb7","\u18c7":"\u14c2\xb7","\u18c9":"\u14c3\xb7","\u18cb":"\u14c4\xb7","\u18cd":"\u14c5\xb7","\u14cc":"\u14c7\xb7","\u14ce":"\u14c8\xb7","\u1604":"\u14d3","\u14dd":"\u14d3\xb7","\u14df":"\u14d5\xb7","\u14e1":"\u14d6\xb7","\u14e3":"\u14d7\xb7","\u14e5":"\u14d8\xb7","\u1607":"\u14da","\u14e7":"\u14da\xb7","\u14e9":"\u14db\xb7","\u14f7":"\u14ed\xb7","\u14f9":"\u14ef\xb7","\u14fb":"\u14f0\xb7","\u14fd":"\u14f1\xb7","\u14ff":"\u14f2\xb7","\u1501":"\u14f4\xb7","\u1503":"\u14f5\xb7","\u150c":"\u150b<","\u150e":"\u150bb","\u150d":"\u150b\u1455","\u150f":"\u150b\u1490","\u1518":"\u1510\xb7","\u151a":"\u1511\xb7","\u151c":"\u1512\xb7","\u151e":"\u1513\xb7","\u1520":"\u1514\xb7","\u1522":"\u1515\xb7","\u1524":"\u1516\xb7","\u1532":"\u1528\xb7","\u1534":"\u1529\xb7","\u1536":"\u152a\xb7","\u1538":"\u152b\xb7","\u153a":"\u152d\xb7","\u153c":"\u152e\xb7","\u1622":"\u1543","\u18e0":"\u1543\xb7","\u1623":"\u1546","\u1624":"\u154a","\u154f":"\u154c\xb7","\u1583":"\u1550b","\u1584":"\u1550b\u0307","\u1581":"\u1550d","\u157f":"\u1550P","\u166f":"\u1550\u146b","\u157e":"\u1550\u146c","\u1580":"\u1550\u146e","\u1582":"\u1550\u1470","\u1585":"\u1550\u1483","\u155c":"\u155a\xb7","\u18e3":"\u155e\xb7","\u18e4":"\u1566\xb7","\u1569":"\u1567\xb7","\u18e5":"\u156b\xb7","\u18e8":"\u1586\xb7","\u1591":"\u1595J","\u1670":"\u1595\u1489","\u158e":"\u1595\u148a","\u158f":"\u1595\u148b","\u1590":"\u1595\u148c","\u1592":"\u1595\u148e","\u1593":"\u1595\u1490","\u1594":"\u1595\u1491","\u1673":"\u1596J","\u1671":"\u1596\u148b","\u1672":"\u1596\u148c","\u1674":"\u1596\u148e","\u1675":"\u1596\u1490","\u1676":"\u1596\u1491","\u18ea":"\u1597\xb7","\u1677":"\u15a7\xb7","\u1678":"\u15a8\xb7","\u1679":"\u15a9\xb7","\u167a":"\u15aa\xb7","\u167b":"\u15ab\xb7","\u167c":"\u15ac\xb7","\u167d":"\u15ad\xb7","\u2aab":"\u15d2","\u2aaa":"\u15d5","\ua4f7":"\u15e1","\u18f0":"\u15f4\xb7","\u18f2":"\u161b\xb7","\u1dbb":"\u1646","\ua4ed":"\u1660","\u1dba":"\u18d4","\u1d3e":"\u18d6","\u18dc":"\u18df\u141e","\u02e1":"\u18f3","\u02b3":"\u18f4","\u02e2":"\u18f5","\u18db":"\u18f5","\ua6b0":"\u16b9","\u16e1":"\u16bc","\u237f":"\u16bd","\u16c2":"\u16bd","\ud834\ude3f":"\u16cb","\u2191":"\u16cf","\u21bf":"\u16d0","\u296e":"\u16d0\u21c2","\u2963":"\u16d0\u16da","\u2d63":"\u16ef","\u21be":"\u16da","\u2a21":"\u16da","\u22c4":"\u16dc","\u25c7":"\u16dc","\u25ca":"\u16dc","\u2662":"\u16dc","\ud83d\udf54":"\u16dc","\ud806\udcb7":"\u16dc","\ud800\ude94":"\u16dc","\u235a":"\u16dc\u0332","\u22c8":"\u16de","\u2a1d":"\u16de","\ud801\udcd0":"\u16e6","\u2195":"\u16e8","\ud803\udcfc":"\ud803\udc82","\ud803\udcfa":"\ud803\udca5","\u3131":"\u1100","\u11a8":"\u1100","\u1101":"\u1100\u1100","\u3132":"\u1100\u1100","\u11a9":"\u1100\u1100","\u11fa":"\u1100\u1102","\u115a":"\u1100\u1103","\u11c3":"\u1100\u1105","\u11fb":"\u1100\u1107","\u11aa":"\u1100\u1109","\u3133":"\u1100\u1109","\u11c4":"\u1100\u1109\u1100","\u11fc":"\u1100\u110e","\u11fd":"\u1100\u110f","\u11fe":"\u1100\u1112","\u3134":"\u1102","\u11ab":"\u1102","\u1113":"\u1102\u1100","\u11c5":"\u1102\u1100","\u1114":"\u1102\u1102","\u3165":"\u1102\u1102","\u11ff":"\u1102\u1102","\u1115":"\u1102\u1103","\u3166":"\u1102\u1103","\u11c6":"\u1102\u1103","\ud7cb":"\u1102\u1105","\u1116":"\u1102\u1107","\u115b":"\u1102\u1109","\u11c7":"\u1102\u1109","\u3167":"\u1102\u1109","\u115c":"\u1102\u110c","\u11ac":"\u1102\u110c","\u3135":"\u1102\u110c","\ud7cc":"\u1102\u110e","\u11c9":"\u1102\u1110","\u115d":"\u1102\u1112","\u11ad":"\u1102\u1112","\u3136":"\u1102\u1112","\u11c8":"\u1102\u1140","\u3168":"\u1102\u1140","\u3137":"\u1103","\u11ae":"\u1103","\u1117":"\u1103\u1100","\u11ca":"\u1103\u1100","\u1104":"\u1103\u1103","\u3138":"\u1103\u1103","\ud7cd":"\u1103\u1103","\ud7ce":"\u1103\u1103\u1107","\u115e":"\u1103\u1105","\u11cb":"\u1103\u1105","\ua960":"\u1103\u1106","\ua961":"\u1103\u1107","\ud7cf":"\u1103\u1107","\ua962":"\u1103\u1109","\ud7d0":"\u1103\u1109","\ud7d1":"\u1103\u1109\u1100","\ua963":"\u1103\u110c","\ud7d2":"\u1103\u110c","\ud7d3":"\u1103\u110e","\ud7d4":"\u1103\u1110","\u3139":"\u1105","\u11af":"\u1105","\ua964":"\u1105\u1100","\u11b0":"\u1105\u1100","\u313a":"\u1105\u1100","\ua965":"\u1105\u1100\u1100","\ud7d5":"\u1105\u1100\u1100","\u11cc":"\u1105\u1100\u1109","\u3169":"\u1105\u1100\u1109","\ud7d6":"\u1105\u1100\u1112","\u1118":"\u1105\u1102","\u11cd":"\u1105\u1102","\ua966":"\u1105\u1103","\u11ce":"\u1105\u1103","\u316a":"\u1105\u1103","\ua967":"\u1105\u1103\u1103","\u11cf":"\u1105\u1103\u1112","\u1119":"\u1105\u1105","\u11d0":"\u1105\u1105","\ud7d7":"\u1105\u1105\u110f","\ua968":"\u1105\u1106","\u11b1":"\u1105\u1106","\u313b":"\u1105\u1106","\u11d1":"\u1105\u1106\u1100","\u11d2":"\u1105\u1106\u1109","\ud7d8":"\u1105\u1106\u1112","\ua969":"\u1105\u1107","\u11b2":"\u1105\u1107","\u313c":"\u1105\u1107","\ud7d9":"\u1105\u1107\u1103","\ua96a":"\u1105\u1107\u1107","\u11d3":"\u1105\u1107\u1109","\u316b":"\u1105\u1107\u1109","\ua96b":"\u1105\u1107\u110b","\u11d5":"\u1105\u1107\u110b","\ud7da":"\u1105\u1107\u1111","\u11d4":"\u1105\u1107\u1112","\ua96c":"\u1105\u1109","\u11b3":"\u1105\u1109","\u313d":"\u1105\u1109","\u11d6":"\u1105\u1109\u1109","\u111b":"\u1105\u110b","\ud7dd":"\u1105\u110b","\ua96d":"\u1105\u110c","\ua96e":"\u1105\u110f","\u11d8":"\u1105\u110f","\u11b4":"\u1105\u1110","\u313e":"\u1105\u1110","\u11b5":"\u1105\u1111","\u313f":"\u1105\u1111","\u111a":"\u1105\u1112","\u3140":"\u1105\u1112","\u113b":"\u1105\u1112","\u11b6":"\u1105\u1112","\ud7f2":"\u1105\u1112","\u11d7":"\u1105\u1140","\u316c":"\u1105\u1140","\ud7db":"\u1105\u114c","\u11d9":"\u1105\u1159","\u316d":"\u1105\u1159","\ud7dc":"\u1105\u1159\u1112","\u3141":"\u1106","\u11b7":"\u1106","\ua96f":"\u1106\u1100","\u11da":"\u1106\u1100","\ud7de":"\u1106\u1102","\ud7df":"\u1106\u1102\u1102","\ua970":"\u1106\u1103","\u11db":"\u1106\u1105","\ud7e0":"\u1106\u1106","\u111c":"\u1106\u1107","\u316e":"\u1106\u1107","\u11dc":"\u1106\u1107","\ud7e1":"\u1106\u1107\u1109","\ua971":"\u1106\u1109","\u11dd":"\u1106\u1109","\u316f":"\u1106\u1109","\u11de":"\u1106\u1109\u1109","\u111d":"\u1106\u110b","\u3171":"\u1106\u110b","\u11e2":"\u1106\u110b","\ud7e2":"\u1106\u110c","\u11e0":"\u1106\u110e","\u11e1":"\u1106\u1112","\u11df":"\u1106\u1140","\u3170":"\u1106\u1140","\u3142":"\u1107","\u11b8":"\u1107","\u111e":"\u1107\u1100","\u3172":"\u1107\u1100","\u111f":"\u1107\u1102","\u1120":"\u1107\u1103","\u3173":"\u1107\u1103","\ud7e3":"\u1107\u1103","\u11e3":"\u1107\u1105","\ud7e4":"\u1107\u1105\u1111","\ud7e5":"\u1107\u1106","\u1108":"\u1107\u1107","\u3143":"\u1107\u1107","\ud7e6":"\u1107\u1107","\u112c":"\u1107\u1107\u110b","\u3179":"\u1107\u1107\u110b","\u1121":"\u1107\u1109","\u3144":"\u1107\u1109","\u11b9":"\u1107\u1109","\u1122":"\u1107\u1109\u1100","\u3174":"\u1107\u1109\u1100","\u1123":"\u1107\u1109\u1103","\u3175":"\u1107\u1109\u1103","\ud7e7":"\u1107\u1109\u1103","\u1124":"\u1107\u1109\u1107","\u1125":"\u1107\u1109\u1109","\u1126":"\u1107\u1109\u110c","\ua972":"\u1107\u1109\u1110","\u112b":"\u1107\u110b","\u3178":"\u1107\u110b","\u11e6":"\u1107\u110b","\u1127":"\u1107\u110c","\u3176":"\u1107\u110c","\ud7e8":"\u1107\u110c","\u1128":"\u1107\u110e","\ud7e9":"\u1107\u110e","\ua973":"\u1107\u110f","\u1129":"\u1107\u1110","\u3177":"\u1107\u1110","\u112a":"\u1107\u1111","\u11e4":"\u1107\u1111","\ua974":"\u1107\u1112","\u11e5":"\u1107\u1112","\u3145":"\u1109","\u11ba":"\u1109","\u112d":"\u1109\u1100","\u317a":"\u1109\u1100","\u11e7":"\u1109\u1100","\u112e":"\u1109\u1102","\u317b":"\u1109\u1102","\u112f":"\u1109\u1103","\u317c":"\u1109\u1103","\u11e8":"\u1109\u1103","\u1130":"\u1109\u1105","\u11e9":"\u1109\u1105","\u1131":"\u1109\u1106","\ud7ea":"\u1109\u1106","\u1132":"\u1109\u1107","\u317d":"\u1109\u1107","\u11ea":"\u1109\u1107","\u1133":"\u1109\u1107\u1100","\ud7eb":"\u1109\u1107\u110b","\u110a":"\u1109\u1109","\u3146":"\u1109\u1109","\u11bb":"\u1109\u1109","\ud7ec":"\u1109\u1109\u1100","\ud7ed":"\u1109\u1109\u1103","\ua975":"\u1109\u1109\u1107","\u1134":"\u1109\u1109\u1109","\u1135":"\u1109\u110b","\u1136":"\u1109\u110c","\u317e":"\u1109\u110c","\ud7ef":"\u1109\u110c","\u1137":"\u1109\u110e","\ud7f0":"\u1109\u110e","\u1138":"\u1109\u110f","\u1139":"\u1109\u1110","\ud7f1":"\u1109\u1110","\u113a":"\u1109\u1111","\ud7ee":"\u1109\u1140","\u3147":"\u110b","\u11bc":"\u110b","\u1141":"\u110b\u1100","\u11ec":"\u110b\u1100","\u11ed":"\u110b\u1100\u1100","\u1142":"\u110b\u1103","\ua976":"\u110b\u1105","\u1143":"\u110b\u1106","\u1144":"\u110b\u1107","\u1145":"\u110b\u1109","\u11f1":"\u110b\u1109","\u3182":"\u110b\u1109","\u1147":"\u110b\u110b","\u3180":"\u110b\u110b","\u11ee":"\u110b\u110b","\u1148":"\u110b\u110c","\u1149":"\u110b\u110e","\u11ef":"\u110b\u110f","\u114a":"\u110b\u1110","\u114b":"\u110b\u1111","\ua977":"\u110b\u1112","\u1146":"\u110b\u1140","\u11f2":"\u110b\u1140","\u3183":"\u110b\u1140","\u3148":"\u110c","\u11bd":"\u110c","\ud7f7":"\u110c\u1107","\ud7f8":"\u110c\u1107\u1107","\u114d":"\u110c\u110b","\u110d":"\u110c\u110c","\u3149":"\u110c\u110c","\ud7f9":"\u110c\u110c","\ua978":"\u110c\u110c\u1112","\u314a":"\u110e","\u11be":"\u110e","\u1152":"\u110e\u110f","\u1153":"\u110e\u1112","\u314b":"\u110f","\u11bf":"\u110f","\u314c":"\u1110","\u11c0":"\u1110","\ua979":"\u1110\u1110","\u314d":"\u1111","\u11c1":"\u1111","\u1156":"\u1111\u1107","\u11f3":"\u1111\u1107","\ud7fa":"\u1111\u1109","\u1157":"\u1111\u110b","\u3184":"\u1111\u110b","\u11f4":"\u1111\u110b","\ud7fb":"\u1111\u1110","\ua97a":"\u1111\u1112","\u314e":"\u1112","\u11c2":"\u1112","\u11f5":"\u1112\u1102","\u11f6":"\u1112\u1105","\u11f7":"\u1112\u1106","\u11f8":"\u1112\u1107","\ua97b":"\u1112\u1109","\u1158":"\u1112\u1112","\u3185":"\u1112\u1112","\u113d":"\u113c\u113c","\u113f":"\u113e\u113e","\u317f":"\u1140","\u11eb":"\u1140","\ud7f3":"\u1140\u1107","\ud7f4":"\u1140\u1107\u110b","\u3181":"\u114c","\u11f0":"\u114c","\ud7f5":"\u114c\u1106","\ud7f6":"\u114c\u1112","\u114f":"\u114e\u114e","\u1151":"\u1150\u1150","\u3186":"\u1159","\u11f9":"\u1159","\ua97c":"\u1159\u1159","\u3164":"\u1160","\u314f":"\u1161","\u11a3":"\u1161\u30fc","\u1176":"\u1161\u1169","\u1177":"\u1161\u116e","\u1162":"\u1161\u4e28","\u3150":"\u1161\u4e28","\u3151":"\u1163","\u1178":"\u1163\u1169","\u1179":"\u1163\u116d","\u11a4":"\u1163\u116e","\u1164":"\u1163\u4e28","\u3152":"\u1163\u4e28","\u3153":"\u1165","\u117c":"\u1165\u30fc","\u117a":"\u1165\u1169","\u117b":"\u1165\u116e","\u1166":"\u1165\u4e28","\u3154":"\u1165\u4e28","\u3155":"\u1167","\u11a5":"\u1167\u1163","\u117d":"\u1167\u1169","\u117e":"\u1167\u116e","\u1168":"\u1167\u4e28","\u3156":"\u1167\u4e28","\u3157":"\u1169","\u116a":"\u1169\u1161","\u3158":"\u1169\u1161","\u116b":"\u1169\u1161\u4e28","\u3159":"\u1169\u1161\u4e28","\u11a6":"\u1169\u1163","\u11a7":"\u1169\u1163\u4e28","\u117f":"\u1169\u1165","\u1180":"\u1169\u1165\u4e28","\ud7b0":"\u1169\u1167","\u1181":"\u1169\u1167\u4e28","\u1182":"\u1169\u1169","\ud7b1":"\u1169\u1169\u4e28","\u1183":"\u1169\u116e","\u116c":"\u1169\u4e28","\u315a":"\u1169\u4e28","\u315b":"\u116d","\ud7b2":"\u116d\u1161","\ud7b3":"\u116d\u1161\u4e28","\u1184":"\u116d\u1163","\u3187":"\u116d\u1163","\u1186":"\u116d\u1163","\u1185":"\u116d\u1163\u4e28","\u3188":"\u116d\u1163\u4e28","\ud7b4":"\u116d\u1165","\u1187":"\u116d\u1169","\u1188":"\u116d\u4e28","\u3189":"\u116d\u4e28","\u315c":"\u116e","\u1189":"\u116e\u1161","\u118a":"\u116e\u1161\u4e28","\u116f":"\u116e\u1165","\u315d":"\u116e\u1165","\u118b":"\u116e\u1165\u30fc","\u1170":"\u116e\u1165\u4e28","\u315e":"\u116e\u1165\u4e28","\ud7b5":"\u116e\u1167","\u118c":"\u116e\u1167\u4e28","\u118d":"\u116e\u116e","\u1171":"\u116e\u4e28","\u315f":"\u116e\u4e28","\ud7b6":"\u116e\u4e28\u4e28","\u3160":"\u1172","\u118e":"\u1172\u1161","\ud7b7":"\u1172\u1161\u4e28","\u118f":"\u1172\u1165","\u1190":"\u1172\u1165\u4e28","\u1191":"\u1172\u1167","\u318a":"\u1172\u1167","\u1192":"\u1172\u1167\u4e28","\u318b":"\u1172\u1167\u4e28","\ud7b8":"\u1172\u1169","\u1193":"\u1172\u116e","\u1194":"\u1172\u4e28","\u318c":"\u1172\u4e28","\u318d":"\u119e","\ud7c5":"\u119e\u1161","\u119f":"\u119e\u1165","\ud7c6":"\u119e\u1165\u4e28","\u11a0":"\u119e\u116e","\u11a2":"\u119e\u119e","\u11a1":"\u119e\u4e28","\u318e":"\u119e\u4e28","\u30d8":"\u3078","\u2341":"\u303c","\u29c4":"\u303c","\ua49e":"\ua04a","\ua4ac":"\ua050","\ua49c":"\ua0c0","\ua4a8":"\ua132","\ua4bf":"\ua259","\ua4be":"\ua2b1","\ua494":"\ua2cd","\ua4c0":"\ua3ab","\ua4c2":"\ua3b5","\ua4ba":"\ua3bf","\ua4b0":"\ua3c2","\ua4a7":"\ua458","\u22a5":"\ua4d5","\u27c2":"\ua4d5","\ud834\ude1c":"\ua4d5","\ua7b1":"\ua4d5","\ua79e":"\ua4e4","\u2141":"\ua4e8","\u2142":"\ua4f6","\ud834\ude15":"\ua4f6","\ud834\ude2b":"\ua4f6","\ud81b\udf26":"\ua4f6","\ud801\udc11":"\ua4f6","\u2143":"\ud81b\udf00","\ud806\udee6":"\ud806\udee5\ud806\udeef","\ud806\udee8":"\ud806\udee5\ud806\udee5","\ud806\udee9":"\ud806\udee5\ud806\udee5\ud806\udeef","\ud806\udeea":"\ud806\udee5\ud806\udee5\ud806\udef0","\ud806\udee7":"\ud806\udee5\ud806\udef0","\ud806\udef4":"\ud806\udef3\ud806\udeef","\ud806\udef6":"\ud806\udef3\ud806\udef3","\ud806\udef7":"\ud806\udef3\ud806\udef3\ud806\udeef","\ud806\udef8":"\ud806\udef3\ud806\udef3\ud806\udef0","\ud806\udef5":"\ud806\udef3\ud806\udef0","\ud806\udeec":"\ud806\udeeb\ud806\udeef","\ud806\udeed":"\ud806\udeeb\ud806\udeeb","\ud806\udeee":"\ud806\udeeb\ud806\udeeb\ud806\udeef","\u2295":"\ud800\udea8","\u2a01":"\ud800\udea8","\ud83d\udf28":"\ud800\udea8","\ua69a":"\ud800\udea8","\u25bd":"\ud800\udebc","\ud834\ude14":"\ud800\udebc","\ud83d\udf04":"\ud800\udebc","\u29d6":"\ud800\udec0","\ua79b":"\ud801\udc3a","\ua79a":"\ud801\udc12","\ud801\udca0":"\ud801\udc86","\ud800\udfd1":"\ud800\udf82","\ud800\udfd3":"\ud800\udf93","\ud808\udc38":"\ud800\udf9a","\u2625":"\ud802\udd9e","\ud80c\udef9":"\ud802\udd9e","\u3039":"\u5344","\uf967":"\u4e0d","\ud87e\udc00":"\u4e3d","\ufa70":"\u4e26","\u239c":"\u4e28","\u239f":"\u4e28","\u23a2":"\u4e28","\u23a5":"\u4e28","\u23aa":"\u4e28","\u23ae":"\u4e28","\u31d1":"\u4e28","\u1175":"\u4e28","\u3163":"\u4e28","\u2f01":"\u4e28","\u119c":"\u4e28\u30fc","\u1198":"\u4e28\u1161","\u1199":"\u4e28\u1163","\ud7bd":"\u4e28\u1163\u1169","\ud7be":"\u4e28\u1163\u4e28","\ud7bf":"\u4e28\u1167","\ud7c0":"\u4e28\u1167\u4e28","\u119a":"\u4e28\u1169","\ud7c1":"\u4e28\u1169\u4e28","\ud7c2":"\u4e28\u116d","\u119b":"\u4e28\u116e","\ud7c3":"\u4e28\u1172","\u119d":"\u4e28\u119e","\ud7c4":"\u4e28\u4e28","\uf905":"\u4e32","\ud87e\udc01":"\u4e38","\uf95e":"\u4e39","\ud87e\udc02":"\u4e41","\u31e0":"\u4e59","\u2f04":"\u4e59","\u31df":"\u4e5a","\u2e83":"\u4e5a","\u31d6":"\u4e5b","\u2e82":"\u4e5b","\u2ef2":"\u4e80","\uf91b":"\u4e82","\u31da":"\u4e85","\u2f05":"\u4e85","\uf9ba":"\u4e86","\u30cb":"\u4e8c","\u2f06":"\u4e8c","\ud87e\udc03":"\ud840\udd22","\u2f07":"\u4ea0","\uf977":"\u4eae","\u2f08":"\u4eba","\u30a4":"\u4ebb","\u2e85":"\u4ebb","\uf9fd":"\u4ec0","\ud87e\udc19":"\u4ecc","\uf9a8":"\u4ee4","\ud87e\udc04":"\u4f60","\u5002":"\u4f75","\ud87e\udc07":"\u4f75","\ufa73":"\u4f80","\uf92d":"\u4f86","\uf9b5":"\u4f8b","\ufa30":"\u4fae","\ud87e\udc05":"\u4fae","\ud87e\udc06":"\u4fbb","\uf965":"\u4fbf","\u503c":"\u5024","\uf9d4":"\u502b","\ud87e\udc08":"\u507a","\ud87e\udc09":"\u5099","\ud87e\udc0b":"\u50cf","\uf9bb":"\u50da","\ufa31":"\u50e7","\ud87e\udc0a":"\u50e7","\ud87e\udc0c":"\u349e","\u2f09":"\u513f","\ufa0c":"\u5140","\u2e8e":"\u5140","\ufa74":"\u5145","\ufa32":"\u514d","\ud87e\udc0e":"\u514d","\ud87e\udc0f":"\u5154","\ud87e\udc10":"\u5164","\u2f0a":"\u5165","\ud87e\udc14":"\u5167","\ufa72":"\u5168","\uf978":"\u5169","\u30cf":"\u516b","\u2f0b":"\u516b","\uf9d1":"\u516d","\ud87e\udc11":"\u5177","\ud87e\udc12":"\ud841\udd1c","\ud87e\udd1b":"\ud841\udd25","\ufa75":"\u5180","\ud87e\udc13":"\u34b9","\u2f0c":"\u5182","\ud87e\udc15":"\u518d","\ud87e\udc16":"\ud841\udd4b","\ud87e\udcd2":"\u5192","\ud87e\udcd3":"\u5195","\ud87e\uddca":"\u34bb","\ud87e\udcd4":"\u6700","\u2f0d":"\u5196","\ud87e\udc17":"\u5197","\ud87e\udc18":"\u51a4","\u2f0e":"\u51ab","\ud87e\udc1a":"\u51ac","\ufa71":"\u51b5","\ud87e\udc1b":"\u51b5","\uf92e":"\u51b7","\uf979":"\u51c9","\uf955":"\u51cc","\uf954":"\u51dc","\ufa15":"\u51de","\u2f0f":"\u51e0","\ud87e\udc0d":"\ud841\ude3a","\ud87e\udc1d":"\u51f5","\u2f10":"\u51f5","\u2f11":"\u5200","\u2e89":"\u5202","\ud87e\udc1e":"\u5203","\ufa00":"\u5207","\ud87e\udc50":"\u5207","\uf99c":"\u5217","\uf9dd":"\u5229","\ud87e\udc1f":"\u34df","\uf9ff":"\u523a","\ud87e\udc20":"\u523b","\ud87e\udc21":"\u5246","\ud87e\udc22":"\u5272","\ud87e\udc23":"\u5277","\uf9c7":"\u5289","\ud87e\uddd9":"\ud842\udc04","\u30ab":"\u529b","\uf98a":"\u529b","\u2f12":"\u529b","\uf99d":"\u52a3","\ud87e\udc24":"\u3515","\ud87e\udd92":"\u52b3","\ufa76":"\u52c7","\ud87e\udc25":"\u52c7","\ufa33":"\u52c9","\ud87e\udc26":"\u52c9","\uf952":"\u52d2","\uf92f":"\u52de","\ufa34":"\u52e4","\ud87e\udc27":"\u52e4","\uf97f":"\u52f5","\u2f13":"\u52f9","\ufa77":"\u52fa","\ud87e\udc28":"\u52fa","\ud87e\udc29":"\u5305","\ud87e\udc2a":"\u5306","\ud87e\udddd":"\ud842\udcde","\u2f14":"\u5315","\uf963":"\u5317","\ud87e\udc2b":"\u5317","\u2f15":"\u531a","\u2f16":"\u5338","\uf9eb":"\u533f","\u2f17":"\u5341","\u3038":"\u5341","\u303a":"\u5345","\ud87e\udc2c":"\u5349","\u0fd6":"\u534d","\u0fd5":"\u5350","\ufa35":"\u5351","\ud87e\udc2d":"\u5351","\ud87e\udc2e":"\u535a","\u30c8":"\u535c","\u2f18":"\u535c","\u2f19":"\u5369","\u2e8b":"\u353e","\ud87e\udc2f":"\u5373","\uf91c":"\u5375","\ud87e\udc30":"\u537d","\ud87e\udc31":"\u537f","\ud87e\udc32":"\u537f","\ud87e\udc33":"\u537f","\u2f1a":"\u5382","\ud87e\udc34":"\ud842\ude2c","\u2f1b":"\u53b6","\uf96b":"\u53c3","\u2f1c":"\u53c8","\ud87e\udc36":"\u53ca","\ud87e\udc37":"\u53df","\ud87e\udc38":"\ud842\udf63","\u30ed":"\u53e3","\u2f1d":"\u53e3","\u56d7":"\u53e3","\u2f1e":"\u53e3","\uf906":"\u53e5","\ud87e\udc39":"\u53eb","\ud87e\udc3a":"\u53f1","\ud87e\udc3b":"\u5406","\uf9de":"\u540f","\uf9ed":"\u541d","\ud87e\udc3d":"\u5438","\uf980":"\u5442","\ud87e\udc3e":"\u5448","\ud87e\udc3f":"\u5468","\ud87e\udc3c":"\u549e","\ud87e\udc40":"\u54a2","\uf99e":"\u54bd","\u439b":"\u3588","\ud87e\udc41":"\u54f6","\ud87e\udc42":"\u5510","\ud87e\udc43":"\u5553","\u555f":"\u5553","\ufa79":"\u5555","\ud87e\udc44":"\u5563","\ud87e\udc45":"\u5584","\ud87e\udc46":"\u5584","\uf90b":"\u5587","\ufa7a":"\u5599","\ud87e\udc47":"\u5599","\ufa36":"\u559d","\ufa78":"\u559d","\ud87e\udc48":"\u55ab","\ud87e\udc49":"\u55b3","\ufa0d":"\u55c0","\ud87e\udc4a":"\u55c2","\ufa7b":"\u55e2","\ufa37":"\u5606","\ud87e\udc4c":"\u5606","\ud87e\udc4e":"\u5651","\ud87e\udc4f":"\u5674","\ufa38":"\u5668","\uf9a9":"\u56f9","\ud87e\udc4b":"\u5716","\ud87e\udc4d":"\u5717","\u2f1f":"\u571f","\u58eb":"\u571f","\u2f20":"\u571f","\ud87e\udc55":"\u578b","\ud87e\udc52":"\u57ce","\u39b3":"\u363d","\ud87e\udc53":"\u57f4","\ud87e\udc54":"\u580d","\ud87e\udc57":"\u5831","\ud87e\udc56":"\u5832","\ufa39":"\u5840","\ufa10":"\u585a","\ufa7c":"\u585a","\uf96c":"\u585e","\u586b":"\u5861","\u58ff":"\u58ab","\ud87e\udc58":"\u58ac","\ufa7d":"\u58b3","\uf94a":"\u58d8","\uf942":"\u58df","\ud87e\udc59":"\ud845\udce4","\ud87e\udc51":"\u58ee","\ud87e\udc5a":"\u58f2","\ud87e\udc5b":"\u58f7","\u2f21":"\u5902","\ud87e\udc5c":"\u5906","\u2f22":"\u590a","\u30bf":"\u5915","\u2f23":"\u5915","\ud87e\udc5d":"\u591a","\ud87e\udc5e":"\u5922","\u2f24":"\u5927","\ufa7e":"\u5944","\uf90c":"\u5948","\uf909":"\u5951","\ufa7f":"\u5954","\ud87e\udc5f":"\u5962","\uf981":"\u5973","\u2f25":"\u5973","\ud87e\udc60":"\ud845\udea8","\ud87e\udc61":"\ud845\udeea","\ud87e\udc65":"\u59d8","\ud87e\udc62":"\u59ec","\ud87e\udc63":"\u5a1b","\ud87e\udc64":"\u5a27","\ufa80":"\u5a62","\ud87e\udc66":"\u5a66","\u5b00":"\u5aaf","\ud87e\udc67":"\u36ee","\ud87e\udc68":"\u36fc","\ud87e\udd86":"\u5ab5","\ud87e\udc69":"\u5b08","\ufa81":"\u5b28","\ud87e\udc6a":"\u5b3e","\ud87e\udc6b":"\u5b3e","\u2f26":"\u5b50","\u2f27":"\u5b80","\ufa04":"\u5b85","\ud87e\udc6c":"\ud846\uddc8","\ud87e\udc6d":"\u5bc3","\ud87e\udc6e":"\u5bd8","\uf95f":"\u5be7","\uf9aa":"\u5be7","\ud87e\udc6f":"\u5be7","\uf9bc":"\u5bee","\ud87e\udc70":"\u5bf3","\ud87e\udc71":"\ud846\udf18","\u2f28":"\u5bf8","\ud87e\udc72":"\u5bff","\ud87e\udc73":"\u5c06","\u2f29":"\u5c0f","\ud87e\udc75":"\u5c22","\u2e90":"\u5c22","\u2f2a":"\u5c22","\u2e8f":"\u5c23","\ud87e\udc76":"\u3781","\u2f2b":"\u5c38","\uf9bd":"\u5c3f","\ud87e\udc77":"\u5c60","\uf94b":"\u5c62","\ufa3b":"\u5c64","\uf9df":"\u5c65","\ufa3c":"\u5c6e","\ud87e\udc78":"\u5c6e","\u2f2c":"\u5c6e","\ud87e\udcf8":"\ud847\udd0b","\u2f2d":"\u5c71","\ud87e\udc79":"\u5cc0","\ud87e\udc7a":"\u5c8d","\ud87e\udc7b":"\ud847\udde4","\ud87e\udc7d":"\ud847\udde6","\uf9d5":"\u5d19","\ud87e\udc7c":"\u5d43","\uf921":"\u5d50","\ud87e\udc7f":"\u5d6b","\ud87e\udc7e":"\u5d6e","\ud87e\udc80":"\u5d7c","\ud87e\uddf4":"\u5db2","\uf9ab":"\u5dba","\u2f2e":"\u5ddb","\ud87e\udc82":"\u5de2","\u30a8":"\u5de5","\u2f2f":"\u5de5","\u2f30":"\u5df1","\u2e92":"\u5df3","\ud87e\udc83":"\u382f","\ud87e\udc84":"\u5dfd","\u2f31":"\u5dfe","\u5e32":"\u5e21","\ud87e\udc85":"\u5e28","\ud87e\udc86":"\u5e3d","\ud87e\udc87":"\u5e69","\ud87e\udc88":"\u3862","\ud87e\udc89":"\ud848\udd83","\u2f32":"\u5e72","\uf98e":"\u5e74","\ud87e\udd39":"\ud848\udd9f","\u2e93":"\u5e7a","\u2f33":"\u5e7a","\u2f34":"\u5e7f","\ufa01":"\u5ea6","\ud87e\udc8a":"\u387c","\ud87e\udc8b":"\u5eb0","\ud87e\udc8c":"\u5eb3","\ud87e\udc8d":"\u5eb6","\uf928":"\u5eca","\ud87e\udc8e":"\u5eca","\uf9a2":"\u5ec9","\ufa82":"\u5ed2","\ufa0b":"\u5ed3","\ufa83":"\u5ed9","\uf982":"\u5eec","\u2f35":"\u5ef4","\ud87e\udc90":"\u5efe","\u2f36":"\u5efe","\ud87e\udc91":"\ud848\udf31","\ud87e\udc92":"\ud848\udf31","\uf943":"\u5f04","\u2f37":"\u5f0b","\u2f38":"\u5f13","\ud87e\udc94":"\u5f22","\ud87e\udc95":"\u5f22","\u2f39":"\u5f50","\u2e94":"\u5f51","\ud87e\udc74":"\u5f53","\ud87e\udc96":"\u38c7","\u2f3a":"\u5f61","\ud87e\udc99":"\u5f62","\ufa84":"\u5f69","\ud87e\udc9a":"\u5f6b","\u2f3b":"\u5f73","\uf9d8":"\u5f8b","\ud87e\udc9b":"\u38e3","\ud87e\udc9c":"\u5f9a","\uf966":"\u5fa9","\ufa85":"\u5fad","\u2f3c":"\u5fc3","\u2e96":"\u5fc4","\u2e97":"\u38fa","\ud87e\udc9d":"\u5fcd","\ud87e\udc9e":"\u5fd7","\uf9a3":"\u5ff5","\ud87e\udc9f":"\u5ff9","\uf960":"\u6012","\uf9ac":"\u601c","\ufa6b":"\u6075","\ud87e\udca2":"\u391c","\ud87e\udca1":"\u393a","\ud87e\udca0":"\u6081","\ufa3d":"\u6094","\ud87e\udca3":"\u6094","\ud87e\udca5":"\u60c7","\ufa86":"\u60d8","\uf9b9":"\u60e1","\ud87e\udca4":"\ud849\uded4","\ufa88":"\u6108","\ufa3e":"\u6168","\uf9d9":"\u6144","\ud87e\udca6":"\u6148","\ud87e\udca7":"\u614c","\ud87e\udca9":"\u614c","\ufa87":"\u614e","\ud87e\udca8":"\u614e","\ufa8a":"\u6160","\ud87e\udcaa":"\u617a","\ufa3f":"\u618e","\ufa89":"\u618e","\ud87e\udcab":"\u618e","\uf98f":"\u6190","\ud87e\udcad":"\u61a4","\ud87e\udcae":"\u61af","\ud87e\udcac":"\u61b2","\ufad0":"\ud84a\udc44","\ufacf":"\ud84a\udc4a","\ud87e\udcaf":"\u61de","\ufa40":"\u61f2","\ufa8b":"\u61f2","\ud87e\udcb0":"\u61f2","\uf90d":"\u61f6","\ud87e\udcb1":"\u61f6","\uf990":"\u6200","\u2f3d":"\u6208","\ud87e\udcb2":"\u6210","\ud87e\udcb3":"\u621b","\uf9d2":"\u622e","\ufa8c":"\u6234","\u2f3e":"\u6236","\u6238":"\u6236","\u2f3f":"\u624b","\u2e98":"\u624c","\ud87e\udcb4":"\u625d","\ud87e\udcb5":"\u62b1","\uf925":"\u62c9","\uf95b":"\u62cf","\ufa02":"\u62d3","\ud87e\udcb6":"\u62d4","\ud87e\udcba":"\u62fc","\uf973":"\u62fe","\ud87e\udcb8":"\ud84a\udf0c","\ud87e\udcb9":"\u633d","\ud87e\udcb7":"\u6350","\ud87e\udcbb":"\u6368","\uf9a4":"\u637b","\ud87e\udcbc":"\u6383","\uf975":"\u63a0","\ud87e\udcc1":"\u63a9","\ufa8d":"\u63c4","\ud87e\udcbd":"\u63e4","\ufa8f":"\u6452","\ud87e\udcbe":"\ud84a\udff1","\ufa8e":"\u641c","\ud87e\udcbf":"\u6422","\ud87e\udcc0":"\u63c5","\ud87e\udcc3":"\u6469","\ud87e\udcc6":"\u6477","\ud87e\udcc4":"\u647e","\ud87e\udcc2":"\u3a2e","\u6409":"\u3a41","\uf991":"\u649a","\ud87e\udcc5":"\u649d","\uf930":"\u64c4","\ud87e\udcc7":"\u3a6c","\u2f40":"\u652f","\u2f41":"\u6534","\u2e99":"\u6535","\ufa41":"\u654f","\ud87e\udcc8":"\u654f","\ufa90":"\u6556","\ud87e\udcc9":"\u656c","\uf969":"\u6578","\ud87e\udcca":"\ud84c\udc0a","\u2f42":"\u6587","\u2eeb":"\u6589","\u2f43":"\u6597","\uf9be":"\u6599","\u2f44":"\u65a4","\u2f45":"\u65b9","\uf983":"\u65c5","\u2f46":"\u65e0","\u2e9b":"\u65e1","\ufa42":"\u65e2","\ud87e\udccb":"\u65e3","\u2f47":"\u65e5","\uf9e0":"\u6613","\u66f6":"\u3ada","\ud87e\udcd1":"\u3ae4","\ud87e\udccd":"\u6649","\u6669":"\u665a","\ufa12":"\u6674","\ufa91":"\u6674","\ufa43":"\u6691","\ud87e\udccf":"\u6691","\uf9c5":"\u6688","\ud87e\udcd0":"\u3b08","\ud87e\udcd5":"\u669c","\ufa06":"\u66b4","\uf98b":"\u66c6","\ud87e\udcce":"\u3b19","\ud87e\udc97":"\ud84c\udeb8","\u2f48":"\u66f0","\uf901":"\u66f4","\ud87e\udccc":"\u66f8","\u2f49":"\u6708","\ud87e\udd80":"\ud84c\udf5f","\u80a6":"\u670c","\u80d0":"\u670f","\u80ca":"\u6710","\u8101":"\u6713","\u80f6":"\u3b35","\uf929":"\u6717","\ufa92":"\u6717","\ud87e\udcd8":"\u6717","\u8127":"\u6718","\ufa93":"\u671b","\ud87e\udcd9":"\u671b","\u5e50":"\u3b3a","\u4420":"\u3b3b","\ud87e\udd89":"\ud84c\udf93","\u81a7":"\u6723","\ud87e\udd8a":"\ud84c\udf9c","\u2f4a":"\u6728","\uf9e1":"\u674e","\ud87e\udcdc":"\u6753","\ufa94":"\u6756","\ud87e\udcdb":"\u675e","\ud87e\udcdd":"\ud84c\udfc3","\u67ff":"\u676e","\uf9c8":"\u677b","\ud87e\udce0":"\u6785","\uf9f4":"\u6797","\ud87e\udcde":"\u3b49","\ufad1":"\ud84c\udfd5","\uf9c9":"\u67f3","\ud87e\udcdf":"\u67fa","\uf9da":"\u6817","\ud87e\udce5":"\u681f","\ud87e\udce1":"\u6852","\ud87e\udce3":"\ud84d\udc6d","\uf97a":"\u6881","\ufa44":"\u6885","\ud87e\udce2":"\u6885","\ud87e\udce4":"\u688e","\uf9e2":"\u68a8","\ud87e\udce6":"\u6914","\ud87e\udce8":"\u6942","\ufad2":"\u3b9d","\ud87e\udce7":"\u3b9d","\u69e9":"\u3ba3","\u6a27":"\u699d","\ud87e\udce9":"\u69a3","\ud87e\udcea":"\u69ea","\uf914":"\u6a02","\uf95c":"\u6a02","\uf9bf":"\u6a02","\uf94c":"\u6a13","\ud87e\udcec":"\ud84d\udea3","\ud87e\udceb":"\u6aa8","\uf931":"\u6ad3","\ud87e\udced":"\u6adb","\uf91d":"\u6b04","\ud87e\udcee":"\u3c18","\u2f4b":"\u6b20","\ud87e\udcef":"\u6b21","\ud87e\udcf0":"\ud84e\udca7","\ud87e\udcf1":"\u6b54","\ud87e\udcf2":"\u3c4e","\u2f4c":"\u6b62","\u2eed":"\u6b6f","\ud87e\udcf3":"\u6b72","\uf98c":"\u6b77","\ufa95":"\u6b79","\u2f4d":"\u6b79","\u2e9e":"\u6b7a","\ud87e\udcf4":"\u6b9f","\uf9a5":"\u6bae","\u2f4e":"\u6bb3","\uf970":"\u6bba","\ufa96":"\u6bba","\ud87e\udcf5":"\u6bba","\ud87e\udcf6":"\u6bbb","\ud87e\udcf7":"\ud84e\ude8d","\u2f4f":"\u6bcb","\u2e9f":"\u6bcd","\ud87e\udcf9":"\ud84e\udefa","\u2f50":"\u6bd4","\u2f51":"\u6bdb","\u2f52":"\u6c0f","\u2ea0":"\u6c11","\u2f53":"\u6c14","\u2f54":"\u6c34","\u2ea1":"\u6c35","\u2ea2":"\u6c3a","\ud87e\udcfa":"\u6c4e","\ud87e\udcfe":"\u6c67","\uf972":"\u6c88","\ud87e\udcfc":"\u6cbf","\uf968":"\u6ccc","\ud87e\udcfd":"\u6ccd","\uf9e3":"\u6ce5","\ud87e\udcfb":"\ud84f\udcbc","\uf915":"\u6d1b","\ufa05":"\u6d1e","\ud87e\udd07":"\u6d34","\ud87e\udd00":"\u6d3e","\uf9ca":"\u6d41","\ufa97":"\u6d41","\ud87e\udd02":"\u6d41","\ud87e\udcff":"\u6d16","\ud87e\udd03":"\u6d69","\uf92a":"\u6d6a","\ufa45":"\u6d77","\ud87e\udd01":"\u6d77","\ud87e\udd04":"\u6d78","\ud87e\udd05":"\u6d85","\ud87e\udd06":"\ud84f\udd1e","\uf9f5":"\u6dcb","\uf94d":"\u6dda","\uf9d6":"\u6dea","\ud87e\udd0e":"\u6df9","\ufa46":"\u6e1a","\ud87e\udd08":"\u6e2f","\ud87e\udd09":"\u6e6e","\u6f59":"\u6e88","\ufa99":"\u6ecb","\ud87e\udd0b":"\u6ecb","\uf9cb":"\u6e9c","\uf9ec":"\u6eba","\ud87e\udd0c":"\u6ec7","\uf904":"\u6ed1","\ufa98":"\u6edb","\ud87e\udd0a":"\u3d33","\uf94e":"\u6f0f","\ufa47":"\u6f22","\ufa9a":"\u6f22","\uf992":"\u6f23","\ud87e\udd0d":"\ud84f\uded1","\ud87e\udd0f":"\u6f6e","\ud87e\udd10":"\ud84f\udf5e","\ud87e\udd11":"\ud84f\udf8e","\ud87e\udd12":"\u6fc6","\uf922":"\u6feb","\uf984":"\u6ffe","\ud87e\udd15":"\u701b","\ufa9b":"\u701e","\ud87e\udd14":"\u701e","\ud87e\udd13":"\u7039","\ud87e\udd17":"\u704a","\ud87e\udd16":"\u3d96","\u2f55":"\u706b","\u2ea3":"\u706c","\ud87e\udc35":"\u7070","\ud87e\udd19":"\u7077","\ud87e\udd18":"\u707d","\uf9fb":"\u7099","\ud87e\udd1a":"\u70ad","\uf99f":"\u70c8","\uf916":"\u70d9","\ufa48":"\u716e","\ufa9c":"\u716e","\ud87e\udd1d":"\ud850\ude63","\ud87e\udd1c":"\u7145","\uf993":"\u7149","\ufa6c":"\ud850\udeee","\ud87e\udd1e":"\u719c","\uf9c0":"\u71ce","\uf9ee":"\u71d0","\ud87e\udd1f":"\ud850\udfab","\uf932":"\u7210","\uf91e":"\u721b","\ud87e\udd20":"\u7228","\u2f56":"\u722a","\ufa49":"\u722b","\u2ea4":"\u722b","\ufa9e":"\u7235","\ud87e\udd21":"\u7235","\u2f57":"\u7236","\u2f58":"\u723b","\u2ea6":"\u4e2c","\u2f59":"\u723f","\u2f5a":"\u7247","\ud87e\udd22":"\u7250","\u2f5b":"\u7259","\ud87e\udd23":"\ud851\ude08","\u2f5c":"\u725b","\uf946":"\u7262","\ud87e\udd24":"\u7280","\ud87e\udd25":"\u7295","\u2f5d":"\u72ac","\u2ea8":"\u72ad","\ufa9f":"\u72af","\uf9fa":"\u72c0","\ud87e\udd26":"\ud851\udf35","\uf92b":"\u72fc","\ufa16":"\u732a","\ufaa0":"\u732a","\ud87e\udd27":"\ud852\udc14","\uf9a7":"\u7375","\ud87e\udd28":"\u737a","\u2f5e":"\u7384","\uf961":"\u7387","\uf9db":"\u7387","\u2f5f":"\u7389","\ud87e\udd29":"\u738b","\ud87e\udd2a":"\u3eac","\ud87e\udd2b":"\u73a5","\uf9ad":"\u73b2","\ud87e\udd2c":"\u3eb8","\ud87e\udd2d":"\u3eb8","\uf917":"\u73de","\uf9cc":"\u7409","\uf9e4":"\u7406","\ufa4a":"\u7422","\ud87e\udd2e":"\u7447","\ud87e\udd2f":"\u745c","\uf9ae":"\u7469","\ufaa1":"\u7471","\ud87e\udd30":"\u7471","\ud87e\udd31":"\u7485","\uf994":"\u7489","\uf9ef":"\u7498","\ud87e\udd32":"\u74ca","\u2f60":"\u74dc","\u2f61":"\u74e6","\ud87e\udd33":"\u3f1b","\ufaa2":"\u7506","\u2f62":"\u7518","\u2f63":"\u751f","\ud87e\udd34":"\u7524","\u2f64":"\u7528","\u2f65":"\u7530","\ufaa3":"\u753b","\ud87e\udd36":"\u753e","\ud87e\udd35":"\ud853\udc36","\uf9cd":"\u7559","\uf976":"\u7565","\uf962":"\u7570","\ud87e\udd38":"\u7570","\ud87e\udd37":"\ud853\udc92","\u2f66":"\u758b","\u2f67":"\u7592","\uf9e5":"\u75e2","\ud87e\udd3a":"\u7610","\ufaa5":"\u761f","\ufaa4":"\u761d","\uf9c1":"\u7642","\uf90e":"\u7669","\u2f68":"\u7676","\u2f69":"\u767d","\ud87e\udd3b":"\ud853\udfa1","\ud87e\udd3c":"\ud853\udfb8","\u2f6a":"\u76ae","\u2f6b":"\u76bf","\ud87e\udd3d":"\ud854\udc44","\ud87e\udd3e":"\u3ffc","\ufa17":"\u76ca","\ufaa6":"\u76ca","\ufaa7":"\u76db","\uf933":"\u76e7","\ud87e\udd3f":"\u4008","\u2f6c":"\u76ee","\ufaa8":"\u76f4","\ud87e\udd40":"\u76f4","\ud87e\udd42":"\ud854\udcf2","\ud87e\udd41":"\ud854\udcf3","\uf96d":"\u7701","\ufad3":"\u4018","\ud87e\udd43":"\ud854\udd19","\ud87e\udd45":"\u771e","\ud87e\udd46":"\u771f","\ud87e\udd47":"\u771f","\ud87e\udd44":"\ud854\udd33","\ufaaa":"\u7740","\ufaa9":"\u774a","\ud87e\udd48":"\u774a","\u9fc3":"\u4039","\ufad4":"\u4039","\ud87e\udd49":"\u4039","\u6663":"\u403f","\ud87e\udd4b":"\u4046","\ud87e\udd4a":"\u778b","\ufad5":"\ud854\ude49","\ufa9d":"\u77a7","\u2f6d":"\u77db","\u2f6e":"\u77e2","\u2f6f":"\u77f3","\ud87e\udd4c":"\u4096","\ud87e\udd4d":"\ud855\udc1d","\u784f":"\u7814","\ud87e\udd4e":"\u784e","\uf9ce":"\u786b","\uf93b":"\u788c","\ud87e\udd4f":"\u788c","\ufa4b":"\u7891","\uf947":"\u78ca","\ufaab":"\u78cc","\ud87e\udd50":"\u78cc","\uf964":"\u78fb","\ud87e\udd51":"\u40e3","\uf985":"\u792a","\u2f70":"\u793a","\u2ead":"\u793b","\ufa18":"\u793c","\ufa4c":"\u793e","\ufa4e":"\u7948","\ufa4d":"\u7949","\ud87e\udd52":"\ud855\ude26","\ufa4f":"\u7950","\ufa50":"\u7956","\ud87e\udd53":"\u7956","\ufa51":"\u795d","\ufa19":"\u795e","\ufa1a":"\u7965","\ufa61":"\u8996","\ufab8":"\u8996","\uf93c":"\u797f","\ud87e\udd54":"\ud855\ude9a","\ufa52":"\u798d","\ufa53":"\u798e","\ufa1b":"\u798f","\ud87e\udd56":"\u798f","\ud87e\udd55":"\ud855\udec5","\uf9b6":"\u79ae","\u2f71":"\u79b8","\u2f72":"\u79be","\uf995":"\u79ca","\ud87e\udd58":"\u412f","\ud87e\udd57":"\u79eb","\uf956":"\u7a1c","\ud87e\udd5a":"\u7a4a","\ufa54":"\u7a40","\ud87e\udd59":"\u7a40","\ud87e\udd5b":"\u7a4f","\u2f73":"\u7a74","\ufa55":"\u7a81","\ud87e\udd5c":"\ud856\udd7c","\ufaac":"\u7ab1","\uf9f7":"\u7acb","\u2f74":"\u7acb","\u2eef":"\u7adc","\ud87e\udd5d":"\ud856\udea7","\ud87e\udd5e":"\ud856\udea7","\ud87e\udd5f":"\u7aee","\u2f75":"\u7af9","\uf9f8":"\u7b20","\ufa56":"\u7bc0","\ufaad":"\u7bc0","\ud87e\udd60":"\u4202","\ud87e\udd61":"\ud856\udfab","\ud87e\udd62":"\u7bc6","\ud87e\udd64":"\u4227","\ud87e\udd63":"\u7bc9","\ud87e\udd65":"\ud857\udc80","\ufad6":"\ud857\udcd0","\uf9a6":"\u7c3e","\uf944":"\u7c60","\u2f76":"\u7c73","\ufaae":"\u7c7b","\uf9f9":"\u7c92","\ufa1d":"\u7cbe","\ud87e\udd66":"\u7cd2","\ufa03":"\u7cd6","\ud87e\udd68":"\u7ce8","\ud87e\udd67":"\u42a0","\ud87e\udd69":"\u7ce3","\uf97b":"\u7ce7","\u2f77":"\u7cf8","\u2eaf":"\u7cf9","\ud87e\udd6b":"\ud857\udf86","\ud87e\udd6a":"\u7d00","\uf9cf":"\u7d10","\uf96a":"\u7d22","\uf94f":"\u7d2f","\u7d76":"\u7d55","\ud87e\udd6c":"\u7d63","\ufaaf":"\u7d5b","\uf93d":"\u7da0","\uf957":"\u7dbe","\ud87e\udd6e":"\u7dc7","\uf996":"\u7df4","\ufa57":"\u7df4","\ufab0":"\u7df4","\ud87e\udd6f":"\u7e02","\ud87e\udd6d":"\u4301","\ufa58":"\u7e09","\uf950":"\u7e37","\ufa59":"\u7e41","\ud87e\udd70":"\u7e45","\ud87e\udc98":"\ud858\uddda","\ud87e\udd71":"\u4334","\u2f78":"\u7f36","\ud87e\udd72":"\ud858\ude28","\ufab1":"\u7f3e","\ud87e\udd73":"\ud858\ude47","\u2f79":"\u7f51","\u2eab":"\u7f52","\u2eb2":"\u7f52","\u2eb1":"\u7f53","\ud87e\udd74":"\u4359","\ufa5a":"\u7f72","\ud87e\udd75":"\ud858\uded9","\uf9e6":"\u7f79","\ud87e\udd76":"\u7f7a","\uf90f":"\u7f85","\ud87e\udd77":"\ud858\udf3e","\u2f7a":"\u7f8a","\ud87e\udd78":"\u7f95","\uf9af":"\u7f9a","\ufa1e":"\u7fbd","\u2f7b":"\u7fbd","\ud87e\udd79":"\u7ffa","\uf934":"\u8001","\u2f7c":"\u8001","\u2eb9":"\u8002","\ufa5b":"\u8005","\ufab2":"\u8005","\ud87e\udd7a":"\u8005","\u2f7d":"\u800c","\ud87e\udd7b":"\ud859\udcda","\u2f7e":"\u8012","\ud87e\udd7c":"\ud859\udd23","\u2f7f":"\u8033","\uf9b0":"\u8046","\ud87e\udd7d":"\u8060","\ud87e\udd7e":"\ud859\udda8","\uf997":"\u806f","\ud87e\udd7f":"\u8070","\uf945":"\u807e","\u2f80":"\u807f","\u2eba":"\u8080","\u2f81":"\u8089","\uf953":"\u808b","\ud87e\udcd6":"\u80ad","\ud87e\udd82":"\u80b2","\ud87e\udd81":"\u43d5","\ud87e\udcd7":"\u43d9","\u8141":"\u80fc","\ud87e\udd83":"\u8103","\ud87e\udd85":"\u813e","\ud87e\udd84":"\u440b","\ud87e\udcda":"\u6721","\ud87e\udd87":"\ud859\udfa7","\ud87e\udd88":"\ud859\udfb5","\u6726":"\u4443","\uf926":"\u81d8","\u2f82":"\u81e3","\uf9f6":"\u81e8","\u2f83":"\u81ea","\ufa5c":"\u81ed","\u2f84":"\u81f3","\u2f85":"\u81fc","\ud87e\udc93":"\u8201","\ud87e\udd8b":"\u8201","\ud87e\udd8c":"\u8204","\u2f86":"\u820c","\ufa6d":"\u8218","\u2f87":"\u821b","\u2f88":"\u821f","\ud87e\udd8e":"\u446b","\u2f89":"\u826e","\uf97c":"\u826f","\u2f8a":"\u8272","\u2f8b":"\u8278","\ufa5d":"\u8279","\ufa5e":"\u8279","\u2ebe":"\u8279","\u2ebf":"\u8279","\u2ec0":"\u8279","\ud87e\udd90":"\u828b","\ud87e\udd8f":"\u8291","\ud87e\udd91":"\u829d","\ud87e\udd93":"\u82b1","\ud87e\udd94":"\u82b3","\ud87e\udd95":"\u82bd","\uf974":"\u82e5","\ud87e\udd98":"\u82e5","\ud87e\udd96":"\u82e6","\ud87e\udd97":"\ud85a\udf3c","\uf9fe":"\u8336","\ufab3":"\u8352","\ud87e\udd9a":"\u8363","\ud87e\udd99":"\u831d","\ud87e\udd9c":"\u8323","\ud87e\udd9d":"\u83bd","\ud87e\udda0":"\u8353","\uf93e":"\u83c9","\ud87e\udda1":"\u83ca","\ud87e\udda2":"\u83cc","\ud87e\udda3":"\u83dc","\ud87e\udd9e":"\u83e7","\ufab4":"\u83ef","\uf958":"\u83f1","\ufa5f":"\u8457","\ud87e\udd9f":"\u8457","\ud87e\udda4":"\ud85b\udc36","\ud87e\udd9b":"\u83ad","\uf918":"\u843d","\uf96e":"\u8449","\u853f":"\u848d","\ud87e\udda6":"\ud85b\udcd5","\ud87e\udda5":"\ud85b\udd6b","\uf999":"\u84ee","\ud87e\udda8":"\u84f1","\ud87e\udda9":"\u84f3","\uf9c2":"\u84fc","\ud87e\uddaa":"\u8516","\ud87e\udda7":"\u452b","\ud87e\uddac":"\u8564","\ud87e\uddad":"\ud85b\udf2c","\uf923":"\u85cd","\ud87e\uddae":"\u455d","\ud87e\uddb0":"\ud85b\udfb1","\ud87e\uddaf":"\u4561","\uf9f0":"\u85fa","\uf935":"\u8606","\ud87e\uddb2":"\u456b","\ufa20":"\u8612","\uf91f":"\u862d","\ud87e\uddb1":"\ud85c\udcd2","\u8641":"\u8637","\uf910":"\u863f","\u2f8c":"\u864d","\u2ec1":"\u864e","\ud87e\uddb3":"\u8650","\uf936":"\u865c","\ud87e\uddb4":"\u865c","\ud87e\uddb5":"\u8667","\ud87e\uddb6":"\u8669","\u2f8d":"\u866b","\ud87e\uddb7":"\u86a9","\ud87e\uddb8":"\u8688","\ud87e\uddba":"\u86e2","\ud87e\uddb9":"\u870e","\ud87e\uddbc":"\u8728","\ud87e\uddbd":"\u876b","\ud87e\uddc0":"\u87e1","\ufab5":"\u8779","\ud87e\uddbb":"\u8779","\ud87e\uddbe":"\u8786","\ud87e\uddbf":"\u45d7","\ud87e\uddab":"\ud85c\udfca","\uf911":"\u87ba","\ud87e\uddc1":"\u8801","\ud87e\uddc2":"\u45f9","\uf927":"\u881f","\u2f8e":"\u8840","\ufa08":"\u884c","\u2f8f":"\u884c","\ud87e\uddc3":"\u8860","\ud87e\uddc4":"\u8863","\u2f90":"\u8863","\u2ec2":"\u8864","\uf9a0":"\u88c2","\ud87e\uddc5":"\ud85d\ude67","\uf9e7":"\u88cf","\ud87e\uddc6":"\u88d7","\ud87e\uddc7":"\u88de","\uf9e8":"\u88e1","\uf912":"\u88f8","\ud87e\uddc9":"\u88fa","\ud87e\uddc8":"\u4635","\ufa60":"\u8910","\ufab6":"\u8941","\uf924":"\u8964","\u2f91":"\u897e","\u2ec4":"\u897f","\u2ec3":"\u8980","\ufab7":"\u8986","\ufa0a":"\u898b","\u2f92":"\u898b","\ud87e\uddcb":"\ud85e\udcae","\u2ec5":"\u89c1","\u2f93":"\u89d2","\u2f94":"\u8a00","\ud87e\uddcc":"\ud85e\udd66","\u8a7d":"\u8a2e","\u8a1e":"\u46b6","\ud87e\uddcd":"\u46be","\ud87e\uddce":"\u46c7","\ud87e\uddcf":"\u8aa0","\uf96f":"\u8aaa","\uf9a1":"\u8aaa","\ufab9":"\u8abf","\ufabb":"\u8acb","\uf97d":"\u8ad2","\uf941":"\u8ad6","\ufabe":"\u8aed","\ud87e\uddd0":"\u8aed","\ufa22":"\u8af8","\ufaba":"\u8af8","\uf95d":"\u8afe","\ufabd":"\u8afe","\ufa62":"\u8b01","\ufabc":"\u8b01","\ufa63":"\u8b39","\ufabf":"\u8b39","\uf9fc":"\u8b58","\uf95a":"\u8b80","\u8b8f":"\u8b86","\ufac0":"\u8b8a","\ud87e\uddd1":"\u8b8a","\u2ec8":"\u8ba0","\u2f95":"\u8c37","\u2f96":"\u8c46","\uf900":"\u8c48","\ud87e\uddd2":"\u8c55","\u2f97":"\u8c55","\u8c63":"\u8c5c","\u2f98":"\u8c78","\ud87e\uddd3":"\ud85f\udca8","\u2f99":"\u8c9d","\ud87e\uddd4":"\u8cab","\ud87e\uddd5":"\u8cc1","\uf948":"\u8cc2","\uf903":"\u8cc8","\ufa64":"\u8cd3","\ufa65":"\u8d08","\ufac1":"\u8d08","\ud87e\uddd6":"\u8d1b","\u2ec9":"\u8d1d","\u2f9a":"\u8d64","\u2f9b":"\u8d70","\ud87e\uddd7":"\u8d77","\u8d86":"\u8d7f","\ufad7":"\ud85f\uded3","\ud87e\uddd8":"\ud85f\udf2f","\u2f9c":"\u8db3","\ud87e\uddda":"\u8dcb","\ud87e\udddb":"\u8dbc","\u8dfa":"\u8de5","\uf937":"\u8def","\ud87e\udddc":"\u8df0","\u8e9b":"\u8e97","\u2f9d":"\u8eab","\uf902":"\u8eca","\u2f9e":"\u8eca","\ud87e\uddde":"\u8ed4","\u8f27":"\u8eff","\uf998":"\u8f26","\uf9d7":"\u8f2a","\ufac2":"\u8f38","\ud87e\udddf":"\u8f38","\ufa07":"\u8f3b","\uf98d":"\u8f62","\u2ecb":"\u8f66","\u2f9f":"\u8f9b","\ud87e\udd8d":"\u8f9e","\uf971":"\u8fb0","\u2fa0":"\u8fb0","\u2fa1":"\u8fb5","\ufa66":"\u8fb6","\u2ecc":"\u8fb6","\u2ecd":"\u8fb6","\ud87e\udc81":"\u5de1","\uf99a":"\u9023","\ufa25":"\u9038","\ufa67":"\u9038","\ufac3":"\u9072","\uf9c3":"\u907c","\ud87e\udde0":"\ud861\uddd2","\ud87e\udde1":"\ud861\udded","\uf913":"\u908f","\u2fa2":"\u9091","\ud87e\udde2":"\u9094","\uf92c":"\u90ce","\u90de":"\u90ce","\ufa2e":"\u90ce","\ud87e\udde3":"\u90f1","\ufa26":"\u90fd","\ud87e\udde5":"\ud861\udf2e","\ud87e\udde4":"\u9111","\ud87e\udde6":"\u911b","\u2fa3":"\u9149","\uf919":"\u916a","\ufac4":"\u9199","\uf9b7":"\u91b4","\u2fa4":"\u91c6","\uf9e9":"\u91cc","\u2fa5":"\u91cc","\uf97e":"\u91cf","\uf90a":"\u91d1","\u2fa6":"\u91d1","\uf9b1":"\u9234","\ud87e\udde7":"\u9238","\ufac5":"\u9276","\ud87e\udde8":"\u92d7","\ud87e\udde9":"\u92d8","\ud87e\uddea":"\u927c","\uf93f":"\u9304","\uf99b":"\u934a","\u93ae":"\u93ad","\ud87e\uddeb":"\u93f9","\ud87e\uddec":"\u9415","\ud87e\udded":"\ud862\udffa","\u2ed0":"\u9485","\u2ed1":"\u9577","\u2fa7":"\u9577","\u2ed2":"\u9578","\u2ed3":"\u957f","\u2fa8":"\u9580","\ud87e\uddee":"\u958b","\ud87e\uddef":"\u4995","\uf986":"\u95ad","\ud87e\uddf0":"\u95b7","\ud87e\uddf1":"\ud863\udd77","\u2ed4":"\u95e8","\u2fa9":"\u961c","\u2ecf":"\u961d","\u2ed6":"\u961d","\uf9c6":"\u962e","\uf951":"\u964b","\ufa09":"\u964d","\uf959":"\u9675","\uf9d3":"\u9678","\ufac6":"\u967c","\uf9dc":"\u9686","\uf9f1":"\u96a3","\ud87e\uddf2":"\u49e6","\u2faa":"\u96b6","\ufa2f":"\u96b7","\u96b8":"\u96b7","\uf9b8":"\u96b7","\u2fab":"\u96b9","\ud87e\uddf3":"\u96c3","\uf9ea":"\u96e2","\ufa68":"\u96e3","\ufac7":"\u96e3","\u2fac":"\u96e8","\uf9b2":"\u96f6","\uf949":"\u96f7","\ud87e\uddf5":"\u9723","\ud87e\uddf6":"\ud864\udd45","\uf938":"\u9732","\uf9b3":"\u9748","\u2fad":"\u9751","\u2ed8":"\u9752","\ufa1c":"\u9756","\ufac8":"\u9756","\ud87e\udc1c":"\ud864\udddf","\u2fae":"\u975e","\u2faf":"\u9762","\ud87e\uddf7":"\ud864\ude1a","\u2fb0":"\u9769","\ud87e\uddf8":"\u4a6e","\ud87e\uddf9":"\u4a76","\u2fb1":"\u97cb","\ufac9":"\u97db","\ud87e\uddfa":"\u97e0","\u2ed9":"\u97e6","\u2fb2":"\u97ed","\ud87e\uddfb":"\ud865\udc0a","\u2fb3":"\u97f3","\ufa69":"\u97ff","\ufaca":"\u97ff","\u2fb4":"\u9801","\ud87e\uddfc":"\u4ab2","\ufacb":"\u980b","\ud87e\uddfe":"\u980b","\ud87e\uddff":"\u980b","\uf9b4":"\u9818","\ud87e\ude00":"\u9829","\ud87e\uddfd":"\ud865\udc96","\ufa6a":"\u983b","\ufacc":"\u983b","\uf9d0":"\u985e","\u2eda":"\u9875","\u2fb5":"\u98a8","\ud87e\ude01":"\ud865\uddb6","\u2edb":"\u98ce","\u2fb6":"\u98db","\u2edc":"\u98de","\u2edd":"\u98df","\u2fb7":"\u98df","\u2edf":"\u98e0","\ud87e\ude02":"\u98e2","\ufa2a":"\u98ef","\ufa2b":"\u98fc","\ud87e\ude03":"\u4b33","\ufa2c":"\u9928","\ud87e\ude04":"\u9929","\u2ee0":"\u9963","\u2fb8":"\u9996","\u2fb9":"\u9999","\ud87e\ude05":"\u99a7","\u2fba":"\u99ac","\ud87e\ude06":"\u99c2","\uf91a":"\u99f1","\ud87e\ude07":"\u99fe","\uf987":"\u9a6a","\u2ee2":"\u9a6c","\u2fbb":"\u9aa8","\ud87e\ude08":"\u4bce","\u2fbc":"\u9ad8","\u2fbd":"\u9adf","\ud87e\ude09":"\ud866\udf30","\ufacd":"\u9b12","\ud87e\ude0a":"\u9b12","\u2fbe":"\u9b25","\u2fbf":"\u9b2f","\u2fc0":"\u9b32","\u2fc1":"\u9b3c","\u2ee4":"\u9b3c","\u2fc2":"\u9b5a","\uf939":"\u9b6f","\ud87e\ude0b":"\u9c40","\uf9f2":"\u9c57","\u2ee5":"\u9c7c","\u2fc3":"\u9ce5","\ud87e\ude0c":"\u9cfd","\ud87e\ude0d":"\u4cce","\ud87e\ude0f":"\u9d67","\ud87e\ude0e":"\u4ced","\ud87e\ude10":"\ud868\udcce","\ufa2d":"\u9db4","\ud87e\ude12":"\ud868\udd05","\ud87e\ude11":"\u4cf8","\uf93a":"\u9dfa","\ud87e\ude13":"\ud868\ude0e","\uf920":"\u9e1e","\u9e43":"\u9e42","\u2fc4":"\u9e75","\uf940":"\u9e7f","\u2fc5":"\u9e7f","\ud87e\ude14":"\ud868\ude91","\uf988":"\u9e97","\uf9f3":"\u9e9f","\u2fc6":"\u9ea5","\u2ee8":"\u9ea6","\ud87e\ude15":"\u9ebb","\u2fc7":"\u9ebb","\ud87e\udc8f":"\ud868\udf92","\u2fc8":"\u9ec3","\u2ee9":"\u9ec4","\u2fc9":"\u9ecd","\uf989":"\u9ece","\ud87e\ude16":"\u4d56","\u2fca":"\u9ed1","\u9ed2":"\u9ed1","\ufa3a":"\u58a8","\ud87e\ude17":"\u9ef9","\u2fcb":"\u9ef9","\u2fcc":"\u9efd","\ud87e\ude19":"\u9f05","\ud87e\ude18":"\u9efe","\u2fcd":"\u9f0e","\ud87e\ude1a":"\u9f0f","\u2fce":"\u9f13","\ud87e\ude1b":"\u9f16","\u2fcf":"\u9f20","\ud87e\ude1c":"\u9f3b","\u2fd0":"\u9f3b","\ufad8":"\u9f43","\u2fd1":"\u9f4a","\u2eec":"\u9f50","\u2fd2":"\u9f52","\ud87e\ude1d":"\ud869\ude00","\u2eee":"\u9f7f","\uf9c4":"\u9f8d","\u2fd3":"\u9f8d","\ufad9":"\u9f8e","\u2ef0":"\u9f99","\uf907":"\u9f9c","\uf908":"\u9f9c","\uface":"\u9f9c","\u2fd4":"\u9f9c","\u2ef3":"\u9f9f","\u2fd5":"\u9fa0"}')},function(e,t,n){var r,i;!function(o,s){"use strict";void 0===(i="function"===typeof(r=function(){var e=function(){},t="undefined"!==typeof window&&"undefined"!==typeof window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),"undefined"!==typeof console&&("trace"===n&&t?i:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}function s(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function a(e,t,n){return function(){"undefined"!==typeof console&&(s.call(this,t,n),this[e].apply(this,arguments))}}function u(e,t,n){return o(e)||a.apply(this,arguments)}function c(e,t,r){var i,o=this,a="loglevel";function c(){var e;if("undefined"!==typeof window){try{e=window.localStorage[a]}catch(r){}if("undefined"===typeof e)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(a)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(r){}return void 0===o.levels[e]&&(e=void 0),e}}e&&(a+=":"+e),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||u,o.getLevel=function(){return i},o.setLevel=function(t,r){if("string"===typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"===typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==r&&function(e){var t=(n[e]||"silent").toUpperCase();if("undefined"!==typeof window){try{return void(window.localStorage[a]=t)}catch(r){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(r){}}}(t),s.call(o,t,e),"undefined"===typeof console&&t<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){c()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var l=c();null==l&&(l=null==t?"WARN":t),o.setLevel(l,!1)}var l=new c,d={};l.getLogger=function(e){if("string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new c(e,l.getLevel(),l.methodFactory)),t};var f="undefined"!==typeof window?window.log:void 0;return l.noConflict=function(){return"undefined"!==typeof window&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return d},l})?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){n(188),e.exports=n(4).Object.assign},function(e,t,n){var r=n(7);r(r.S+r.F,"Object",{assign:n(189)})},function(e,t,n){"use strict";var r=n(17),i=n(42),o=n(84),s=n(52),a=n(34),u=n(74),c=Object.assign;e.exports=!c||n(28)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=a(e),c=arguments.length,l=1,d=o.f,f=s.f;c>l;)for(var p,h=u(arguments[l++]),v=d?i(h).concat(d(h)):i(h),m=v.length,y=0;m>y;)p=v[y++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:c},function(e,t,n){n(191),e.exports=n(4).Object.setPrototypeOf},function(e,t,n){var r=n(7);r(r.S,"Object",{setPrototypeOf:n(118).set})},function(e,t,n){n(44),n(33),e.exports=n(193)},function(e,t,n){var r=n(16),i=n(85);e.exports=n(4).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){e.exports={default:n(195),__esModule:!0}},function(e,t,n){n(44),n(33),e.exports=n(196)},function(e,t,n){var r=n(65),i=n(15)("iterator"),o=n(43);e.exports=n(4).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(5)),i=f(n(8)),o=n(1),s=f(o),a=f(n(18)),u=f(n(119)),c=f(n(2)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(121)),d=f(n(3));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){var r=e.openCursor(t);return new s.default((function(e,t){var i=[];r.onerror=function(e){t(new Error("Query failed: "+e.target.errorCode))},r.onsuccess=function(t){var r=t.target.result;r?(i.push(n(r)),r.continue()):e(i)}}))}function h(e){return new s.default((function(t,n){e.oncomplete=function(e){t(e)},e.onerror=function(e){n(e.target.error)}}))}function v(e){return new s.default((function(t,n){e.onsuccess=function(e){t(e)},e.onerror=function(e){n(e.target.error)}}))}function m(e){return new s.default((function(t,n){e.onsuccess=function(){return t(e)},e.onerror=function(e){return n(e)}}))}function y(e){return v(e).then((function(e){return e.target.result}))}var g=function(e,t){this.indexedDB=e,this._dbName="matrix-js-sdk:"+(t||"default"),this.db=null,this._disconnected=!0,this._syncAccumulator=new u.default,this._isNewlyCreated=!1};g.exists=function(e,t){return t="matrix-js-sdk:"+(t||"default"),l.exists(e,t)},g.prototype={connect:function(){var e=this;if(!this._disconnected)return d.default.log("LocalIndexedDBStoreBackend.connect: already connected or connecting"),s.default.resolve();this._disconnected=!1,d.default.log("LocalIndexedDBStoreBackend.connect: connecting...");var t=this.indexedDB.open(this._dbName,3);return t.onupgradeneeded=function(t){var n=t.target.result,r=t.oldVersion;d.default.log("LocalIndexedDBStoreBackend.connect: upgrading from "+r),r<1&&(e._isNewlyCreated=!0,function(e){e.createObjectStore("users",{keyPath:["userId"]}),e.createObjectStore("accountData",{keyPath:["type"]}),e.createObjectStore("sync",{keyPath:["clobber"]})}(n)),r<2&&function(e){e.createObjectStore("oob_membership_events",{keyPath:["room_id","state_key"]}).createIndex("room","room_id")}(n),r<3&&function(e){e.createObjectStore("client_options",{keyPath:["clobber"]})}(n)},t.onblocked=function(){d.default.log("can't yet open LocalIndexedDBStoreBackend because it is open elsewhere")},d.default.log("LocalIndexedDBStoreBackend.connect: awaiting connection..."),v(t).then((function(t){return d.default.log("LocalIndexedDBStoreBackend.connect: connected"),e.db=t.target.result,e.db.onversionchange=function(){e.db.close()},e._init()}))},isNewlyCreated:function(){return s.default.resolve(this._isNewlyCreated)},_init:function(){var e=this;return s.default.all([this._loadAccountData(),this._loadSyncData()]).then((function(t){var n=(0,a.default)(t,2),r=n[0],i=n[1];d.default.log("LocalIndexedDBStoreBackend: loaded initial data"),e._syncAccumulator.accumulate({next_batch:i.nextBatch,rooms:i.roomsData,groups:i.groupsData,account_data:{events:r}})}))},getOutOfBandMembers:function(e){var t=this;return new s.default((function(n,r){var i=t.db.transaction(["oob_membership_events"],"readonly").objectStore("oob_membership_events").index("room"),o=IDBKeyRange.only(e),s=i.openCursor(o),a=[],u=!1;s.onsuccess=function(e){var t=e.target.result;if(!t)return a.length||u?n(a):n(null);var r=t.value;r.oob_written?u=!0:a.push(r),t.continue()},s.onerror=function(e){r(e)}})).then((function(t){return d.default.log("LL: got "+(t&&t.length)+" membershipEvents from storage for room "+e+" ..."),t}))},setOutOfBandMembers:function(){var e=(0,o.coroutine)(i.default.mark((function e(t,n){var r,s,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.default.log("LL: backend about to store "+n.length+" members for "+t),r=this.db.transaction(["oob_membership_events"],"readwrite"),s=r.objectStore("oob_membership_events"),n.forEach((function(e){s.put(e)})),a={room_id:t,oob_written:!0,state_key:0},s.put(a),e.next=8,(0,o.resolve)(h(r));case 8:d.default.log("LL: backend done storing for "+t+"!");case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),clearOutOfBandMembers:function(){var e=(0,o.coroutine)(i.default.mark((function e(t){var n,r,u,c,l,f,p,h,v,g,_,b,k;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.db.transaction(["oob_membership_events"],"readonly"),r=n.objectStore("oob_membership_events"),u=r.index("room"),c=IDBKeyRange.only(t),l=y(u.openKeyCursor(c,"next")).then((function(e){return e&&e.primaryKey[1]})),f=y(u.openKeyCursor(c,"prev")).then((function(e){return e&&e.primaryKey[1]})),e.next=8,(0,o.resolve)(s.default.all([l,f]));case 8:return p=e.sent,h=(0,a.default)(p,2),v=h[0],g=h[1],_=this.db.transaction(["oob_membership_events"],"readwrite"),b=_.objectStore("oob_membership_events"),k=IDBKeyRange.bound([t,v],[t,g]),d.default.log("LL: Deleting all users + marker in storage for room "+t+", with key range:",[t,v],[t,g]),e.next=18,(0,o.resolve)(m(b.delete(k)));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),clearDatabase:function(){var e=this;return new s.default((function(t,n){d.default.log("Removing indexeddb instance: "+e._dbName);var r=e.indexedDB.deleteDatabase(e._dbName);r.onblocked=function(){d.default.log("can't yet delete indexeddb "+e._dbName+" because it is open elsewhere")},r.onerror=function(e){d.default.warn("unable to delete js-sdk store indexeddb: "+e.target.error),t()},r.onsuccess=function(){d.default.log("Removed indexeddb instance: "+e._dbName),t()}}))},getSavedSync:function(e){void 0===e&&(e=!0);var t=this._syncAccumulator.getJSON();return t.nextBatch?e?s.default.resolve(c.default.deepCopy(t)):s.default.resolve(t):s.default.resolve(null)},getNextBatchToken:function(){return s.default.resolve(this._syncAccumulator.getNextBatchToken())},setSyncData:function(e){var t=this;return s.default.resolve().then((function(){t._syncAccumulator.accumulate(e)}))},syncToDatabase:function(e){var t=this._syncAccumulator.getJSON();return s.default.all([this._persistUserPresenceEvents(e),this._persistAccountData(t.accountData),this._persistSyncData(t.nextBatch,t.roomsData,t.groupsData)])},_persistSyncData:function(e,t,n){var r=this;return d.default.log("Persisting sync data up to ",e),s.default.try((function(){var i=r.db.transaction(["sync"],"readwrite");return i.objectStore("sync").put({clobber:"-",nextBatch:e,roomsData:t,groupsData:n}),h(i)}))},_persistAccountData:function(e){var t=this;return s.default.try((function(){for(var n=t.db.transaction(["accountData"],"readwrite"),r=n.objectStore("accountData"),i=0;i<e.length;i++)r.put(e[i]);return h(n)}))},_persistUserPresenceEvents:function(e){var t=this;return s.default.try((function(){var n=t.db.transaction(["users"],"readwrite"),i=n.objectStore("users"),o=!0,s=!1,a=void 0;try{for(var u,c=(0,r.default)(e);!(o=(u=c.next()).done);o=!0){var l=u.value;i.put({userId:l[0],event:l[1]})}}catch(d){s=!0,a=d}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return h(n)}))},getUserPresenceEvents:function(){var e=this;return s.default.try((function(){return p(e.db.transaction(["users"],"readonly").objectStore("users"),void 0,(function(e){return[e.value.userId,e.value.event]}))}))},_loadAccountData:function(){var e=this;return d.default.log("LocalIndexedDBStoreBackend: loading account data..."),s.default.try((function(){return p(e.db.transaction(["accountData"],"readonly").objectStore("accountData"),void 0,(function(e){return e.value})).then((function(e){return d.default.log("LocalIndexedDBStoreBackend: loaded account data"),e}))}))},_loadSyncData:function(){var e=this;return d.default.log("LocalIndexedDBStoreBackend: loading sync data..."),s.default.try((function(){return p(e.db.transaction(["sync"],"readonly").objectStore("sync"),void 0,(function(e){return e.value})).then((function(e){return d.default.log("LocalIndexedDBStoreBackend: loaded sync data"),e.length>1&&d.default.warn("loadSyncData: More than 1 sync row found."),e.length>0?e[0]:{}}))}))},getClientOptions:function(){var e=this;return s.default.resolve().then((function(){return p(e.db.transaction(["client_options"],"readonly").objectStore("client_options"),void 0,(function(e){if(e.value&&e.value&&e.value.options)return e.value.options})).then((function(e){return e[0]}))}))},storeClientOptions:function(){var e=(0,o.coroutine)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.db.transaction(["client_options"],"readwrite"),n.objectStore("client_options").put({clobber:"-",options:t}),e.next=5,(0,o.resolve)(h(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},t.default=g},function(e,t,n){n(199),e.exports=n(4).Object.keys},function(e,t,n){var r=n(34),i=n(42);n(86)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(201);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(7);r(r.S+r.F*!n(17),"Object",{defineProperty:n(20).f})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),i=s(n(3)),o=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){this._workerScript=e,this._dbName=t,this._workerApi=n,this._worker=null,this._nextSeq=0,this._inFlight={},this._startPromise=null};a.prototype={connect:function(){var e=this;return this._ensureStarted().then((function(){return e._doCmd("connect")}))},clearDatabase:function(){var e=this;return this._ensureStarted().then((function(){return e._doCmd("clearDatabase")}))},isNewlyCreated:function(){return this._doCmd("isNewlyCreated")},getSavedSync:function(){return this._doCmd("getSavedSync")},getNextBatchToken:function(){return this._doCmd("getNextBatchToken")},setSyncData:function(e){return this._doCmd("setSyncData",[e])},syncToDatabase:function(e){return this._doCmd("syncToDatabase",[e])},getOutOfBandMembers:function(e){return this._doCmd("getOutOfBandMembers",[e])},setOutOfBandMembers:function(e,t){return this._doCmd("setOutOfBandMembers",[e,t])},clearOutOfBandMembers:function(e){return this._doCmd("clearOutOfBandMembers",[e])},getClientOptions:function(){return this._doCmd("getClientOptions")},storeClientOptions:function(e){return this._doCmd("storeClientOptions",[e])},getUserPresenceEvents:function(){return this._doCmd("getUserPresenceEvents")},_ensureStarted:function(){return null===this._startPromise&&(this._worker=new this._workerApi(this._workerScript),this._worker.onmessage=this._onWorkerMessage.bind(this),this._startPromise=this._doCmd("_setupWorker",[this._dbName]).then((function(){i.default.log("IndexedDB worker is ready")}))),this._startPromise},_doCmd:function(e,t){var n=this;return r.default.resolve().then((function(){var r=n._nextSeq++,i=(0,o.defer)();return n._inFlight[r]=i,n._worker.postMessage({command:e,seq:r,args:t}),i.promise}))},_onWorkerMessage:function(e){var t=e.data;if("cmd_success"==t.command||"cmd_fail"==t.command){if(void 0===t.seq)return void i.default.error("Got reply from worker with no seq");var n=this._inFlight[t.seq];if(void 0===n)return void i.default.error("Got reply for unknown seq "+t.seq);if(delete this._inFlight[t.seq],"cmd_success"==t.command)n.resolve(t.result);else{var r=new Error(t.error.message);r.name=t.error.name,n.reject(r)}}else i.default.warn("Unrecognised message from worker: "+t)}},t.default=a},function(e,t,n){"use strict";var r=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,i=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,s=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,u=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function c(e){var t=String(e);if(o.test(t))return t;if(t.length>0&&!i.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(a,"\\$1")+'"'}function l(e){this.parameters=Object.create(null),this.type=e}t.format=function(e){if(!e||"object"!==typeof e)throw new TypeError("argument obj is required");var t=e.parameters,n=e.type;if(!n||!u.test(n))throw new TypeError("invalid type");var r=n;if(t&&"object"===typeof t)for(var i,s=Object.keys(t).sort(),a=0;a<s.length;a++){if(i=s[a],!o.test(i))throw new TypeError("invalid parameter name");r+="; "+i+"="+c(t[i])}return r},t.parse=function(e){if(!e)throw new TypeError("argument string is required");var t="object"===typeof e?function(e){var t;"function"===typeof e.getHeader?t=e.getHeader("content-type"):"object"===typeof e.headers&&(t=e.headers&&e.headers["content-type"]);if("string"!==typeof t)throw new TypeError("content-type header is missing from object");return t}(e):e;if("string"!==typeof t)throw new TypeError("argument string is required to be a string");var n=t.indexOf(";"),i=-1!==n?t.substr(0,n).trim():t.trim();if(!u.test(i))throw new TypeError("invalid media type");var o=new l(i.toLowerCase());if(-1!==n){var a,c,d;for(r.lastIndex=n;c=r.exec(t);){if(c.index!==n)throw new TypeError("invalid parameter format");n+=c[0].length,a=c[1].toLowerCase(),'"'===(d=c[2])[0]&&(d=d.substr(1,d.length-2).replace(s,"$1")),o.parameters[a]=d}if(n!==t.length)throw new TypeError("invalid parameter format")}return o}},function(e,t,n){"use strict";(function(t){var r,i=n(3),o=(r=i)&&r.__esModule?r:{default:r};var s=0,a=void 0,u=[];e.exports.setNow=function(e){c=e||Date.now};var c=Date.now;function l(){a&&t.clearTimeout(a);var e=u[0];if(e){var n=c(),r=Math.min(e.runAt-n,1e3);a=t.setTimeout(d,r)}}function d(){for(var e=void 0,n=c(),r=[];;){var i=u[0];if(!i||i.runAt>n)break;(e=u.shift()).key,r.push(e)}l();for(var s=0;s<r.length;s++){e=r[s];try{e.func.apply(t,e.params)}catch(a){o.default.error("Uncaught exception in callback function",a.stack||a)}}}function f(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>1;t(e[i])>0?r=i:n=i+1}return n}e.exports.setTimeout=function(e,t){(t=t||0)<0&&(t=0);var n=Array.prototype.slice.call(arguments,2),r=c()+t,i=s++,o={runAt:r,func:e,params:n,key:i},a=f(u,(function(e){return e.runAt-r}));return u.splice(a,0,o),l(),i},e.exports.clearTimeout=function(e){if(0!==u.length){var t=void 0;for(t=0;t<u.length;t++){if(u[t].key==e){u.splice(t,1);break}}0===t&&l()}}}).call(this,n(6))},function(e,t,n){e.exports={default:n(206),__esModule:!0}},function(e,t,n){n(207),e.exports=n(4).Reflect.getPrototypeOf},function(e,t,n){var r=n(7),i=n(81),o=n(16);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){e.exports={default:n(209),__esModule:!0}},function(e,t,n){n(210),e.exports=n(4).Reflect.setPrototypeOf},function(e,t,n){var r=n(7),i=n(118);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(n){return!1}}})},function(e,t,n){e.exports={default:n(212),__esModule:!0}},function(e,t,n){n(213),e.exports=n(4).Reflect.construct},function(e,t,n){var r=n(7),i=n(48),o=n(29),s=n(16),a=n(14),u=n(28),c=n(214),l=(n(11).Reflect||{}).construct,d=u((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),f=!u((function(){l((function(){}))}));r(r.S+r.F*(d||f),"Reflect",{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!d)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,p=i(a(u)?u:Object.prototype),h=Function.apply.call(e,p,t);return a(h)?h:p}})},function(e,t,n){"use strict";var r=n(29),i=n(14),o=n(122),s=[].slice,a={},u=function(e,t,n){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("F,a","return new F("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=s.call(arguments,1),a=function r(){var i=n.concat(s.call(arguments));return this instanceof r?u(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,n){n(63),n(33),n(44),n(216),n(220),n(222),n(223),e.exports=n(4).Set},function(e,t,n){"use strict";var r=n(124),i=n(90);e.exports=n(128)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(23),i=n(74),o=n(34),s=n(60),a=n(218);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,d=6==e,f=5==e||d,p=t||a;return function(t,a,h){for(var v,m,y=o(t),g=i(y),_=r(a,h,3),b=s(g.length),k=0,w=n?p(t,b):u?p(t,0):void 0;b>k;k++)if((f||k in g)&&(m=_(v=g[k],k,y),e))if(n)w[k]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return k;case 2:w.push(v)}else if(l)return!1;return d?-1:c||l?l:w}}},function(e,t,n){var r=n(219);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(14),i=n(112),o=n(15)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(7);r(r.P+r.R,"Set",{toJSON:n(129)("Set")})},function(e,t,n){var r=n(54);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(130)("Set")},function(e,t,n){n(131)("Set")},function(e,t,n){n(225),e.exports=n(4).Object.entries},function(e,t,n){var r=n(7),i=n(132)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(8)),i=n(1),o=u(n(10)),s=u(n(12)),a=u(n(55));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){(0,o.default)(this,e),this._cryptoStore=t,this._roomEncryption={}}return(0,s.default)(e,[{key:"init",value:function(){var e=(0,i.coroutine)(r.default.mark((function e(){var t=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.resolve)(this._cryptoStore.doTxn("readwrite",[a.default.STORE_ROOMS],(function(e){t._cryptoStore.getEndToEndRooms(e,(function(e){t._roomEncryption=e}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoomEncryption",value:function(e){return this._roomEncryption[e]||null}},{key:"isRoomEncrypted",value:function(e){return Boolean(this.getRoomEncryption(e))}},{key:"setRoomEncryption",value:function(){var e=(0,i.coroutine)(r.default.mark((function e(t,n){var o=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._roomEncryption[t]=n,e.next=3,(0,i.resolve)(this._cryptoStore.doTxn("readwrite",[a.default.STORE_ROOMS],(function(e){o._cryptoStore.storeEndToEndRoom(t,n,e)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(21)),i=y(n(9)),o=y(n(67)),s=y(n(18)),a=y(n(45)),u=y(n(5)),c=y(n(24)),l=y(n(10)),d=y(n(12)),f=y(n(25)),p=y(n(26)),h=y(n(1)),v=y(n(3)),m=y(n(92));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){return"crypto.sessions/"+e}function _(e,t){return"crypto.inboundgroupsessions/"+e+"/"+t}function b(e){return"crypto.rooms/"+e}var k=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return n.store=e,n}return(0,p.default)(t,e),(0,d.default)(t,[{key:"countEndToEndSessions",value:function(e,t){for(var n=0,r=0;r<this.store.length;++r)this.store.key(r).startsWith(g(""))&&++n;t(n)}},{key:"_getEndToEndSessions",value:function(e,t,n){var r=w(this.store,g(e)),i={},o=!0,c=!1,l=void 0;try{for(var d,f=(0,u.default)((0,a.default)(r||{}));!(o=(d=f.next()).done);o=!0){var p=(0,s.default)(d.value,2),h=p[0],v=p[1];i[h]="string"===typeof v?{session:v}:v}}catch(m){c=!0,l=m}finally{try{!o&&f.return&&f.return()}finally{if(c)throw l}}return i}},{key:"getEndToEndSession",value:function(e,t,n,r){r(this._getEndToEndSessions(e)[t]||{})}},{key:"getEndToEndSessions",value:function(e,t,n){n(this._getEndToEndSessions(e)||{})}},{key:"getAllEndToEndSessions",value:function(e,t){for(var n=0;n<this.store.length;++n)if(this.store.key(n).startsWith(g(""))){var r=this.store.key(n).split("/")[1],i=!0,s=!1,a=void 0;try{for(var c,l=(0,u.default)((0,o.default)(this._getEndToEndSessions(r)));!(i=(c=l.next()).done);i=!0){t(c.value)}}catch(d){s=!0,a=d}finally{try{!i&&l.return&&l.return()}finally{if(s)throw a}}}}},{key:"storeEndToEndSession",value:function(e,t,n,r){var i=this._getEndToEndSessions(e)||{};i[t]=n,E(this.store,g(e),i)}},{key:"getEndToEndInboundGroupSession",value:function(e,t,n,r){r(w(this.store,_(e,t)))}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){for(var n=0;n<this.store.length;++n){var r=this.store.key(n);r.startsWith("crypto.inboundgroupsessions/")&&t({senderKey:r.substr("crypto.inboundgroupsessions/".length,43),sessionId:r.substr("crypto.inboundgroupsessions/".length+44),sessionData:w(this.store,r)})}t(null)}},{key:"addEndToEndInboundGroupSession",value:function(e,t,n,r){w(this.store,_(e,t))||this.storeEndToEndInboundGroupSession(e,t,n,r)}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,n,r){E(this.store,_(e,t),n)}},{key:"getEndToEndDeviceData",value:function(e,t){t(w(this.store,"crypto.device_data"))}},{key:"storeEndToEndDeviceData",value:function(e,t){E(this.store,"crypto.device_data",e)}},{key:"storeEndToEndRoom",value:function(e,t,n){E(this.store,b(e),t)}},{key:"getEndToEndRooms",value:function(e,t){for(var n={},r=b(""),i=0;i<this.store.length;++i){var o=this.store.key(i);if(o.startsWith(r))n[o.substr(r.length)]=w(this.store,o)}t(n)}},{key:"getSessionsNeedingBackup",value:function(e){var t=this,n=w(this.store,"crypto.sessionsneedingbackup")||{},r=[];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i))if("break"===function(){var n=i.substr(0,43),o=i.substr(44);if(t.getEndToEndInboundGroupSession(n,o,null,(function(e){r.push({senderKey:n,sessionId:o,sessionData:e})})),e&&i.length>=e)return"break"}())break}return h.default.resolve(r)}},{key:"countSessionsNeedingBackup",value:function(){var e=w(this.store,"crypto.sessionsneedingbackup")||{};return h.default.resolve((0,i.default)(e).length)}},{key:"unmarkSessionsNeedingBackup",value:function(e){var t=w(this.store,"crypto.sessionsneedingbackup")||{},n=!0,r=!1,i=void 0;try{for(var o,s=(0,u.default)(e);!(n=(o=s.next()).done);n=!0){var a=o.value;delete t[a.senderKey+"/"+a.sessionId]}}catch(c){r=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return E(this.store,"crypto.sessionsneedingbackup",t),h.default.resolve()}},{key:"markSessionsNeedingBackup",value:function(e){var t=w(this.store,"crypto.sessionsneedingbackup")||{},n=!0,r=!1,i=void 0;try{for(var o,s=(0,u.default)(e);!(n=(o=s.next()).done);n=!0){var a=o.value;t[a.senderKey+"/"+a.sessionId]=!0}}catch(c){r=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return E(this.store,"crypto.sessionsneedingbackup",t),h.default.resolve()}},{key:"deleteAllData",value:function(){return this.store.removeItem("crypto.account"),h.default.resolve()}},{key:"getAccount",value:function(e,t){t(w(this.store,"crypto.account"))}},{key:"storeAccount",value:function(e,t){E(this.store,"crypto.account",t)}},{key:"getCrossSigningKeys",value:function(e,t){t(w(this.store,"crypto.cross_signing_keys"))}},{key:"storeCrossSigningKeys",value:function(e,t){E(this.store,"crypto.cross_signing_keys",t)}},{key:"doTxn",value:function(e,t,n){return h.default.resolve(n(null))}}],[{key:"exists",value:function(e){for(var t=e.length,n=0;n<t;n++)if(e.key(n).startsWith("crypto."))return!0;return!1}}]),t}(m.default);function w(e,t){try{return JSON.parse(e.getItem(t))}catch(n){v.default.log("Error: Failed to get key %s: %s",t,n.stack||n),v.default.log(n.stack)}return null}function E(e,t,n){e.setItem(t,(0,r.default)(n))}t.default=k},function(e,t,n){n(229),e.exports=n(4).Object.values},function(e,t,n){var r=n(7),i=n(132)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(231),e.exports=n(4).Object.getPrototypeOf},function(e,t,n){var r=n(34),i=n(81);n(86)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backend=t.VERSION=void 0;var r=c(n(22)),i=c(n(10)),o=c(n(12));t.upgradeDatabase=function(e,t){a.default.log("Upgrading IndexedDBCryptoStore from version "+t+" to "+l),t<1&&function(e){var t=e.createObjectStore("outgoingRoomKeyRequests",{keyPath:"requestId"});t.createIndex("session",["requestBody.room_id","requestBody.session_id"]),t.createIndex("state","state")}(e);t<2&&e.createObjectStore("account");if(t<3){e.createObjectStore("sessions",{keyPath:["deviceKey","sessionId"]}).createIndex("deviceKey","deviceKey")}t<4&&e.createObjectStore("inbound_group_sessions",{keyPath:["senderCurve25519Key","sessionId"]});t<5&&e.createObjectStore("device_data");t<6&&e.createObjectStore("rooms");t<7&&e.createObjectStore("sessions_needing_backup",{keyPath:["senderCurve25519Key","sessionId"]})};var s=c(n(1)),a=c(n(3)),u=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var l=t.VERSION=7;t.Backend=function(){function e(t){var n=this;(0,i.default)(this,e),this._db=t,t.onversionchange=function(e){a.default.log("versionchange for indexeddb "+n._dbName+": closing"),t.close()}}return(0,o.default)(e,[{key:"getOrAddOutgoingRoomKeyRequest",value:function(e){var t=this,n=e.requestBody;return new s.default((function(r,i){var o=t._db.transaction("outgoingRoomKeyRequests","readwrite");o.onerror=i,t._getOutgoingRoomKeyRequest(o,n,(function(t){if(t)return a.default.log("already have key request outstanding for "+n.room_id+" / "+n.session_id+": not sending another"),void r(t);a.default.log("enqueueing key request for "+n.room_id+" / "+n.session_id),o.oncomplete=function(){r(e)},o.objectStore("outgoingRoomKeyRequests").add(e)}))}))}},{key:"getOutgoingRoomKeyRequest",value:function(e){var t=this;return new s.default((function(n,r){var i=t._db.transaction("outgoingRoomKeyRequests","readonly");i.onerror=r,t._getOutgoingRoomKeyRequest(i,e,(function(e){n(e)}))}))}},{key:"_getOutgoingRoomKeyRequest",value:function(e,t,n){e.objectStore("outgoingRoomKeyRequests").index("session").openCursor([t.room_id,t.session_id]).onsuccess=function(e){var r=e.target.result;if(r){var i=r.value;u.default.deepCompare(i.requestBody,t)?n(i):r.continue()}else n(null)}}},{key:"getOutgoingRoomKeyRequestByState",value:function(e){if(0===e.length)return s.default.resolve(null);var t=0,n=void 0;var r=this._db.transaction("outgoingRoomKeyRequests","readonly"),i=r.objectStore("outgoingRoomKeyRequests"),o=e[t];return i.index("state").openCursor(o).onsuccess=function r(i){var o=i.target.result;if(o)n=o.value;else if(!(++t>=e.length)){var s=e[t];i.target.source.openCursor(s).onsuccess=r}},f(r).then((function(){return n}))}},{key:"getOutgoingRoomKeyRequestsByTarget",value:function(e,t,n){var r=0,i=[];var o=this._db.transaction("outgoingRoomKeyRequests","readonly"),s=o.objectStore("outgoingRoomKeyRequests"),a=n[r];return s.index("state").openCursor(a).onsuccess=function o(s){var a=s.target.result;if(a){var u=a.value;u.recipients.includes({userId:e,deviceId:t})&&i.push(u),a.continue()}else{if(++r>=n.length)return;var c=n[r];s.target.source.openCursor(c).onsuccess=o}},f(o).then((function(){return i}))}},{key:"updateOutgoingRoomKeyRequest",value:function(e,t,n){var i=null;var o=this._db.transaction("outgoingRoomKeyRequests","readwrite");return o.objectStore("outgoingRoomKeyRequests").openCursor(e).onsuccess=function(e){var o=e.target.result;if(o){var s=o.value;s.state==t?((0,r.default)(s,n),o.update(s),i=s):a.default.warn("Cannot update room key request from "+t+" as it was already updated to "+s.state)}},f(o).then((function(){return i}))}},{key:"deleteOutgoingRoomKeyRequest",value:function(e,t){var n=this._db.transaction("outgoingRoomKeyRequests","readwrite");return n.objectStore("outgoingRoomKeyRequests").openCursor(e).onsuccess=function(e){var n=e.target.result;if(n){var r=n.value;r.state==t?n.delete():a.default.warn("Cannot delete room key request in state "+r.state+" (expected "+t+")")}},f(n)}},{key:"getAccount",value:function(e,t){var n=e.objectStore("account").get("-");n.onsuccess=function(){try{t(n.result||null)}catch(r){d(e,r)}}}},{key:"storeAccount",value:function(e,t){e.objectStore("account").put(t,"-")}},{key:"getCrossSigningKeys",value:function(e,t){var n=e.objectStore("account").get("crossSigningKeys");n.onsuccess=function(){try{t(n.result||null)}catch(r){d(e,r)}}}},{key:"storeCrossSigningKeys",value:function(e,t){e.objectStore("account").put(t,"crossSigningKeys")}},{key:"countEndToEndSessions",value:function(e,t){var n=e.objectStore("sessions").count();n.onsuccess=function(){t(n.result)}}},{key:"getEndToEndSessions",value:function(e,t,n){var r=t.objectStore("sessions").index("deviceKey").openCursor(e),i={};r.onsuccess=function(){var e=r.result;if(e)i[e.value.sessionId]={session:e.value.session,lastReceivedMessageTs:e.value.lastReceivedMessageTs},e.continue();else try{n(i)}catch(o){d(t,o)}}}},{key:"getEndToEndSession",value:function(e,t,n,r){var i=n.objectStore("sessions").get([e,t]);i.onsuccess=function(){try{i.result?r({session:i.result.session,lastReceivedMessageTs:i.result.lastReceivedMessageTs}):r(null)}catch(e){d(n,e)}}}},{key:"getAllEndToEndSessions",value:function(e,t){var n=e.objectStore("sessions").openCursor();n.onsuccess=function(){var r=n.result;if(r)t(r.value),r.continue();else try{t(null)}catch(i){d(e,i)}}}},{key:"storeEndToEndSession",value:function(e,t,n,r){r.objectStore("sessions").put({deviceKey:e,sessionId:t,session:n.session,lastReceivedMessageTs:n.lastReceivedMessageTs})}},{key:"getEndToEndInboundGroupSession",value:function(e,t,n,r){var i=n.objectStore("inbound_group_sessions").get([e,t]);i.onsuccess=function(){try{i.result?r(i.result.session):r(null)}catch(e){d(n,e)}}}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){var n=e.objectStore("inbound_group_sessions").openCursor();n.onsuccess=function(){var r=n.result;if(r){try{t({senderKey:r.value.senderCurve25519Key,sessionId:r.value.sessionId,sessionData:r.value.session})}catch(i){d(e,i)}r.continue()}else try{t(null)}catch(i){d(e,i)}}}},{key:"addEndToEndInboundGroupSession",value:function(e,t,n,r){var i=r.objectStore("inbound_group_sessions").add({senderCurve25519Key:e,sessionId:t,session:n});i.onerror=function(n){"ConstraintError"===i.error.name?(n.stopPropagation(),n.preventDefault(),a.default.log("Ignoring duplicate inbound group session: "+e+" / "+t)):d(r,new Error("Failed to add inbound group session: "+i.error))}}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,n,r){r.objectStore("inbound_group_sessions").put({senderCurve25519Key:e,sessionId:t,session:n})}},{key:"getEndToEndDeviceData",value:function(e,t){var n=e.objectStore("device_data").get("-");n.onsuccess=function(){try{t(n.result||null)}catch(r){d(e,r)}}}},{key:"storeEndToEndDeviceData",value:function(e,t){t.objectStore("device_data").put(e,"-")}},{key:"storeEndToEndRoom",value:function(e,t,n){n.objectStore("rooms").put(t,e)}},{key:"getEndToEndRooms",value:function(e,t){var n={},r=e.objectStore("rooms").openCursor();r.onsuccess=function(){var i=r.result;if(i)n[i.key]=i.value,i.continue();else try{t(n)}catch(o){d(e,o)}}}},{key:"getSessionsNeedingBackup",value:function(e){var t=this;return new s.default((function(n,r){var i=[],o=t._db.transaction(["sessions_needing_backup","inbound_group_sessions"],"readonly");o.onerror=r,o.oncomplete=function(){n(i)};var s=o.objectStore("sessions_needing_backup"),a=o.objectStore("inbound_group_sessions"),u=s.openCursor();u.onsuccess=function(){var t=u.result;if(t){var n=a.get(t.key);n.onsuccess=function(){i.push({senderKey:n.result.senderCurve25519Key,sessionId:n.result.sessionId,sessionData:n.result.session})},(!e||i.length<e)&&t.continue()}}}))}},{key:"countSessionsNeedingBackup",value:function(e){e||(e=this._db.transaction("sessions_needing_backup","readonly"));var t=e.objectStore("sessions_needing_backup");return new s.default((function(e,n){var r=t.count();r.onerror=n,r.onsuccess=function(){return e(r.result)}}))}},{key:"unmarkSessionsNeedingBackup",value:function(e,t){t||(t=this._db.transaction("sessions_needing_backup","readwrite"));var n=t.objectStore("sessions_needing_backup");return s.default.all(e.map((function(e){return new s.default((function(t,r){var i=n.delete([e.senderKey,e.sessionId]);i.onsuccess=t,i.onerror=r}))})))}},{key:"markSessionsNeedingBackup",value:function(e,t){t||(t=this._db.transaction("sessions_needing_backup","readwrite"));var n=t.objectStore("sessions_needing_backup");return s.default.all(e.map((function(e){return new s.default((function(t,r){var i=n.put({senderCurve25519Key:e.senderKey,sessionId:e.sessionId});i.onsuccess=t,i.onerror=r}))})))}},{key:"doTxn",value:function(e,t,n){var r=this._db.transaction(t,e),i=f(r),o=n(r);return i.then((function(){return o}))}}]),e}();function d(e,t){e._mx_abortexception=t;try{e.abort()}catch(t){}}function f(e){return new s.default((function(t,n){e.oncomplete=function(){void 0!==e._mx_abortexception&&n(e._mx_abortexception),t()},e.onerror=function(t){void 0!==e._mx_abortexception?n(e._mx_abortexception):(a.default.log("Error performing indexeddb txn",t),n(t.target.error))},e.onabort=function(t){void 0!==e._mx_abortexception?n(e._mx_abortexception):(a.default.log("Error performing indexeddb txn",t),n(t.target.error))}}))}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.verificationMethods=void 0;var r,i=A(n(10)),o=A(n(53)),s=n(1),a=A(s),u=A(n(21)),c=A(n(93)),l=A(n(22)),d=A(n(18)),f=A(n(45)),p=A(n(9)),h=A(n(8)),v=A(n(5)),m=A(n(238)),y=A(n(56)),g=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o,u,c;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.resolve)(t._olmDevice.getOneTimeKeys());case 2:for(o in n=e.sent,r={},i=[],n.curve25519)n.curve25519.hasOwnProperty(o)&&(u={key:n.curve25519[o]},r["signed_curve25519:"+o]=u,i.push(t._signObject(u)));return e.next=8,(0,s.resolve)(a.default.all(i));case 8:return e.next=10,(0,s.resolve)(t._baseApis.uploadKeysRequest({one_time_keys:r},{device_id:t._deviceId}));case 10:return c=e.sent,e.next=13,(0,s.resolve)(t._olmDevice.markKeysAsPublished());case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();t.isCryptoAvailable=function(){return Boolean(e.Olm)},t.default=B;var _=n(13),b=A(n(91)),k=A(n(3)),w=n(68),E=n(134),S=A(n(244)),x=A(n(257)),T=A(n(55)),R=n(258),I=A(n(259)),C=n(70),O=n(2);function A(e){return e&&e.__esModule?e:{default:e}}var D=n(94),P=n(2),M=n(260),U=n(35),N=n(261),L=n(69),F=L.DeviceVerification,j=n(264).default,K=(r={},(0,y.default)(r,R.ScanQRCode.NAME,R.ScanQRCode),(0,y.default)(r,R.ShowQRCode.NAME,R.ShowQRCode),(0,y.default)(r,I.default.NAME,I.default),r);t.verificationMethods={QR_CODE_SCAN:R.ScanQRCode.NAME,QR_CODE_SHOW:R.ShowQRCode.NAME,SAS:I.default.NAME};function q(e,t,n){var r=!1;t&&(r=e.isRoomEncrypted(t)),r&&e.on("Event.decrypted",n),e.on("event",n);var i=!0;return function(){return i&&(r&&e.off("Event.decrypted",n),e.off("event",n),i=!1),null}}function B(e,t,n,r,i,o,s,a){if(this._onDeviceListUserCrossSigningUpdated=this._onDeviceListUserCrossSigningUpdated.bind(this),this._reEmitter=new b.default(this),this._baseApis=e,this._sessionStore=t,this._userId=n,this._deviceId=r,this._clientStore=i,this._cryptoStore=o,this._roomList=s,this._verificationMethods=new m.default,a){var u=!0,c=!1,l=void 0;try{for(var d,f=(0,v.default)(a);!(u=(d=f.next()).done);u=!0){var p=d.value;"string"===typeof p?K[p]&&this._verificationMethods.set(p,K[p]):p.NAME&&this._verificationMethods.set(p.NAME,p)}}catch(h){c=!0,l=h}finally{try{!u&&f.return&&f.return()}finally{if(c)throw l}}}this.backupInfo=null,this.backupKey=null,this._checkedForBackup=!1,this._sendingBackups=!1,this._olmDevice=new M(o),this._deviceList=new j(e,o,this._olmDevice),this._deviceList.on("userCrossSigningUpdated",this._onDeviceListUserCrossSigningUpdated),this._reEmitter.reEmit(this._deviceList,["crypto.devicesUpdated"]),this._lastOneTimeKeyCheck=null,this._oneTimeKeyCheckInProgress=!1,this._roomEncryptors={},this._roomDecryptors={},this._supportedAlgorithms=P.keys(N.DECRYPTION_CLASSES),this._deviceKeys={},this._globalBlacklistUnverifiedDevices=!1,this._outgoingRoomKeyRequestManager=new x.default(e,this._deviceId,this._cryptoStore),this._receivedRoomKeyRequests=[],this._receivedRoomKeyRequestCancellations=[],this._processingRoomKeyRequests=!1,this._lazyLoadMembers=!1,this._roomDeviceTrackingState={},this._lastNewSessionForced={},this._verificationTransactions=new m.default,this._crossSigningInfo=new E.CrossSigningInfo(n,this._baseApis._cryptoCallbacks),this._secretStorage=new S.default(e,this._baseApis._cryptoCallbacks,this._crossSigningInfo)}function V(e){if(!e._oneTimeKeyCheckInProgress){var t=Date.now();if(!(null!==e._lastOneTimeKeyCheck&&t-e._lastOneTimeKeyCheck<6e4)){e._lastOneTimeKeyCheck=t;var n=e._olmDevice.maxNumberOfOneTimeKeys(),r=Math.floor(n/2);e._oneTimeKeyCheckInProgress=!0,a.default.resolve().then((function(){return void 0!==e._oneTimeKeyCount?a.default.resolve(e._oneTimeKeyCount):e._baseApis.uploadKeysRequest({},{device_id:e._deviceId}).then((function(e){return e.one_time_key_counts.signed_curve25519||0}))})).then((function(t){return function t(n){if(r<=n)return a.default.resolve();var i=Math.min(r-n,5);return e._olmDevice.generateOneTimeKeys(i).then((function(){return g(e)})).then((function(e){if(e.one_time_key_counts&&e.one_time_key_counts.signed_curve25519)return t(e.one_time_key_counts.signed_curve25519);throw new Error("response for uploading keys does not contain one_time_key_counts.signed_curve25519")}))}(t)})).catch((function(e){k.default.error("Error uploading one-time keys",e.stack||e)})).finally((function(){e._oneTimeKeyCount=void 0,e._oneTimeKeyCheckInProgress=!1})).done()}}}function G(e,t,n,r){return function(i){if(i.getRoomId()===n&&i.getSender()===t&&"m.room.encrypted"!==i.getType()){var o=i.getRelation();o&&o.rel_type&&"m.reference"===o.rel_type&&o.event_id&&o.event_id===r&&e.handleEvent(i)}}}P.inherits(B,_.EventEmitter),B.prototype.init=(0,s.coroutine)(h.default.mark((function t(){var n,r,i=this;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k.default.log("Crypto: initialising Olm..."),t.next=3,(0,s.resolve)(e.Olm.init());case 3:return k.default.log("Crypto: initialising Olm device..."),t.next=6,(0,s.resolve)(this._olmDevice.init());case 6:return k.default.log("Crypto: loading device list..."),t.next=9,(0,s.resolve)(this._deviceList.load());case 9:return this._deviceKeys["ed25519:"+this._deviceId]=this._olmDevice.deviceEd25519Key,this._deviceKeys["curve25519:"+this._deviceId]=this._olmDevice.deviceCurve25519Key,k.default.log("Crypto: fetching own devices..."),(n=this._deviceList.getRawStoredDevicesForUser(this._userId))||(n={}),n[this._deviceId]||(k.default.log("Crypto: adding this device to the store..."),r={keys:this._deviceKeys,algorithms:this._supportedAlgorithms,verified:F.VERIFIED,known:!0},n[this._deviceId]=r,this._deviceList.storeDevicesForUser(this._userId,n),this._deviceList.saveIfDirty()),t.next=17,(0,s.resolve)(this._cryptoStore.doTxn("readonly",[T.default.STORE_ACCOUNT],(function(e){i._cryptoStore.getCrossSigningKeys(e,(function(e){e&&i._crossSigningInfo.setKeys(e)}))})));case 17:this._deviceList.startTrackingDeviceList(this._userId),k.default.log("Crypto: checking for key backup..."),this._checkAndStartKeyBackup();case 20:case"end":return t.stop()}}),t,this)}))),B.prototype.addSecretKey=function(e,t,n){return this._secretStorage.addKey(e,t,n)},B.prototype.storeSecret=function(e,t,n){return this._secretStorage.store(e,t,n)},B.prototype.getSecret=function(e){return this._secretStorage.get(e)},B.prototype.isSecretStored=function(e,t){return this._secretStorage.isStored(e,t)},B.prototype.requestSecret=function(e,t){return t||(t=(0,p.default)(this._deviceList.getRawStoredDevicesForUser(this._userId))),this._secretStorage.request(e,t)},B.prototype.getDefaultSecretStorageKeyId=function(){return this._secretStorage.getDefaultKeyId()},B.prototype.setDefaultSecretStorageKeyId=function(e){return this._secretStorage.setDefaultKeyId(e)},B.prototype.checkPrivateKey=function(t,n){var r=null;try{return(r=new e.Olm.PkSigning).init_with_seed(t)===n}finally{r&&r.free()}},B.prototype.doesCrossSigningHaveKeys=function(){return this._crossSigningInfo.hasKeys()},B.prototype.resetCrossSigningKeys=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n){var r,i,o,a,u,c,l,m,g,_,b,w,S,x,R,I,C,O,A,D,P,M,U,N,L,F,j,K,q,B=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.resolve)(this._crossSigningInfo.resetKeys(n));case 2:return e.next=4,(0,s.resolve)(this._signObject(this._crossSigningInfo.keys.master));case 4:return e.next=6,(0,s.resolve)(this._cryptoStore.doTxn("readwrite",[T.default.STORE_ACCOUNT],(function(e){B._cryptoStore.storeCrossSigningKeys(e,B._crossSigningInfo.keys)})));case 6:for(r={},i=!0,o=!1,a=void 0,e.prev=10,u=(0,v.default)((0,f.default)(this._crossSigningInfo.keys));!(i=(c=u.next()).done);i=!0)l=(0,d.default)(c.value,2),m=l[0],g=l[1],r[m+"_key"]=g;e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),o=!0,a=e.t0;case 18:e.prev=18,e.prev=19,!i&&u.return&&u.return();case 21:if(e.prev=21,!o){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.next=28,(0,s.resolve)(this._baseApis.uploadDeviceSigningKeys(t||{},r));case 28:return this._baseApis.emit("crossSigning.keysChanged",{}),_=this._deviceList.getStoredDevice(this._userId,this._deviceId),e.next=32,(0,s.resolve)(this._crossSigningInfo.signDevice(this._userId,_));case 32:return b=e.sent,e.next=35,(0,s.resolve)(this._baseApis.uploadKeySignatures((0,y.default)({},this._userId,(0,y.default)({},this._deviceId,b))));case 35:w={},S=!0,x=!1,R=void 0,e.prev=39,I=(0,v.default)((0,f.default)(this._deviceList._crossSigningInfo));case 41:if(S=(C=I.next()).done){e.next=50;break}return O=(0,d.default)(C.value,2),A=O[0],D=O[1],e.next=45,(0,s.resolve)(this._checkForDeviceVerificationUpgrade(A,E.CrossSigningInfo.fromStorage(D,A)));case 45:(P=e.sent)&&(w[A]=P);case 47:S=!0,e.next=41;break;case 50:e.next=56;break;case 52:e.prev=52,e.t1=e.catch(39),x=!0,R=e.t1;case 56:e.prev=56,e.prev=57,!S&&I.return&&I.return();case 59:if(e.prev=59,!x){e.next=62;break}throw R;case 62:return e.finish(59);case 63:return e.finish(56);case 64:if(M=this._baseApis._cryptoCallbacks.shouldUpgradeDeviceVerifications,!((0,p.default)(w).length>0&&M)){e.next=103;break}return e.prev=66,e.next=69,(0,s.resolve)(M({users:w}));case 69:if(!(U=e.sent)){e.next=98;break}N=!0,L=!1,F=void 0,e.prev=74,j=(0,v.default)(U);case 76:if(N=(K=j.next()).done){e.next=84;break}if(!((q=K.value)in w)){e.next=81;break}return e.next=81,(0,s.resolve)(this._baseApis.setDeviceVerified(q,w[q].crossSigningInfo.getId()));case 81:N=!0,e.next=76;break;case 84:e.next=90;break;case 86:e.prev=86,e.t2=e.catch(74),L=!0,F=e.t2;case 90:e.prev=90,e.prev=91,!N&&j.return&&j.return();case 93:if(e.prev=93,!L){e.next=96;break}throw F;case 96:return e.finish(93);case 97:return e.finish(90);case 98:e.next=103;break;case 100:e.prev=100,e.t3=e.catch(66),k.default.log("shouldUpgradeDeviceVerifications threw an error: not upgrading",e.t3);case 103:case"end":return e.stop()}}),e,this,[[10,14,18,26],[19,,21,25],[39,52,56,64],[57,,59,63],[66,100],[74,86,90,98],[91,,93,97]])})));return function(t,n){return e.apply(this,arguments)}}(),B.prototype._checkForDeviceVerificationUpgrade=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n){var r,i,o;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._crossSigningInfo.checkUserTrust(n),!n.firstUse||r.verified){e.next=8;break}return i=this._deviceList.getRawStoredDevicesForUser(t),e.next=5,(0,s.resolve)(this._checkForValidDeviceSignature(t,n.keys.master,i));case 5:if(!(o=e.sent).length){e.next=8;break}return e.abrupt("return",{devices:o.map((function(e){return L.fromStorage(i[e],e)})),crossSigningInfo:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),B.prototype._checkForValidDeviceSignature=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n,r){var i,o,a,u,c,l,f,m,y,g;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(r&&n.signatures&&n.signatures[t])){e.next=36;break}o=!0,a=!1,u=void 0,e.prev=5,c=(0,v.default)((0,p.default)(n.signatures[t]));case 7:if(o=(l=c.next()).done){e.next=22;break}if(f=l.value,m=f.split(":",2),y=(0,d.default)(m,2),!((g=y[1])in r)||r[g].verified!==F.VERIFIED){e.next=19;break}return e.prev=11,e.next=14,(0,s.resolve)(U.verifySignature(this._olmDevice,n,t,g,r[g].keys[f]));case 14:i.push(g),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(11);case 19:o=!0,e.next=7;break;case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(5),a=!0,u=e.t1;case 28:e.prev=28,e.prev=29,!o&&c.return&&c.return();case 31:if(e.prev=31,!a){e.next=34;break}throw u;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}}),e,this,[[5,24,28,36],[11,17],[29,,31,35]])})));return function(t,n,r){return e.apply(this,arguments)}}(),B.prototype.getCrossSigningId=function(e){return this._crossSigningInfo.getId(e)},B.prototype.getStoredCrossSigningForUser=function(e){return this._deviceList.getStoredCrossSigningForUser(e)},B.prototype.checkUserTrust=function(e){var t=this._deviceList.getStoredCrossSigningForUser(e);return t?this._crossSigningInfo.checkUserTrust(t):new E.UserTrustLevel(!1,!1)},B.prototype.checkDeviceTrust=function(e,t){var n=this._deviceList.getStoredDevice(e,t),r=n&&n.isVerified(),i=this._deviceList.getStoredCrossSigningForUser(e);return n&&i?this._crossSigningInfo.checkDeviceTrust(i,n,r):new E.DeviceTrustLevel(!1,!1,r)},B.prototype._onDeviceListUserCrossSigningUpdated=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this._userId){e.next=13;break}if(n=this._deviceList.getStoredCrossSigningForUser(t),r=n?n.getId():null,i=this._crossSigningInfo.getId(),o=i!==r,!i||!r||o){e.next=10;break}return e.next=8,(0,s.resolve)(this.checkOwnCrossSigningTrust());case 8:e.next=11;break;case 10:this.emit("crossSigning.keysChanged",{});case 11:e.next=16;break;case 13:return e.next=15,(0,s.resolve)(this._checkDeviceVerifications(t));case 15:this.emit("userTrustStatusChanged",t,this.checkUserTrust(t));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),B.prototype.checkOwnCrossSigningTrust=(0,s.coroutine)(h.default.mark((function e(){var t,n,r,i,o,a,u,c,l,d,f,v=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._userId,n=this._deviceList.getStoredCrossSigningForUser(t)){e.next=5;break}return k.default.error("Got cross-signing update event for user "+t+" but no new cross-signing information found!"),e.abrupt("return");case 5:if(r=n.getId(),!(i=this._crossSigningInfo.getId()!==r)){e.next=19;break}return k.default.info("Got new master key",r),o=null,e.prev=10,e.next=13,(0,s.resolve)(this._crossSigningInfo.getCrossSigningKey("master",r));case 13:a=e.sent,o=a[1];case 15:return e.prev=15,o.free(),e.finish(15);case 18:k.default.info("Got matching private key from callback for new public master key");case 19:return u=this._crossSigningInfo.getId("self_signing"),c=this._crossSigningInfo.getId("user_signing"),this._crossSigningInfo.setKeys(n.keys),e.next=24,(0,s.resolve)(this._cryptoStore.doTxn("readwrite",[T.default.STORE_ACCOUNT],(function(e){v._cryptoStore.storeCrossSigningKeys(e,v._crossSigningInfo.keys)})));case 24:if(l={},u===n.getId("self_signing")){e.next=32;break}return k.default.info("Got new self-signing key",n.getId("self_signing")),d=this._deviceList.getStoredDevice(this._userId,this._deviceId),e.next=30,(0,s.resolve)(this._crossSigningInfo.signDevice(this._userId,d));case 30:f=e.sent,l[this._deviceId]=f;case 32:if(c!==n.getId("user_signing")&&k.default.info("Got new user-signing key",n.getId("user_signing")),!i){e.next=37;break}return e.next=36,(0,s.resolve)(this._signObject(this._crossSigningInfo.keys.master));case 36:l[this._crossSigningInfo.getId()]=this._crossSigningInfo.keys.master;case 37:if(!(0,p.default)(l).length){e.next=40;break}return e.next=40,(0,s.resolve)(this._baseApis.uploadKeySignatures((0,y.default)({},this._userId,l)));case 40:return this.emit("userTrustStatusChanged",t,this.checkUserTrust(t)),e.next=43,(0,s.resolve)(this.checkKeyBackup());case 43:case"end":return e.stop()}}),e,this,[[10,,15,18]])}))),B.prototype._checkDeviceVerifications=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._crossSigningInfo.keys.user_signing){e.next=14;break}if(!(n=this._deviceList.getStoredCrossSigningForUser(t))){e.next=14;break}return e.next=5,(0,s.resolve)(this._checkForDeviceVerificationUpgrade(t,n));case 5:if(r=e.sent,i=this._baseApis._cryptoCallbacks.shouldUpgradeDeviceVerifications,!r||!i){e.next=14;break}return e.next=10,(0,s.resolve)(i({users:(0,y.default)({},t,r)}));case 10:if(!e.sent.includes(t)){e.next=14;break}return e.next=14,(0,s.resolve)(this._baseApis.setDeviceVerified(t,n.getId()));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),B.prototype._checkAndStartKeyBackup=(0,s.coroutine)(h.default.mark((function e(){var t,n;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.default.log("Checking key backup status..."),!this._baseApis.isGuest()){e.next=5;break}return k.default.log("Skipping key backup check since user is guest"),this._checkedForBackup=!0,e.abrupt("return",null);case 5:return t=void 0,e.prev=6,e.next=9,(0,s.resolve)(this._baseApis.getKeyBackupVersion());case 9:t=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(6),k.default.log("Error checking for active key backup",e.t0),e.t0.httpStatus/100===4&&(this._checkedForBackup=!0),e.abrupt("return",null);case 17:return this._checkedForBackup=!0,e.next=20,(0,s.resolve)(this.isKeyBackupTrusted(t));case 20:return(n=e.sent).usable&&!this.backupInfo?(k.default.log("Found usable key backup v"+t.version+": enabling key backups"),this._baseApis.enableKeyBackup(t)):!n.usable&&this.backupInfo?(k.default.log("No usable key backup: disabling key backup"),this._baseApis.disableKeyBackup()):n.usable||this.backupInfo?n.usable&&this.backupInfo&&(t.version!==this.backupInfo.version?(k.default.log("On backup version "+this.backupInfo.version+" but found version "+t.version+": switching."),this._baseApis.disableKeyBackup(),this._baseApis.enableKeyBackup(t)):k.default.log("Backup version "+t.version+" still current")):k.default.log("No usable key backup: not enabling key backup"),e.abrupt("return",{backupInfo:t,trustInfo:n});case 23:case"end":return e.stop()}}),e,this,[[6,12]])}))),B.prototype.setTrustedBackupPubKey=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._sessionStore.setLocalTrustedBackupPubKey(t),e.next=3,(0,s.resolve)(this.checkKeyBackup());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),B.prototype.checkKeyBackup=(0,s.coroutine)(h.default.mark((function e(){var t;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkedForBackup=!1,e.next=3,(0,s.resolve)(this._checkAndStartKeyBackup());case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),B.prototype.isKeyBackupTrusted=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o,a,u,c,d,f,m,y,g,_;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={usable:!1,trusted_locally:!1,sigs:[]},t&&t.algorithm&&t.auth_data&&t.auth_data.public_key&&t.auth_data.signatures){e.next=4;break}return k.default.info("Key backup is absent or missing required data"),e.abrupt("return",n);case 4:r=this._sessionStore.getLocalTrustedBackupPubKey(),t.auth_data.public_key===r&&(k.default.info("Backup public key "+r+" is trusted locally"),n.trusted_locally=!0),i=t.auth_data.signatures[this._userId]||[],o=!0,a=!1,u=void 0,e.prev=10,c=(0,v.default)((0,p.default)(i));case 12:if(o=(d=c.next()).done){e.next=55;break}if(f=d.value,"ed25519"===(m=f.split(":"))[0]){e.next=18;break}return k.default.log("Ignoring unknown signature type: "+m[0]),e.abrupt("continue",52);case 18:if(y={deviceId:m[1]},(g=this._crossSigningInfo.getId())!==f){e.next=34;break}return y.cross_signing_key=g,e.prev=22,e.next=25,(0,s.resolve)(U.verifySignature(this._olmDevice,t.auth_data,this._userId,y.deviceId,g));case 25:y.valid=!0,e.next=32;break;case 28:e.prev=28,e.t0=e.catch(22),k.default.warning("Bad signature from cross signing key "+g,e.t0),y.valid=!1;case 32:return n.sigs.push(y),e.abrupt("continue",52);case 34:if(!(_=this._deviceList.getStoredDevice(this._userId,y.deviceId))){e.next=49;break}return y.device=_,e.prev=37,e.next=40,(0,s.resolve)(U.verifySignature(this._olmDevice,(0,l.default)({},t.auth_data),this._userId,_.deviceId,_.getFingerprint()));case 40:y.valid=!0,e.next=47;break;case 43:e.prev=43,e.t1=e.catch(37),k.default.info("Bad signature from key ID "+f+" userID "+this._userId+" device ID "+_.deviceId+" fingerprint: "+_.getFingerprint(),t.auth_data,e.t1),y.valid=!1;case 47:e.next=51;break;case 49:y.valid=null,k.default.info("Ignoring signature from unknown key "+f);case 51:n.sigs.push(y);case 52:o=!0,e.next=12;break;case 55:e.next=61;break;case 57:e.prev=57,e.t2=e.catch(10),a=!0,u=e.t2;case 61:e.prev=61,e.prev=62,!o&&c.return&&c.return();case 64:if(e.prev=64,!a){e.next=67;break}throw u;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return n.usable=n.sigs.some((function(e){return e.valid&&(e.device&&e.device.isVerified()||e.cross_signing_key)})),n.usable|=n.trusted_locally,e.abrupt("return",n);case 72:case"end":return e.stop()}}),e,this,[[10,57,61,69],[22,28],[37,43],[62,,64,68]])})));return function(t){return e.apply(this,arguments)}}(),B.prototype.enableLazyLoading=function(){this._lazyLoadMembers=!0},B.prototype.registerEventHandlers=function(e){var t=this;e.on("RoomMember.membership",(function(e,n,r){try{t._onRoomMembership(e,n,r)}catch(i){k.default.error("Error handling membership change:",i)}})),e.on("toDeviceEvent",(function(e){t._onToDeviceEvent(e)})),e.on("Room.timeline",(function(e){t._onTimelineEvent(e)})),e.on("Event.decrypted",(function(e){t._onTimelineEvent(e)}))},B.prototype.start=function(){this._outgoingRoomKeyRequestManager.start()},B.prototype.stop=function(){this._outgoingRoomKeyRequestManager.stop(),this._deviceList.stop()},B.getOlmVersion=function(){return M.getOlmVersion()},B.prototype.getDeviceEd25519Key=function(){return this._olmDevice.deviceEd25519Key},B.prototype.setGlobalBlacklistUnverifiedDevices=function(e){this._globalBlacklistUnverifiedDevices=e},B.prototype.getGlobalBlacklistUnverifiedDevices=function(){return this._globalBlacklistUnverifiedDevices},B.prototype.uploadDeviceKeys=function(){var e=this,t=e._userId,n=e._deviceId,r={algorithms:e._supportedAlgorithms,device_id:n,keys:e._deviceKeys,user_id:t};return e._signObject(r).then((function(){return e._baseApis.uploadKeysRequest({device_keys:r},{device_id:n})}))},B.prototype.updateOneTimeKeyCount=function(e){if(!isFinite(e))throw new TypeError("Parameter for updateOneTimeKeyCount has to be a number");this._oneTimeKeyCount=e},B.prototype.downloadKeys=function(e,t){return this._deviceList.downloadKeys(e,t)},B.prototype.getStoredDevicesForUser=function(e){return this._deviceList.getStoredDevicesForUser(e)},B.prototype.getStoredDevice=function(e,t){return this._deviceList.getStoredDevice(e,t)},B.prototype.saveDeviceList=function(e){return this._deviceList.saveIfDirty(e)},B.prototype.setDeviceVerification=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n,r,i,o){var a,u,c,l,d,f,p,v;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),!(a=this._deviceList.getStoredCrossSigningForUser(t))||a.getId()!==n){e.next=16;break}if(null===i&&null===o){e.next=7;break}throw new Error("Cannot set blocked or known for a cross-signing key");case 7:if(r){e.next=9;break}throw new Error("Cannot set a cross-signing key as unverified");case 9:return e.next=11,(0,s.resolve)(this._crossSigningInfo.signUser(a));case 11:if(!(u=e.sent)){e.next=15;break}return e.next=15,(0,s.resolve)(this._baseApis.uploadKeySignatures((0,y.default)({},t,(0,y.default)({},n,u))));case 15:return e.abrupt("return",u);case 16:if((c=this._deviceList.getRawStoredDevicesForUser(t))&&c[n]){e.next=19;break}throw new Error("Unknown device "+t+":"+n);case 19:if(l=c[n],d=l.verified,r?d=F.VERIFIED:null!==r&&d==F.VERIFIED&&(d=F.UNVERIFIED),i?d=F.BLOCKED:null!==i&&d==F.BLOCKED&&(d=F.UNVERIFIED),f=l.known,null!==o&&(f=o),l.verified===d&&l.known===f||(l.verified=d,l.known=f,this._deviceList.storeDevicesForUser(t,c),this._deviceList.saveIfDirty()),!r||t!==this._userId){e.next=33;break}return e.next=29,(0,s.resolve)(this._crossSigningInfo.signDevice(t,L.fromStorage(l,n)));case 29:if(!(p=e.sent)){e.next=33;break}return e.next=33,(0,s.resolve)(this._baseApis.uploadKeySignatures((0,y.default)({},t,(0,y.default)({},n,p))));case 33:return v=L.fromStorage(l,n),this.emit("deviceVerificationChanged",t,n,v),e.abrupt("return",v);case 36:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),B.prototype.requestVerificationDM=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n,r){var i,o,u,l,d,f,p,y,g,_,b=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=void 0,!r){e.next=24;break}for(i=new m.default,o=!0,u=!1,l=void 0,e.prev=6,d=(0,v.default)(r);!(o=(f=d.next()).done);o=!0)"string"===typeof(p=f.value)?i.set(p,K[p]):p.NAME&&i.set(p.NAME,p);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),u=!0,l=e.t0;case 14:e.prev=14,e.prev=15,!o&&d.return&&d.return();case 17:if(e.prev=17,!u){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:e.next=25;break;case 24:i=this._baseApis._crypto._verificationMethods;case 25:return y=void 0,g=new a.default((function(e,r){var o=q(b._baseApis,n,(function(e){if(e.getRoomId()===n&&e.getSender()===t){var r=e.getRelation();if(r&&r.rel_type&&"m.reference"===r.rel_type&&r.event_id&&r.event_id===y){var o=e.getContent();switch(e.getType()){case"m.key.verification.start":var u=new(i.get(o.method))(b._baseApis,t,o.from_device,y,n,e);u.handler=G(u,t,n,y);var c=q(b._baseApis,n,u.handler);u.setEventsSubscription(c),s(u);break;case"m.key.verification.cancel":a(e)}}}})),s=function(){o&&(o=o()),e.apply(void 0,arguments)},a=function(){o&&(o=o()),r.apply(void 0,arguments)}})),e.next=29,(0,s.resolve)(this._baseApis.sendEvent(n,"m.room.message",{body:this._baseApis.getUserId()+" is requesting to verify your key, but your client does not support in-chat key verification.  You will need to use legacy key verification to verify keys.",msgtype:"m.key.verification.request",to:t,from_device:this._baseApis.getDeviceId(),methods:[].concat((0,c.default)(i.keys()))}));case 29:return _=e.sent,y=_.event_id,e.abrupt("return",g);case 32:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t,n,r){return e.apply(this,arguments)}}(),B.prototype.acceptVerificationDM=function(e,t){"string"===typeof t&&(t=K[t]);var n=e.getContent(),r=new t(this._baseApis,e.getSender(),n.from_device,e.getId(),e.getRoomId());r.handler=G(r,e.getSender(),e.getRoomId(),e.getId());var i=q(this._baseApis,e.getRoomId(),r.handler);return r.setEventsSubscription(i),r},B.prototype.requestVerification=function(e,t,n){var r=this;t||(t=[].concat((0,c.default)(this._verificationMethods.keys()))),n||(n=(0,p.default)(this._deviceList.getRawStoredDevicesForUser(e))),this._verificationTransactions.has(e)||this._verificationTransactions.set(e,new m.default);var i=(0,w.randomString)(32),o=new a.default((function(o,s){r._verificationTransactions.get(e).set(i,{request:{methods:t,devices:n,resolve:o,reject:s}})})),s={transaction_id:i,from_device:this._baseApis.deviceId,methods:t,timestamp:Date.now()},u={},l=!0,d=!1,f=void 0;try{for(var h,g=(0,v.default)(n);!(l=(h=g.next()).done);l=!0){u[h.value]=s}}catch(_){d=!0,f=_}finally{try{!l&&g.return&&g.return()}finally{if(d)throw f}}return this._baseApis.sendToDevice("m.key.verification.request",(0,y.default)({},e,u)),o},B.prototype.beginKeyVerification=function(e,t,n,r){if(this._verificationTransactions.has(t)||this._verificationTransactions.set(t,new m.default),r=r||(0,w.randomString)(32),this._verificationMethods.has(e)){var i=new(this._verificationMethods.get(e))(this._baseApis,t,n,r);return this._verificationTransactions.get(t).has(r)||this._verificationTransactions.get(t).set(r,{}),this._verificationTransactions.get(t).get(r).verifier=i,i}throw(0,C.newUnknownMethodError)()},B.prototype.getOlmSessionsForUser=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o,a,u;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getStoredDevicesForUser(t)||[],r={},i=0;case 3:if(!(i<n.length)){e.next=13;break}return o=n[i],a=o.getIdentityKey(),e.next=8,(0,s.resolve)(this._olmDevice.getSessionInfoForDevice(a));case 8:u=e.sent,r[o.deviceId]={deviceIdKey:a,sessions:u};case 10:++i,e.next=3;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),B.prototype.getEventSenderDeviceInfo=function(e){var t=e.getSenderKey(),n=e.getWireContent().algorithm;if(!t||!n)return null;if(e.getForwardingCurve25519KeyChain().length>0)return null;var r=this._deviceList.getDeviceByIdentityKey(n,t);if(null===r)return null;var i=e.getClaimedEd25519Key();return i?i!==r.getFingerprint()?(k.default.warn("Event "+e.getId()+" claims ed25519 key "+i+"but sender device has key "+r.getFingerprint()),null):r:(k.default.warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),null)},B.prototype.forceDiscardSession=function(e){var t=this._roomEncryptors[e];if(void 0===t)throw new Error("Room not encrypted");if(void 0===t.forceDiscardSession)throw new Error("Room encryption algorithm doesn't support session discarding");t.forceDiscardSession()},B.prototype.setRoomEncryption=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n,r){var i,o,a,c;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.algorithm){e.next=3;break}return k.default.log("Ignoring setRoomEncryption with no algorithm"),e.abrupt("return");case 3:if(!(i=this._roomList.getRoomEncryption(t))){e.next=8;break}if((0,u.default)(i)==(0,u.default)(n)){e.next=8;break}return k.default.error("Ignoring m.room.encryption event which requests a change of config in "+t),e.abrupt("return");case 8:if(!this._roomEncryptors[t]){e.next=11;break}return e.abrupt("return");case 11:if(o=null,i||(o=this._roomList.setRoomEncryption(t,n)),a=N.ENCRYPTION_CLASSES[n.algorithm]){e.next=16;break}throw new Error("Unable to encrypt with "+n.algorithm);case 16:if(c=new a({userId:this._userId,deviceId:this._deviceId,crypto:this,olmDevice:this._olmDevice,baseApis:this._baseApis,roomId:t,config:n}),this._roomEncryptors[t]=c,!o){e.next=21;break}return e.next=21,(0,s.resolve)(o);case 21:if(this._lazyLoadMembers){e.next=28;break}return k.default.log("Enabling encryption in "+t+"; starting to track device lists for all users therein"),e.next=25,(0,s.resolve)(this.trackRoomDevices(t));case 25:this.inhibitDeviceQuery||this._deviceList.refreshOutdatedDeviceLists(),e.next=29;break;case 28:k.default.log("Enabling encryption in "+t);case 29:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),B.prototype.trackRoomDevices=function(e){var t=this,n=function(){var n=(0,s.coroutine)(h.default.mark((function n(){var r;return h.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t._roomEncryptors[e]){n.next=2;break}return n.abrupt("return");case 2:if(r=t._clientStore.getRoom(e)){n.next=5;break}throw new Error("Unable to start tracking devices in unknown room "+e);case 5:return k.default.log("Starting to track devices for room "+e+" ..."),n.next=8,(0,s.resolve)(r.getEncryptionTargetMembers());case 8:n.sent.forEach((function(e){t._deviceList.startTrackingDeviceList(e.userId)}));case 10:case"end":return n.stop()}}),n,t)})));return function(){return n.apply(this,arguments)}}(),r=this._roomDeviceTrackingState[e];return r||(r=n(),this._roomDeviceTrackingState[e]=r),r},B.prototype.ensureOlmSessionsForUsers=function(e){for(var t={},n=0;n<e.length;++n){var r=e[n];t[r]=[];for(var i=this.getStoredDevicesForUser(r)||[],o=0;o<i.length;++o){var s=i[o];s.getIdentityKey()!=this._olmDevice.deviceCurve25519Key&&(s.verified!=F.BLOCKED&&t[r].push(s))}}return U.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,t)},B.prototype.exportRoomKeys=(0,s.coroutine)(h.default.mark((function e(){var t,n=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,(0,s.resolve)(this._cryptoStore.doTxn("readonly",[T.default.STORE_INBOUND_GROUP_SESSIONS],(function(e){n._cryptoStore.getAllEndToEndInboundGroupSessions(e,(function(e){if(null!==e){var r=n._olmDevice.exportInboundGroupSession(e.senderKey,e.sessionId,e.sessionData);delete r.first_known_index,r.algorithm=U.MEGOLM_ALGORITHM,t.push(r)}}))})));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),B.prototype.importRoomKeys=function(e){var t=this;return a.default.all(e.map((function(e){return e.room_id&&e.algorithm?t._getRoomDecryptor(e.room_id,e.algorithm).importRoomKey(e):(k.default.warn("ignoring room key entry with missing fields",e),null)})))},B.prototype.scheduleKeyBackupSend=function(){var e=(0,s.coroutine)(h.default.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sendingBackups){e.next=2;break}return e.abrupt("return");case 2:return this._sendingBackups=!0,e.prev=3,t=Math.random()*r,e.next=7,(0,s.resolve)((0,O.sleep)(t));case 7:n=0;case 8:if(this.backupKey){e.next=11;break}return e.abrupt("return");case 11:return e.prev=11,e.next=14,(0,s.resolve)(this._backupPendingKeys(200));case 14:if(0!==e.sent){e.next=17;break}return e.abrupt("return");case 17:n=0,e.next=30;break;case 20:if(e.prev=20,e.t0=e.catch(11),n++,k.default.log("Key backup request failed",e.t0),!e.t0.data){e.next=30;break}if("M_NOT_FOUND"!=e.t0.data.errcode&&"M_WRONG_ROOM_KEYS_VERSION"!=e.t0.data.errcode){e.next=30;break}return e.next=28,(0,s.resolve)(this.checkKeyBackup());case 28:throw this.emit("crypto.keyBackupFailed",e.t0.data.errcode),e.t0;case 30:if(!n){e.next=33;break}return e.next=33,(0,s.resolve)((0,O.sleep)(1e3*Math.pow(2,Math.min(n-1,4))));case 33:e.next=8;break;case 35:return e.prev=35,this._sendingBackups=!1,e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[3,,35,38],[11,20]])})));return function(t){return e.apply(this,arguments)}}(),B.prototype._backupPendingKeys=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o,a,c,l,d,f,p,m,y,g,_,b;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.resolve)(this._cryptoStore.getSessionsNeedingBackup(t));case 2:if((n=e.sent).length){e.next=5;break}return e.abrupt("return",0);case 5:return e.next=7,(0,s.resolve)(this._cryptoStore.countSessionsNeedingBackup());case 7:r=e.sent,this.emit("crypto.keyBackupSessionsRemaining",r),i={},o=!0,a=!1,c=void 0,e.prev=13,l=(0,v.default)(n);case 15:if(o=(d=l.next()).done){e.next=34;break}return f=d.value,p=f.sessionData.room_id,void 0===i[p]&&(i[p]={sessions:{}}),e.next=21,(0,s.resolve)(this._olmDevice.exportInboundGroupSession(f.senderKey,f.sessionId,f.sessionData));case 21:(m=e.sent).algorithm=U.MEGOLM_ALGORITHM,delete m.session_id,delete m.room_id,y=m.first_known_index,delete m.first_known_index,g=this.backupKey.encrypt((0,u.default)(m)),_=(m.forwarding_curve25519_key_chain||[]).length,b=this._deviceList.getDeviceByIdentityKey(U.MEGOLM_ALGORITHM,f.senderKey),i[p].sessions[f.sessionId]={first_message_index:y,forwarded_count:_,is_verified:!(!b||!b.isVerified()),session_data:g};case 31:o=!0,e.next=15;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(13),a=!0,c=e.t0;case 40:e.prev=40,e.prev=41,!o&&l.return&&l.return();case 43:if(e.prev=43,!a){e.next=46;break}throw c;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return e.next=50,(0,s.resolve)(this._baseApis.sendKeyBackup(void 0,void 0,this.backupInfo.version,{rooms:i}));case 50:return e.next=52,(0,s.resolve)(this._cryptoStore.unmarkSessionsNeedingBackup(n));case 52:return e.next=54,(0,s.resolve)(this._cryptoStore.countSessionsNeedingBackup());case 54:return r=e.sent,this.emit("crypto.keyBackupSessionsRemaining",r),e.abrupt("return",n.length);case 57:case"end":return e.stop()}}),e,this,[[13,36,40,48],[41,,43,47]])})));return function(t){return e.apply(this,arguments)}}(),B.prototype.backupGroupSession=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n,r,i,o,a,u){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.backupInfo){e.next=2;break}throw new Error("Key backups are not enabled");case 2:return e.next=4,(0,s.resolve)(this._cryptoStore.markSessionsNeedingBackup([{senderKey:n,sessionId:i}]));case 4:this.scheduleKeyBackupSend();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s,a){return e.apply(this,arguments)}}(),B.prototype.scheduleAllGroupSessionsForBackup=(0,s.coroutine)(h.default.mark((function e(){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.resolve)(this.flagAllGroupSessionsForBackup());case 2:this.scheduleKeyBackupSend(0);case 3:case"end":return e.stop()}}),e,this)}))),B.prototype.flagAllGroupSessionsForBackup=(0,s.coroutine)(h.default.mark((function e(){var t,n=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.resolve)(this._cryptoStore.doTxn("readwrite",[T.default.STORE_INBOUND_GROUP_SESSIONS,T.default.STORE_BACKUP],(function(e){n._cryptoStore.getAllEndToEndInboundGroupSessions(e,(function(t){null!==t&&n._cryptoStore.markSessionsNeedingBackup([t],e)}))})));case 2:return e.next=4,(0,s.resolve)(this._cryptoStore.countSessionsNeedingBackup());case 4:return t=e.sent,this.emit("crypto.keyBackupSessionsRemaining",t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),B.prototype.encryptEvent=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n){var r,i,o,a,u;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Cannot send encrypted messages in unknown rooms");case 2:if(r=t.getRoomId(),i=this._roomEncryptors[r]){e.next=6;break}throw new Error("Room was previously configured to use encryption, but is no longer. Perhaps the homeserver is hiding the configuration event.");case 6:return this._roomDeviceTrackingState[r]||this.trackRoomDevices(r),e.next=9,(0,s.resolve)(this._roomDeviceTrackingState[r]);case 9:return o=t.getContent(),(a=o["m.relates_to"])&&delete(o=(0,l.default)({},o))["m.relates_to"],e.next=14,(0,s.resolve)(i.encryptMessage(n,t.getType(),o));case 14:u=e.sent,a&&(u["m.relates_to"]=a),t.makeEncrypted("m.room.encrypted",u,this._olmDevice.deviceCurve25519Key,this._olmDevice.deviceEd25519Key);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),B.prototype.decryptEvent=function(e){if(e.isRedacted())return a.default.resolve({clearEvent:{room_id:e.getRoomId(),type:"m.room.message",content:{}}});var t=e.getWireContent();return this._getRoomDecryptor(e.getRoomId(),t.algorithm).decryptEvent(e)},B.prototype.handleDeviceListChanges=function(){var e=(0,s.coroutine)(h.default.mark((function e(t,n){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.oldSyncToken){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,s.resolve)(this._evalDeviceListChanges(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),B.prototype.requestRoomKey=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._outgoingRoomKeyRequestManager.sendRoomKeyRequest(e,t,n).catch((function(e){k.default.error("Error requesting key for event",e)})).done()},B.prototype.cancelRoomKeyRequest=function(e){this._outgoingRoomKeyRequestManager.cancelRoomKeyRequest(e).catch((function(e){k.default.warn("Error clearing pending room key requests",e)})).done()},B.prototype.onCryptoEvent=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getRoomId(),r=t.getContent(),e.prev=2,e.next=5,(0,s.resolve)(this.setRoomEncryption(n,r,!0));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),k.default.error("Error configuring encryption in room "+n+":",e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),B.prototype.onSyncWillProcess=function(){var e=(0,s.method)((function(e){e.oldSyncToken||(k.default.log("Initial sync performed - resetting device tracking state"),this._deviceList.stopTrackingAllDeviceLists(),this._deviceList.startTrackingDeviceList(this._userId),this._roomDeviceTrackingState={})}));return function(t){return e.apply(this,arguments)}}(),B.prototype.onSyncCompleted=function(){var e=(0,s.method)((function(e){var t=e.nextSyncToken;this._deviceList.setSyncToken(e.nextSyncToken),this._deviceList.saveIfDirty(),this._deviceList.lastKnownSyncToken=t,this._deviceList.startTrackingDeviceList(this._userId),this._deviceList.refreshOutdatedDeviceLists(),e.catchingUp||(V(this),this._processReceivedRoomKeyRequests())}));return function(t){return e.apply(this,arguments)}}(),B.prototype._evalDeviceListChanges=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.changed&&Array.isArray(t.changed)&&t.changed.forEach((function(e){r._deviceList.invalidateUserDeviceList(e)})),!(t.left&&Array.isArray(t.left)&&t.left.length)){e.next=8;break}return e.t0=o.default,e.next=5,(0,s.resolve)(this._getTrackedE2eUsers());case 5:e.t1=e.sent,n=new e.t0(e.t1),t.left.forEach((function(e){n.has(e)||r._deviceList.stopTrackingDeviceList(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),B.prototype._getTrackedE2eUsers=(0,s.coroutine)(h.default.mark((function e(){var t,n,r,i,o,a,u,c,l,d,f,p,m,y;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!0,r=!1,i=void 0,e.prev=4,o=(0,v.default)(this._getTrackedE2eRooms());case 6:if(n=(a=o.next()).done){e.next=33;break}return u=a.value,e.next=10,(0,s.resolve)(u.getEncryptionTargetMembers());case 10:for(c=e.sent,l=!0,d=!1,f=void 0,e.prev=14,p=(0,v.default)(c);!(l=(m=p.next()).done);l=!0)y=m.value,t.push(y.userId);e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),d=!0,f=e.t0;case 22:e.prev=22,e.prev=23,!l&&p.return&&p.return();case 25:if(e.prev=25,!d){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:n=!0,e.next=6;break;case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(4),r=!0,i=e.t1;case 39:e.prev=39,e.prev=40,!n&&o.return&&o.return();case 42:if(e.prev=42,!r){e.next=45;break}throw i;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return e.abrupt("return",t);case 48:case"end":return e.stop()}}),e,this,[[4,35,39,47],[14,18,22,30],[23,,25,29],[40,,42,46]])}))),B.prototype._getTrackedE2eRooms=function(){var e=this;return this._clientStore.getRooms().filter((function(t){if(!e._roomEncryptors[t.roomId])return!1;if(!e._roomDeviceTrackingState[t.roomId])return!1;var n=t.getMyMembership();return"join"===n||"invite"===n}))},B.prototype._onToDeviceEvent=function(e){var t=this;try{k.default.log("received to_device "+e.getType()+" from: "+e.getSender()+" id: "+e.getId()),"m.room_key"==e.getType()||"m.forwarded_room_key"==e.getType()?this._onRoomKeyEvent(e):"m.room_key_request"==e.getType()?this._onRoomKeyRequestEvent(e):"m.secret.request"===e.getType()?this._secretStorage._onRequestReceived(e):"m.secret.send"===e.getType()?this._secretStorage._onSecretReceived(e):"m.key.verification.request"===e.getType()?this._onKeyVerificationRequest(e):"m.key.verification.start"===e.getType()?this._onKeyVerificationStart(e):e.getContent().transaction_id?this._onKeyVerificationMessage(e):"m.bad.encrypted"===e.getContent().msgtype?this._onToDeviceBadEncrypted(e):e.isBeingDecrypted()&&e.once("Event.decrypted",(function(e){t._onToDeviceEvent(e)}))}catch(n){k.default.error("Error handling toDeviceEvent:",n)}},B.prototype._onRoomKeyEvent=function(e){var t=e.getContent();t.room_id&&t.algorithm?(this._checkedForBackup||this._checkAndStartKeyBackup(),this._getRoomDecryptor(t.room_id,t.algorithm).onRoomKeyEvent(e)):k.default.error("key event is missing fields")},B.prototype._onKeyVerificationRequest=function(e){var t=this;if(e.isCancelled())k.default.warn("Ignoring flagged verification request from "+e.getSender());else{var n=e.getContent();if("from_device"in n&&"string"===typeof n.from_device&&"transaction_id"in n&&"methods"in n&&Array.isArray(n.methods)&&"timestamp"in n&&"number"===typeof n.timestamp){var r=Date.now();if(r<n.timestamp-3e5||r>n.timestamp+6e5)k.default.log("received verification that is too old or from the future");else{var i=e.getSender();if(i!==this._userId||n.from_device!==this._deviceId){if(this._verificationTransactions.has(i)){if(this._verificationTransactions.get(i).has(n.transaction_id)){var o=(0,C.newUnexpectedMessageError)({transaction_id:n.transaction_id});return this._verificationTransactions.get(i).get(n.transaction_id).verifier?this._verificationTransactions.get(i).get(n.transaction_id).verifier.cancel(o):(this._verificationTransactions.get(i).get(n.transaction_id).reject(o),this.sendToDevice("m.key.verification.cancel",(0,y.default)({},i,(0,y.default)({},n.from_device,o.getContent())))),void this._verificationTransactions.get(i).delete(n.transaction_id)}}else this._verificationTransactions.set(i,new m.default);var s=[],a=!0,u=!1,c=void 0;try{for(var l,d=(0,v.default)(n.methods);!(a=(l=d.next()).done);a=!0){var f=l.value;"string"===typeof f&&(this._verificationMethods.has(f)&&s.push(f))}}catch(o){u=!0,c=o}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}if(0===s.length)this._baseApis.emit("crypto.verification.request.unknown",e.getSender(),(function(){t.sendToDevice("m.key.verification.cancel",(0,y.default)({},i,(0,y.default)({},n.from_device,(0,C.newUserCancelledError)({transaction_id:n.transaction_id}).getContent())))}));else{var p={timeout:3e5,event:e,methods:s,beginKeyVerification:function(e){var r=t.beginKeyVerification(e,i,n.from_device,n.transaction_id);return t._verificationTransactions.get(i).get(n.transaction_id).verifier=r,r},cancel:function(){t._baseApis.sendToDevice("m.key.verification.cancel",(0,y.default)({},i,(0,y.default)({},n.from_device,(0,C.newUserCancelledError)({transaction_id:n.transaction_id}).getContent())))}};this._verificationTransactions.get(i).set(n.transaction_id,{request:p}),this._baseApis.emit("crypto.verification.request",p)}}}}else k.default.warn("received invalid verification request from "+e.getSender())}},B.prototype._onKeyVerificationStart=function(e){var t=this;if(e.isCancelled())k.default.warn("Ignoring flagged verification start from "+e.getSender());else{var n=e.getSender(),r=e.getContent(),i=r.transaction_id,o=r.from_device;if(i&&o){var s=this._verificationTransactions.has(n)&&this._verificationTransactions.get(n).get(i),a=function(e){s.verifier?s.verifier.cancel(e):s.request&&s.request.cancel&&s.request.cancel(e),t.sendToDevice("m.key.verification.cancel",(0,y.default)({},n,(0,y.default)({},o,e.getContent())))};if(this._verificationMethods.has(r.method)){var u=new(this._verificationMethods.get(r.method))(this._baseApis,n,o,r.transaction_id,e,s&&s.request);if(s){if(!s.verifier&&(s.verifier=u,s.request)){if(!s.request.devices.includes(o))return void a((0,C.newUnexpectedMessageError)({transaction_id:r.transactionId}));if(!s.request.methods.includes(r.method))return void a((0,C.newUnknownMethodError)({transaction_id:r.transactionId}));var c={transaction_id:i,code:"m.accepted",reason:"Verification request accepted by another device"},l={},d=!0,f=!1,p=void 0;try{for(var h,g=(0,v.default)(s.request.devices);!(d=(h=g.next()).done);d=!0){var _=h.value;_!==o&&(l[_]=c)}}catch(w){f=!0,p=w}finally{try{!d&&g.return&&g.return()}finally{if(f)throw p}}this._baseApis.sendToDevice("m.key.verification.cancel",(0,y.default)({},n,l)),s.request.resolve(u)}}else this._verificationTransactions.has(n)||this._verificationTransactions.set(n,new m.default),s=this._verificationTransactions.get(n).set(i,{verifier:u});this._baseApis.emit("crypto.verification.start",u);var b={event:e,timeout:3e5,methods:[r.method],beginKeyVerification:function(e){if(r.method===e)return u},cancel:function(){return u.cancel("User cancelled")}};this._baseApis.emit("crypto.verification.request",b)}else a((0,C.newUnknownMethodError)({transaction_id:r.transactionId}))}}},B.prototype._onKeyVerificationMessage=function(e){var t=e.getSender(),n=e.getContent().transaction_id,r=this._verificationTransactions.has(t)&&this._verificationTransactions.get(t).get(n);if(r)if("m.key.verification.cancel"===e.getType())k.default.log(e),r.verifier?r.verifier.cancel(e):r.request&&r.request.cancel&&r.request.cancel(e);else if(r.verifier){var i=r.verifier;i.events&&i.events.includes(e.getType())&&i.handleEvent(e)}},B.prototype._onTimelineEvent=function(e){var t=this;if("m.room.message"===e.getType()){var n=e.getContent();if("m.key.verification.request"===n.msgtype)if("from_device"in n&&"string"===typeof n.from_device&&"methods"in n&&Array.isArray(n.methods)&&"to"in n&&"string"===typeof n.to){if(n.to===this._baseApis.getUserId()){if(!(e.getLocalAge()>=297e3)){var r={event:e,timeout:3e5,methods:n.methods,beginKeyVerification:function(n){return t.acceptVerificationDM(e,n)},cancel:function(){t.acceptVerificationDM(e,n.methods[0]).cancel("User declined")}};this._baseApis.emit("crypto.verification.request",r)}}}else k.default.warn("received invalid verification request over DM from "+e.getSender())}},B.prototype._onToDeviceBadEncrypted=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o,a,u,c,l,d,f,p,m,g,_,b;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getWireContent(),r=t.getSender(),i=n.algorithm,o=n.sender_key,void 0!==r&&void 0!==o&&void 0!==o){e.next=6;break}return e.abrupt("return");case 6:if(this._lastNewSessionForced[r]=this._lastNewSessionForced[r]||{},!((a=this._lastNewSessionForced[r][o]||0)+36e5>Date.now())){e.next=11;break}return k.default.debug("New session already forced with device "+r+":"+o+" at "+a+": not forcing another"),e.abrupt("return");case 11:if(u=this._deviceList.getDeviceByIdentityKey(i,o)){e.next=15;break}return k.default.info("Couldn't find device for identity key "+o+": not re-establishing session"),e.abrupt("return");case 15:return(c={})[r]=[u],e.next=19,(0,s.resolve)(U.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,c,!0));case 19:return this._lastNewSessionForced[r][o]=Date.now(),l={algorithm:U.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}},e.next=23,(0,s.resolve)(U.encryptMessageForDevice(l.ciphertext,this._userId,this._deviceId,this._olmDevice,r,u,{type:"m.dummy"}));case 23:return e.next=25,(0,s.resolve)(this._baseApis.sendToDevice("m.room.encrypted",(0,y.default)({},r,(0,y.default)({},u.deviceId,l))));case 25:return e.next=27,(0,s.resolve)(this._outgoingRoomKeyRequestManager.getOutgoingSentRoomKeyRequest(r,u.deviceId));case 27:for(d=e.sent,f=!0,p=!1,m=void 0,e.prev=31,g=(0,v.default)(d);!(f=(_=g.next()).done);f=!0)b=_.value,this.requestRoomKey(b.requestBody,b.recipients,!0);e.next=39;break;case 35:e.prev=35,e.t0=e.catch(31),p=!0,m=e.t0;case 39:e.prev=39,e.prev=40,!f&&g.return&&g.return();case 42:if(e.prev=42,!p){e.next=45;break}throw m;case 45:return e.finish(42);case 46:return e.finish(39);case 47:case"end":return e.stop()}}),e,this,[[31,35,39,47],[40,,42,46]])})));return function(t){return e.apply(this,arguments)}}(),B.prototype._onRoomMembership=function(e,t,n){var r=t.roomId,i=this._roomEncryptors[r];i&&(this._roomDeviceTrackingState[r]&&("join"==t.membership?(k.default.log("Join event for "+t.userId+" in "+r),this._deviceList.startTrackingDeviceList(t.userId)):"invite"==t.membership&&this._clientStore.getRoom(r).shouldEncryptForInvitedMembers()&&(k.default.log("Invite event for "+t.userId+" in "+r),this._deviceList.startTrackingDeviceList(t.userId))),i.onRoomMembership(e,t,n))},B.prototype._onRoomKeyRequestEvent=function(e){var t=e.getContent();if("request"===t.action){var n=new $(e);this._receivedRoomKeyRequests.push(n)}else if("request_cancellation"===t.action){var r=new z(e);this._receivedRoomKeyRequestCancellations.push(r)}},B.prototype._processReceivedRoomKeyRequests=(0,s.coroutine)(h.default.mark((function e(){var t,n,r=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._processingRoomKeyRequests){e.next=2;break}return e.abrupt("return");case 2:return this._processingRoomKeyRequests=!0,e.prev=3,t=this._receivedRoomKeyRequests,this._receivedRoomKeyRequests=[],n=this._receivedRoomKeyRequestCancellations,this._receivedRoomKeyRequestCancellations=[],e.next=10,(0,s.resolve)(a.default.all(t.map((function(e){return r._processReceivedRoomKeyRequest(e)}))));case 10:return e.next=12,(0,s.resolve)(a.default.all(n.map((function(e){return r._processReceivedRoomKeyRequestCancellation(e)}))));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),k.default.error("Error processing room key requsts: "+e.t0);case 17:return e.prev=17,this._processingRoomKeyRequests=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])}))),B.prototype._processReceivedRoomKeyRequest=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r,i,o,a,u,c,l,d;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userId,r=t.deviceId,i=t.requestBody,o=i.room_id,a=i.algorithm,k.default.log("m.room_key_request from "+n+":"+r+" for "+o+" / "+i.session_id+" (id "+t.requestId+")"),n===this._userId){e.next=24;break}if(this._roomEncryptors[o]){e.next=10;break}return k.default.debug("room key request for unencrypted room "+o),e.abrupt("return");case 10:if(u=this._roomEncryptors[o],c=this._deviceList.getStoredDevice(n,r)){e.next=15;break}return k.default.debug("Ignoring keyshare for unknown device "+n+":"+r),e.abrupt("return");case 15:return e.prev=15,e.next=18,(0,s.resolve)(u.reshareKeyWithDevice(i.sender_key,i.session_id,n,c));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),k.default.warn("Failed to re-share keys for session "+i.session_id+" with device "+n+":"+c.deviceId,e.t0);case 23:return e.abrupt("return");case 24:if(this._roomDecryptors[o]){e.next=27;break}return k.default.log("room key request for unencrypted room "+o),e.abrupt("return");case 27:if(l=this._roomDecryptors[o][a]){e.next=31;break}return k.default.log("room key request for unknown alg "+a+" in room "+o),e.abrupt("return");case 31:return e.next=33,(0,s.resolve)(l.hasKeysForKeyRequest(t));case 33:if(e.sent){e.next=36;break}return k.default.log("room key request for unknown session "+o+" / "+i.session_id),e.abrupt("return");case 36:if(t.share=function(){l.shareKeysWithDevice(t)},!(d=this._deviceList.getStoredDevice(n,r))||!d.isVerified()){e.next=42;break}return k.default.log("device is already verified: sharing keys"),t.share(),e.abrupt("return");case 42:this.emit("crypto.roomKeyRequest",t);case 43:case"end":return e.stop()}}),e,this,[[15,20]])})));return function(t){return e.apply(this,arguments)}}(),B.prototype._processReceivedRoomKeyRequestCancellation=function(){var e=(0,s.method)((function(e){k.default.log("m.room_key_request cancellation for "+e.userId+":"+e.deviceId+" (id "+e.requestId+")"),this.emit("crypto.roomKeyRequestCancellation",e)}));return function(t){return e.apply(this,arguments)}}(),B.prototype._getRoomDecryptor=function(e,t){var n=void 0,r=void 0;if((e=e||null)&&((n=this._roomDecryptors[e])||(this._roomDecryptors[e]=n={}),r=n[t]))return r;var i=N.DECRYPTION_CLASSES[t];if(!i)throw new N.DecryptionError("UNKNOWN_ENCRYPTION_ALGORITHM",'Unknown encryption algorithm "'+t+'".');return r=new i({userId:this._userId,crypto:this,olmDevice:this._olmDevice,baseApis:this._baseApis,roomId:e}),n&&(n[t]=r),r},B.prototype._signObject=function(){var e=(0,s.coroutine)(h.default.mark((function e(t){var n,r;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signatures||{},r=t.unsigned,delete t.signatures,delete t.unsigned,n[this._userId]=n[this._userId]||{},e.next=7,(0,s.resolve)(this._olmDevice.sign(D.stringify(t)));case 7:n[this._userId]["ed25519:"+this._deviceId]=e.sent,t.signatures=n,void 0!==r&&(t.unsigned=r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var $=function e(t){(0,i.default)(this,e);var n=t.getContent();this.userId=t.getSender(),this.deviceId=n.requesting_device_id,this.requestId=n.request_id,this.requestBody=n.body||{},this.share=function(){throw new Error("don't know how to share keys for this request yet")}},z=function e(t){(0,i.default)(this,e);var n=t.getContent();this.userId=t.getSender(),this.deviceId=n.requesting_device_id,this.requestId=n.request_id}}).call(this,n(6))},function(e,t,n){e.exports={default:n(235),__esModule:!0}},function(e,t,n){n(33),n(236),e.exports=n(4).Array.from},function(e,t,n){"use strict";var r=n(23),i=n(7),o=n(34),s=n(125),a=n(126),u=n(60),c=n(237),l=n(85);i(i.S+i.F*!n(133)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,y=0,g=l(f);if(m&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==g||p==Array&&a(g))for(n=new p(t=u(f.length));t>y;y++)c(n,y,m?v(f[y],y):f[y]);else for(d=g.call(f),n=new p;!(i=d.next()).done;y++)c(n,y,m?s(d,v,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(20),i=n(47);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){e.exports={default:n(239),__esModule:!0}},function(e,t,n){n(63),n(33),n(44),n(240),n(241),n(242),n(243),e.exports=n(4).Map},function(e,t,n){"use strict";var r=n(124),i=n(90);e.exports=n(128)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(7);r(r.P+r.R,"Map",{toJSON:n(129)("Map")})},function(e,t,n){n(130)("Map")},function(e,t,n){n(131)("Map")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SECRET_STORAGE_ALGORITHM_V1=void 0;var r=w(n(56)),i=w(n(9)),o=w(n(18)),s=w(n(5)),a=w(n(8)),u=n(1),c=w(n(57)),l=w(n(24)),d=w(n(10)),f=w(n(12)),p=w(n(25)),h=w(n(26)),v=n(13),m=w(n(3)),y=n(35),g=w(y),_=n(68),b=n(139),k=n(140);function w(e){return e&&e.__esModule?e:{default:e}}var E=t.SECRET_STORAGE_ALGORITHM_V1="m.secret_storage.v1.curve25519-aes-sha2",S=function(t){function n(e,t,r){(0,d.default)(this,n);var i=(0,p.default)(this,(n.__proto__||(0,l.default)(n)).call(this));return i._baseApis=e,i._cryptoCallbacks=t,i._crossSigningInfo=r,i._requests={},i._incomingRequests={},i}return(0,h.default)(n,t),(0,f.default)(n,[{key:"getDefaultKeyId",value:function(){var e=this._baseApis.getAccountData("m.secret_storage.default_key");return e?e.getContent().key:null}},{key:"setDefaultKeyId",value:function(e){var t=this;return new c.default((function(n){t._baseApis.on("accountData",(function r(i){"m.secret_storage.default_key"===i.getType()&&i.getContent().key===e&&(t._baseApis.removeListener("accountData",r),n())})),t._baseApis.setAccountData("m.secret_storage.default_key",{key:e})}))}},{key:"addKey",value:function(){var t=(0,u.coroutine)(a.default.mark((function t(n,r,i){var o,s,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o={algorithm:n},r||(r={}),r.name&&(o.name=r.name),t.t0=n,t.next=t.t0===E?6:22;break;case 6:if(s=new e.Olm.PkDecryption,t.prev=7,!r.passphrase){t.next=17;break}return t.next=11,(0,u.resolve)((0,b.keyFromPassphrase)(r.passphrase));case 11:c=t.sent,o.passphrase={algorithm:"m.pbkdf2",iterations:c.iterations,salt:c.salt},r.encodedkey=(0,k.encodeRecoveryKey)(c.key),o.pubkey=s.init_with_private_key(c.key),t.next=18;break;case 17:r.privkey?(o.pubkey=s.init_with_private_key(r.privkey),r.encodedkey=(0,k.encodeRecoveryKey)(r.privkey)):(o.pubkey=s.generate_key(),r.encodedkey=(0,k.encodeRecoveryKey)(s.get_private_key()));case 18:return t.prev=18,s.free(),t.finish(18);case 21:return t.abrupt("break",23);case 22:throw new Error("Unknown key algorithm "+r.algorithm);case 23:if(!i)do{i=(0,_.randomString)(32)}while(this._baseApis.getAccountData("m.secret_storage.key."+i));return t.next=26,(0,u.resolve)(this._crossSigningInfo.signObject(o,"master"));case 26:return t.next=28,(0,u.resolve)(this._baseApis.setAccountData("m.secret_storage.key."+i,o));case 28:return t.abrupt("return",i);case 29:case"end":return t.stop()}}),t,this,[[7,,18,21]])})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"store",value:function(){var t=(0,u.coroutine)(a.default.mark((function t(n,r,i){var o,c,l,d,f,p,h,v,g,_,b;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o={},i){t.next=6;break}if(c=this.getDefaultKeyId()){t.next=5;break}throw new Error("No keys specified and no default key present");case 5:i=[c];case 6:if(0!==i.length){t.next=8;break}throw new Error("Zero keys given to encrypt with!");case 8:l=!0,d=!1,f=void 0,t.prev=11,p=(0,s.default)(i);case 13:if(l=(h=p.next()).done){t.next=30;break}if(v=h.value,g=this._baseApis.getAccountData("m.secret_storage.key."+v)){t.next=18;break}throw new Error("Unknown key: "+v);case 18:_=g.getContent(),(0,y.pkVerify)(_,this._crossSigningInfo.getId("master"),this._crossSigningInfo.userId),t.t0=_.algorithm,t.next=t.t0===E?23:26;break;case 23:b=new e.Olm.PkEncryption;try{b.set_recipient_key(_.pubkey),o[v]=b.encrypt(r)}finally{b.free()}return t.abrupt("break",27);case 26:m.default.warn("unknown algorithm for secret storage key "+v+": "+_.algorithm);case 27:l=!0,t.next=13;break;case 30:t.next=36;break;case 32:t.prev=32,t.t1=t.catch(11),d=!0,f=t.t1;case 36:t.prev=36,t.prev=37,!l&&p.return&&p.return();case 39:if(t.prev=39,!d){t.next=42;break}throw f;case 42:return t.finish(39);case 43:return t.finish(36);case 44:return t.next=46,(0,u.resolve)(this._baseApis.setAccountData(n,{encrypted:o}));case 46:case"end":return t.stop()}}),t,this,[[11,32,36,44],[37,,39,43]])})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,u.coroutine)(a.default.mark((function e(t){var n,r,c,l,d,f,p,h,v,m,y,g,_,b,k,w;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._baseApis.getAccountData(t)){e.next=3;break}return e.abrupt("return");case 3:if((r=n.getContent()).encrypted){e.next=6;break}throw new Error("Content is not encrypted!");case 6:c={},l=!0,d=!1,f=void 0,e.prev=10,p=(0,s.default)((0,i.default)(r.encrypted));case 12:if(l=(h=p.next()).done){e.next=24;break}v=h.value,m=this._baseApis.getAccountData("m.secret_storage.key."+v).getContent(),y=r.encrypted[v],e.t0=m.algorithm,e.next=e.t0===E?19:21;break;case 19:return m.pubkey&&y.ciphertext&&y.mac&&y.ephemeral&&(c[v]=m),e.abrupt("break",21);case 21:l=!0,e.next=12;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(10),d=!0,f=e.t1;case 30:e.prev=30,e.prev=31,!l&&p.return&&p.return();case 33:if(e.prev=33,!d){e.next=36;break}throw f;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return g=void 0,_=void 0,e.prev=40,e.next=43,(0,u.resolve)(this._getSecretStorageKey(c));case 43:b=e.sent,k=(0,o.default)(b,2),g=k[0],_=k[1],w=r.encrypted[g],e.t2=c[g].algorithm,e.next=e.t2===E?51:52;break;case 51:return e.abrupt("return",_.decrypt(w.ephemeral,w.mac,w.ciphertext));case 52:return e.prev=52,_&&_.free(),e.finish(52);case 55:case"end":return e.stop()}}),e,this,[[10,26,30,38],[31,,33,37],[40,,52,55]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isStored",value:function(e,t){var n=this._baseApis.getAccountData(e);if(!n)return!1;void 0===t&&(t=!0);var r=n.getContent();if(!r.encrypted)return!1;var o=!0,a=!1,u=void 0;try{for(var c,l=(0,s.default)((0,i.default)(r.encrypted));!(o=(c=l.next()).done);o=!0){var d=c.value,f=this._baseApis.getAccountData("m.secret_storage.key."+d).getContent(),p=r.encrypted[d];switch(t&&(0,y.pkVerify)(f,this._crossSigningInfo.getId("master"),this._crossSigningInfo.userId),f.algorithm){case E:if(f.pubkey&&p.ciphertext&&p.mac&&p.ephemeral)return!0}}}catch(h){a=!0,u=h}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}return!1}},{key:"request",value:function(e,t){var n=this,i=this._baseApis.makeTxnId(),o=this._requests[i]={devices:t},a=new c.default((function(e,t){o.resolve=e,o.reject=t})),u={name:e,action:"request",requesting_device_id:this._baseApis.deviceId,request_id:i},l={},d=!0,f=!1,p=void 0;try{for(var h,v=(0,s.default)(t);!(d=(h=v.next()).done);d=!0){l[h.value]=u}}catch(m){f=!0,p=m}finally{try{!d&&v.return&&v.return()}finally{if(f)throw p}}return this._baseApis.sendToDevice("m.secret.request",(0,r.default)({},this._baseApis.getUserId(),l)),{request_id:i,promise:a,cancel:function(e){var a={action:"request_cancellation",requesting_device_id:n._baseApis.deviceId,request_id:i},u={},c=!0,l=!1,d=void 0;try{for(var f,p=(0,s.default)(t);!(c=(f=p.next()).done);c=!0){u[f.value]=a}}catch(m){l=!0,d=m}finally{try{!c&&p.return&&p.return()}finally{if(l)throw d}}n._baseApis.sendToDevice("m.secret.request",(0,r.default)({},n._baseApis.getUserId(),u)),o.reject(new Error(e||"Cancelled"))}}}},{key:"_onRequestReceived",value:function(){var e=(0,u.coroutine)(a.default.mark((function e(t){var n,i,o,s,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getSender(),i=t.getContent(),n===this._baseApis.getUserId()&&(i.name&&i.action&&i.requesting_device_id&&i.request_id)){e.next=4;break}return e.abrupt("return");case 4:if(o=i.requesting_device_id,"request_cancellation"!==i.action){e.next=9;break}this._incomingRequests[o]&&this._incomingRequests[o][i.request_id]&&(m.default.info("received request cancellation for secret ("+n+", "+o+", "+i.request_id+")"),this.baseApis.emit("crypto.secrets.requestCancelled",{user_id:n,device_id:o,request_id:i.request_id})),e.next=40;break;case 9:if("request"!==i.action){e.next=40;break}if(o!==this._baseApis.deviceId){e.next=12;break}return e.abrupt("return");case 12:if(m.default.info("received request for secret ("+n+", "+o+", "+i.request_id+")"),this._cryptoCallbacks.onSecretRequested){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,(0,u.resolve)(this._cryptoCallbacks.onSecretRequested({user_id:n,device_id:o,request_id:i.request_id,name:i.name,device_trust:this._baseApis.checkDeviceTrust(n,o)}));case 17:if(!(s=e.sent)){e.next=40;break}return c={type:"m.secret.send",content:{request_id:i.request_id,secret:s}},l={algorithm:g.default.OLM_ALGORITHM,sender_key:this._baseApis._crypto._olmDevice.deviceCurve25519Key,ciphertext:{}},e.t0=u.resolve,e.t1=g.default,e.t2=this._baseApis._crypto._olmDevice,e.t3=this._baseApis,e.t4=r.default,e.t5={},e.t6=n,e.next=30,(0,u.resolve)(this._baseApis.getStoredDevice(n,o));case 30:return e.t7=e.sent,e.t8=[e.t7],e.t9=(0,e.t4)(e.t5,e.t6,e.t8),e.t10=e.t1.ensureOlmSessionsForDevices.call(e.t1,e.t2,e.t3,e.t9),e.next=36,(0,e.t0)(e.t10);case 36:return e.next=38,(0,u.resolve)(g.default.encryptMessageForDevice(l.ciphertext,this._baseApis.getUserId(),this._baseApis.deviceId,this._baseApis._crypto._olmDevice,n,this._baseApis._crypto.getStoredDevice(n,o),c));case 38:d=(0,r.default)({},n,(0,r.default)({},o,l)),this._baseApis.sendToDevice("m.room.encrypted",d);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onSecretReceived",value:function(e){if(e.getSender()===this._baseApis.getUserId()){var t=e.getContent();m.default.log("got secret share for request ",t.request_id);var n=this._requests[t.request_id];if(n){var r=this._baseApis._crypto._deviceList.getDeviceByIdentityKey(g.default.OLM_ALGORITHM,e.getSenderKey());if(!r)return void m.default.log("secret share from unknown device with key",e.getSenderKey());if(!n.devices.includes(r.deviceId))return void m.default.log("unsolicited secret share from device",r.deviceId);n.resolve(t.secret)}}}},{key:"_getSecretStorageKey",value:function(){var t=(0,u.coroutine)(a.default.mark((function t(n){var r,i,s,l,d,f;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._cryptoCallbacks.getSecretStorageKey){t.next=2;break}throw new Error("No getSecretStorageKey callback supplied");case 2:return t.next=4,(0,u.resolve)(c.default.resolve(this._cryptoCallbacks.getSecretStorageKey({keys:n})));case 4:if(r=t.sent){t.next=7;break}throw new Error("getSecretStorageKey callback returned falsey");case 7:if(!(r.length<2)){t.next=9;break}throw new Error("getSecretStorageKey callback returned invalid data");case 9:if(i=(0,o.default)(r,2),s=i[0],l=i[1],n[s]){t.next=12;break}throw new Error("App returned unknown key from getSecretStorageKey!");case 12:t.t0=n[s].algorithm,t.next=t.t0===E?15:29;break;case 15:d=new e.Olm.PkDecryption,f=void 0,t.prev=17,f=d.init_with_private_key(l),t.next=25;break;case 21:throw t.prev=21,t.t1=t.catch(17),d.free(),new Error("getSecretStorageKey callback returned invalid key");case 25:if(f===n[s].pubkey){t.next=28;break}throw d.free(),new Error("getSecretStorageKey callback returned incorrect key");case 28:return t.abrupt("return",[s,d]);case 29:throw new Error("Unknown key type: "+n[s].algorithm);case 30:case"end":return t.stop()}}),t,this,[[17,21]])})));return function(e){return t.apply(this,arguments)}}()}]),n}(v.EventEmitter);t.default=S}).call(this,n(6))},function(e,t,n){n(63),n(33),n(44),n(246),n(249),n(250),e.exports=n(4).Promise},function(e,t,n){"use strict";var r,i,o,s,a=n(50),u=n(11),c=n(23),l=n(65),d=n(7),f=n(14),p=n(29),h=n(89),v=n(54),m=n(135),y=n(136).set,g=n(247)(),_=n(95),b=n(137),k=n(248),w=n(138),E=u.TypeError,S=u.process,x=S&&S.versions,T=x&&x.v8||"",R=u.Promise,I="process"==l(S),C=function(){},O=i=_.f,A=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[n(15)("species")]=function(e){e(C,C)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t&&0!==T.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(r){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,a=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{a?(i||(2==e._h&&N(e),e._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===t.promise?c(E("Promise-chain cycle")):(o=D(n))?o.call(n,u,c):u(n)):c(r)}catch(d){l&&!s&&l.exit(),c(d)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&M(e)}))}},M=function(e){y.call(u,(function(){var t,n,r,i=e._v,o=U(e);if(o&&(t=b((function(){I?S.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=I||U(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},U=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(u,(function(){var t;I?S.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},F=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw E("Promise can't be resolved itself");(n=D(t))?g((function(){var i={_w:r,_d:!1};try{n.call(t,c(e,i,1),c(L,i,1))}catch(o){L.call(i,o)}})):(r._v=t,r._s=1,P(r,!1))}catch(i){L.call({_w:r,_d:!1},i)}}};A||(R=function(e){h(this,R,"Promise","_h"),p(e),r.call(this);try{e(c(F,this,1),c(L,this,1))}catch(t){L.call(this,t)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(88)(R.prototype,{then:function(e,t){var n=O(m(this,R));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(F,e,1),this.reject=c(L,e,1)},_.f=O=function(e){return e===R||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!A,{Promise:R}),n(51)(R,"Promise"),n(127)("Promise"),s=n(4).Promise,d(d.S+d.F*!A,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!A),"Promise",{resolve:function(e){return w(a&&this===s?R:this,e)}}),d(d.S+d.F*!(A&&n(133)((function(e){R.all(e).catch(C)}))),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,s=1;v(e,!1,(function(e){var a=o++,u=!1;n.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,n[a]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=b((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(11),i=n(136).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(49)(s);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var d=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(11).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(7),i=n(4),o=n(11),s=n(135),a=n(138);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(7),i=n(95),o=n(137);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(255);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(e,t,n){"use strict";var r=n(256).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return r.alloc(0);var n=0;if(" "!==e[n]){for(var i=0,o=0;e[n]===u;)i++,n++;for(var s=(e.length-n)*c+1>>>0,l=new Uint8Array(s);e[n];){var d=t[e.charCodeAt(n)];if(255===d)return;for(var f=0,p=s-1;(0!==d||f<o)&&-1!==p;p--,f++)d+=a*l[p]>>>0,l[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");o=f,n++}if(" "!==e[n]){for(var h=s-o;h!==s&&0===l[h];)h++;var v=r.allocUnsafe(i+(s-h));v.fill(0,0,i);for(var m=i;h!==s;)v[m++]=l[h++];return v}}}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var c=(s-o)*l+1>>>0,d=new Uint8Array(c);o!==s;){for(var f=t[o],p=0,h=c-1;(0!==f||p<i)&&-1!==h;h--,p++)f+=256*d[h]>>>0,d[h]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");i=p,o++}for(var v=c-i;v!==c&&0===d[v];)v++;for(var m=u.repeat(n);v<c;++v)m+=e.charAt(d[v]);return m},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},function(e,t,n){var r=n(141),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(5)),i=d(n(8)),o=n(1),s=d(o),a=d(n(10)),u=d(n(12)),c=d(n(3)),l=d(n(2));function d(e){return e&&e.__esModule?e:{default:e}}var f=0,p=1,h=2,v=3,m=function(){function t(e,n,r){(0,a.default)(this,t),this._baseApis=e,this._deviceId=n,this._cryptoStore=r,this._sendOutgoingRoomKeyRequestsTimer=null,this._sendOutgoingRoomKeyRequestsRunning=!1,this._clientRunning=!1}return(0,u.default)(t,[{key:"start",value:function(){this._clientRunning=!0,this._startTimer()}},{key:"stop",value:function(){c.default.log("stopping OutgoingRoomKeyRequestManager"),this._clientRunning=!1}},{key:"sendRoomKeyRequest",value:function(){var e=(0,o.coroutine)(i.default.mark((function e(t,n){var r,s,a,u,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.resolve)(this._cryptoStore.getOutgoingRoomKeyRequest(t));case 2:if(r=e.sent){e.next=8;break}return e.next=6,(0,o.resolve)(this._cryptoStore.getOrAddOutgoingRoomKeyRequest({requestBody:t,recipients:n,requestId:this._baseApis.makeTxnId(),state:f}));case 6:e.next=35;break;case 8:e.t0=r.state,e.next=e.t0===v||e.t0===f?11:e.t0===h?12:e.t0===p?16:34;break;case 11:return e.abrupt("return");case 12:return s=l?v:p,e.next=15,(0,o.resolve)(this._cryptoStore.updateOutgoingRoomKeyRequest(r.requestId,h,{state:s,cancellationTxnId:this._baseApis.makeTxnId()}));case 15:return e.abrupt("break",35);case 16:if(!l){e.next=33;break}return a=v,e.next=20,(0,o.resolve)(this._cryptoStore.updateOutgoingRoomKeyRequest(r.requestId,p,{state:a,cancellationTxnId:this._baseApis.makeTxnId(),requestTxnId:this._baseApis.makeTxnId()}));case 20:if(u=e.sent){e.next=25;break}return e.next=24,(0,o.resolve)(this.sendRoomKeyRequest(t,n,l));case 24:return e.abrupt("return",e.sent);case 25:return e.prev=25,e.next=28,(0,o.resolve)(this._sendOutgoingRoomKeyRequestCancellation(u,!0));case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(25),c.default.error("Error sending room key request cancellation; will retry later.",e.t1);case 33:return e.abrupt("break",35);case 34:throw new Error("unhandled state: "+r.state);case 35:this._startTimer();case 36:case"end":return e.stop()}}),e,this,[[25,30]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"cancelRoomKeyRequest",value:function(e){var t=this;return this._cryptoStore.getOutgoingRoomKeyRequest(e).then((function(n){if(n)switch(n.state){case h:case v:return;case f:return c.default.log("deleting unnecessary room key request for "+y(e)),t._cryptoStore.deleteOutgoingRoomKeyRequest(n.requestId,f);case p:return t._cryptoStore.updateOutgoingRoomKeyRequest(n.requestId,p,{state:h,cancellationTxnId:t._baseApis.makeTxnId()}).then((function(n){n?t._sendOutgoingRoomKeyRequestCancellation(n).catch((function(e){c.default.error("Error sending room key request cancellation; will retry later.",e),t._startTimer()})):c.default.log("Tried to cancel room key request for "+y(e)+" but it was already cancelled in another tab")}));default:throw new Error("unhandled state: "+n.state)}}))}},{key:"getOutgoingSentRoomKeyRequest",value:function(e,t){return this._cryptoStore.getOutgoingRoomKeyRequestsByTarget(e,t,[p])}},{key:"_startTimer",value:function(){var t=this;if(!this._sendOutgoingRoomKeyRequestsTimer){this._sendOutgoingRoomKeyRequestsTimer=e.setTimeout((function(){if(t._sendOutgoingRoomKeyRequestsRunning)throw new Error("RoomKeyRequestSend already in progress!");t._sendOutgoingRoomKeyRequestsRunning=!0,t._sendOutgoingRoomKeyRequests().finally((function(){t._sendOutgoingRoomKeyRequestsRunning=!1})).catch((function(e){c.default.warn("error in OutgoingRoomKeyRequestManager: "+e)}))}),500)}}},{key:"_sendOutgoingRoomKeyRequests",value:function(){var e=this;return this._clientRunning?(c.default.log("Looking for queued outgoing room key requests"),this._cryptoStore.getOutgoingRoomKeyRequestByState([h,v,f]).then((function(t){if(!t)return c.default.log("No more outgoing room key requests"),void(e._sendOutgoingRoomKeyRequestsTimer=null);var n=void 0;switch(t.state){case f:n=e._sendOutgoingRoomKeyRequest(t);break;case h:n=e._sendOutgoingRoomKeyRequestCancellation(t);break;case v:n=e._sendOutgoingRoomKeyRequestCancellation(t,!0)}return n.then((function(){return e._sendOutgoingRoomKeyRequests()})).catch((function(t){c.default.error("Error sending room key request; will retry later.",t),e._sendOutgoingRoomKeyRequestsTimer=null,e._startTimer()}))}))):(this._sendOutgoingRoomKeyRequestsTimer=null,s.default.resolve())}},{key:"_sendOutgoingRoomKeyRequest",value:function(e){var t=this;c.default.log("Requesting keys for "+y(e.requestBody)+" from "+g(e.recipients)+"(id "+e.requestId+")");var n={action:"request",requesting_device_id:this._deviceId,request_id:e.requestId,body:e.requestBody};return this._sendMessageToDevices(n,e.recipients,e.requestTxnId||e.requestId).then((function(){return t._cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,f,{state:p})}))}},{key:"_sendOutgoingRoomKeyRequestCancellation",value:function(e,t){var n=this;c.default.log("Sending cancellation for key request for "+y(e.requestBody)+" to "+g(e.recipients)+" (cancellation id "+e.cancellationTxnId+")");var r={action:"request_cancellation",requesting_device_id:this._deviceId,request_id:e.requestId};return this._sendMessageToDevices(r,e.recipients,e.cancellationTxnId).then((function(){return t?n._cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,v,{state:f}):n._cryptoStore.deleteOutgoingRoomKeyRequest(e.requestId,h)}))}},{key:"_sendMessageToDevices",value:function(e,t,n){var i={},o=!0,s=!1,a=void 0;try{for(var u,c=(0,r.default)(t);!(o=(u=c.next()).done);o=!0){var l=u.value;i[l.userId]||(i[l.userId]={}),i[l.userId][l.deviceId]=e}}catch(d){s=!0,a=d}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return this._baseApis.sendToDevice("m.room_key_request",i,n)}}]),t}();function y(e){return e.room_id+" / "+e.session_id}function g(e){return"["+l.default.map(e,(function(e){return e.userId+":"+e.deviceId})).join(",")+"]"}t.default=m}).call(this,n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScanQRCode=t.ShowQRCode=void 0;var r=m(n(8)),i=m(n(18)),o=m(n(5)),s=m(n(9)),a=m(n(57)),u=n(1),c=m(n(24)),l=m(n(10)),d=m(n(12)),f=m(n(25)),p=m(n(26)),h=m(n(142)),v=n(70);function m(e){return e&&e.__esModule?e:{default:e}}var y=/^(?:https?:\/\/)?(?:www\.)?matrix\.to\/#\/([#@!+][^?]+)\?(.+)$/,g=/^key_([^:]+:.+)$/,_=(0,v.errorFactory)("m.qr_code.invalid","Invalid QR code");(t.ShowQRCode=function(e){function t(){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"_doVerification",value:function(){if(!this._done){var e="https://matrix.to/#/"+this._baseApis.getUserId()+"?device="+encodeURIComponent(this._baseApis.deviceId)+"&action=verify&key_ed25519%3A"+encodeURIComponent(this._baseApis.deviceId)+"="+encodeURIComponent(this._baseApis.getDeviceEd25519Key());this.emit("show_qr_code",{url:e})}}}]),t}(h.default)).NAME="m.qr_code.show.v1",(t.ScanQRCode=function(e){function t(){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"_doVerification",value:function(){var e=(0,u.coroutine)(r.default.mark((function e(){var t,n,c,l,d,f,p,h,m,b,k,w,E,S,x,T,R=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.resolve)(new a.default((function(e,t){R.emit("scan",{done:e,cancel:function(){return t((0,v.newUserCancelledError)())}})})));case 2:if(t=e.sent,n=t.match(y),c=void 0,l={},n){e.next=8;break}throw _();case 8:for(d=n[1],f=n[2].split("&").map((function(e){return e.split("=",2).map(decodeURIComponent)})),p=void 0,h=!0,m=!1,b=void 0,e.prev=14,k=(0,o.default)(f);!(h=(w=k.next()).done);h=!0)E=(0,i.default)(w.value,2),S=E[0],x=E[1],"device"===S?c=x:"action"===S?p=x:(T=S.match(g))&&(l[T[1]]=x);e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),m=!0,b=e.t0;case 22:e.prev=22,e.prev=23,!h&&k.return&&k.return();case 25:if(e.prev=25,!m){e.next=28;break}throw b;case 28:return e.finish(25);case 29:return e.finish(22);case 30:if(c&&"verify"===p&&0!==(0,s.default)(l).length){e.next=32;break}throw _();case 32:if(this.userId){e.next=37;break}return e.next=35,(0,u.resolve)(new a.default((function(e,t){R.emit("confirm_user_id",{userId:d,confirm:e,cancel:function(){return t((0,v.newUserMismatchError)())}})})));case 35:e.next=39;break;case 37:if(this.userId===d){e.next=39;break}throw(0,v.newUserMismatchError)({expected:this.userId,actual:d});case 39:return e.next=41,(0,u.resolve)(this._verifyKeys(d,l,(function(e,t,n){if(t.keys[e]!==n)throw(0,v.newKeyMismatchError)()})));case 41:case"end":return e.stop()}}),e,this,[[14,18,22,30],[23,,25,29]])})));return function(){return e.apply(this,arguments)}}()}],[{key:"factory",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(t,[null].concat(n)))}}]),t}(h.default)).NAME="m.qr_code.scan.v1"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(18)),i=g(n(57)),o=g(n(8)),s=n(1),a=g(n(24)),u=g(n(10)),c=g(n(12)),l=g(n(25)),d=g(n(26)),f=g(n(53)),p=g(n(9)),h=g(n(5)),v=g(n(142)),m=g(n(94)),y=n(70);function g(e){return e&&e.__esModule?e:{default:e}}var _=["m.key.verification.accept","m.key.verification.key","m.key.verification.mac"],b=void 0,k=(0,y.errorFactory)("m.mismatched_sas","Mismatched short authentication string"),w=(0,y.errorFactory)("m.mismatched_commitment","Mismatched commitment");var E=[["\ud83d\udc36","dog"],["\ud83d\udc31","cat"],["\ud83e\udd81","lion"],["\ud83d\udc0e","horse"],["\ud83e\udd84","unicorn"],["\ud83d\udc37","pig"],["\ud83d\udc18","elephant"],["\ud83d\udc30","rabbit"],["\ud83d\udc3c","panda"],["\ud83d\udc13","rooster"],["\ud83d\udc27","penguin"],["\ud83d\udc22","turtle"],["\ud83d\udc1f","fish"],["\ud83d\udc19","octopus"],["\ud83e\udd8b","butterfly"],["\ud83c\udf37","flower"],["\ud83c\udf33","tree"],["\ud83c\udf35","cactus"],["\ud83c\udf44","mushroom"],["\ud83c\udf0f","globe"],["\ud83c\udf19","moon"],["\u2601\ufe0f","cloud"],["\ud83d\udd25","fire"],["\ud83c\udf4c","banana"],["\ud83c\udf4e","apple"],["\ud83c\udf53","strawberry"],["\ud83c\udf3d","corn"],["\ud83c\udf55","pizza"],["\ud83c\udf82","cake"],["\u2764\ufe0f","heart"],["\ud83d\ude42","smiley"],["\ud83e\udd16","robot"],["\ud83c\udfa9","hat"],["\ud83d\udc53","glasses"],["\ud83d\udd27","spanner"],["\ud83c\udf85","santa"],["\ud83d\udc4d","thumbs up"],["\u2602\ufe0f","umbrella"],["\u231b","hourglass"],["\u23f0","clock"],["\ud83c\udf81","gift"],["\ud83d\udca1","light bulb"],["\ud83d\udcd5","book"],["\u270f\ufe0f","pencil"],["\ud83d\udcce","paperclip"],["\u2702\ufe0f","scissors"],["\ud83d\udd12","padlock"],["\ud83d\udd11","key"],["\ud83d\udd28","hammer"],["\u260e\ufe0f","telephone"],["\ud83c\udfc1","flag"],["\ud83d\ude82","train"],["\ud83d\udeb2","bicycle"],["\u2708\ufe0f","aeroplane"],["\ud83d\ude80","rocket"],["\ud83c\udfc6","trophy"],["\u26bd","ball"],["\ud83c\udfb8","guitar"],["\ud83c\udfba","trumpet"],["\ud83d\udd14","bell"],["\u2693\ufe0f","anchor"],["\ud83c\udfa7","headphones"],["\ud83d\udcc1","folder"],["\ud83d\udccc","pin"]];var S={decimal:function(e){return[1e3+(e[0]<<5|e[1]>>3),1e3+((7&e[1])<<10|e[2]<<2|e[3]>>6),1e3+((63&e[3])<<7|e[4]>>1)]},emoji:function(e){return[e[0]>>2,(3&e[0])<<4|e[1]>>4,(15&e[1])<<2|e[2]>>6,63&e[2],e[3]>>2,(3&e[3])<<4|e[4]>>4,(15&e[4])<<2|e[5]>>6].map((function(e){return E[e]}))}};function x(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var s,a=(0,h.default)(t);!(r=(s=a.next()).done);r=!0){var u=s.value;u in S&&(n[u]=S[u](e))}}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}var T={"hkdf-hmac-sha256":"calculate_mac","hmac-sha256":"calculate_mac_long_kdf"},R=["curve25519"],I=["sha256"],C=["hkdf-hmac-sha256","hmac-sha256"],O=(0,p.default)(S),A=new f.default(R),D=new f.default(I),P=new f.default(C),M=new f.default(O);function U(e,t){return e instanceof Array?e.filter((function(e){return t.has(e)})):[]}var N=function(t){function n(){return(0,u.default)(this,n),(0,l.default)(this,(n.__proto__||(0,a.default)(n)).apply(this,arguments))}return(0,d.default)(n,t),(0,c.default)(n,[{key:"_doVerification",value:function(){var t=(0,s.coroutine)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.resolve)(e.Olm.init());case 2:return b=b||new e.Olm.Utility,t.next=5,(0,s.resolve)(this._baseApis.downloadKeys([this.userId]));case 5:if(!this.startEvent){t.next=11;break}return t.next=8,(0,s.resolve)(this._doRespondVerification());case 8:return t.abrupt("return",t.sent);case 11:return t.next=13,(0,s.resolve)(this._doSendVerification());case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_doSendVerification",value:function(){var t=(0,s.coroutine)(o.default.mark((function t(){var a,u,c,l,d,f,p,h,v,g,_,E,S,T=this;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this._contentWithTxnId({method:n.NAME,from_device:this._baseApis.deviceId,key_agreement_protocols:R,hashes:I,message_authentication_codes:C,short_authentication_string:O}),this._sendWithTxnId("m.key.verification.start",a),t.next=4,(0,s.resolve)(this._waitForEvent("m.key.verification.accept"));case 4:if(u=t.sent,c=u.getContent(),l=U(c.short_authentication_string,M),A.has(c.key_agreement_protocol)&&D.has(c.hash)&&P.has(c.message_authentication_code)&&l.length){t.next=9;break}throw(0,y.newUnknownMethodError)();case 9:if("string"===typeof c.commitment){t.next=11;break}throw(0,y.newInvalidMessageError)();case 11:return d=c.message_authentication_code,f=c.commitment,p=new e.Olm.SAS,t.prev=14,this._send("m.key.verification.key",{key:p.get_pubkey()}),t.next=18,(0,s.resolve)(this._waitForEvent("m.key.verification.key"));case 18:if(u=t.sent,c=u.getContent(),h=c.key+m.default.stringify(a),b.sha256(h)===f){t.next=23;break}throw w();case 23:return p.set_their_key(c.key),v="MATRIX_KEY_VERIFICATION_SAS"+this._baseApis.getUserId()+this._baseApis.deviceId+this.userId+this.deviceId+this.transactionId,g=p.generate_bytes(v,6),_=new i.default((function(e,t){T.emit("show_sas",{sas:x(g,l),confirm:function(){T._sendMAC(p,d),e()},cancel:function(){return t((0,y.newUserCancelledError)())},mismatch:function(){return t(k())}})})),t.next=29,(0,s.resolve)(i.default.all([this._waitForEvent("m.key.verification.mac"),_]));case 29:return E=t.sent,S=(0,r.default)(E,1),u=S[0],c=u.getContent(),t.next=35,(0,s.resolve)(this._checkMAC(p,c,d));case 35:return t.prev=35,p.free(),t.finish(35);case 38:case"end":return t.stop()}}),t,this,[[14,,35,38]])})));return function(){return t.apply(this,arguments)}}()},{key:"_doRespondVerification",value:function(){var t=(0,s.coroutine)(o.default.mark((function t(){var n,a,u,c,l,d,p,h,v,g,_,w,E,S=this;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._contentFromEventWithTxnId(this.startEvent),a=U(R,new f.default(n.key_agreement_protocols))[0],u=U(I,new f.default(n.hashes))[0],c=U(C,new f.default(n.message_authentication_codes))[0],l=U(n.short_authentication_string,M),void 0!==a&&void 0!==u&&void 0!==c&&l.length){t.next=7;break}throw(0,y.newUnknownMethodError)();case 7:return d=new e.Olm.SAS,t.prev=8,p=d.get_pubkey()+m.default.stringify(n),this._send("m.key.verification.accept",{key_agreement_protocol:a,hash:u,message_authentication_code:c,short_authentication_string:l,commitment:b.sha256(p)}),t.next=13,(0,s.resolve)(this._waitForEvent("m.key.verification.key"));case 13:return h=t.sent,n=h.getContent(),d.set_their_key(n.key),this._send("m.key.verification.key",{key:d.get_pubkey()}),v="MATRIX_KEY_VERIFICATION_SAS"+this.userId+this.deviceId+this._baseApis.getUserId()+this._baseApis.deviceId+this.transactionId,g=d.generate_bytes(v,6),_=new i.default((function(e,t){S.emit("show_sas",{sas:x(g,l),confirm:function(){S._sendMAC(d,c),e()},cancel:function(){return t((0,y.newUserCancelledError)())},mismatch:function(){return t(k())}})})),t.next=22,(0,s.resolve)(i.default.all([this._waitForEvent("m.key.verification.mac"),_]));case 22:return w=t.sent,E=(0,r.default)(w,1),h=E[0],n=h.getContent(),t.next=28,(0,s.resolve)(this._checkMAC(d,n,c));case 28:return t.prev=28,d.free(),t.finish(28);case 31:case"end":return t.stop()}}),t,this,[[8,,28,31]])})));return function(){return t.apply(this,arguments)}}()},{key:"_sendMAC",value:function(e,t){var n={},r=[],i="MATRIX_KEY_VERIFICATION_MAC"+this._baseApis.getUserId()+this._baseApis.deviceId+this.userId+this.deviceId+this.transactionId,o="ed25519:"+this._baseApis.deviceId;n[o]=e[T[t]](this._baseApis.getDeviceEd25519Key(),i+o),r.push(o);var s=this._baseApis.getCrossSigningId();if(s){var a="ed25519:"+s;n[a]=e[T[t]](s,i+a),r.push(a)}var u=e[T[t]](r.sort().join(","),i+"KEY_IDS");this._send("m.key.verification.mac",{mac:n,keys:u})}},{key:"_checkMAC",value:function(){var e=(0,s.coroutine)(o.default.mark((function e(t,n,r){var i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="MATRIX_KEY_VERIFICATION_MAC"+this.userId+this.deviceId+this._baseApis.getUserId()+this._baseApis.deviceId+this.transactionId,n.keys===t[T[r]]((0,p.default)(n.mac).sort().join(","),i+"KEY_IDS")){e.next=3;break}throw(0,y.newKeyMismatchError)();case 3:return e.next=5,(0,s.resolve)(this._verifyKeys(this.userId,n.mac,(function(e,n,o){if(o!==t[T[r]](n.keys[e],i+e))throw(0,y.newKeyMismatchError)()})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"events",get:function(){return _}}]),n}(v.default);t.default=N,N.NAME="m.sas.v1"}).call(this,n(6))},function(e,t,n){"use strict";(function(t){var r=d(n(5)),i=d(n(9)),o=d(n(22)),s=d(n(8)),a=n(1),u=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(t.doTxn("readwrite",[l.default.STORE_ACCOUNT],(function(e){t.getAccount(e,(function(i){null!==i?r.unpickle(n,i):(r.create(),i=r.pickle(n),t.storeAccount(e,i))}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),c=d(n(3)),l=d(n(55));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(void 0===e)throw new Error("payloadString undefined");if(e.length>49152)throw new Error("Message too long ("+e.length+" bytes). The maximum for an encrypted message is 49152 bytes.")}function p(e){this._cryptoStore=e,this._pickleKey="DEFAULT_KEY",this.deviceCurve25519Key=null,this.deviceEd25519Key=null,this._maxOneTimeKeys=null,this._outboundGroupSessionStore={},this._inboundGroupSessionMessageIndexes={},this._sessionsInProgress={}}p.prototype.init=(0,a.coroutine)(s.default.mark((function e(){var n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,r=new t.Olm.Account,e.prev=2,e.next=5,(0,a.resolve)(u(this._cryptoStore,this._pickleKey,r));case 5:n=JSON.parse(r.identity_keys()),this._maxOneTimeKeys=r.max_number_of_one_time_keys();case 7:return e.prev=7,r.free(),e.finish(7);case 10:this.deviceCurve25519Key=n.curve25519,this.deviceEd25519Key=n.ed25519;case 12:case"end":return e.stop()}}),e,this,[[2,,7,10]])}))),p.getOlmVersion=function(){return t.Olm.get_library_version()},p.prototype._getAccount=function(e,n){var r=this;this._cryptoStore.getAccount(e,(function(e){var i=new t.Olm.Account;try{i.unpickle(r._pickleKey,e),n(i)}finally{i.free()}}))},p.prototype._storeAccount=function(e,t){this._cryptoStore.storeAccount(e,t.pickle(this._pickleKey))},p.prototype._getSession=function(e,t,n,r){var i=this;this._cryptoStore.getEndToEndSession(e,t,n,(function(e){i._unpickleSession(e,r)}))},p.prototype._unpickleSession=function(e,n){var r=new t.Olm.Session;try{r.unpickle(this._pickleKey,e.session),n((0,o.default)({},e,{session:r}))}finally{r.free()}},p.prototype._saveSession=function(e,t,n){var r=t.session.session_id(),i=(0,o.default)(t,{session:t.session.pickle(this._pickleKey)});this._cryptoStore.storeEndToEndSession(e,r,i,n)},p.prototype._getUtility=function(e){var n=new t.Olm.Utility;try{return e(n)}finally{n.free()}},p.prototype.sign=function(){var e=(0,a.coroutine)(s.default.mark((function e(t){var n,r=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_ACCOUNT],(function(e){r._getAccount(e,(function(e){n=e.sign(t)}))})));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),p.prototype.getOneTimeKeys=(0,a.coroutine)(s.default.mark((function e(){var t,n=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_ACCOUNT],(function(e){n._getAccount(e,(function(e){t=JSON.parse(e.one_time_keys())}))})));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),p.prototype.maxNumberOfOneTimeKeys=function(){return this._maxOneTimeKeys},p.prototype.markKeysAsPublished=(0,a.coroutine)(s.default.mark((function e(){var t=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_ACCOUNT],(function(e){t._getAccount(e,(function(n){n.mark_keys_as_published(),t._storeAccount(e,n)}))})));case 2:case"end":return e.stop()}}),e,this)}))),p.prototype.generateOneTimeKeys=function(e){var t=this;return this._cryptoStore.doTxn("readwrite",[l.default.STORE_ACCOUNT],(function(n){t._getAccount(n,(function(r){r.generate_one_time_keys(e),t._storeAccount(n,r)}))}))},p.prototype.createOutboundSession=function(){var e=(0,a.coroutine)(s.default.mark((function e(n,r){var i,o=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_ACCOUNT,l.default.STORE_SESSIONS],(function(e){o._getAccount(e,(function(s){var a=new t.Olm.Session;try{a.create_outbound(s,n,r),i=a.session_id(),o._storeAccount(e,s);var u={session:a,lastReceivedMessageTs:Date.now()};o._saveSession(n,u,e)}finally{a.free()}}))})));case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),p.prototype.createInboundSession=function(){var e=(0,a.coroutine)(s.default.mark((function e(n,r,i){var o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r){e.next=2;break}throw new Error("Need messageType == 0 to create inbound session");case 2:return o=void 0,e.next=5,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_ACCOUNT,l.default.STORE_SESSIONS],(function(e){u._getAccount(e,(function(s){var a=new t.Olm.Session;try{a.create_inbound_from(s,n,i),s.remove_one_time_keys(a),u._storeAccount(e,s);var c=a.decrypt(r,i),l={session:a,lastReceivedMessageTs:Date.now()};u._saveSession(n,l,e),o={payload:c,session_id:a.session_id()}}finally{a.free()}}))})));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),p.prototype.getSessionIdsForDevice=function(){var e=(0,a.coroutine)(s.default.mark((function e(t){var n,r=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sessionsInProgress[t]){e.next=9;break}return c.default.log("waiting for olm session to be created"),e.prev=2,e.next=5,(0,a.resolve)(this._sessionsInProgress[t]);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return n=void 0,e.next=12,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_SESSIONS],(function(e){r._cryptoStore.getEndToEndSessions(t,e,(function(e){n=(0,i.default)(e)}))})));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),p.prototype.getSessionIdForDevice=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n){var r,i,o,u,c,l,d;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this.getSessionInfoForDevice(t,n));case 2:if(0!==(r=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:for(i=0,o=1;o<r.length;o++)u=r[o],c=void 0===u.lastReceivedMessageTs?0:u.lastReceivedMessageTs,l=r[i],d=void 0===l.lastReceivedMessageTs?0:l.lastReceivedMessageTs,(c>d||c===d&&u.sessionId<l.sessionId)&&(i=o);return e.abrupt("return",r[i].sessionId);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),p.prototype.getSessionInfoForDevice=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n){var o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sessionsInProgress[t]||n){e.next=9;break}return c.default.log("waiting for olm session to be created"),e.prev=2,e.next=5,(0,a.resolve)(this._sessionsInProgress[t]);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return o=[],e.next=12,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_SESSIONS],(function(e){u._cryptoStore.getEndToEndSessions(t,e,(function(e){var t=(0,i.default)(e).sort(),n=!0,s=!1,a=void 0;try{for(var c,l=function(){var t=c.value;u._unpickleSession(e[t],(function(e){o.push({lastReceivedMessageTs:e.lastReceivedMessageTs,hasReceivedMessage:e.session.has_received_message(),sessionId:t})}))},d=(0,r.default)(t);!(n=(c=d.next()).done);n=!0)l()}catch(f){s=!0,a=f}finally{try{!n&&d.return&&d.return()}finally{if(s)throw a}}}))})));case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),p.prototype.encryptMessage=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r){var i,o=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(r),i=void 0,e.next=4,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_SESSIONS],(function(e){o._getSession(t,n,e,(function(s){var a=s.session.describe();c.default.log("encryptMessage: Olm Session ID "+n+" to "+t+": "+a),i=s.session.encrypt(r),o._saveSession(t,s,e)}))})));case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),p.prototype.decryptMessage=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r,i){var o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_SESSIONS],(function(e){u._getSession(t,n,e,(function(s){var a=s.session.describe();c.default.log("decryptMessage: Olm Session ID "+n+" from "+t+": "+a),o=s.session.decrypt(r,i),s.lastReceivedMessageTs=Date.now(),u._saveSession(t,s,e)}))})));case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),p.prototype.matchesSession=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r,i){var o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r){e.next=2;break}return e.abrupt("return",!1);case 2:return o=void 0,e.next=5,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_SESSIONS],(function(e){u._getSession(t,n,e,(function(e){o=e.session.matches_inbound(i)}))})));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),p.prototype._saveOutboundGroupSession=function(e){var t=e.pickle(this._pickleKey);this._outboundGroupSessionStore[e.session_id()]=t},p.prototype._getOutboundGroupSession=function(e,n){var r=this._outboundGroupSessionStore[e];if(void 0===r)throw new Error("Unknown outbound group session "+e);var i=new t.Olm.OutboundGroupSession;try{return i.unpickle(this._pickleKey,r),n(i)}finally{i.free()}},p.prototype.createOutboundGroupSession=function(){var e=new t.Olm.OutboundGroupSession;try{return e.create(),this._saveOutboundGroupSession(e),e.session_id()}finally{e.free()}},p.prototype.encryptGroupMessage=function(e,t){var n=this;return c.default.log("encrypting msg with megolm session "+e),f(t),this._getOutboundGroupSession(e,(function(e){var r=e.encrypt(t);return n._saveOutboundGroupSession(e),r}))},p.prototype.getOutboundGroupSessionKey=function(e){return this._getOutboundGroupSession(e,(function(e){return{chain_index:e.message_index(),key:e.session_key()}}))},p.prototype._unpickleInboundGroupSession=function(e,n){var r=new t.Olm.InboundGroupSession;try{return r.unpickle(this._pickleKey,e.session),n(r)}finally{r.free()}},p.prototype._getInboundGroupSession=function(e,t,n,r,i){var o=this;this._cryptoStore.getEndToEndInboundGroupSession(t,n,r,(function(t){if(null!==t){if(null!==e&&e!==t.room_id)throw new Error("Mismatched room_id for inbound group session (expected "+t.room_id+", was "+e+")");o._unpickleInboundGroupSession(t,(function(e){i(e,t)}))}else i(null)}))},p.prototype.addInboundGroupSession=function(){var e=(0,a.coroutine)(s.default.mark((function e(n,r,i,o,u,d,f){var p=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_INBOUND_GROUP_SESSIONS],(function(e){p._getInboundGroupSession(n,r,o,e,(function(s,a){var l=new t.Olm.InboundGroupSession;try{if(f?l.import_session(u):l.create(u),o!=l.session_id())throw new Error("Mismatched group session ID from senderKey: "+r);if(s&&(c.default.log("Update for megolm session "+r+"/"+o),s.first_known_index()<=l.first_known_index()))return void c.default.log("Keeping existing megolm session "+o);var h={room_id:n,session:l.pickle(p._pickleKey),keysClaimed:d,forwardingCurve25519KeyChain:i};p._cryptoStore.storeEndToEndInboundGroupSession(r,o,h,e)}finally{l.free()}}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s,a){return e.apply(this,arguments)}}(),p.prototype.decryptGroupMessage=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r,i,o,u){var c,d=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readwrite",[l.default.STORE_INBOUND_GROUP_SESSIONS],(function(e){d._getInboundGroupSession(t,n,r,e,(function(t,s){if(null!==t){var a=t.decrypt(i),l=a.plaintext;if(void 0===l)l=a;else{var f=n+"|"+r+"|"+a.message_index;if(f in d._inboundGroupSessionMessageIndexes){var p=d._inboundGroupSessionMessageIndexes[f];if(p.id!==o||p.timestamp!==u)throw new Error("Duplicate message index, possible replay attack: "+f)}d._inboundGroupSessionMessageIndexes[f]={id:o,timestamp:u}}s.session=t.pickle(d._pickleKey),d._cryptoStore.storeEndToEndInboundGroupSession(n,r,s,e),c={result:l,keysClaimed:s.keysClaimed||{},senderKey:n,forwardingCurve25519KeyChain:s.forwardingCurve25519KeyChain||[]}}else c=null}))})));case 3:return e.abrupt("return",c);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s){return e.apply(this,arguments)}}(),p.prototype.hasInboundSessionKeys=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r){var i,o=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_INBOUND_GROUP_SESSIONS],(function(e){o._cryptoStore.getEndToEndInboundGroupSession(n,r,e,(function(e){null!==e?t!==e.room_id?(c.default.warn("requested keys for inbound group session "+n+"|"+r+", with incorrect room_id (expected "+e.room_id+", was "+t+")"),i=!1):i=!0:i=!1}))})));case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),p.prototype.getInboundGroupSessionKey=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n,r,i){var o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,e.next=3,(0,a.resolve)(this._cryptoStore.doTxn("readonly",[l.default.STORE_INBOUND_GROUP_SESSIONS],(function(e){u._getInboundGroupSession(t,n,r,e,(function(e,t){if(null!==e){void 0===i&&(i=e.first_known_index());var n=e.export_session(i),r=(t.keysClaimed||{}).ed25519||null;o={chain_index:i,key:n,forwarding_curve25519_key_chain:t.forwardingCurve25519KeyChain||[],sender_claimed_ed25519_key:r}}else o=null}))})));case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),p.prototype.exportInboundGroupSession=function(e,t,n){return this._unpickleInboundGroupSession(n,(function(r){var i=r.first_known_index();return{sender_key:e,sender_claimed_keys:n.keysClaimed,room_id:n.room_id,session_id:t,session_key:r.export_session(i),forwarding_curve25519_key_chain:r.forwardingCurve25519KeyChain||[],first_known_index:r.first_known_index()}}))},p.prototype.verifySignature=function(e,t,n){this._getUtility((function(r){r.ed25519_verify(e,t,n)}))},e.exports=p}).call(this,n(6))},function(e,t,n){"use strict";var r=n(96);n(262),n(263),e.exports.ENCRYPTION_CLASSES=r.ENCRYPTION_CLASSES,e.exports.DECRYPTION_CLASSES=r.DECRYPTION_CLASSES,e.exports.DecryptionError=r.DecryptionError},function(e,t,n){"use strict";var r=u(n(21)),i=u(n(8)),o=n(1),s=u(o),a=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=n(2),l=n(35),d=n(69).DeviceVerification,f=n(96);function p(e){f.EncryptionAlgorithm.call(this,e),this._sessionPrepared=!1,this._prepPromise=null}function h(e){f.DecryptionAlgorithm.call(this,e)}c.inherits(p,f.EncryptionAlgorithm),p.prototype._ensureSession=function(e){if(this._prepPromise)return this._prepPromise;if(this._sessionPrepared)return s.default.resolve();var t=this;return this._prepPromise=t._crypto.downloadKeys(e).then((function(n){return t._crypto.ensureOlmSessionsForUsers(e)})).then((function(){t._sessionPrepared=!0})).finally((function(){t._prepPromise=null})),this._prepPromise},p.prototype.encryptMessage=function(){var e=(0,o.coroutine)(i.default.mark((function e(t,n,r){var a,u,f,p,h,v,m,y,g,_,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.resolve)(t.getEncryptionTargetMembers());case 2:return a=e.sent,u=c.map(a,(function(e){return e.userId})),f=this,e.next=7,(0,o.resolve)(this._ensureSession(u));case 7:p={room_id:t.roomId,type:n,content:r},h={algorithm:l.OLM_ALGORITHM,sender_key:f._olmDevice.deviceCurve25519Key,ciphertext:{}},v=[],m=0;case 11:if(!(m<u.length)){e.next=29;break}y=u[m],g=f._crypto.getStoredDevicesForUser(y),_=0;case 15:if(!(_<g.length)){e.next=26;break}if(b=g[_],b.getIdentityKey()!=f._olmDevice.deviceCurve25519Key){e.next=20;break}return e.abrupt("continue",23);case 20:if(b.verified!=d.BLOCKED){e.next=22;break}return e.abrupt("continue",23);case 22:v.push(l.encryptMessageForDevice(h.ciphertext,f._userId,f._deviceId,f._olmDevice,y,b,p));case 23:++_,e.next=15;break;case 26:++m,e.next=11;break;case 29:return e.next=31,(0,o.resolve)(s.default.all(v).then((function(){return h})));case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),c.inherits(h,f.DecryptionAlgorithm),h.prototype.decryptEvent=function(){var e=(0,o.coroutine)(i.default.mark((function e(t){var n,r,s,a,u,c,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getWireContent(),r=n.sender_key,s=n.ciphertext){e.next=5;break}throw new f.DecryptionError("OLM_MISSING_CIPHERTEXT","Missing ciphertext");case 5:if(this._olmDevice.deviceCurve25519Key in s){e.next=7;break}throw new f.DecryptionError("OLM_NOT_INCLUDED_IN_RECIPIENTS","Not included in recipients");case 7:return a=s[this._olmDevice.deviceCurve25519Key],u=void 0,e.prev=9,e.next=12,(0,o.resolve)(this._decryptMessage(r,a));case 12:u=e.sent,e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(9),new f.DecryptionError("OLM_BAD_ENCRYPTED_MESSAGE","Bad Encrypted Message",{sender:r,err:e.t0});case 18:if((c=JSON.parse(u)).recipient==this._userId){e.next=21;break}throw new f.DecryptionError("OLM_BAD_RECIPIENT","Message was intented for "+c.recipient);case 21:if(c.recipient_keys.ed25519==this._olmDevice.deviceEd25519Key){e.next=23;break}throw new f.DecryptionError("OLM_BAD_RECIPIENT_KEY","Message not intended for this device",{intended:c.recipient_keys.ed25519,our_key:this._olmDevice.deviceEd25519Key});case 23:if(c.sender==t.getSender()){e.next=25;break}throw new f.DecryptionError("OLM_FORWARDED_MESSAGE","Message forwarded from "+c.sender,{reported_sender:t.getSender()});case 25:if(c.room_id===t.getRoomId()){e.next=27;break}throw new f.DecryptionError("OLM_BAD_ROOM","Message intended for room "+c.room_id,{reported_room:t.room_id});case 27:return l=c.keys||{},e.abrupt("return",{clearEvent:c,senderCurve25519Key:r,claimedEd25519Key:l.ed25519||null});case 29:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),h.prototype._decryptMessage=function(){var e=(0,o.coroutine)(i.default.mark((function e(t,n){var s,u,c,l,d,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.resolve)(this._olmDevice.getSessionIdsForDevice(t));case 2:s=e.sent,u={},c=0;case 5:if(!(c<s.length)){e.next=26;break}return l=s[c],e.prev=7,e.next=10,(0,o.resolve)(this._olmDevice.decryptMessage(t,l,n.type,n.body));case 10:return d=e.sent,a.default.log("Decrypted Olm message from "+t+" with session "+l),e.abrupt("return",d);case 15:return e.prev=15,e.t0=e.catch(7),e.next=19,(0,o.resolve)(this._olmDevice.matchesSession(t,l,n.type,n.body));case 19:if(!e.sent){e.next=22;break}throw new Error("Error decrypting prekey message with existing session id "+l+": "+e.t0.message);case 22:u[l]=e.t0.message;case 23:c++,e.next=5;break;case 26:if(0===n.type){e.next=30;break}if(0!==s.length){e.next=29;break}throw new Error("No existing sessions");case 29:throw new Error("Error decrypting non-prekey message with existing sessions: "+(0,r.default)(u));case 30:return f=void 0,e.prev=31,e.next=34,(0,o.resolve)(this._olmDevice.createInboundSession(t,n.type,n.body));case 34:f=e.sent,e.next=41;break;case 37:throw e.prev=37,e.t1=e.catch(31),u["(new)"]=e.t1.message,new Error("Error decrypting prekey message: "+(0,r.default)(u));case 41:return a.default.log("created new inbound Olm session ID "+f.session_id+" with "+t),e.abrupt("return",f.payload);case 43:case"end":return e.stop()}}),e,this,[[7,15],[31,37]])})));return function(t,n){return e.apply(this,arguments)}}(),f.registerAlgorithm(l.OLM_ALGORITHM,p,h)},function(e,t,n){"use strict";var r=p(n(93)),i=p(n(53)),o=p(n(21)),s=p(n(56)),a=p(n(9)),u=p(n(5)),c=p(n(8)),l=n(1),d=p(l),f=p(n(3));function p(e){return e&&e.__esModule?e:{default:e}}var h=n(2),v=n(35),m=n(96);function y(e){this.sessionId=e,this.useCount=0,this.creationTime=(new Date).getTime(),this.sharedWithDevices={}}function g(e){m.EncryptionAlgorithm.call(this,e),this._setupPromise=d.default.resolve(),this._outboundSessions={},this._sessionRotationPeriodMsgs=100,this._sessionRotationPeriodMs=6048e5,void 0!==e.config.rotation_period_ms&&(this._sessionRotationPeriodMs=e.config.rotation_period_ms),void 0!==e.config.rotation_period_msgs&&(this._sessionRotationPeriodMsgs=e.config.rotation_period_msgs)}function _(e){m.DecryptionAlgorithm.call(this,e),this._pendingEvents={},this.olmlib=v}y.prototype.needsRotation=function(e,t){var n=(new Date).getTime()-this.creationTime;return(this.useCount>=e||n>=t)&&(f.default.log("Rotating megolm session after "+this.useCount+" messages, "+n+"ms"),!0)},y.prototype.markSharedWithDevice=function(e,t,n){this.sharedWithDevices[e]||(this.sharedWithDevices[e]={}),this.sharedWithDevices[e][t]=n},y.prototype.sharedWithTooManyDevices=function(e){for(var t in this.sharedWithDevices)if(this.sharedWithDevices.hasOwnProperty(t)){if(!e.hasOwnProperty(t))return f.default.log("Starting new megolm session because we shared with "+t),!0;for(var n in this.sharedWithDevices[t])if(this.sharedWithDevices[t].hasOwnProperty(n)&&!e[t].hasOwnProperty(n))return f.default.log("Starting new megolm session because we shared with "+t+":"+n),!0}},h.inherits(g,m.EncryptionAlgorithm),g.prototype._ensureOutboundSession=function(e){var t=function(){var t=(0,l.coroutine)(c.default.mark((function t(i){var o,s,a,u,d;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i)&&r.needsRotation(n._sessionRotationPeriodMsgs,n._sessionRotationPeriodMs)&&(f.default.log("Starting new megolm session because we need to rotate."),r=null),r&&r.sharedWithTooManyDevices(e)&&(r=null),r){t.next=10;break}return f.default.log("Starting new megolm session for room "+n._roomId),t.next=7,(0,l.resolve)(n._prepareNewSession());case 7:r=t.sent,f.default.log("Started new megolm session "+r.sessionId+" for room "+n._roomId),n._outboundSessions[r.sessionId]=r;case 10:o={},t.t0=c.default.keys(e);case 12:if((t.t1=t.t0()).done){t.next=31;break}if(s=t.t1.value,e.hasOwnProperty(s)){t.next=16;break}return t.abrupt("continue",12);case 16:a=e[s],t.t2=c.default.keys(a);case 18:if((t.t3=t.t2()).done){t.next=29;break}if(u=t.t3.value,a.hasOwnProperty(u)){t.next=22;break}return t.abrupt("continue",18);case 22:if(d=a[u],d.getIdentityKey()!=n._olmDevice.deviceCurve25519Key){t.next=26;break}return t.abrupt("continue",18);case 26:r.sharedWithDevices[s]&&void 0!==r.sharedWithDevices[s][u]||(o[s]=o[s]||[],o[s].push(d)),t.next=18;break;case 29:t.next=12;break;case 31:return t.abrupt("return",n._shareKeyWithDevices(r,o));case 32:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n=this,r=void 0;function i(){return r}var o=this._setupPromise.then(t);return this._setupPromise=o.then(i,i),o.then(i)},g.prototype._prepareNewSession=(0,l.coroutine)(c.default.mark((function e(){var t,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._olmDevice.createOutboundGroupSession(),n=this._olmDevice.getOutboundGroupSessionKey(t),e.next=4,(0,l.resolve)(this._olmDevice.addInboundGroupSession(this._roomId,this._olmDevice.deviceCurve25519Key,[],t,n.key,{ed25519:this._olmDevice.deviceEd25519Key}));case 4:return this._crypto.backupInfo&&this._crypto.backupGroupSession(this._roomId,this._olmDevice.deviceCurve25519Key,[],t,n.key).catch((function(e){f.default.log("Failed to back up megolm session",e)})),e.abrupt("return",new y(t));case 6:case"end":return e.stop()}}),e,this)}))),g.prototype._splitUserDeviceMap=function(e,t,n,r){var i=[],o=0,s=0,c=!0,l=!1,d=void 0;try{for(var p,h=(0,u.default)((0,a.default)(r));!(c=(p=h.next()).done);c=!0)for(var v=p.value,m=r[v],y=n[v],g=0;g<m.length;g++){var _=m[g],b=_.deviceId;y[b].sessionId?(f.default.log("share keys with device "+v+":"+b),s>20&&(s=0,o++),i[o]||(i[o]=[]),i[o].push({userId:v,deviceInfo:_}),s++):e.markSharedWithDevice(v,b,t)}}catch(k){l=!0,d=k}finally{try{!c&&h.return&&h.return()}finally{if(l)throw d}}return i},g.prototype._encryptAndSendKeysToDevices=function(e,t,n,r){for(var i=this,o={algorithm:v.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}},s={},c=[],l=0;l<n.length;l++){var f=n[l],p=f.userId,h=f.deviceInfo,m=h.deviceId;s[p]||(s[p]={}),s[p][m]=o,c.push(v.encryptMessageForDevice(o.ciphertext,this._userId,this._deviceId,this._olmDevice,p,h,r))}return d.default.all(c).then((function(){return i._baseApis.sendToDevice("m.room.encrypted",s).then((function(){var n=!0,r=!1,i=void 0;try{for(var o,c=(0,u.default)((0,a.default)(s));!(n=(o=c.next()).done);n=!0){var l=o.value,d=!0,f=!1,p=void 0;try{for(var h,v=(0,u.default)((0,a.default)(s[l]));!(d=(h=v.next()).done);d=!0){var m=h.value;e.markSharedWithDevice(l,m,t)}}catch(y){f=!0,p=y}finally{try{!d&&v.return&&v.return()}finally{if(f)throw p}}}}catch(y){r=!0,i=y}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}}))}))},g.prototype.reshareKeyWithDevice=function(){var e=(0,l.coroutine)(c.default.mark((function e(t,n,r,i){var o,a,u,d,p;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this._outboundSessions[n]){e.next=4;break}return f.default.debug("megolm session "+n+" not found: not re-sharing keys"),e.abrupt("return");case 4:if(void 0!==o.sharedWithDevices[r]){e.next=7;break}return f.default.debug("megolm session "+n+" never shared with user "+r),e.abrupt("return");case 7:if(void 0!==(a=o.sharedWithDevices[r][i.deviceId])){e.next=11;break}return f.default.debug("megolm session ID "+n+" never shared with device "+r+":"+i.deviceId),e.abrupt("return");case 11:return e.next=13,(0,l.resolve)(this._olmDevice.getInboundGroupSessionKey(this._roomId,t,n,a));case 13:if(u=e.sent){e.next=17;break}return f.default.warn("No inbound session key found for megolm "+n+": not re-sharing keys"),e.abrupt("return");case 17:return e.next=19,(0,l.resolve)(v.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,(0,s.default)({},r,(0,s.default)({},i.deviceId,i))));case 19:return d={type:"m.forwarded_room_key",content:{algorithm:v.MEGOLM_ALGORITHM,room_id:this._roomId,session_id:n,session_key:u.key,chain_index:u.chain_index,sender_key:t,sender_claimed_ed25519_key:u.sender_claimed_ed25519_key,forwarding_curve25519_key_chain:u.forwarding_curve25519_key_chain}},p={algorithm:v.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}},e.next=23,(0,l.resolve)(v.encryptMessageForDevice(p.ciphertext,this._userId,this._deviceId,this._olmDevice,r,i,d));case 23:return e.next=25,(0,l.resolve)(this._baseApis.sendToDevice("m.room.encrypted",(0,s.default)({},r,(0,s.default)({},i.deviceId,p))));case 25:f.default.debug("Re-shared key for megolm session "+n+" with "+r+":"+i.deviceId);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),g.prototype._shareKeyWithDevices=function(){var e=(0,l.coroutine)(c.default.mark((function e(t,n){var r,i,o,s,a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._olmDevice.getOutboundGroupSessionKey(t.sessionId),i={type:"m.room_key",content:{algorithm:v.MEGOLM_ALGORITHM,room_id:this._roomId,session_id:t.sessionId,session_key:r.key,chain_index:r.chain_index}},e.next=4,(0,l.resolve)(v.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,n));case 4:o=e.sent,s=this._splitUserDeviceMap(t,r.chain_index,o,n),a=0;case 7:if(!(a<s.length)){e.next=21;break}return e.prev=8,e.next=11,(0,l.resolve)(this._encryptAndSendKeysToDevices(t,r.chain_index,s[a],i));case 11:f.default.log("Completed megolm keyshare for "+t.sessionId+" in "+this._roomId+" (slice "+(a+1)+"/"+s.length+")"),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(8),f.default.log("megolm keyshare for "+t.sessionId+" in "+this._roomId+" (slice "+(a+1)+"/"+s.length+") failed"),e.t0;case 18:a++,e.next=7;break;case 21:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,n){return e.apply(this,arguments)}}(),g.prototype.encryptMessage=function(e,t,n){var r=this;return f.default.log("Starting to encrypt event for "+this._roomId),this._getDevicesInRoom(e).then((function(e){return r._checkForUnknownDevices(e),r._ensureOutboundSession(e)})).then((function(e){var i={room_id:r._roomId,type:t,content:n},s=r._olmDevice.encryptGroupMessage(e.sessionId,(0,o.default)(i)),a={algorithm:v.MEGOLM_ALGORITHM,sender_key:r._olmDevice.deviceCurve25519Key,ciphertext:s,session_id:e.sessionId,device_id:r._deviceId};return e.useCount++,a}))},g.prototype.forceDiscardSession=function(){this._setupPromise=this._setupPromise.then((function(){return null}))},g.prototype._checkForUnknownDevices=function(e){var t={};if((0,a.default)(e).forEach((function(n){(0,a.default)(e[n]).forEach((function(r){var i=e[n][r];i.isUnverified()&&!i.isKnown()&&(t[n]||(t[n]={}),t[n][r]=i)}))})),(0,a.default)(t).length)throw new m.UnknownDeviceError("This room contains unknown devices which have not been verified. We strongly recommend you verify them before continuing.",t)},g.prototype._getDevicesInRoom=function(){var e=(0,l.coroutine)(c.default.mark((function e(t){var n,r,i,o,s,a,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.resolve)(t.getEncryptionTargetMembers());case 2:return n=e.sent,r=h.map(n,(function(e){return e.userId})),i=this._crypto.getGlobalBlacklistUnverifiedDevices(),"boolean"===typeof t.getBlacklistUnverifiedDevices()&&(i=t.getBlacklistUnverifiedDevices()),e.next=8,(0,l.resolve)(this._crypto.downloadKeys(r,!1));case 8:o=e.sent,e.t0=c.default.keys(o);case 10:if((e.t1=e.t0()).done){e.next=25;break}if(s=e.t1.value,o.hasOwnProperty(s)){e.next=14;break}return e.abrupt("continue",10);case 14:a=o[s],e.t2=c.default.keys(a);case 16:if((e.t3=e.t2()).done){e.next=23;break}if(u=e.t3.value,a.hasOwnProperty(u)){e.next=20;break}return e.abrupt("continue",16);case 20:(a[u].isBlocked()||a[u].isUnverified()&&i)&&delete a[u],e.next=16;break;case 23:e.next=10;break;case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),h.inherits(_,m.DecryptionAlgorithm),_.prototype.decryptEvent=function(){var e=(0,l.coroutine)(c.default.mark((function e(t){var n,r,i,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.getWireContent()).sender_key&&n.session_id&&n.ciphertext){e.next=3;break}throw new m.DecryptionError("MEGOLM_MISSING_FIELDS","Missing fields in input");case 3:return this._addEventToPendingList(t),r=void 0,e.prev=5,e.next=8,(0,l.resolve)(this._olmDevice.decryptGroupMessage(t.getRoomId(),n.sender_key,n.session_id,n.ciphertext,t.getId(),t.getTs()));case 8:r=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),i="OLM_DECRYPT_GROUP_MESSAGE_ERROR",e.t0&&"OLM.UNKNOWN_MESSAGE_INDEX"===e.t0.message&&(this._requestKeysForEvent(t),i="OLM_UNKNOWN_MESSAGE_INDEX"),new m.DecryptionError(i,e.t0?e.t0.toString():"Unknown Error: Error is undefined",{session:n.sender_key+"|"+n.session_id});case 16:if(null!==r){e.next=19;break}throw this._requestKeysForEvent(t),new m.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID","The sender's device has not sent us the keys for this message.",{session:n.sender_key+"|"+n.session_id});case 19:if(this._removeEventFromPendingList(t),(o=JSON.parse(r.result)).room_id===t.getRoomId()){e.next=23;break}throw new m.DecryptionError("MEGOLM_BAD_ROOM","Message intended for room "+o.room_id);case 23:return e.abrupt("return",{clearEvent:o,senderCurve25519Key:r.senderKey,claimedEd25519Key:r.keysClaimed.ed25519,forwardingCurve25519KeyChain:r.forwardingCurve25519KeyChain});case 24:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),_.prototype._requestKeysForEvent=function(e){var t=e.getWireContent(),n=e.getKeyRequestRecipients(this._userId);this._crypto.requestRoomKey({room_id:e.getRoomId(),algorithm:t.algorithm,sender_key:t.sender_key,session_id:t.session_id},n)},_.prototype._addEventToPendingList=function(e){var t=e.getWireContent(),n=t.sender_key+"|"+t.session_id;this._pendingEvents[n]||(this._pendingEvents[n]=new i.default),this._pendingEvents[n].add(e)},_.prototype._removeEventFromPendingList=function(e){var t=e.getWireContent(),n=t.sender_key+"|"+t.session_id;this._pendingEvents[n]&&(this._pendingEvents[n].delete(e),0===this._pendingEvents[n].size&&delete this._pendingEvents[n])},_.prototype.onRoomKeyEvent=function(e){var t=this,n=e.getContent(),r=n.session_id,i=e.getSenderKey(),o=[],s=!1,a=void 0;if(n.room_id&&r&&n.session_key){if(i){if("m.forwarded_room_key"==e.getType()){if(s=!0,o=n.forwarding_curve25519_key_chain,h.isArray(o)||(o=[]),(o=o.slice()).push(i),!(i=n.sender_key))return void f.default.error("forwarded_room_key event is missing sender_key field");var u=n.sender_claimed_ed25519_key;if(!u)return void f.default.error("forwarded_room_key_event is missing sender_claimed_ed25519_key field");a={ed25519:u}}else a=e.getKeysClaimed();return f.default.log("Received and adding key for megolm session "+i+"|"+r),this._olmDevice.addInboundGroupSession(n.room_id,i,o,r,n.session_key,a,s).then((function(){t._retryDecryption(i,r).then((function(e){e&&t._crypto.cancelRoomKeyRequest({algorithm:n.algorithm,room_id:n.room_id,session_id:n.session_id,sender_key:i})}))})).then((function(){t._crypto.backupInfo&&t._crypto.backupGroupSession(n.room_id,i,o,n.session_id,n.session_key,a,s).catch((function(e){f.default.log("Failed to back up megolm session",e)}))})).catch((function(e){f.default.error("Error handling m.room_key_event: "+e)}))}f.default.error("key event has no sender key (not encrypted?)")}else f.default.error("key event is missing fields")},_.prototype.hasKeysForKeyRequest=function(e){var t=e.requestBody;return this._olmDevice.hasInboundSessionKeys(t.room_id,t.sender_key,t.session_id)},_.prototype.shareKeysWithDevice=function(e){var t=this,n=e.userId,r=e.deviceId,i=this._crypto.getStoredDevice(n,r),o=e.requestBody;this.olmlib.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,(0,s.default)({},n,[i])).then((function(e){return e[n][r].sessionId?(f.default.log("sharing keys for session "+o.sender_key+"|"+o.session_id+" with device "+n+":"+r),t._buildKeyForwardingMessage(o.room_id,o.sender_key,o.session_id)):null})).then((function(e){var o={algorithm:v.OLM_ALGORITHM,sender_key:t._olmDevice.deviceCurve25519Key,ciphertext:{}};return t.olmlib.encryptMessageForDevice(o.ciphertext,t._userId,t._deviceId,t._olmDevice,n,i,e).then((function(){var e=(0,s.default)({},n,(0,s.default)({},r,o));return t._baseApis.sendToDevice("m.room.encrypted",e)}))})).done()},_.prototype._buildKeyForwardingMessage=function(){var e=(0,l.coroutine)(c.default.mark((function e(t,n,r){var i;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.resolve)(this._olmDevice.getInboundGroupSessionKey(t,n,r));case 2:return i=e.sent,e.abrupt("return",{type:"m.forwarded_room_key",content:{algorithm:v.MEGOLM_ALGORITHM,room_id:t,sender_key:n,sender_claimed_ed25519_key:i.sender_claimed_ed25519_key,session_id:r,session_key:i.key,chain_index:i.chain_index,forwarding_curve25519_key_chain:i.forwarding_curve25519_key_chain}});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),_.prototype.importRoomKey=function(e){var t=this;return this._olmDevice.addInboundGroupSession(e.room_id,e.sender_key,e.forwarding_curve25519_key_chain,e.session_id,e.session_key,e.sender_claimed_keys,!0).then((function(){t._crypto.backupInfo&&t._crypto.backupGroupSession(e.room_id,e.sender_key,e.forwarding_curve25519_key_chain,e.session_id,e.session_key,e.sender_claimed_keys,!0).catch((function(e){f.default.log("Failed to back up megolm session",e)})),t._retryDecryption(e.sender_key,e.session_id)}))},_.prototype._retryDecryption=function(){var e=(0,l.coroutine)(c.default.mark((function e(t,n){var i,o,s=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t+"|"+n,o=this._pendingEvents[i]){e.next=4;break}return e.abrupt("return",!0);case 4:return delete this._pendingEvents[i],e.next=7,(0,l.resolve)(d.default.all([].concat((0,r.default)(o)).map(function(){var e=(0,l.coroutine)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.resolve)(t.attemptDecryption(s._crypto));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,s,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())));case 7:return e.abrupt("return",!this._pendingEvents[i]);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),m.registerAlgorithm(v.MEGOLM_ALGORITHM,g,_)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=S(n(18)),i=S(n(45)),o=n(1),s=S(o),a=S(n(8)),u=S(n(9)),c=S(n(5)),l=S(n(24)),d=S(n(10)),f=S(n(12)),p=S(n(25)),h=S(n(26)),v=function(){var e=(0,o.coroutine)(a.default.mark((function e(t,n,r,i){var s,u,c,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!1,e.t0=a.default.keys(r);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(u=e.t1.value,r.hasOwnProperty(u)){e.next=6;break}return e.abrupt("continue",2);case 6:u in i||(g.default.log("Device "+n+":"+u+" has been removed"),delete r[u],s=!0),e.next=2;break;case 9:e.t2=a.default.keys(i);case 10:if((e.t3=e.t2()).done){e.next=27;break}if(c=e.t3.value,i.hasOwnProperty(c)){e.next=14;break}return e.abrupt("continue",10);case 14:if((l=i[c]).user_id===n){e.next=18;break}return g.default.warn("Mismatched user_id "+l.user_id+" in keys from "+n+":"+c),e.abrupt("continue",10);case 18:if(l.device_id===c){e.next=21;break}return g.default.warn("Mismatched device_id "+l.device_id+" in keys from "+n+":"+c),e.abrupt("continue",10);case 21:return e.next=23,(0,o.resolve)(m(t,r,l));case 23:if(!e.sent){e.next=25;break}s=!0;case 25:e.next=10;break;case 27:return e.abrupt("return",s);case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.coroutine)(a.default.mark((function e(t,n,r){var i,s,u,c,l,d,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.keys){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=r.device_id,s=r.user_id,u="ed25519:"+i,c=r.keys[u]){e.next=9;break}return g.default.warn("Device "+s+":"+i+" has no ed25519 key"),e.abrupt("return",!1);case 9:return l=r.unsigned||{},d=r.signatures||{},e.prev=11,e.next=14,(0,o.resolve)(k.default.verifySignature(t,r,s,i,c));case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),g.default.warn("Unable to verify signature on device "+s+":"+i+":"+e.t0),e.abrupt("return",!1);case 20:if(f=void 0,!(i in n)){e.next=28;break}if((f=n[i]).getFingerprint()==c){e.next=26;break}return g.default.warn("Ed25519 key for device "+s+":"+i+" has changed"),e.abrupt("return",!1);case 26:e.next=29;break;case 28:n[i]=f=new _.default(i);case 29:return f.keys=r.keys||{},f.algorithms=r.algorithms||[],f.unsigned=l,f.signatures=d,e.abrupt("return",!0);case 34:case"end":return e.stop()}}),e,this,[[11,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),y=n(13),g=S(n(3)),_=S(n(69)),b=n(134),k=S(n(35)),w=S(n(55)),E=n(2);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){function t(e,n,r){(0,d.default)(this,t);var i=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return i._cryptoStore=n,i._devices={},i._crossSigningInfo={},i._userByIdentityKey={},i._deviceTrackingStatus={},i._syncToken=null,i._serialiser=new T(e,r,i),i._keyDownloadsInProgressByUser={},i._dirty=!1,i._savePromise=null,i._resolveSavePromise=null,i._savePromiseTime=null,i._saveTimer=null,i}return(0,h.default)(t,e),(0,f.default)(t,[{key:"load",value:function(){var e=(0,o.coroutine)(a.default.mark((function e(){var t,n,r,i,s,l,d=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.resolve)(this._cryptoStore.doTxn("readonly",[w.default.STORE_DEVICE_DATA],(function(e){d._cryptoStore.getEndToEndDeviceData(e,(function(e){d._devices=e?e.devices:{},d._ssks=e&&e.self_signing_keys||{},d._deviceTrackingStatus=e?e.trackingStatus:{},d._syncToken=e?e.syncToken:null,d._userByIdentityKey={};var t=!0,n=!1,r=void 0;try{for(var i,o=(0,c.default)((0,u.default)(d._devices));!(t=(i=o.next()).done);t=!0){var s=i.value,a=d._devices[s],l=!0,f=!1,p=void 0;try{for(var h,v=(0,c.default)((0,u.default)(a));!(l=(h=v.next()).done);l=!0){var m=h.value,y=a[m].keys["curve25519:"+m];void 0!==y&&(d._userByIdentityKey[y]=s)}}catch(g){f=!0,p=g}finally{try{!l&&v.return&&v.return()}finally{if(f)throw p}}}}catch(g){n=!0,r=g}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}))})));case 2:for(t=!0,n=!1,r=void 0,e.prev=5,i=(0,c.default)((0,u.default)(this._deviceTrackingStatus));!(t=(s=i.next()).done);t=!0)l=s.value,2==this._deviceTrackingStatus[l]&&(this._deviceTrackingStatus[l]=1);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),n=!0,r=e.t0;case 13:e.prev=13,e.prev=14,!t&&i.return&&i.return();case 16:if(e.prev=16,!n){e.next=19;break}throw r;case 19:return e.finish(16);case 20:return e.finish(13);case 21:case"end":return e.stop()}}),e,this,[[5,9,13,21],[14,,16,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){null!==this._saveTimer&&clearTimeout(this._saveTimer)}},{key:"saveIfDirty",value:function(){var e=(0,o.method)((function(e){var t=this;if(!this._dirty)return s.default.resolve(!1);void 0===e&&(e=500);var n=Date.now+e;this._savePromiseTime&&n<this._savePromiseTime&&(clearTimeout(this._saveTimer),this._saveTimer=null,this._savePromiseTime=null);var r=this._savePromise;if(null===r&&(r=new s.default((function(e,n){t._resolveSavePromise=e})),this._savePromise=r),null===this._saveTimer){var i=this._resolveSavePromise;this._savePromiseTime=n,this._saveTimer=setTimeout((function(){g.default.log("Saving device tracking data at token "+t._syncToken),t._savePromiseTime=null,t._saveTimer=null,t._savePromise=null,t._resolveSavePromise=null,t._dirty=!1,t._cryptoStore.doTxn("readwrite",[w.default.STORE_DEVICE_DATA],(function(e){t._cryptoStore.storeEndToEndDeviceData({devices:t._devices,self_signing_keys:t._ssks,trackingStatus:t._deviceTrackingStatus,syncToken:t._syncToken},e)})).then((function(){i()}))}),e)}return r}));return function(t){return e.apply(this,arguments)}}()},{key:"getSyncToken",value:function(){return this._syncToken}},{key:"setSyncToken",value:function(e){this._syncToken=e}},{key:"downloadKeys",value:function(e,t){var n=this,r=[],i=[];if(e.forEach((function(e){var o=n._deviceTrackingStatus[e];n._keyDownloadsInProgressByUser[e]?(g.default.log("downloadKeys: already have a download in progress for "+e+": awaiting its result"),i.push(n._keyDownloadsInProgressByUser[e])):(t||3!=o)&&r.push(e)})),0!=r.length){g.default.log("downloadKeys: downloading for",r);var o=this._doKeyDownload(r);i.push(o)}return 0===i.length&&g.default.log("downloadKeys: already have all necessary keys"),s.default.all(i).then((function(){return n._getDevicesFromStore(e)}))}},{key:"_getDevicesFromStore",value:function(e){var t={},n=this;return e.map((function(e){t[e]={},(n.getStoredDevicesForUser(e)||[]).map((function(n){t[e][n.deviceId]=n}))})),t}},{key:"getStoredDevicesForUser",value:function(e){var t=this._devices[e];if(!t)return null;var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(_.default.fromStorage(t[r],r));return n}},{key:"getRawStoredDevicesForUser",value:function(e){return this._devices[e]}},{key:"getStoredCrossSigningForUser",value:function(e){return this._crossSigningInfo[e]?b.CrossSigningInfo.fromStorage(this._crossSigningInfo[e],e):null}},{key:"storeCrossSigningForUser",value:function(e,t){this._crossSigningInfo[e]=t,this._dirty=!0}},{key:"getStoredDevice",value:function(e,t){var n=this._devices[e];if(n&&n[t])return _.default.fromStorage(n[t],t)}},{key:"getDeviceByIdentityKey",value:function(e,t){var n=this._userByIdentityKey[t];if(!n)return null;if(e!==k.default.OLM_ALGORITHM&&e!==k.default.MEGOLM_ALGORITHM)return null;var r=this._devices[n];if(!r)return null;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];for(var s in o.keys){if(o.keys.hasOwnProperty(s))if(0===s.indexOf("curve25519:"))if(o.keys[s]==t)return _.default.fromStorage(o,i)}}return null}},{key:"storeDevicesForUser",value:function(e,t){if(void 0!==this._devices[e]){var n=!0,o=!1,s=void 0;try{for(var a,u=(0,c.default)((0,i.default)(this._devices[e]));!(n=(a=u.next()).done);n=!0){var l=(0,r.default)(a.value,2),d=l[0],f=l[1].keys["curve25519:"+d];delete this._userByIdentityKey[f]}}catch(b){o=!0,s=b}finally{try{!n&&u.return&&u.return()}finally{if(o)throw s}}}this._devices[e]=t;var p=!0,h=!1,v=void 0;try{for(var m,y=(0,c.default)((0,i.default)(t));!(p=(m=y.next()).done);p=!0){var g=(0,r.default)(m.value,2),_=(d=g[0],g[1].keys["curve25519:"+d]);this._userByIdentityKey[_]=e}}catch(b){h=!0,v=b}finally{try{!p&&y.return&&y.return()}finally{if(h)throw v}}this._dirty=!0}},{key:"startTrackingDeviceList",value:function(e){if("string"!==typeof e)throw new Error("userId must be a string; was "+e);this._deviceTrackingStatus[e]||(g.default.log("Now tracking device list for "+e),this._deviceTrackingStatus[e]=1,this._dirty=!0)}},{key:"stopTrackingDeviceList",value:function(e){this._deviceTrackingStatus[e]&&(g.default.log("No longer tracking device list for "+e),this._deviceTrackingStatus[e]=0,this._dirty=!0)}},{key:"stopTrackingAllDeviceLists",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,c.default)((0,u.default)(this._deviceTrackingStatus));!(e=(r=i.next()).done);e=!0){var o=r.value;this._deviceTrackingStatus[o]=0}}catch(s){t=!0,n=s}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this._dirty=!0}},{key:"invalidateUserDeviceList",value:function(e){this._deviceTrackingStatus[e]&&(g.default.log("Marking device list outdated for",e),this._deviceTrackingStatus[e]=1,this._dirty=!0)}},{key:"refreshOutdatedDeviceLists",value:function(){this.saveIfDirty();var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=(0,c.default)((0,u.default)(this._deviceTrackingStatus));!(t=(i=o.next()).done);t=!0){var s=i.value;1==this._deviceTrackingStatus[s]&&e.push(s)}}catch(a){n=!0,r=a}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return this._doKeyDownload(e)}},{key:"_setRawStoredDevicesForUser",value:function(e,t){if(void 0!==this._devices[e]){var n=!0,o=!1,s=void 0;try{for(var a,u=(0,c.default)((0,i.default)(this._devices[e]));!(n=(a=u.next()).done);n=!0){var l=(0,r.default)(a.value,2),d=l[0],f=l[1].keys["curve25519:"+d];delete this._userByIdentityKey[f]}}catch(b){o=!0,s=b}finally{try{!n&&u.return&&u.return()}finally{if(o)throw s}}}this._devices[e]=t;var p=!0,h=!1,v=void 0;try{for(var m,y=(0,c.default)((0,i.default)(t));!(p=(m=y.next()).done);p=!0){var g=(0,r.default)(m.value,2),_=(d=g[0],g[1].keys["curve25519:"+d]);this._userByIdentityKey[_]=e}}catch(b){h=!0,v=b}finally{try{!p&&y.return&&y.return()}finally{if(h)throw v}}}},{key:"setRawStoredCrossSigningForUser",value:function(e,t){this._crossSigningInfo[e]=t}},{key:"_doKeyDownload",value:function(e){var t=this;if(0===e.length)return s.default.resolve();var n=this._serialiser.updateDevicesForUsers(e,this._syncToken).then((function(){r(!0)}),(function(t){throw g.default.error("Error downloading keys for "+e+":",t),r(!1),t}));e.forEach((function(e){t._keyDownloadsInProgressByUser[e]=n,1==t._deviceTrackingStatus[e]&&(t._deviceTrackingStatus[e]=2)}));var r=function(r){e.forEach((function(e){(t._dirty=!0,t._keyDownloadsInProgressByUser[e]===n)?(delete t._keyDownloadsInProgressByUser[e],2==t._deviceTrackingStatus[e]&&(r?(t._deviceTrackingStatus[e]=3,g.default.log("Device list for",e,"now up to date")):t._deviceTrackingStatus[e]=1)):g.default.log("Another update in the queue for",e,"- not marking up-to-date")})),t.saveIfDirty(),t.emit("crypto.devicesUpdated",e)};return n}}]),t}(y.EventEmitter);t.default=x;var T=function(){function e(t,n,r){(0,d.default)(this,e),this._baseApis=t,this._olmDevice=n,this._deviceList=r,this._downloadInProgress=!1,this._keyDownloadsQueuedByUser={},this._queuedQueryDeferred=null,this._syncToken=null}return(0,f.default)(e,[{key:"updateDevicesForUsers",value:function(e,t){var n=this;return e.forEach((function(e){n._keyDownloadsQueuedByUser[e]=!0})),this._queuedQueryDeferred||(this._queuedQueryDeferred=s.default.defer()),this._syncToken=t,this._downloadInProgress?(g.default.log("Queued key download for",e),this._queuedQueryDeferred.promise):this._doQueuedQueries()}},{key:"_doQueuedQueries",value:function(){var e=this;if(this._downloadInProgress)throw new Error("DeviceListUpdateSerialiser._doQueuedQueries called with request active");var t=(0,u.default)(this._keyDownloadsQueuedByUser);this._keyDownloadsQueuedByUser={};var n=this._queuedQueryDeferred;this._queuedQueryDeferred=null,g.default.log("Starting key download for",t),this._downloadInProgress=!0;var r={};return this._syncToken&&(r.token=this._syncToken),this._baseApis.downloadKeysForUsers(t,r).then((function(n){var r=n.device_keys||{},i=n.master_keys||{},o=n.self_signing_keys||{},a=n.user_signing_keys||{},u=s.default.resolve(),l=!0,d=!1,f=void 0;try{for(var p,h=function(){var t=p.value;u=u.then((0,E.sleep)(5)).then((function(){return e._processQueryResponseForUser(t,r[t],{master:i[t],self_signing:o[t],user_signing:a[t]})}))},v=(0,c.default)(t);!(l=(p=v.next()).done);l=!0)h()}catch(m){d=!0,f=m}finally{try{!l&&v.return&&v.return()}finally{if(d)throw f}}return u})).done((function(){g.default.log("Completed key download for "+t),e._downloadInProgress=!1,n.resolve(),e._queuedQueryDeferred&&e._doQueuedQueries()}),(function(r){g.default.warn("Error downloading keys for "+t+":",r),e._downloadInProgress=!1,n.reject(r)})),n.promise}},{key:"_processQueryResponseForUser",value:function(){var e=(0,o.coroutine)(a.default.mark((function e(t,n,r,i){var s,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.default.log("got device keys for "+t+":",n),g.default.log("got cross-signing keys for "+t+":",r),s={},(c=this._deviceList.getRawStoredDevicesForUser(t))&&(0,u.default)(c).forEach((function(e){var t=_.default.fromStorage(c[e],e);s[e]=t})),e.next=7,(0,o.resolve)(v(this._olmDevice,t,s,n||{}));case 7:l={},(0,u.default)(s).forEach((function(e){l[e]=s[e].toStorage()})),this._deviceList._setRawStoredDevicesForUser(t,l),r&&(r.master||r.self_signing||r.user_signing)&&((d=this._deviceList.getStoredCrossSigningForUser(t)||new b.CrossSigningInfo(t)).setKeys(r),this._deviceList.setRawStoredCrossSigningForUser(t,d.toStorage()),this._deviceList.emit("userCrossSigningUpdated",t));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){(function(e,r){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function v(e){throw new RangeError(f[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(d,".")).split("."),t).join(".")}function g(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return m(e,(function(e){var t="";return e>65535&&(t+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=h(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))}function w(e){var t,n,r,i,o,s,a,c,l,d,f,h=[],m=e.length,y=0,g=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),h.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=y,s=1,a=36;i>=m&&v("invalid-input"),((c=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||c>p((u-y)/s))&&v("overflow"),y+=c*s,!(c<(l=a<=b?1:a>=b+26?26:a-b));a+=36)s>p(u/(d=36-l))&&v("overflow"),s*=d;b=k(y-o,t=h.length+1,0==o),p(y/t)>u-g&&v("overflow"),g+=p(y/t),y%=t,h.splice(y++,0,g)}return _(h)}function E(e){var t,n,r,i,o,s,a,c,l,d,f,m,y,_,w,E=[];for(m=(e=g(e)).length,t=128,n=0,o=72,s=0;s<m;++s)(f=e[s])<128&&E.push(h(f));for(r=i=E.length,i&&E.push("-");r<m;){for(a=u,s=0;s<m;++s)(f=e[s])>=t&&f<a&&(a=f);for(a-t>p((u-n)/(y=r+1))&&v("overflow"),n+=(a-t)*y,t=a,s=0;s<m;++s)if((f=e[s])<t&&++n>u&&v("overflow"),f==t){for(c=n,l=36;!(c<(d=l<=o?1:l>=o+26?26:l-o));l+=36)w=c-d,_=36-d,E.push(h(b(d+w%_,0))),c=p(w/_);E.push(h(b(c,0))),o=k(n,y,r==i),n=0,++r}++n,++t}return E.join("")}a={version:"1.4.1",ucs2:{decode:g,encode:_},decode:w,encode:E,toASCII:function(e){return y(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return y(e,(function(e){return c.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(266)(e),n(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(269),t.encode=t.stringify=n(270)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!==typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var d,f,p,h,v=e[l].replace(a,"%20"),m=v.indexOf(n);m>=0?(d=v.substr(0,m),f=v.substr(m+1)):(d=v,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){n(272),e.exports=n(4).Object.freeze},function(e,t,n){var r=n(14),i=n(62).onFreeze;n(86)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){"use strict";var r=n(274),i=n(2);function o(e,t){this.rank=e,this.context=t}o.fromJson=function(e,t){var n=e.context||{},s=n.events_before||[],a=n.events_after||[],u=new r(t(e.result));return u.setPaginateToken(n.start,!0),u.addEvents(i.map(s,t),!0),u.addEvents(i.map(a,t),!1),u.setPaginateToken(n.end,!1),new o(e.rank,u)},e.exports=o},function(e,t,n){"use strict";function r(e){this._timeline=[e],this._ourEventIndex=0,this._paginateTokens={b:null,f:null},this._paginateRequests={b:null,f:null}}r.prototype.getEvent=function(){return this._timeline[this._ourEventIndex]},r.prototype.getTimeline=function(){return this._timeline},r.prototype.getOurEventIndex=function(){return this._ourEventIndex},r.prototype.getPaginateToken=function(e){return this._paginateTokens[e?"b":"f"]},r.prototype.setPaginateToken=function(e,t){this._paginateTokens[t?"b":"f"]=e},r.prototype.addEvents=function(e,t){t?(this._timeline=e.concat(this._timeline),this._ourEventIndex+=e.length):this._timeline=this._timeline.concat(e)},e.exports=r},function(e,t,n){"use strict";var r,i=n(1),o=(r=i)&&r.__esModule?r:{default:r};function s(){this.fromToken=null}s.prototype={isNewlyCreated:function(){return o.default.resolve(!0)},getSyncToken:function(){return this.fromToken},setSyncToken:function(e){this.fromToken=e},storeGroup:function(e){},getGroup:function(e){return null},getGroups:function(){return[]},storeRoom:function(e){},getRoom:function(e){return null},getRooms:function(){return[]},removeRoom:function(e){},getRoomSummaries:function(){return[]},storeUser:function(e){},getUser:function(e){return null},getUsers:function(){return[]},scrollback:function(e,t){return[]},storeEvents:function(e,t,n,r){},storeFilter:function(e){},getFilter:function(e,t){return null},getFilterIdByName:function(e){return null},setFilterIdByName:function(e,t){},storeAccountDataEvents:function(e){},getAccountData:function(e){},setSyncData:function(e){return o.default.resolve()},wantsSave:function(){return!1},save:function(){},startup:function(){return o.default.resolve()},getSavedSync:function(){return o.default.resolve(null)},getSavedSyncToken:function(){return o.default.resolve(null)},deleteAllData:function(){return o.default.resolve()},getOutOfBandMembers:function(){return o.default.resolve(null)},setOutOfBandMembers:function(){return o.default.resolve()},clearOutOfBandMembers:function(){return o.default.resolve()},getClientOptions:function(){return o.default.resolve()},storeClientOptions:function(){return o.default.resolve()}},e.exports=s},function(e,t,n){"use strict";var r,i=n(9),o=(r=i)&&r.__esModule?r:{default:r};function s(e){this.filter_json=e,this.types=e.types||null,this.not_types=e.not_types||[],this.rooms=e.rooms||null,this.not_rooms=e.not_rooms||[],this.senders=e.senders||null,this.not_senders=e.not_senders||[],this.contains_url=e.contains_url||null}s.prototype.check=function(e){return this._checkFields(e.getRoomId(),e.getSender(),e.getType(),!!e.getContent()&&void 0!==e.getContent().url)},s.prototype._checkFields=function(e,t,n,r){for(var i={rooms:function(t){return e===t},senders:function(e){return t===e},types:function(e){return function(e,t){if(t.endsWith("*")){var n=t.slice(0,-1);return e.substr(0,n.length)===n}return e===t}(n,e)}},s=0;s<(0,o.default)(i).length;s++){var a=(0,o.default)(i)[s],u=i[a];if(this["not_"+a].filter(u).length>0)return!1;var c=this[a];if(c&&!c.map(u))return!1}var l=this.filter_json.contains_url;return void 0===l||l===r},s.prototype.filter=function(e){return e.filter(this.check,this)},s.prototype.limit=function(){return void 0!==this.filter_json.limit?this.filter_json.limit:10},e.exports=s},function(e,t,n){"use strict";(function(t){var r=d(n(21)),i=d(n(9)),o=d(n(5)),s=d(n(8)),a=n(1),u=d(a),c=d(n(3)),l=n(87);function d(e){return e&&e.__esModule?e:{default:e}}var f=n(64),p=n(145),h=n(147),v=n(2),m=n(100),y=n(46),g=n(97);function _(e,t){return"FILTER_SYNC_"+e+(t?"_"+t:"")}function b(){c.default.log.apply(c.default,arguments)}function k(e,t){this.client=e,(t=t||{}).initialSyncLimit=void 0===t.initialSyncLimit?8:t.initialSyncLimit,t.resolveInvitesToProfiles=t.resolveInvitesToProfiles||!1,t.pollTimeout=t.pollTimeout||3e4,t.pendingEventOrdering=t.pendingEventOrdering||"chronological",t.canResetEntireTimeline||(t.canResetEntireTimeline=function(e){return!1}),this.opts=t,this._peekRoomId=null,this._currentSyncRequest=null,this._syncState=null,this._syncStateData=null,this._catchingUp=!1,this._running=!1,this._keepAliveTimer=null,this._connectionReturnedDefer=null,this._notifEvents=[],this._failedSyncCount=0,this._storeIsInvalid=!1,e.getNotifTimelineSet()&&e.reEmitter.reEmit(e.getNotifTimelineSet(),["Room.timeline","Room.timelineReset"])}function w(e,t){var n=new f(t);return e.reEmitter.reEmit(n,["User.avatarUrl","User.displayName","User.presence","User.currentlyActive","User.lastPresenceTs"]),n}k.prototype.createRoom=function(e){var t=this.client,n=t.timelineSupport,r=t.unstableClientRelationAggregation,i=new p(e,t,t.getUserId(),{lazyLoadMembers:this.opts.lazyLoadMembers,pendingEventOrdering:this.opts.pendingEventOrdering,timelineSupport:n,unstableClientRelationAggregation:r});return t.reEmitter.reEmit(i,["Room.name","Room.timeline","Room.redaction","Room.redactionCancelled","Room.receipt","Room.tags","Room.timelineReset","Room.localEchoUpdated","Room.accountData","Room.myMembership","Room.replaceEvent"]),this._registerStateListeners(i),i},k.prototype.createGroup=function(e){var t=this.client,n=new h(e);return t.reEmitter.reEmit(n,["Group.profile","Group.myMembership"]),t.store.storeGroup(n),n},k.prototype._registerStateListeners=function(e){var t=this.client;t.reEmitter.reEmit(e.currentState,["RoomState.events","RoomState.members","RoomState.newMember"]),e.currentState.on("RoomState.newMember",(function(e,n,r){r.user=t.getUser(r.userId),t.reEmitter.reEmit(r,["RoomMember.name","RoomMember.typing","RoomMember.powerLevel","RoomMember.membership"])}))},k.prototype._deregisterStateListeners=function(e){e.currentState.removeAllListeners("RoomState.events"),e.currentState.removeAllListeners("RoomState.members"),e.currentState.removeAllListeners("RoomState.newMember")},k.prototype.syncLeftRooms=function(){var e=this.client,t=this,n=new m(this.client.credentials.userId);n.setTimelineLimit(1),n.setIncludeLeaveRooms(!0);var r=this.opts.pollTimeout+8e4,i={timeout:0};return e.getOrCreateFilter(_(e.credentials.userId,"LEFT_ROOMS"),n).then((function(t){return i.filter=t,e._http.authedRequest(void 0,"GET","/sync",i,void 0,r)})).then((function(n){var r=[];n.rooms&&n.rooms.leave&&(r=t._mapSyncResponseToRoomArray(n.rooms.leave));var i=[];return r.forEach((function(n){var r=n.room;if(i.push(r),n.isBrandNewRoom){n.timeline=n.timeline||{};var o=t._mapSyncEventsFormat(n.timeline,r),s=t._mapSyncEventsFormat(n.state,r);r.getLiveTimeline().setPaginationToken(n.timeline.prev_batch,y.BACKWARDS),t._processRoomEvents(r,s,o),r.recalculate(),e.store.storeRoom(r),e.emit("Room",r),t._processEventsForNotifs(r,o)}})),i}))},k.prototype.peek=function(e){var t=this,n=this.client;return this._peekRoomId=e,this.client.roomInitialSync(e,20).then((function(r){r.messages=r.messages||{},r.messages.chunk=r.messages.chunk||[],r.state=r.state||[];var i=t.createRoom(e),o=v.map(v.deepCopy(r.state),n.getEventMapper()),s=v.map(r.state,n.getEventMapper()),a=v.map(r.messages.chunk,n.getEventMapper());return r.presence&&v.isArray(r.presence)&&r.presence.map(n.getEventMapper()).forEach((function(e){var t=n.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):((t=w(n,e.getContent().user_id)).setPresenceEvent(e),n.store.storeUser(t)),n.emit("event",e)})),r.messages.start&&(i.oldState.paginationToken=r.messages.start),i.oldState.setStateEvents(o),i.currentState.setStateEvents(s),t._resolveInvites(i),i.recalculate(),i.addEventsToTimeline(a.reverse(),!0,i.getLiveTimeline(),r.messages.start),n.store.storeRoom(i),n.emit("Room",i),t._peekPoll(i),i}))},k.prototype.stopPeeking=function(){this._peekRoomId=null},k.prototype._peekPoll=function(e,t){if(this._peekRoomId===e.roomId){var n=this;this.client._http.authedRequest(void 0,"GET","/events",{room_id:e.roomId,timeout:3e4,from:t},void 0,5e4).done((function(t){if(n._peekRoomId===e.roomId){t.chunk.filter((function(e){return"m.presence"===e.type})).map(n.client.getEventMapper()).forEach((function(e){var t=n.client.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):((t=w(n.client,e.getContent().user_id)).setPresenceEvent(e),n.client.store.storeUser(t)),n.client.emit("event",e)}));var r=t.chunk.filter((function(t){return t.room_id===e.roomId})).map(n.client.getEventMapper());e.addLiveEvents(r),n._peekPoll(e,t.end)}else b("Stopped peeking in room %s",e.roomId)}),(function(r){c.default.error("[%s] Peek poll failed: %s",e.roomId,r),setTimeout((function(){n._peekPoll(e,t)}),3e4)}))}else b("Stopped peeking in room %s",e.roomId)},k.prototype.getSyncState=function(){return this._syncState},k.prototype.getSyncStateData=function(){return this._syncStateData},k.prototype.recoverFromSyncStartupError=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.resolve)(t);case 2:return r=this._startKeepAlives(),this._updateSyncState("ERROR",{error:n}),e.next=6,(0,a.resolve)(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),k.prototype._wasLazyLoadingToggled=function(){var e=(0,a.coroutine)(s.default.mark((function e(t){var n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!!t,n=!1,e.next=4,(0,a.resolve)(this.client.store.isNewlyCreated());case 4:if(e.sent){e.next=11;break}return e.next=8,(0,a.resolve)(this.client.store.getClientOptions());case 8:return(r=e.sent)&&(n=!!r.lazyLoadMembers),e.abrupt("return",n!==t);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),k.prototype._shouldAbortSync=function(e){return"M_UNKNOWN_TOKEN"===e.errcode&&(c.default.warn("Token no longer valid - assuming logout"),this.stop(),!0)},k.prototype.sync=function(){var e=this,n=function(){var e=(0,a.coroutine)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b("Getting push rules..."),e.next=4,(0,a.resolve)(i.getPushRules());case 4:t=e.sent,b("Got push rules"),i.pushRules=t,e.next=19;break;case 9:if(e.prev=9,e.t0=e.catch(0),c.default.error("Getting push rules failed",e.t0),!o._shouldAbortSync(e.t0)){e.next=14;break}return e.abrupt("return");case 14:return b("Waiting for saved sync before retrying push rules..."),e.next=17,(0,a.resolve)(o.recoverFromSyncStartupError(d,e.t0));case 17:return n(),e.abrupt("return");case 19:p();case 20:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,a.coroutine)(s.default.mark((function e(){var t,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("Getting filter..."),t=void 0,o.opts.filter?t=o.opts.filter:(t=new m(i.credentials.userId)).setTimelineLimit(o.opts.initialSyncLimit),n=void 0,e.prev=4,e.next=7,(0,a.resolve)(i.getOrCreateFilter(_(i.credentials.userId),t));case 7:n=e.sent,e.next=20;break;case 10:if(e.prev=10,e.t0=e.catch(4),c.default.error("Getting filter failed",e.t0),!o._shouldAbortSync(e.t0)){e.next=15;break}return e.abrupt("return");case 15:return b("Waiting for saved sync before retrying filter..."),e.next=18,(0,a.resolve)(o.recoverFromSyncStartupError(d,e.t0));case 18:return r(),e.abrupt("return");case 20:return i.resetNotifTimelineSet(),null===o._currentSyncRequest&&(b("Sending first sync request..."),o._currentSyncRequest=o._doSyncRequest({filterId:n},f)),b("Waiting for saved sync before starting sync processing..."),e.next=25,(0,a.resolve)(d);case 25:o._sync({filterId:n});case 26:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),i=this.client,o=this;this._running=!0,t.document&&(this._onOnlineBound=this._onOnline.bind(this),t.document.addEventListener("online",this._onOnlineBound,!1));var d=u.default.resolve(),f=null,p=function(){var t=(0,a.coroutine)(s.default.mark((function t(){var n,o;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b("Checking lazy load status..."),e.opts.lazyLoadMembers&&i.isGuest()&&(e.opts.lazyLoadMembers=!1),!e.opts.lazyLoadMembers){t.next=24;break}return b("Checking server lazy load support..."),t.next=6,(0,a.resolve)(i.doesServerSupportLazyLoading());case 6:if(!t.sent){t.next=22;break}return t.prev=8,b("Creating and storing lazy load sync filter..."),t.next=12,(0,a.resolve)(i.createFilter(m.LAZY_LOADING_SYNC_FILTER));case 12:e.opts.filter=t.sent,b("Created and stored lazy load sync filter"),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(8),c.default.error("Creating and storing lazy load sync filter failed",t.t0),t.t0;case 20:t.next=24;break;case 22:b("LL: lazy loading requested but not supported by server, so disabling"),e.opts.lazyLoadMembers=!1;case 24:return b("Checking whether lazy loading has changed in store..."),t.next=27,(0,a.resolve)(e._wasLazyLoadingToggled(e.opts.lazyLoadMembers));case 27:if(!t.sent){t.next=35;break}return e._storeIsInvalid=!0,n=l.InvalidStoreError.TOGGLED_LAZY_LOADING,o=new l.InvalidStoreError(n,!!e.opts.lazyLoadMembers),e._updateSyncState("ERROR",{error:o}),c.default.warn("InvalidStoreError: store is not usable: stopping sync."),t.abrupt("return");case 35:return e.opts.lazyLoadMembers&&e.opts.crypto&&e.opts.crypto.enableLazyLoading(),t.prev=36,b("Storing client options..."),t.next=40,(0,a.resolve)(e.client._storeClientOptions());case 40:b("Stored client options"),t.next=47;break;case 43:throw t.prev=43,t.t1=t.catch(36),c.default.error("Storing client options failed",t.t1),t.t1;case 47:r();case 48:case"end":return t.stop()}}),t,e,[[8,16],[36,43]])})));return function(){return t.apply(this,arguments)}}();i.isGuest()?o._sync({}):(b("Getting saved sync token..."),d=i.store.getSavedSyncToken().then((function(e){return b("Got saved sync token"),f=e,b("Getting saved sync..."),i.store.getSavedSync()})).then((function(e){if(b("Got reply from saved sync, exists? "+!!e),e)return o._syncFromCache(e)})).catch((function(e){c.default.error("Getting saved sync failed",e)})),n())},k.prototype.stop=function(){b("SyncApi.stop"),t.document&&(t.document.removeEventListener("online",this._onOnlineBound,!1),this._onOnlineBound=void 0),this._running=!1,this._currentSyncRequest&&this._currentSyncRequest.abort(),this._keepAliveTimer&&(clearTimeout(this._keepAliveTimer),this._keepAliveTimer=null)},k.prototype.retryImmediately=function(){return!!this._connectionReturnedDefer&&(this._startKeepAlives(0),!0)},k.prototype._syncFromCache=function(){var e=(0,a.coroutine)(s.default.mark((function e(t){var n,r,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("sync(): not doing HTTP hit, instead returning stored /sync data"),n=t.nextBatch,this.client.store.setSyncToken(n),r={oldSyncToken:null,nextSyncToken:n,catchingUp:!1},i={next_batch:n,rooms:t.roomsData,groups:t.groupsData,account_data:{events:t.accountData}},e.prev=5,e.next=8,(0,a.resolve)(this._processSyncResponse(r,i));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),c.default.error("Error processing cached sync",e.t0.stack||e.t0);case 13:this._storeIsInvalid||this._updateSyncState("PREPARED",r);case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),k.prototype._sync=function(){var e=(0,a.coroutine)(s.default.mark((function e(t){var n,r,i,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.client,this._running){e.next=6;break}return b("Sync no longer running: exiting."),this._connectionReturnedDefer&&(this._connectionReturnedDefer.reject(),this._connectionReturnedDefer=null),this._updateSyncState("STOPPED"),e.abrupt("return");case 6:return r=n.store.getSyncToken(),i=void 0,e.prev=8,null===this._currentSyncRequest&&(this._currentSyncRequest=this._doSyncRequest(t,r)),e.next=12,(0,a.resolve)(this._currentSyncRequest);case 12:i=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(8),this._onSyncError(e.t0,t),e.abrupt("return");case 19:return e.prev=19,this._currentSyncRequest=null,e.finish(19);case 22:return n.store.setSyncToken(i.next_batch),this._failedSyncCount=0,e.next=26,(0,a.resolve)(n.store.setSyncData(i));case 26:if(o={oldSyncToken:r,nextSyncToken:i.next_batch,catchingUp:this._catchingUp},!this.opts.crypto){e.next=30;break}return e.next=30,(0,a.resolve)(this.opts.crypto.onSyncWillProcess(o));case 30:return e.prev=30,e.next=33,(0,a.resolve)(this._processSyncResponse(o,i));case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(30),c.default.error("Caught /sync error",e.t1.stack||e.t1),this.client.emit("sync.unexpectedError",e.t1);case 39:if(o.catchingUp=this._catchingUp,t.hasSyncedBefore||(this._updateSyncState("PREPARED",o),t.hasSyncedBefore=!0),!this.opts.crypto){e.next=44;break}return e.next=44,(0,a.resolve)(this.opts.crypto.onSyncCompleted(o));case 44:if(this._updateSyncState("SYNCING",o),!n.store.wantsSave()){e.next=50;break}if(!this.opts.crypto){e.next=49;break}return e.next=49,(0,a.resolve)(this.opts.crypto.saveDeviceList(0));case 49:n.store.save();case 50:this._sync(t);case 51:case"end":return e.stop()}}),e,this,[[8,15,19,22],[30,35]])})));return function(t){return e.apply(this,arguments)}}(),k.prototype._doSyncRequest=function(e,t){var n=this._getSyncParams(e,t);return this.client._http.authedRequest(void 0,"GET","/sync",n,void 0,n.timeout+8e4)},k.prototype._getSyncParams=function(e,t){var n=this.opts.pollTimeout;("SYNCING"!==this.getSyncState()||this._catchingUp)&&(this._catchingUp=!0,n=0);var r=e.filterId;this.client.isGuest()&&!r&&(r=this._getGuestFilter());var i={filter:r,timeout:n};return this.opts.disablePresence&&(i.set_presence="offline"),t?i.since=t:i._cacheBuster=Date.now(),"ERROR"!=this.getSyncState()&&"RECONNECTING"!=this.getSyncState()||(i.timeout=0),i},k.prototype._onSyncError=function(e,t){var n=this;if(!this._running)return b("Sync no longer running: exiting"),this._connectionReturnedDefer&&(this._connectionReturnedDefer.reject(),this._connectionReturnedDefer=null),void this._updateSyncState("STOPPED");c.default.error("/sync error %s",e),c.default.error(e),this._shouldAbortSync(e)||(this._failedSyncCount++,c.default.log("Number of consecutive failed sync requests:",this._failedSyncCount),b("Starting keep-alive"),this._startKeepAlives().then((function(e){e&&"ERROR"===n.getSyncState()&&n._updateSyncState("CATCHUP",{oldSyncToken:null,nextSyncToken:null,catchingUp:!0}),n._sync(t)})),this._currentSyncRequest=null,this._updateSyncState(this._failedSyncCount>=3?"ERROR":"RECONNECTING",{error:e}))},k.prototype._processSyncResponse=function(){var e=(0,a.coroutine)(s.default.mark((function e(t,n){var r,i,o,l,d,f,p,h;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.client,i=this,n.presence&&v.isArray(n.presence.events)&&n.presence.events.map(r.getEventMapper()).forEach((function(e){var t=r.store.getUser(e.getSender());t?t.setPresenceEvent(e):((t=w(r,e.getSender())).setPresenceEvent(e),r.store.storeUser(t)),r.emit("event",e)})),n.account_data&&v.isArray(n.account_data.events)&&(o=n.account_data.events.map(r.getEventMapper()),r.store.storeAccountDataEvents(o),o.forEach((function(e){if("m.push_rules"===e.getType()){var t=e.getContent();r.pushRules=g.rewriteDefaultRules(t)}return r.emit("accountData",e),e}))),n.to_device&&v.isArray(n.to_device.events)&&n.to_device.events.length>0?(l=[],n.to_device.events.map(r.getEventMapper()).map((function(e){if("m.key.verification.cancel"===e.getType()){var t=e.getContent().transaction_id;t&&l.push(t)}return e})).forEach((function(e){var t=e.getContent();if("m.room.message"!=e.getType()||"m.bad.encrypted"!=t.msgtype){if("m.key.verification.start"===e.getType()||"m.key.verification.request"===e.getType()){var n=t.transaction_id;l.includes(n)&&e.flagCancelled()}r.emit("toDeviceEvent",e)}else c.default.log("Ignoring undecryptable to-device event from "+e.getSender())}))):this._catchingUp=!1,n.groups&&(n.groups.invite&&this._processGroupSyncEntry(n.groups.invite,"invite"),n.groups.join&&this._processGroupSyncEntry(n.groups.join,"join"),n.groups.leave&&this._processGroupSyncEntry(n.groups.leave,"leave")),d=[],f=[],p=[],n.rooms&&(n.rooms.invite&&(d=this._mapSyncResponseToRoomArray(n.rooms.invite)),n.rooms.join&&(f=this._mapSyncResponseToRoomArray(n.rooms.join)),n.rooms.leave&&(p=this._mapSyncResponseToRoomArray(n.rooms.leave))),this._notifEvents=[],d.forEach((function(e){var t=e.room,n=i._mapSyncEventsFormat(e.invite_state,t);i._processRoomEvents(t,n),e.isBrandNewRoom&&(t.recalculate(),r.store.storeRoom(t),r.emit("Room",t)),n.forEach((function(e){r.emit("event",e)})),t.updateMyMembership("invite")})),e.next=14,(0,a.resolve)(u.default.mapSeries(f,function(){var e=(0,a.coroutine)(s.default.mark((function e(n){var o,c,l,d,f,p,h,v,m,g=function(){var e=(0,a.coroutine)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.emit("event",t),!t.isState()||"m.room.encryption"!=t.getType()||!i.opts.crypto){e.next=4;break}return e.next=4,(0,a.resolve)(i.opts.crypto.onCryptoEvent(t));case 4:t.isState()&&"im.vector.user_status"===t.getType()&&((n=r.store.getUser(t.getStateKey()))?n._unstable_updateStatusMessage(t):((n=w(r,t.getStateKey()))._unstable_updateStatusMessage(t),r.store.storeUser(n)));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.room,c=i._mapSyncEventsFormat(n.state,o),l=i._mapSyncEventsFormat(n.timeline,o),d=i._mapSyncEventsFormat(n.ephemeral),f=i._mapSyncEventsFormat(n.account_data),n.unread_notifications&&(o.setUnreadNotificationCount("total",n.unread_notifications.notification_count),(!(p=r.isRoomEncrypted(o.roomId))||p&&o.getUnreadNotificationCount("highlight")<=0)&&o.setUnreadNotificationCount("highlight",n.unread_notifications.highlight_count)),n.timeline=n.timeline||{},!n.isBrandNewRoom){e.next=11;break}o.getLiveTimeline().setPaginationToken(n.timeline.prev_batch,y.BACKWARDS),e.next=25;break;case 11:if(!n.timeline.limited){e.next=25;break}h=!0,v=l.length-1;case 14:if(!(v>=0)){e.next=24;break}if(m=l[v].getId(),!o.getTimelineForEvent(m)){e.next=21;break}return b("Already have event "+m+" in limited sync - not resetting"),h=!1,l.splice(0,v),e.abrupt("break",24);case 21:v--,e.next=14;break;case 24:h&&(i._deregisterStateListeners(o),o.resetLiveTimeline(n.timeline.prev_batch,i.opts.canResetEntireTimeline(o.roomId)?null:t.oldSyncToken),r.resetNotifTimelineSet(),i._registerStateListeners(o));case 25:return i._processRoomEvents(o,c,l),n.summary&&o.setSummary(n.summary),o.addEphemeralEvents(d),o.addAccountData(f),o.recalculate(),n.isBrandNewRoom&&(r.store.storeRoom(o),r.emit("Room",o)),i._processEventsForNotifs(o,l),e.next=34,(0,a.resolve)(u.default.mapSeries(c,g));case 34:return e.next=36,(0,a.resolve)(u.default.mapSeries(l,g));case 36:d.forEach((function(e){r.emit("event",e)})),f.forEach((function(e){r.emit("event",e)})),o.updateMyMembership("join");case 39:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()));case 14:if(p.forEach((function(e){var t=e.room,n=i._mapSyncEventsFormat(e.state,t),o=i._mapSyncEventsFormat(e.timeline,t),s=i._mapSyncEventsFormat(e.account_data);i._processRoomEvents(t,n,o),t.addAccountData(s),t.recalculate(),e.isBrandNewRoom&&(r.store.storeRoom(t),r.emit("Room",t)),i._processEventsForNotifs(t,o),n.forEach((function(e){r.emit("event",e)})),o.forEach((function(e){r.emit("event",e)})),s.forEach((function(e){r.emit("event",e)})),t.updateMyMembership("leave")})),t.oldSyncToken&&this._notifEvents.length&&(this._notifEvents.sort((function(e,t){return e.getTs()-t.getTs()})),this._notifEvents.forEach((function(e){r.getNotifTimelineSet().addLiveEvent(e)}))),!n.device_lists){e.next=22;break}if(!this.opts.crypto){e.next=22;break}return e.next=20,(0,a.resolve)(this.opts.crypto.handleDeviceListChanges(t,n.device_lists));case 20:e.next=22;break;case 22:this.opts.crypto&&n.device_one_time_keys_count&&(h=n.device_one_time_keys_count.signed_curve25519||0,this.opts.crypto.updateOneTimeKeyCount(h));case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),k.prototype._startKeepAlives=function(e){void 0===e&&(e=2e3+Math.floor(5e3*Math.random())),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer);return e>0?this._keepAliveTimer=setTimeout(this._pokeKeepAlive.bind(this),e):this._pokeKeepAlive(),this._connectionReturnedDefer||(this._connectionReturnedDefer=u.default.defer()),this._connectionReturnedDefer.promise},k.prototype._pokeKeepAlive=function(e){void 0===e&&(e=!1);var t=this;function n(){clearTimeout(t._keepAliveTimer),t._connectionReturnedDefer&&(t._connectionReturnedDefer.resolve(e),t._connectionReturnedDefer=null)}this.client._http.request(void 0,"GET","/_matrix/client/versions",void 0,void 0,{prefix:"",localTimeoutMs:15e3}).done((function(){n()}),(function(r){400==r.httpStatus||404==r.httpStatus?t._keepAliveTimer=setTimeout(n,2e3):(e=!0,t._keepAliveTimer=setTimeout(t._pokeKeepAlive.bind(t,e),5e3+Math.floor(5e3*Math.random())),t._updateSyncState("ERROR",{error:r}))}))},k.prototype._processGroupSyncEntry=function(e,t){var n=!0,r=!1,s=void 0;try{for(var a,u=(0,o.default)((0,i.default)(e));!(n=(a=u.next()).done);n=!0){var c=a.value,l=e[c],d=this.client.store.getGroup(c),f=null===d;null===d&&(d=this.createGroup(c)),l.profile&&d.setProfile(l.profile.name,l.profile.avatar_url),l.inviter&&d.setInviter({userId:l.inviter}),d.setMyMembership(t),f&&this.client.emit("Group",d)}}catch(p){r=!0,s=p}finally{try{!n&&u.return&&u.return()}finally{if(r)throw s}}},k.prototype._mapSyncResponseToRoomArray=function(e){var t=this.client,n=this;return v.keys(e).map((function(r){var i=e[r],o=t.store.getRoom(r),s=!1;return o||(o=n.createRoom(r),s=!0),i.room=o,i.isBrandNewRoom=s,i}))},k.prototype._mapSyncEventsFormat=function(e,t){if(!e||!v.isArray(e.events))return[];var n=this.client.getEventMapper();return e.events.map((function(e){return t&&(e.room_id=t.roomId),n(e)}))},k.prototype._resolveInvites=function(e){if(e&&this.opts.resolveInvitesToProfiles){var t=this.client;e.getMembersWithMembership("invite").forEach((function(n){if(!n._requestedProfileInfo){n._requestedProfileInfo=!0;var r=t.getUser(n.userId);(r?u.default.resolve({avatar_url:r.avatarUrl,displayname:r.displayName}):t.getProfileInfo(n.userId)).done((function(t){var r=n.events.member;"invite"===r.getContent().membership&&(r.getContent().avatar_url=t.avatar_url,r.getContent().displayname=t.displayname,n.setMembershipEvent(r,e.currentState))}),(function(e){}))}}))}},k.prototype._processRoomEvents=function(e,t,n){var r=e.getLiveTimeline(),i=0==r.getEvents().length;if(i){var s=!0,a=!1,u=void 0;try{for(var c,l=(0,o.default)(t);!(s=(c=l.next()).done);s=!0){var d=c.value;this.client.getPushActionsForEvent(d)}}catch(f){a=!0,u=f}finally{try{!s&&l.return&&l.return()}finally{if(a)throw u}}r.initialiseState(t)}this._resolveInvites(e),e.recalculate(),i||(e.oldState.setStateEvents(t||[]),e.currentState.setStateEvents(t||[])),e.addLiveEvents(n||[])},k.prototype._processEventsForNotifs=function(e,t){if(this.client.getNotifTimelineSet())for(var n=0;n<t.length;n++){var r=this.client.getPushActionsForEvent(t[n]);r&&r.notify&&r.tweaks&&r.tweaks.highlight&&this._notifEvents.push(t[n])}},k.prototype._getGuestFilter=function(){return this.client._guestRooms?(0,r.default)({room:{timeline:{limit:20}}}):"{}"},k.prototype._updateSyncState=function(e,t){var n=this._syncState;this._syncState=e,this._syncStateData=t,this.client.emit("sync",this._syncState,n,t)},k.prototype._onOnline=function(){b("Browser thinks we are back online"),this._startKeepAlives(0)},e.exports=k}).call(this,n(6))},function(e,t,n){e.exports={default:n(279),__esModule:!0}},function(e,t,n){n(280),e.exports=n(4).Number.isInteger},function(e,t,n){var r=n(7);r(r.S,"Number",{isInteger:n(281)})},function(e,t,n){var r=n(14),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){e.exports={default:n(283),__esModule:!0}},function(e,t,n){n(284),e.exports=-9007199254740991},function(e,t,n){var r=n(7);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){"use strict";e.exports=function(e,t){this.roomId=e,this.info=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(93)),i=f(n(53)),o=f(n(24)),s=f(n(10)),a=f(n(12)),u=f(n(25)),c=f(n(26)),l=f(n(13)),d=n(19);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e,n,r){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return a._onEventStatus=function(e,t){e.isSending()?t===d.EventStatus.CANCELLED&&(e.removeListener("Event.status",a._onEventStatus),a._removeEvent(e)):e.removeListener("Event.status",a._onEventStatus)},a._onBeforeRedaction=function(e){a._relations.has(e)&&(a._relations.delete(e),"m.annotation"===a.relationType?a._removeAnnotationFromAggregation(e):"m.replace"===a.relationType&&a._targetEvent&&a._targetEvent.makeReplaced(a.getLastReplacement()),e.removeListener("Event.beforeRedaction",a._onBeforeRedaction),a.emit("Relations.redaction",e))},a.relationType=e,a.eventType=n,a._relations=new i.default,a._annotationsByKey={},a._annotationsBySender={},a._sortedAnnotationsByKey=[],a._targetEvent=null,a}return(0,c.default)(t,e),(0,a.default)(t,[{key:"addEvent",value:function(e){if(!this._relations.has(e)){var t=e.getRelation();if(t){var n=t.rel_type,r=e.getType();this.relationType===n&&this.eventType===r?(e.isSending()&&e.on("Event.status",this._onEventStatus),this._relations.add(e),"m.annotation"===this.relationType?this._addAnnotationToAggregation(e):"m.replace"===this.relationType&&this._targetEvent&&this._targetEvent.makeReplaced(this.getLastReplacement()),e.on("Event.beforeRedaction",this._onBeforeRedaction),this.emit("Relations.add",e)):console.error("Event relation info doesn't match this container")}else console.error("Event must have relation info")}}},{key:"_removeEvent",value:function(e){if(this._relations.has(e)){var t=e.getRelation();if(t){var n=t.rel_type,r=e.getType();this.relationType===n&&this.eventType===r?(this._relations.delete(e),"m.annotation"===this.relationType?this._removeAnnotationFromAggregation(e):"m.replace"===this.relationType&&this._targetEvent&&this._targetEvent.makeReplaced(this.getLastReplacement()),this.emit("Relations.remove",e)):console.error("Event relation info doesn't match this container")}else console.error("Event must have relation info")}}},{key:"getRelations",value:function(){return[].concat((0,r.default)(this._relations))}},{key:"_addAnnotationToAggregation",value:function(e){var t=e.getRelation().key;if(t){var n=this._annotationsByKey[t];n||(n=this._annotationsByKey[t]=new i.default,this._sortedAnnotationsByKey.push([t,n])),n.add(e),this._sortedAnnotationsByKey.sort((function(e,t){var n=e[1];return t[1].size-n.size}));var r=e.getSender(),o=this._annotationsBySender[r];o||(o=this._annotationsBySender[r]=new i.default),o.add(e)}}},{key:"_removeAnnotationFromAggregation",value:function(e){var t=e.getRelation().key;if(t){var n=this._annotationsByKey[t];n&&(n.delete(e),this._sortedAnnotationsByKey.sort((function(e,t){var n=e[1];return t[1].size-n.size})));var r=e.getSender(),i=this._annotationsBySender[r];i&&i.delete(e)}}},{key:"getSortedAnnotationsByKey",value:function(){return"m.annotation"!==this.relationType?null:this._sortedAnnotationsByKey}},{key:"getAnnotationsBySender",value:function(){return"m.annotation"!==this.relationType?null:this._annotationsBySender}},{key:"getLastReplacement",value:function(){var e=this;if("m.replace"!==this.relationType)return null;if(!this._targetEvent)return null;var t=this._targetEvent.getServerAggregatedRelation("m.replace"),n=t&&t.origin_server_ts;return this.getRelations().reduce((function(t,r){return r.getSender()!==e._targetEvent.getSender()||n&&n>r.getTs()||t&&t.getTs()>r.getTs()?t:r}),null)}},{key:"setTargetEvent",value:function(e){if(!this._targetEvent&&(this._targetEvent=e,"m.replace"===this.relationType)){var t=this.getLastReplacement();t&&this._targetEvent.makeReplaced(t)}}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";(function(t){var r=d(n(32)),i=d(n(5)),o=d(n(22)),s=d(n(9)),a=d(n(8)),u=n(1),c=n(148),l=d(n(3));function d(e){return e&&e.__esModule?e:{default:e}}var f=n(66),p=n(2),h=n(97);function v(e,t){switch(e){case c.SERVICE_TYPES.IS:return t+f.PREFIX_IDENTITY_V2+"/terms";case c.SERVICE_TYPES.IM:return t+"/_matrix/integrations/v1/terms";default:throw new Error("Unsupported service type")}}function m(e){p.checkObjectHasKeys(e,["baseUrl","request"]),this.baseUrl=e.baseUrl,this.idBaseUrl=e.idBaseUrl,this.identityServer=e.identityServer;var t={baseUrl:e.baseUrl,idBaseUrl:e.idBaseUrl,accessToken:e.accessToken,request:e.request,prefix:f.PREFIX_R0,onlyData:!0,extraParams:e.queryParams,localTimeoutMs:e.localTimeoutMs,useAuthorizationHeader:e.useAuthorizationHeader};this._http=new f.MatrixHttpApi(this,t),this._txnCtr=0}m.prototype.getHomeserverUrl=function(){return this.baseUrl},m.prototype.getIdentityServerUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&(this.idBaseUrl.startsWith("http://")||this.idBaseUrl.startsWith("https://"))?this.idBaseUrl.split("://")[1]:this.idBaseUrl},m.prototype.setIdentityServerUrl=function(e){this.idBaseUrl=p.ensureNoTrailingSlash(e),this._http.setIdBaseUrl(this.idBaseUrl)},m.prototype.getAccessToken=function(){return this._http.opts.accessToken||null},m.prototype.isLoggedIn=function(){return void 0!==this._http.opts.accessToken},m.prototype.makeTxnId=function(){return"m"+(new Date).getTime()+"."+this._txnCtr++},m.prototype.isUsernameAvailable=function(e){return this._http.authedRequest(void 0,"GET","/register/available",{username:e}).then((function(e){return e.available}))},m.prototype.register=function(e,t,n,r,i,o,s,a){!0===i?i={email:!0}:null!==i&&void 0!==i||(i={}),"function"===typeof s&&(a=s,s=void 0),void 0!==r&&null!==r||(r={}),n&&(r.session=n);var u={auth:r};return void 0!==e&&null!==e&&(u.username=e),void 0!==t&&null!==t&&(u.password=t),i.email&&(u.bind_email=!0),i.msisdn&&(u.bind_msisdn=!0),void 0!==o&&null!==o&&(u.guest_access_token=o),void 0!==s&&null!==s&&(u.inhibit_login=s),void 0!==t&&null!==t&&(u.x_show_msisdn=!0),this.registerRequest(u,void 0,a)},m.prototype.registerGuest=function(e,t){return(e=e||{}).body=e.body||{},this.registerRequest(e.body,"guest",t)},m.prototype.registerRequest=function(e,t,n){var r={};return t&&(r.kind=t),this._http.request(n,"POST","/register",r,e)},m.prototype.loginFlows=function(e){return this._http.request(e,"GET","/login")},m.prototype.login=function(e,t,n){var r=this,i={type:e};return p.extend(i,t),this._http.authedRequest((function(e,t){t&&t.access_token&&t.user_id&&(r._http.opts.accessToken=t.access_token,r.credentials={userId:t.user_id}),n&&n(e,t)}),"POST","/login",void 0,i)},m.prototype.loginWithPassword=function(e,t,n){return this.login("m.login.password",{user:e,password:t},n)},m.prototype.loginWithSAML2=function(e,t){return this.login("m.login.saml2",{relay_state:e},t)},m.prototype.getCasLoginUrl=function(e){return this.getSsoLoginUrl(e,"cas")},m.prototype.getSsoLoginUrl=function(e,t){return void 0===t&&(t="sso"),this._http.getUrl("/login/"+t+"/redirect",{redirectUrl:e},f.PREFIX_R0)},m.prototype.loginWithToken=function(e,t){return this.login("m.login.token",{token:e},t)},m.prototype.logout=function(e){return this._http.authedRequest(e,"POST","/logout")},m.prototype.deactivateAccount=function(e,t){if("function"===typeof t)throw new Error("deactivateAccount no longer accepts a callback parameter");var n={};return e&&(n.auth=e),void 0!==t&&(n.erase=t),this._http.authedRequest(void 0,"POST","/account/deactivate",void 0,n)},m.prototype.getFallbackAuthUrl=function(e,t){var n=p.encodeUri("/auth/$loginType/fallback/web",{$loginType:e});return this._http.getUrl(n,{session:t},f.PREFIX_R0)},m.prototype.createRoom=function(e,t){return this._http.authedRequest(t,"POST","/createRoom",void 0,e)},m.prototype.fetchRelations=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n,r,i,o){var s,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},o.from&&(s.from=o.from),c=p.encodeParams(s),l=p.encodeUri("/rooms/$roomId/relations/$eventId/$relationType/$eventType?"+c,{$roomId:t,$eventId:n,$relationType:r,$eventType:i}),e.next=6,(0,u.resolve)(this._http.authedRequest(void 0,"GET",l,null,null,{prefix:f.PREFIX_UNSTABLE}));case 6:return d=e.sent,e.abrupt("return",d);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),m.prototype.roomState=function(e,t){var n=p.encodeUri("/rooms/$roomId/state",{$roomId:e});return this._http.authedRequest(t,"GET",n)},m.prototype.fetchRoomEvent=function(e,t,n){var r=p.encodeUri("/rooms/$roomId/event/$eventId",{$roomId:e,$eventId:t});return this._http.authedRequest(n,"GET",r)},m.prototype.members=function(e,t,n,r,i){var o={};t&&(o.membership=t),n&&(o.not_membership=n),r&&(o.at=r);var s=p.encodeParams(o),a=p.encodeUri("/rooms/$roomId/members?"+s,{$roomId:e});return this._http.authedRequest(i,"GET",a)},m.prototype.upgradeRoom=function(e,t){var n=p.encodeUri("/rooms/$roomId/upgrade",{$roomId:e});return this._http.authedRequest(void 0,"POST",n,void 0,{new_version:t})},m.prototype.getGroupSummary=function(e){var t=p.encodeUri("/groups/$groupId/summary",{$groupId:e});return this._http.authedRequest(void 0,"GET",t)},m.prototype.getGroupProfile=function(e){var t=p.encodeUri("/groups/$groupId/profile",{$groupId:e});return this._http.authedRequest(void 0,"GET",t)},m.prototype.setGroupProfile=function(e,t){var n=p.encodeUri("/groups/$groupId/profile",{$groupId:e});return this._http.authedRequest(void 0,"POST",n,void 0,t)},m.prototype.setGroupJoinPolicy=function(e,t){var n=p.encodeUri("/groups/$groupId/settings/m.join_policy",{$groupId:e});return this._http.authedRequest(void 0,"PUT",n,void 0,{"m.join_policy":t})},m.prototype.getGroupUsers=function(e){var t=p.encodeUri("/groups/$groupId/users",{$groupId:e});return this._http.authedRequest(void 0,"GET",t)},m.prototype.getGroupInvitedUsers=function(e){var t=p.encodeUri("/groups/$groupId/invited_users",{$groupId:e});return this._http.authedRequest(void 0,"GET",t)},m.prototype.getGroupRooms=function(e){var t=p.encodeUri("/groups/$groupId/rooms",{$groupId:e});return this._http.authedRequest(void 0,"GET",t)},m.prototype.inviteUserToGroup=function(e,t){var n=p.encodeUri("/groups/$groupId/admin/users/invite/$userId",{$groupId:e,$userId:t});return this._http.authedRequest(void 0,"PUT",n,void 0,{})},m.prototype.removeUserFromGroup=function(e,t){var n=p.encodeUri("/groups/$groupId/admin/users/remove/$userId",{$groupId:e,$userId:t});return this._http.authedRequest(void 0,"PUT",n,void 0,{})},m.prototype.addUserToGroupSummary=function(e,t,n){var r=p.encodeUri(n?"/groups/$groupId/summary/$roleId/users/$userId":"/groups/$groupId/summary/users/$userId",{$groupId:e,$roleId:n,$userId:t});return this._http.authedRequest(void 0,"PUT",r,void 0,{})},m.prototype.removeUserFromGroupSummary=function(e,t){var n=p.encodeUri("/groups/$groupId/summary/users/$userId",{$groupId:e,$userId:t});return this._http.authedRequest(void 0,"DELETE",n,void 0,{})},m.prototype.addRoomToGroupSummary=function(e,t,n){var r=p.encodeUri(n?"/groups/$groupId/summary/$categoryId/rooms/$roomId":"/groups/$groupId/summary/rooms/$roomId",{$groupId:e,$categoryId:n,$roomId:t});return this._http.authedRequest(void 0,"PUT",r,void 0,{})},m.prototype.removeRoomFromGroupSummary=function(e,t){var n=p.encodeUri("/groups/$groupId/summary/rooms/$roomId",{$groupId:e,$roomId:t});return this._http.authedRequest(void 0,"DELETE",n,void 0,{})},m.prototype.addRoomToGroup=function(e,t,n){void 0===n&&(n=!0);var r=p.encodeUri("/groups/$groupId/admin/rooms/$roomId",{$groupId:e,$roomId:t});return this._http.authedRequest(void 0,"PUT",r,void 0,{"m.visibility":{type:n?"public":"private"}})},m.prototype.updateGroupRoomVisibility=function(e,t,n){var r=p.encodeUri("/groups/$groupId/admin/rooms/$roomId/config/m.visibility",{$groupId:e,$roomId:t});return this._http.authedRequest(void 0,"PUT",r,void 0,{type:n?"public":"private"})},m.prototype.removeRoomFromGroup=function(e,t){var n=p.encodeUri("/groups/$groupId/admin/rooms/$roomId",{$groupId:e,$roomId:t});return this._http.authedRequest(void 0,"DELETE",n,void 0,{})},m.prototype.acceptGroupInvite=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=p.encodeUri("/groups/$groupId/self/accept_invite",{$groupId:e});return this._http.authedRequest(void 0,"PUT",n,void 0,t||{})},m.prototype.joinGroup=function(e){var t=p.encodeUri("/groups/$groupId/self/join",{$groupId:e});return this._http.authedRequest(void 0,"PUT",t,void 0,{})},m.prototype.leaveGroup=function(e){var t=p.encodeUri("/groups/$groupId/self/leave",{$groupId:e});return this._http.authedRequest(void 0,"PUT",t,void 0,{})},m.prototype.getJoinedGroups=function(){var e=p.encodeUri("/joined_groups");return this._http.authedRequest(void 0,"GET",e)},m.prototype.createGroup=function(e){var t=p.encodeUri("/create_group");return this._http.authedRequest(void 0,"POST",t,void 0,e)},m.prototype.getPublicisedGroups=function(e){var t=p.encodeUri("/publicised_groups");return this._http.authedRequest(void 0,"POST",t,void 0,{user_ids:e})},m.prototype.setGroupPublicity=function(e,t){var n=p.encodeUri("/groups/$groupId/self/update_publicity",{$groupId:e});return this._http.authedRequest(void 0,"PUT",n,void 0,{publicise:t})},m.prototype.getStateEvent=function(e,t,n,r){var i={$roomId:e,$eventType:t,$stateKey:n},o=p.encodeUri("/rooms/$roomId/state/$eventType",i);return void 0!==n&&(o=p.encodeUri(o+"/$stateKey",i)),this._http.authedRequest(r,"GET",o)},m.prototype.sendStateEvent=function(e,t,n,r,i){var o={$roomId:e,$eventType:t,$stateKey:r},s=p.encodeUri("/rooms/$roomId/state/$eventType",o);return void 0!==r&&(s=p.encodeUri(s+"/$stateKey",o)),this._http.authedRequest(i,"PUT",s,void 0,n)},m.prototype.roomInitialSync=function(e,t,n){p.isFunction(t)&&(n=t,t=void 0);var r=p.encodeUri("/rooms/$roomId/initialSync",{$roomId:e});return t||(t=30),this._http.authedRequest(n,"GET",r,{limit:t})},m.prototype.setRoomReadMarkersHttpRequest=function(e,t,n,r){var i=p.encodeUri("/rooms/$roomId/read_markers",{$roomId:e}),o={"m.fully_read":t,"m.read":n,"m.hidden":Boolean(!!r&&r.hidden)};return this._http.authedRequest(void 0,"POST",i,void 0,o)},m.prototype.getJoinedRooms=function(){var e=p.encodeUri("/joined_rooms");return this._http.authedRequest(void 0,"GET",e)},m.prototype.getJoinedRoomMembers=function(e){var t=p.encodeUri("/rooms/$roomId/joined_members",{$roomId:e});return this._http.authedRequest(void 0,"GET",t)},m.prototype.publicRooms=function(e,t){"function"==typeof e&&(t=e,e={}),void 0===e&&(e={});var n={};return e.server&&(n.server=e.server,delete e.server),0===(0,s.default)(e).length&&0===(0,s.default)(n).length?this._http.authedRequest(t,"GET","/publicRooms"):this._http.authedRequest(t,"POST","/publicRooms",n,e)},m.prototype.createAlias=function(e,t,n){var r=p.encodeUri("/directory/room/$alias",{$alias:e}),i={room_id:t};return this._http.authedRequest(n,"PUT",r,void 0,i)},m.prototype.deleteAlias=function(e,t){var n=p.encodeUri("/directory/room/$alias",{$alias:e});return this._http.authedRequest(t,"DELETE",n,void 0,void 0)},m.prototype.getRoomIdForAlias=function(e,t){var n=p.encodeUri("/directory/room/$alias",{$alias:e});return this._http.authedRequest(t,"GET",n)},m.prototype.resolveRoomAlias=function(e,t){var n=p.encodeUri("/directory/room/$alias",{$alias:e});return this._http.request(t,"GET",n)},m.prototype.getRoomDirectoryVisibility=function(e,t){var n=p.encodeUri("/directory/list/room/$roomId",{$roomId:e});return this._http.authedRequest(t,"GET",n)},m.prototype.setRoomDirectoryVisibility=function(e,t,n){var r=p.encodeUri("/directory/list/room/$roomId",{$roomId:e});return this._http.authedRequest(n,"PUT",r,void 0,{visibility:t})},m.prototype.setRoomDirectoryVisibilityAppService=function(e,t,n,r){var i=p.encodeUri("/directory/list/appservice/$networkId/$roomId",{$networkId:e,$roomId:t});return this._http.authedRequest(r,"PUT",i,void 0,{visibility:n})},m.prototype.searchUserDirectory=function(e){var t={search_term:e.term};return void 0!==e.limit&&(t.limit=e.limit),this._http.authedRequest(void 0,"POST","/user_directory/search",void 0,t)},m.prototype.uploadContent=function(e,t){return this._http.uploadContent(e,t)},m.prototype.cancelUpload=function(e){return this._http.cancelUpload(e)},m.prototype.getCurrentUploads=function(){return this._http.getCurrentUploads()},m.prototype.getProfileInfo=function(e,t,n){p.isFunction(t)&&(n=t,t=void 0);var r=t?p.encodeUri("/profile/$userId/$info",{$userId:e,$info:t}):p.encodeUri("/profile/$userId",{$userId:e});return this._http.authedRequest(n,"GET",r)},m.prototype.getThreePids=function(e){return this._http.authedRequest(e,"GET","/account/3pid",void 0,void 0)},m.prototype.addThreePid=function(e,t,n){var r={threePidCreds:e,bind:t};return this._http.authedRequest(n,"POST","/account/3pid",null,r)},m.prototype.addThreePidOnly=function(){var e=(0,u.coroutine)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/account/3pid/add",e.next=3,(0,u.resolve)(this.isVersionSupported("r0.6.0"));case 3:if(!e.sent){e.next=7;break}e.t0=f.PREFIX_R0,e.next=8;break;case 7:e.t0=f.PREFIX_UNSTABLE;case 8:return r=e.t0,e.abrupt("return",this._http.authedRequest(void 0,"POST",n,null,t,{prefix:r}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),m.prototype.bindThreePid=function(){var e=(0,u.coroutine)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/account/3pid/bind",e.next=3,(0,u.resolve)(this.isVersionSupported("r0.6.0"));case 3:if(!e.sent){e.next=7;break}e.t0=f.PREFIX_R0,e.next=8;break;case 7:e.t0=f.PREFIX_UNSTABLE;case 8:return r=e.t0,e.abrupt("return",this._http.authedRequest(void 0,"POST",n,null,t,{prefix:r}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),m.prototype.unbindThreePid=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/account/3pid/unbind",i={medium:t,address:n,id_server:this.getIdentityServerUrl(!0)},e.next=4,(0,u.resolve)(this.isVersionSupported("r0.6.0"));case 4:if(!e.sent){e.next=8;break}e.t0=f.PREFIX_R0,e.next=9;break;case 8:e.t0=f.PREFIX_UNSTABLE;case 9:return o=e.t0,e.abrupt("return",this._http.authedRequest(void 0,"POST",r,null,i,{prefix:o}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),m.prototype.deleteThreePid=function(e,t){var n={medium:e,address:t};return this._http.authedRequest(void 0,"POST","/account/3pid/delete",null,n)},m.prototype.setPassword=function(e,t,n){var r={auth:e,new_password:t};return this._http.authedRequest(n,"POST","/account/password",null,r)},m.prototype.getDevices=function(){return this._http.authedRequest(void 0,"GET","/devices",void 0,void 0)},m.prototype.setDeviceDetails=function(e,t){var n=p.encodeUri("/devices/$device_id",{$device_id:e});return this._http.authedRequest(void 0,"PUT",n,void 0,t)},m.prototype.deleteDevice=function(e,t){var n=p.encodeUri("/devices/$device_id",{$device_id:e}),r={};return t&&(r.auth=t),this._http.authedRequest(void 0,"DELETE",n,void 0,r)},m.prototype.deleteMultipleDevices=function(e,t){var n={devices:e};t&&(n.auth=t);return this._http.authedRequest(void 0,"POST","/delete_devices",void 0,n)},m.prototype.getPushers=function(e){return this._http.authedRequest(e,"GET","/pushers",void 0,void 0)},m.prototype.setPusher=function(e,t){return this._http.authedRequest(t,"POST","/pushers/set",null,e)},m.prototype.getPushRules=function(e){return this._http.authedRequest(e,"GET","/pushrules/").then((function(e){return h.rewriteDefaultRules(e)}))},m.prototype.addPushRule=function(e,t,n,r,i){var o=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:n});return this._http.authedRequest(i,"PUT",o,void 0,r)},m.prototype.deletePushRule=function(e,t,n,r){var i=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:n});return this._http.authedRequest(r,"DELETE",i)},m.prototype.setPushRuleEnabled=function(e,t,n,r,i){var o=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId/enabled",{$kind:t,$ruleId:n});return this._http.authedRequest(i,"PUT",o,void 0,{enabled:r})},m.prototype.setPushRuleActions=function(e,t,n,r,i){var o=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId/actions",{$kind:t,$ruleId:n});return this._http.authedRequest(i,"PUT",o,void 0,{actions:r})},m.prototype.search=function(e,t){var n={};return e.next_batch&&(n.next_batch=e.next_batch),this._http.authedRequest(t,"POST","/search",n,e.body)},m.prototype.uploadKeysRequest=function(e,t,n){var r=(t=t||{}).device_id,i=void 0;return i=r?p.encodeUri("/keys/upload/$deviceId",{$deviceId:r}):"/keys/upload",this._http.authedRequest(n,"POST",i,void 0,e)},m.prototype.uploadKeySignatures=function(e){return this._http.authedRequest(void 0,"POST","/keys/signatures/upload",void 0,e,{prefix:f.PREFIX_UNSTABLE})},m.prototype.downloadKeysForUsers=function(e,t){if(p.isFunction(t))throw new Error("downloadKeysForUsers no longer accepts a callback parameter");var n={device_keys:{}};return"token"in(t=t||{})&&(n.token=t.token),e.forEach((function(e){n.device_keys[e]={}})),this._http.authedRequest(void 0,"POST","/keys/query",void 0,n)},m.prototype.claimOneTimeKeys=function(e,t){var n={};void 0===t&&(t="signed_curve25519");for(var r=0;r<e.length;++r){var i=e[r][0],o=e[r][1],s=n[i]||{};n[i]=s,s[o]=t}var a={one_time_keys:n};return this._http.authedRequest(void 0,"POST","/keys/claim",void 0,a)},m.prototype.getKeyChanges=function(e,t){var n={from:e,to:t};return this._http.authedRequest(void 0,"GET","/keys/changes",n,void 0)},m.prototype.uploadDeviceSigningKeys=function(e,t){var n=(0,o.default)({},t,{auth:e});return this._http.authedRequest(void 0,"POST","/keys/device_signing/upload",void 0,n,{prefix:f.PREFIX_UNSTABLE})},m.prototype.registerWithIdentityServer=function(e){if(!this.idBaseUrl)throw new Error("No Identity Server base URL set");var t=this.idBaseUrl+f.PREFIX_IDENTITY_V2+"/account/register";return this._http.requestOtherUrl(void 0,"POST",t,null,e)},m.prototype.requestEmailToken=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n,r,i,o,s){var c,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={client_secret:n,email:t,send_attempt:r,next_link:i},e.prev=1,e.next=4,(0,u.resolve)(this._http.idServerRequest(void 0,"POST","/validate/email/requestToken",c,f.PREFIX_IDENTITY_V2,s));case 4:return d=e.sent,o&&o(null,d),e.abrupt("return",d);case 9:if(e.prev=9,e.t0=e.catch(1),"rejected"!==e.t0.cors&&404!==e.t0.httpStatus){e.next=16;break}return l.default.warn("IS doesn't support v2, falling back to deprecated v1"),e.next=15,(0,u.resolve)(this._http.idServerRequest(o,"POST","/validate/email/requestToken",c,f.PREFIX_IDENTITY_V1));case 15:return e.abrupt("return",e.sent);case 16:throw o&&o(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t,n,r,i,o,s){return e.apply(this,arguments)}}(),m.prototype.requestMsisdnToken=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n,r,i,o,s,c){var d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={client_secret:r,country:t,phone_number:n,send_attempt:i,next_link:o},e.prev=1,e.next=4,(0,u.resolve)(this._http.idServerRequest(void 0,"POST","/validate/msisdn/requestToken",d,f.PREFIX_IDENTITY_V2,c));case 4:return p=e.sent,s&&s(null,p),e.abrupt("return",p);case 9:if(e.prev=9,e.t0=e.catch(1),"rejected"!==e.t0.cors&&404!==e.t0.httpStatus){e.next=16;break}return l.default.warn("IS doesn't support v2, falling back to deprecated v1"),e.next=15,(0,u.resolve)(this._http.idServerRequest(s,"POST","/validate/msisdn/requestToken",d,f.PREFIX_IDENTITY_V1));case 15:return e.abrupt("return",e.sent);case 16:throw s&&s(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t,n,r,i,o,s,a){return e.apply(this,arguments)}}(),m.prototype.submitMsisdnToken=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n,r,i){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={sid:t,client_secret:n,token:r},e.prev=1,e.next=4,(0,u.resolve)(this._http.idServerRequest(void 0,"POST","/validate/msisdn/submitToken",o,f.PREFIX_IDENTITY_V2,i));case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),"rejected"!==e.t0.cors&&404!==e.t0.httpStatus){e.next=14;break}return l.default.warn("IS doesn't support v2, falling back to deprecated v1"),e.next=13,(0,u.resolve)(this._http.idServerRequest(void 0,"POST","/validate/msisdn/submitToken",o,f.PREFIX_IDENTITY_V1));case 13:return e.abrupt("return",e.sent);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),m.prototype.submitMsisdnTokenOtherUrl=function(e,t,n,r){var i={sid:t,client_secret:n,token:r};return this._http.requestOtherUrl(void 0,"POST",e,void 0,i)},m.prototype.getIdentityHashDetails=function(e){return this._http.idServerRequest(void 0,"GET","/hash_details",null,f.PREFIX_IDENTITY_V2,e)},m.prototype.identityHashedLookup=function(){var e=(0,u.coroutine)(a.default.mark((function e(n,r){var o,c,l,d,p,h,v,m,y,g,_,b,k,w;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},e.next=3,(0,u.resolve)(this.getIdentityHashDetails(r));case 3:if((c=e.sent)&&c.lookup_pepper&&c.algorithms){e.next=6;break}throw new Error("Unsupported identity server: bad response");case 6:if(o.pepper=c.lookup_pepper,l={},!c.algorithms.includes("sha256")){e.next=14;break}d=new t.Olm.Utility,o.addresses=n.map((function(e){var t=e[0].toLowerCase(),n=e[1].toLowerCase(),r=d.sha256(t+" "+n+" "+o.pepper).replace(/\+/g,"-").replace(/\//g,"_");return l[r]=e[0],r})),o.algorithm="sha256",e.next=20;break;case 14:if(!c.algorithms.includes("none")){e.next=19;break}o.addresses=n.map((function(e){var t=e[0].toLowerCase()+" "+e[1].toLowerCase();return l[t]=e[0],t})),o.algorithm="none",e.next=20;break;case 19:throw new Error("Unsupported identity server: unknown hash algorithm");case 20:return e.next=22,(0,u.resolve)(this._http.idServerRequest(void 0,"POST","/lookup",o,f.PREFIX_IDENTITY_V2,r));case 22:if((p=e.sent)&&p.mappings){e.next=25;break}return e.abrupt("return",[]);case 25:h=[],v=!0,m=!1,y=void 0,e.prev=29,g=(0,i.default)((0,s.default)(p.mappings));case 31:if(v=(_=g.next()).done){e.next=41;break}if(b=_.value,k=p.mappings[b],w=l[b]){e.next=37;break}throw new Error("Identity server returned more results than expected");case 37:h.push({address:w,mxid:k});case 38:v=!0,e.next=31;break;case 41:e.next=47;break;case 43:e.prev=43,e.t0=e.catch(29),m=!0,y=e.t0;case 47:e.prev=47,e.prev=48,!v&&g.return&&g.return();case 50:if(e.prev=50,!m){e.next=53;break}throw y;case 53:return e.finish(50);case 54:return e.finish(47);case 55:return e.abrupt("return",h);case 56:case"end":return e.stop()}}),e,this,[[29,43,47,55],[48,,50,54]])})));return function(t,n){return e.apply(this,arguments)}}(),m.prototype.lookupThreePid=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n,r,i){var o,s,c,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.resolve)(this.identityHashedLookup([[n,t]],i));case 3:if(o=e.sent,s=o.find((function(e){return e.address===n}))){e.next=8;break}return r&&r(null,{}),e.abrupt("return",{});case 8:return c={address:n,medium:t,mxid:s.mxid},r&&r(null,c),e.abrupt("return",c);case 13:if(e.prev=13,e.t0=e.catch(0),"rejected"!==e.t0.cors&&404!==e.t0.httpStatus){e.next=21;break}return d={medium:t,address:n},l.default.warn("IS doesn't support v2, falling back to deprecated v1"),e.next=20,(0,u.resolve)(this._http.idServerRequest(r,"GET","/lookup",d,f.PREFIX_IDENTITY_V1));case 20:return e.abrupt("return",e.sent);case 21:throw r&&r(e.t0,void 0),e.t0;case 23:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),m.prototype.bulkLookupThreePids=function(){var e=(0,u.coroutine)(a.default.mark((function e(t,n){var r,o,s,c,d,p,h,v,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.resolve)(this.identityHashedLookup(t.map((function(e){return[e[1],e[0]]})),n));case 3:for(r=e.sent,o=[],s=!0,c=!1,d=void 0,e.prev=8,p=function(){var e=v.value,n=t.find((function(t){return t[1]===e.address}));if(!n)throw new Error("Identity sever returned unexpected results");o.push([n[0],e.address,e.mxid])},h=(0,i.default)(r);!(s=(v=h.next()).done);s=!0)p();e.next=17;break;case 13:e.prev=13,e.t0=e.catch(8),c=!0,d=e.t0;case 17:e.prev=17,e.prev=18,!s&&h.return&&h.return();case 20:if(e.prev=20,!c){e.next=23;break}throw d;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",{threepids:o});case 28:if(e.prev=28,e.t1=e.catch(0),"rejected"!==e.t1.cors&&404!==e.t1.httpStatus){e.next=36;break}return m={threepids:t},l.default.warn("IS doesn't support v2, falling back to deprecated v1"),e.next=35,(0,u.resolve)(this._http.idServerRequest(void 0,"POST","/bulk_lookup",m,f.PREFIX_IDENTITY_V1,n));case 35:return e.abrupt("return",e.sent);case 36:throw e.t1;case 37:case"end":return e.stop()}}),e,this,[[0,28],[8,13,17,25],[18,,20,24]])})));return function(t,n){return e.apply(this,arguments)}}(),m.prototype.getIdentityAccount=function(e){return this._http.idServerRequest(void 0,"GET","/account",void 0,f.PREFIX_IDENTITY_V2,e)},m.prototype.sendToDevice=function(e,t,n){var r=p.encodeUri("/sendToDevice/$eventType/$txnId",{$eventType:e,$txnId:n||this.makeTxnId()}),i={messages:t},o=(0,s.default)(t).reduce((function(e,n){return e[n]=(0,s.default)(t[n]),e}),{});return l.default.log("PUT "+r,o),this._http.authedRequest(void 0,"PUT",r,void 0,i)},m.prototype.getThirdpartyProtocols=function(){return this._http.authedRequest(void 0,"GET","/thirdparty/protocols",void 0,void 0).then((function(e){if(!e||"object"!==("undefined"===typeof e?"undefined":(0,r.default)(e)))throw new Error("/thirdparty/protocols did not return an object: "+e);return e}))},m.prototype.getThirdpartyLocation=function(e,t){var n=p.encodeUri("/thirdparty/location/$protocol",{$protocol:e});return this._http.authedRequest(void 0,"GET",n,t,void 0)},m.prototype.getThirdpartyUser=function(e,t){var n=p.encodeUri("/thirdparty/user/$protocol",{$protocol:e});return this._http.authedRequest(void 0,"GET",n,t,void 0)},m.prototype.getTerms=function(e,t){var n=v(e,t);return this._http.requestOtherUrl(void 0,"GET",n)},m.prototype.agreeToTerms=function(e,t,n,r){var i=v(e,t),o={Authorization:"Bearer "+n};return this._http.requestOtherUrl(void 0,"POST",i,null,{user_accepts:r},{headers:o})},m.prototype.reportEvent=function(e,t,n,r){var i=p.encodeUri("/rooms/$roomId/report/$eventId",{$roomId:e,$eventId:t});return this._http.authedRequest(void 0,"POST",i,null,{score:n,reason:r})},e.exports=m}).call(this,n(6))},function(e,t,n){"use strict";var r=i(n(1));i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var o=n(2);function s(e,t){this.retryAlgorithm=e||s.RETRY_BACKOFF_RATELIMIT,this.queueAlgorithm=t||s.QUEUE_MESSAGES,this._queues={},this._activeQueues=[],this._procFn=null}function a(e){e._procFn&&o.forEach(o.filter(o.keys(e._queues),(function(t){return-1===e._activeQueues.indexOf(t)&&e._queues[t].length>0})),(function(t){e._activeQueues.push(t),c("Spinning up queue: '%s'",t),function e(t,n){var i=function(e,t){var n=e._queues[t];if(!o.isArray(n))return null;return n[0]}(t,n);if(!i){var s=t._activeQueues.indexOf(n);return s>=0&&t._activeQueues.splice(s,1),void c("Stopping queue '%s' as it is now empty",n)}c("Queue '%s' has %s pending events",n,t._queues[n].length),r.default.resolve().then((function(){return t._procFn(i.event)})).then((function(r){u(t,n),c("Queue '%s' sent event %s",n,i.event.getId()),i.defer.resolve(r),e(t,n)}),(function(r){i.attempts+=1;var o=t.retryAlgorithm(i.event,i.attempts,r);c("retry(%s) err=%s event_id=%s waitTime=%s",i.attempts,r,i.event.getId(),o),-1===o?(c("Queue '%s' giving up on event %s",n,i.event.getId()),u(t,n),i.defer.reject(r),e(t,n)):setTimeout((function(){e(t,n)}),o)}))}(e,t)}))}function u(e,t){var n=e._queues[t];return o.isArray(n)?n.shift():null}function c(){0}s.prototype.getQueueForEvent=function(e){var t=this.queueAlgorithm(e);return t&&this._queues[t]?o.map(this._queues[t],(function(e){return e.event})):null},s.prototype.removeEventFromQueue=function(e){var t=this.queueAlgorithm(e);if(!t||!this._queues[t])return!1;var n=!1;return o.removeElement(this._queues[t],(function(t){if(t.event.getId()===e.getId())return n=!0,!0})),n},s.prototype.setProcessFunction=function(e){this._procFn=e,a(this)},s.prototype.queueEvent=function(e){var t=this.queueAlgorithm(e);if(!t)return null;this._queues[t]||(this._queues[t]=[]);var n=r.default.defer();return this._queues[t].push({event:e,defer:n,attempts:0}),c("Queue algorithm dumped event %s into queue '%s'",e.getId(),t),a(this),n.promise},s.RETRY_BACKOFF_RATELIMIT=function(e,t,n){if(400===n.httpStatus||403===n.httpStatus||401===n.httpStatus)return-1;if("rejected"===n.cors)return-1;if("M_LIMIT_EXCEEDED"===n.name){var r=n.data.retry_after_ms;if(r)return r}return t>4?-1:1e3*Math.pow(2,t)},s.QUEUE_MESSAGES=function(e){return"m.room.message"===e.getType()||e.hasAssocation()?"message":null},e.exports=s},function(e,t,n){"use strict";var r=i(n(5));i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var o=n(2),s="session.e2e.";function a(e){if(this.store=e,!o.isFunction(e.getItem)||!o.isFunction(e.setItem)||!o.isFunction(e.removeItem)||!o.isFunction(e.key)||"number"!==typeof e.length)throw new Error("Supplied webStore does not meet the WebStorage API interface")}a.prototype={removeEndToEndAccount:function(){this.store.removeItem(u)},getEndToEndAccount:function(){return this.store.getItem(u)},getAllEndToEndDevices:function(){for(var e=f(""),t={},n=0;n<this.store.length;++n){var r=this.store.key(n),i=r.substr(e.length);r.startsWith(e)&&(t[i]=v(this.store,r))}return t},getEndToEndDeviceTrackingStatus:function(){return v(this.store,l)},getEndToEndDeviceSyncToken:function(){return v(this.store,c)},removeEndToEndDeviceData:function(){y(this.store,f("")),y(this.store,l),y(this.store,c)},getEndToEndSessions:function(e){return v(this.store,p(e))},getAllEndToEndSessions:function(){var e=m(this.store,p("")),t={},n=!0,i=!1,o=void 0;try{for(var s,a=(0,r.default)(e);!(n=(s=a.next()).done);n=!0){var u=s.value;t[u.substr(p("").length)]=v(this.store,u)}}catch(c){i=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t},removeAllEndToEndSessions:function(){y(this.store,p(""))},getAllEndToEndInboundGroupSessionKeys:function(){for(var e=s+"inboundgroupsessions/",t=[],n=0;n<this.store.length;n++){var r=this.store.key(n);r.startsWith(e)&&t.push({senderKey:r.substr(e.length,43),sessionId:r.substr(e.length+44)})}return t},getEndToEndInboundGroupSession:function(e,t){var n=function(e,t){return s+"inboundgroupsessions/"+e+"/"+t}(e,t);return this.store.getItem(n)},removeAllEndToEndInboundGroupSessions:function(){y(this.store,s+"inboundgroupsessions/")},getAllEndToEndRooms:function(){var e=m(this.store,h("")),t={},n=!0,i=!1,o=void 0;try{for(var s,a=(0,r.default)(e);!(n=(s=a.next()).done);n=!0){var u=s.value;t[u.substr(h("").length)]=v(this.store,u)}}catch(c){i=!0,o=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t},removeAllEndToEndRooms:function(){y(this.store,h(""))},setLocalTrustedBackupPubKey:function(e){this.store.setItem(d,e)},getLocalTrustedBackupPubKey:function(){return this.store.getItem(d)}};var u=s+"account",c=s+"device_sync_token",l=s+"device_tracking",d=s+"trusted_backup_pubkey";function f(e){return s+"devices/"+e}function p(e){return s+"sessions/"+e}function h(e){return s+"rooms/"+e}function v(e,t){try{return JSON.parse(e.getItem(t))}catch(n){g("Failed to get key %s: %s",t,n),g(n.stack)}return null}function m(e,t){for(var n=[],r=0;r<e.length;++r){var i=e.key(r);i.startsWith(t)&&n.push(i)}return n}function y(e,t){for(var n=[],i=0;i<e.length;++i){var o=e.key(i);o.startsWith(t)&&n.push(o)}var s=!0,a=!1,u=void 0;try{for(var c,l=(0,r.default)(n);!(s=(c=l.next()).done);s=!0){var d=c.value;e.removeItem(d)}}catch(f){a=!0,u=f}finally{try{!s&&l.return&&l.return()}finally{if(a)throw u}}}function g(){0}e.exports=a},function(e,t,n){"use strict";var r=i(n(1));i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var o=n(46),s=function(){};function a(e,t,n){n=n||{},this._client=e,this._timelineSet=t,this._start=null,this._end=null,this._eventCount=0,this._windowLimit=n.windowLimit||1e3}function u(e,t){this.timeline=e,this.index=t}a.prototype.load=function(e,t){var n=this;t=t||20;var i=function(r){var i=void 0,o=r.getEvents();if(e){for(var s=0;s<o.length;s++)if(o[s].getId()==e){i=s;break}if(void 0===i)throw new Error("getEventTimeline result didn't include requested event")}else i=o.length;var a=Math.min(o.length,i+Math.ceil(t/2)),c=Math.max(0,a-t);n._start=new u(r,c-r.getBaseIndex()),n._end=new u(r,a-r.getBaseIndex()),n._eventCount=a-c};if(e){var o=this._timelineSet.getTimelineForEvent(e);return o?(i(o),r.default.resolve(o)):this._client.getEventTimeline(this._timelineSet,e).then(i)}return i(this._timelineSet.getLiveTimeline()),r.default.resolve()},a.prototype.canPaginate=function(e){var t=void 0;if(e==o.BACKWARDS)t=this._start;else{if(e!=o.FORWARDS)throw new Error("Invalid direction '"+e+"'");t=this._end}if(!t)return s("TimelineWindow: no timeline yet"),!1;if(e==o.BACKWARDS){if(t.index>t.minIndex())return!0}else if(t.index<t.maxIndex())return!0;return Boolean(t.timeline.getNeighbouringTimeline(e)||t.timeline.getPaginationToken(e))},a.prototype.paginate=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=5);var a=void 0;if(e==o.BACKWARDS)a=this._start;else{if(e!=o.FORWARDS)throw new Error("Invalid direction '"+e+"'");a=this._end}if(!a)return s("TimelineWindow: no timeline yet"),r.default.resolve(!1);if(a.pendingPaginate)return a.pendingPaginate;var u=e==o.BACKWARDS?a.retreat(t):a.advance(t);if(u){this._eventCount+=u,s("TimelineWindow: increased cap by "+u+" (now "+this._eventCount+")");var c=this._eventCount-this._windowLimit;return c>0&&this.unpaginate(c,e!=o.BACKWARDS),r.default.resolve(!0)}if(!n||0===i)return r.default.resolve(!1);if(!a.timeline.getPaginationToken(e))return s("TimelineWindow: no token"),r.default.resolve(!1);s("TimelineWindow: starting request");var l=this,d=this._client.paginateEventTimeline(a.timeline,{backwards:e==o.BACKWARDS,limit:t}).finally((function(){a.pendingPaginate=null})).then((function(n){return s("TimelineWindow: request completed with result "+n),!!n&&l.paginate(e,t,!0,i-1)}));return a.pendingPaginate=d,d},a.prototype.unpaginate=function(e,t){var n=t?this._start:this._end;if(e>this._eventCount||e<0)throw new Error("Attemting to unpaginate "+e+" events, but only have "+this._eventCount+" in the timeline");for(;e>0;){var r=t?n.advance(e):n.retreat(e);if(r<=0)throw new Error("Unable to unpaginate any further, but still have "+this._eventCount+" events");e-=r,this._eventCount-=r,s("TimelineWindow.unpaginate: dropped "+r+" (now "+this._eventCount+")")}},a.prototype.getEvents=function(){if(!this._start)return[];for(var e=[],t=this._start.timeline;;){var n=t.getEvents(),r=0,i=n.length;t===this._start.timeline&&(r=this._start.index+t.getBaseIndex()),t===this._end.timeline&&(i=this._end.index+t.getBaseIndex());for(var s=r;s<i;s++)e.push(n[s]);if(t===this._end.timeline)break;t=t.getNeighbouringTimeline(o.FORWARDS)}return e},u.prototype.minIndex=function(){return-1*this.timeline.getBaseIndex()},u.prototype.maxIndex=function(){return this.timeline.getEvents().length-this.timeline.getBaseIndex()},u.prototype.advance=function(e){if(!e)return 0;var t=void 0;if(e<0){if((t=Math.max(e,this.minIndex()-this.index))<0)return this.index+=t,t}else if((t=Math.min(e,this.maxIndex()-this.index))>0)return this.index+=t,t;var n=this.timeline.getNeighbouringTimeline(e<0?o.BACKWARDS:o.FORWARDS);return n?(this.timeline=n,this.index=e<0?this.maxIndex():this.minIndex(),s("paginate: switched to new neighbour"),this.advance(e)):0},u.prototype.retreat=function(e){return-1*this.advance(-1*e)},e.exports.TimelineWindow=a,e.exports.TimelineIndex=u},function(e,t,n){"use strict";var r=c(n(5)),i=c(n(21)),o=c(n(8)),s=n(1),a=c(s),u=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}var l=n(98),d=n(2);function f(e){this._matrixClient=e.matrixClient,this._data=e.authData||{},this._requestCallback=e.doRequest,this._busyChangedCallback=e.busyChanged,this._stateUpdatedCallback=e.stateUpdated||e.startAuthStage,this._resolveFunc=null,this._rejectFunc=null,this._inputs=e.inputs||{},this._requestEmailTokenCallback=e.requestEmailToken,e.sessionId&&(this._data.session=e.sessionId),this._clientSecret=e.clientSecret||this._matrixClient.generateClientSecret(),this._emailSid=e.emailSid,void 0===this._emailSid&&(this._emailSid=null),this._requestingEmailToken=!1,this._chosenFlow=null,this._currentStage=null,this._submitPromise=null}f.prototype={attemptAuth:function(){var e=this;return new a.default((function(t,n){e._resolveFunc=t,e._rejectFunc=n,e._data.flows?e._startNextAuthStage():(e._busyChangedCallback&&e._busyChangedCallback(!0),e._doRequest(e._data).finally((function(){e._busyChangedCallback&&e._busyChangedCallback(!1)})))}))},poll:function(){var e=(0,s.coroutine)(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._data.session){e.next=2;break}return e.abrupt("return");case 2:if(!this._submitPromise){e.next=4;break}return e.abrupt("return");case 4:if(t={},"m.login.email.identity"!=this._currentStage){e.next=14;break}if(!this._emailSid){e.next=14;break}return n={sid:this._emailSid,client_secret:this._clientSecret},e.next=10,(0,s.resolve)(this._matrixClient.doesServerRequireIdServerParam());case 10:if(!e.sent){e.next=13;break}r=l.parse(this._matrixClient.getIdentityServerUrl()),n.id_server=r.host;case 13:t={type:"m.login.email.identity",threepid_creds:n};case 14:this.submitAuthDict(t,!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getSessionId:function(){return this._data?this._data.session:void 0},getClientSecret:function(){return this._clientSecret},getStageParams:function(e){var t={};return this._data&&this._data.params&&(t=this._data.params),t[e]},getChosenFlow:function(){return this._chosenFlow},submitAuthDict:function(){var e=(0,s.coroutine)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._resolveFunc){e.next=2;break}throw new Error("submitAuthDict() called before attemptAuth()");case 2:!n&&this._busyChangedCallback&&this._busyChangedCallback(!0);case 3:if(!this._submitPromise){e.next=13;break}return e.prev=4,e.next=7,(0,s.resolve)(this._submitPromise);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:e.next=3;break;case 13:return r={session:this._data.session},d.extend(r,t),e.prev=15,this._submitPromise=this._doRequest(r,n),e.next=19,(0,s.resolve)(this._submitPromise);case 19:return e.prev=19,this._submitPromise=null,!n&&this._busyChangedCallback&&this._busyChangedCallback(!1),e.finish(19);case 23:case"end":return e.stop()}}),e,this,[[4,9],[15,,19,23]])})));return function(t,n){return e.apply(this,arguments)}}(),getEmailSid:function(){return this._emailSid},setEmailSid:function(e){this._emailSid=e},_doRequest:function(){var e=(0,s.coroutine)(o.default.mark((function e(t,n){var r,i,a,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.resolve)(this._requestCallback(t,n));case 3:r=e.sent,this._resolveFunc(r),e.next=30;break;case 7:if(e.prev=7,e.t0=e.catch(0),i=e.t0.data?e.t0.data.flows:null,a=Boolean(this._data.flows)||Boolean(i),401===e.t0.httpStatus&&e.t0.data&&a||(n?u.default.log("Background poll request failed doing UI auth: ignoring",e.t0):this._rejectFunc(e.t0)),e.t0.data.flows||e.t0.data.completed||e.t0.data.session||(e.t0.data.flows=this._data.flows,e.t0.data.completed=this._data.completed,e.t0.data.session=this._data.session),this._data=e.t0.data,this._startNextAuthStage(),this._emailSid||this._requestingEmailToken||!this._chosenFlow.stages.includes("m.login.email.identity")){e.next=30;break}return this._requestingEmailToken=!0,e.prev=17,e.next=20,(0,s.resolve)(this._requestEmailTokenCallback(this._inputs.emailAddress,this._clientSecret,1,this._data.session));case 20:c=e.sent,this._emailSid=c.sid,e.next=27;break;case 24:e.prev=24,e.t1=e.catch(17),this._rejectFunc(e.t1);case 27:return e.prev=27,this._requestingEmailToken=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[0,7],[17,24,27,30]])})));return function(t,n){return e.apply(this,arguments)}}(),_startNextAuthStage:function(){var e=this._chooseStage();if(!e)throw new Error("No incomplete flows from the server");if(this._currentStage=e,"m.login.dummy"!==e)if(this._data.errcode||this._data.error)this._stateUpdatedCallback(e,{errcode:this._data.errcode||"",error:this._data.error||""});else{var t={};"m.login.email.identity"==e&&(t.emailSid=this._emailSid),this._stateUpdatedCallback(e,t)}else this.submitAuthDict({type:"m.login.dummy"})},_chooseStage:function(){null===this._chosenFlow&&(this._chosenFlow=this._chooseFlow()),u.default.log("Active flow => %s",(0,i.default)(this._chosenFlow));var e=this._firstUncompletedStage(this._chosenFlow);return u.default.log("Next stage: %s",e),e},_chooseFlow:function(){var e=this._data.flows||[],t=Boolean(this._inputs.emailAddress)||Boolean(this._emailSid),n=Boolean(this._inputs.phoneCountry)&&Boolean(this._inputs.phoneNumber),i=!0,o=!1,s=void 0;try{for(var a,u=(0,r.default)(e);!(i=(a=u.next()).done);i=!0){var c=a.value,l=!1,d=!1,f=!0,p=!1,h=void 0;try{for(var v,m=(0,r.default)(c.stages);!(f=(v=m.next()).done);f=!0){var y=v.value;"m.login.email.identity"===y?l=!0:"m.login.msisdn"==y&&(d=!0)}}catch(g){p=!0,h=g}finally{try{!f&&m.return&&m.return()}finally{if(p)throw h}}if(l==t&&d==n)return c}}catch(g){o=!0,s=g}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}var g=new Error("No appropriate authentication flow found");throw g.name="NoAuthFlowFoundError",g.required_stages=[],t&&g.required_stages.push("m.login.email.identity"),n&&g.required_stages.push("m.login.msisdn"),g.available_flows=e,g},_firstUncompletedStage:function(e){for(var t=(this._data||{}).completed||[],n=0;n<e.stages.length;++n){var r=e.stages[n];if(-1===t.indexOf(r))return r}}},e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDiscovery=void 0;var r=n(1),i=f(r),o=f(n(8)),s=f(n(5)),a=f(n(9)),u=f(n(12)),c=f(n(10)),l=f(n(3)),d=n(98);function f(e){return e&&e.__esModule?e:{default:e}}t.AutoDiscovery=function(){function e(){(0,c.default)(this,e)}return(0,u.default)(e,null,[{key:"fromDiscoveryConfig",value:function(){var t=(0,r.coroutine)(o.default.mark((function t(n){var u,c,d,f,p,h;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u={"m.homeserver":{state:e.FAIL_ERROR,error:e.ERROR_INVALID,base_url:null},"m.identity_server":{state:e.PROMPT,error:null,base_url:null}},n&&n["m.homeserver"]){t.next=6;break}return l.default.error("No m.homeserver key in config"),u["m.homeserver"].state=e.FAIL_PROMPT,u["m.homeserver"].error=e.ERROR_INVALID,t.abrupt("return",i.default.resolve(u));case 6:if(n["m.homeserver"].base_url){t.next=11;break}return l.default.error("No m.homeserver base_url in config"),u["m.homeserver"].state=e.FAIL_PROMPT,u["m.homeserver"].error=e.ERROR_INVALID_HS_BASE_URL,t.abrupt("return",i.default.resolve(u));case 11:if(c=this._sanitizeWellKnownUrl(n["m.homeserver"].base_url)){t.next=16;break}return l.default.error("Invalid base_url for m.homeserver"),u["m.homeserver"].error=e.ERROR_INVALID_HS_BASE_URL,t.abrupt("return",i.default.resolve(u));case 16:return t.next=18,(0,r.resolve)(this._fetchWellKnownObject(c+"/_matrix/client/versions"));case 18:if((d=t.sent)&&d.raw.versions){t.next=24;break}return l.default.error("Invalid /versions response"),u["m.homeserver"].error=e.ERROR_INVALID_HOMESERVER,u["m.homeserver"].base_url=c,t.abrupt("return",i.default.resolve(u));case 24:if(u["m.homeserver"]={state:e.SUCCESS,error:null,base_url:c},f="",!n["m.identity_server"]){t.next=41;break}if(p={"m.homeserver":u["m.homeserver"],"m.identity_server":{state:e.FAIL_PROMPT,error:e.ERROR_INVALID_IS,base_url:null}},f=this._sanitizeWellKnownUrl(n["m.identity_server"].base_url)){t.next=33;break}return l.default.error("Invalid base_url for m.identity_server"),p["m.identity_server"].error=e.ERROR_INVALID_IS_BASE_URL,t.abrupt("return",i.default.resolve(p));case 33:return t.next=35,(0,r.resolve)(this._fetchWellKnownObject(f+"/_matrix/identity/api/v1"));case 35:if((h=t.sent)&&h.raw&&"SUCCESS"===h.action){t.next=41;break}return l.default.error("Invalid /api/v1 response"),p["m.identity_server"].error=e.ERROR_INVALID_IDENTITY_SERVER,p["m.identity_server"].base_url=f,t.abrupt("return",i.default.resolve(p));case 41:return f&&f.length>0&&(u["m.identity_server"]={state:e.SUCCESS,error:null,base_url:f}),(0,a.default)(n).map((function(e){if("m.homeserver"===e||"m.identity_server"===e){var t=["error","state","base_url"],r=!0,i=!1,o=void 0;try{for(var c,l=(0,s.default)((0,a.default)(n[e]));!(r=(c=l.next()).done);r=!0){var d=c.value;t.includes(d)||(u[e][d]=n[e][d])}}catch(f){i=!0,o=f}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}}else u[e]=n[e]})),t.abrupt("return",i.default.resolve(u));case 44:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findClientConfig",value:function(){var t=(0,r.coroutine)(o.default.mark((function t(n){var s,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&"string"===typeof n&&0!==n.length){t.next=2;break}throw new Error("'domain' must be a string of non-zero length");case 2:return s={"m.homeserver":{state:e.FAIL_ERROR,error:e.ERROR_INVALID,base_url:null},"m.identity_server":{state:e.PROMPT,error:null,base_url:null}},t.next=5,(0,r.resolve)(this._fetchWellKnownObject("https://"+n+"/.well-known/matrix/client"));case 5:if((a=t.sent)&&"SUCCESS"===a.action){t.next=11;break}return l.default.error("No response or error when parsing .well-known"),a.reason&&l.default.error(a.reason),"IGNORE"===a.action?s["m.homeserver"]={state:e.PROMPT,error:null,base_url:null}:(s["m.homeserver"].state=e.FAIL_PROMPT,s["m.homeserver"].error=e.ERROR_INVALID),t.abrupt("return",i.default.resolve(s));case 11:return t.abrupt("return",e.fromDiscoveryConfig(a.raw));case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRawClientConfig",value:function(){var e=(0,r.coroutine)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"string"===typeof t&&0!==t.length){e.next=2;break}throw new Error("'domain' must be a string of non-zero length");case 2:return e.next=4,(0,r.resolve)(this._fetchWellKnownObject("https://"+t+"/.well-known/matrix/client"));case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",{});case 7:return e.abrupt("return",n.raw||{});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sanitizeWellKnownUrl",value:function(e){if(!e)return!1;try{var t=null;try{t=d.URL?new d.URL(e):new URL(e)}catch(o){t=new URL(e)}if(!t||!t.hostname)return!1;if("http:"!==t.protocol&&"https:"!==t.protocol)return!1;var n=t.port?":"+t.port:"",r=t.pathname?t.pathname:"",i=t.protocol+"//"+t.hostname+n+r;return i.endsWith("/")&&(i=i.substring(0,i.length-1)),i}catch(o){return l.default.error(o),!1}}},{key:"_fetchWellKnownObject",value:function(){var t=(0,r.method)((function(t){return new i.default((function(r,i){var o=n(103).getRequest();if(!o)throw new Error("No request library available");o({method:"GET",uri:t,timeout:5e3},(function(t,n,i){if(t||n.statusCode<200||n.statusCode>=300){var o="FAIL_PROMPT",s=(t?t.message:null)||"General failure";return 404===n.statusCode&&(o="IGNORE",s=e.ERROR_MISSING_WELLKNOWN),void r({raw:{},action:o,reason:s,error:t})}try{r({raw:JSON.parse(i),action:"SUCCESS"})}catch(u){var a=e.ERROR_INVALID;"SyntaxError"===u.name&&(a=e.ERROR_INVALID_JSON),r({raw:{},action:"FAIL_PROMPT",reason:a,error:u})}}))}))}));return function(e){return t.apply(this,arguments)}}()},{key:"ERROR_INVALID",get:function(){return"Invalid homeserver discovery response"}},{key:"ERROR_GENERIC_FAILURE",get:function(){return"Failed to get autodiscovery configuration from server"}},{key:"ERROR_INVALID_HS_BASE_URL",get:function(){return"Invalid base_url for m.homeserver"}},{key:"ERROR_INVALID_HOMESERVER",get:function(){return"Homeserver URL does not appear to be a valid Matrix homeserver"}},{key:"ERROR_INVALID_IS_BASE_URL",get:function(){return"Invalid base_url for m.identity_server"}},{key:"ERROR_INVALID_IDENTITY_SERVER",get:function(){return"Identity server URL does not appear to be a valid identity server"}},{key:"ERROR_INVALID_IS",get:function(){return"Invalid identity server discovery response"}},{key:"ERROR_MISSING_WELLKNOWN",get:function(){return"No .well-known JSON file found"}},{key:"ERROR_INVALID_JSON",get:function(){return"Invalid JSON"}},{key:"ALL_ERRORS",get:function(){return[e.ERROR_INVALID,e.ERROR_GENERIC_FAILURE,e.ERROR_INVALID_HS_BASE_URL,e.ERROR_INVALID_HOMESERVER,e.ERROR_INVALID_IS_BASE_URL,e.ERROR_INVALID_IDENTITY_SERVER,e.ERROR_INVALID_IS,e.ERROR_MISSING_WELLKNOWN,e.ERROR_INVALID_JSON]}},{key:"FAIL_ERROR",get:function(){return"FAIL_ERROR"}},{key:"FAIL_PROMPT",get:function(){return"FAIL_PROMPT"}},{key:"PROMPT",get:function(){return"PROMPT"}},{key:"SUCCESS",get:function(){return"SUCCESS"}}]),e}()},function(e,t,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){var e=XMLHttpRequest;if(!e)throw new Error("missing XMLHttpRequest");function t(o,s){if("function"!==typeof s)throw new Error("Bad callback given: "+s);if(!o)throw new Error("No options given");var a=o.onResponse;if((o="string"===typeof o?{uri:o}:JSON.parse(JSON.stringify(o))).onResponse=a,o.verbose&&(t.log=function(){var e,t,n={},o=["trace","debug","info","warn","error"];for(t=0;t<o.length;t++)n[e=o[t]]=r,"undefined"!==typeof console&&console&&console[e]&&(n[e]=i(console,e));return n}()),o.url&&(o.uri=o.url,delete o.url),!o.uri&&""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(o[u[c]])throw new Error("options."+u[c]+" is not supported");if(o.callback=s,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||t.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&&(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&&(o.headers["content-type"]="application/json"),"boolean"!==typeof o.json?o.body=JSON.stringify(o.json):"string"!==typeof o.body&&(o.body=JSON.stringify(o.body)));var l=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};if(o.qs){var d="string"==typeof o.qs?o.qs:l(o.qs);-1!==o.uri.indexOf("?")?o.uri=o.uri+"&"+d:o.uri=o.uri+"?"+d}if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var f=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=f,f){case"application/x-www-form-urlencoded":o.body=l(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var p=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+e[r]+"\n");return n.push("--"+t.boundry+"--"),t.body=n.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t}(o.form);o.body=p.body,o.headers["content-type"]=p.type;break;default:throw new Error("unsupported encoding:"+f)}}}return o.onResponse=o.onResponse||r,!0===o.onResponse&&(o.onResponse=s,o.callback=r),!o.headers.authorization&&o.auth&&(o.headers.authorization="Basic "+function(e){var t,n,r,i,o,s,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,f="",p=[];if(!e)return e;do{t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=(u=t<<16|n<<8|r)>>18&63,o=u>>12&63,s=u>>6&63,a=63&u,p[d++]=c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a)}while(l<e.length);switch(f=p.join(""),e.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}(o.auth.username+":"+o.auth.password)),function(r){var i=new e,o=!1,s=function(e){var t,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(o){(t=document.createElement("a")).href="",t=t.href}var r=n.exec(t.toLowerCase())||[],i=n.exec(e.toLowerCase());return!(!i||i[1]==r[1]&&i[2]==r[2]&&(i[3]||("http:"===i[1]?80:443))==(r[3]||("http:"===r[1]?80:443)))}(r.uri),a="withCredentials"in i;if(n+=1,i.seq_id=n,i.id=n+": "+r.method+" "+r.uri,i._id=i.id,s&&!a){var u=new Error("Browser does not support cross-origin request: "+r.uri);return u.cors="unsupported",r.callback(u,i)}i.timeoutTimer=setTimeout((function(){o=!0;var e=new Error("ETIMEDOUT");return e.code="ETIMEDOUT",e.duration=r.timeout,t.log.error("Timeout",{id:i._id,milliseconds:r.timeout}),r.callback(e,i)}),r.timeout);var c={response:!1,loading:!1,end:!1};return i.onreadystatechange=function(n){if(o)return t.log.debug("Ignoring timed out state change",{state:i.readyState,id:i.id});if(t.log.debug("State change",{state:i.readyState,id:i.id,timed_out:o}),i.readyState===e.OPENED)for(var s in t.log.debug("Request started",{id:i.id}),r.headers)i.setRequestHeader(s,r.headers[s]);else i.readyState===e.HEADERS_RECEIVED?l():i.readyState===e.LOADING?(l(),d()):i.readyState===e.DONE&&(l(),d(),function(){if(c.end)return;if(c.end=!0,t.log.debug("Request done",{id:i.id}),i.body=i.responseText,r.json)try{i.body=JSON.parse(i.responseText)}catch(e){return r.callback(e,i)}r.callback(null,i,i.body)}())},i.open(r.method,r.uri,!0),s&&(i.withCredentials=!!r.withCredentials),i.send(r.body),i;function l(){if(!c.response){if(c.response=!0,t.log.debug("Got response",{id:i.id,status:i.status}),clearTimeout(i.timeoutTimer),i.statusCode=i.status,s&&0==i.statusCode){var e=new Error("CORS request rejected: "+r.uri);return e.cors="rejected",c.loading=!0,c.end=!0,r.callback(e,i)}r.onResponse(null,i)}}function d(){c.loading||(c.loading=!0,t.log.debug("Response body loading",{id:i.id}))}}(o)}t.log={trace:r,debug:r,info:r,warn:r,error:r};var n=0;function r(){}function i(e,t){return function(n,r){return"object"===typeof r&&(n+=" "+JSON.stringify(r)),e[t].call(e,n)}}return t.withCredentials=!1,t.DEFAULT_TIMEOUT=18e4,t.defaults=function(e,n){var r=function(t){return function(n,r){for(var i in n="string"===typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),e)void 0===n[i]&&(n[i]=e[i]);return t(n,r)}},i=r(t);return i.get=r(t.get),i.post=r(t.post),i.put=r(t.put),i.head=r(t.head),i},["get","put","post","head"].forEach((function(e){var n=e.toUpperCase();t[e.toLowerCase()]=function(e){"string"===typeof e?e={method:n,uri:e}:(e=JSON.parse(JSON.stringify(e))).method=n;var r=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,r)}})),t.couch=function(e,n){return"string"===typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,n=n||r,t(e,(function(e,t,r){if(e)return n(e,t,r);if((t.statusCode<200||t.statusCode>299)&&r.error){for(var i in e=new Error("CouchDB error: "+(r.error.reason||r.error.error)),r)e[i]=r[i];return n(e,t,r)}return n(e,t,r)}))},t})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";var r=n(295),i=n(296),o=n(149);e.exports={formats:o,parse:i,stringify:r}},function(e,t,n){"use strict";var r=n(101),i=n(149),o=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,a(t)?t:[t])},l=Date.prototype.toISOString,d=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:d,formatter:i.formatters[d],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,n,i,o,s,u,l,d,p,h,v,m,y){var g,_=t;if("function"===typeof l?_=l(n,_):_ instanceof Date?_=h(_):"comma"===i&&a(_)&&(_=r.maybeMap(_,(function(e){return e instanceof Date?h(e):e})).join(",")),null===_){if(o)return u&&!m?u(n,f.encoder,y,"key"):n;_=""}if("string"===typeof(g=_)||"number"===typeof g||"boolean"===typeof g||"symbol"===typeof g||"bigint"===typeof g||r.isBuffer(_))return u?[v(m?n:u(n,f.encoder,y,"key"))+"="+v(u(_,f.encoder,y,"value"))]:[v(n)+"="+v(String(_))];var b,k=[];if("undefined"===typeof _)return k;if(a(l))b=l;else{var w=Object.keys(_);b=d?w.sort(d):w}for(var E=0;E<b.length;++E){var S=b[E],x=_[S];if(!s||null!==x){var T=a(_)?"function"===typeof i?i(n,S):n:n+(p?"."+S:"["+S+"]");c(k,e(x,T,i,o,s,u,l,d,p,h,v,m,y))}}return k};e.exports=function(e,t){var n,r=e,u=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if("undefined"!==typeof e.format){if(!o.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=i.formatters[n],s=f.filter;return("function"===typeof e.filter||a(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?f.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:f.encode,encoder:"function"===typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:s,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"===typeof u.filter?r=(0,u.filter)("",r):a(u.filter)&&(n=u.filter);var l,d=[];if("object"!==typeof r||null===r)return"";l=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=s[l];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var v=0;v<n.length;++v){var m=n[v];u.skipNulls&&null===r[m]||c(d,p(r[m],m,h,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var y=d.join(u.delimiter),g=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}},function(e,t,n){"use strict";var r=n(101),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(o),c=a?o.slice(0,a.index):o,l=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var d=0;n.depth>0&&null!==(a=s.exec(o))&&d<n.depth;){if(d+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+o.slice(a.index)+"]"),function(e,t,n,r){for(var i=r?t:u(t,n),o=e.length-1;o>=0;--o){var s,a=e[o];if("[]"===a&&n.parseArrays)s=[].concat(i);else{s=n.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(c,10);n.parseArrays||""!==c?!isNaN(l)&&a!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(s=[])[l]=i:s[c]=i:s={0:i}}i=s}return i}(l,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?s.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:s.comma,decoder:"function"===typeof e.decoder?e.decoder:s.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var l="string"===typeof e?function(e,t){var n,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,f=l.split(t.delimiter,d),p=-1,h=t.charset;if(t.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?h="utf-8":"utf8=%26%2310003%3B"===f[n]&&(h="iso-8859-1"),p=n,n=f.length);for(n=0;n<f.length;++n)if(n!==p){var v,m,y=f[n],g=y.indexOf("]="),_=-1===g?y.indexOf("="):g+1;-1===_?(v=t.decoder(y,s.decoder,h,"key"),m=t.strictNullHandling?null:""):(v=t.decoder(y.slice(0,_),s.decoder,h,"key"),m=r.maybeMap(u(y.slice(_+1),t),(function(e){return t.decoder(e,s.decoder,h,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===h&&(m=a(m)),y.indexOf("[]=")>-1&&(m=o(m)?[m]:m),i.call(c,v)?c[v]=r.combine(c[v],m):c[v]=m}return c}(e,n):e,d=n.plainObjects?Object.create(null):{},f=Object.keys(l),p=0;p<f.length;++p){var h=f[p],v=c(h,l[h],n,"string"===typeof e);d=r.merge(d,v,n)}return r.compact(d)}}]]);
//# sourceMappingURL=2.f3d52500.chunk.js.map